"use strict";(self.webpackChunknews=self.webpackChunknews||[]).push([[179],{2011:(lt,De,L)=>{L.d(De,{Dh:()=>fe,GT:()=>_e,cc:()=>xe,hO:()=>We,on:()=>q,pX:()=>te,xv:()=>ce});var h=L(5e3),J=L(127),F=L(5813);lt=L.hmd(lt);const le=["ngOnDestroy"],te=(Ce,tt,Ze,Se={})=>new Proxy(Ce,{get:(Ee,be)=>Ze.runOutsideAngular(()=>{var qe;if(Ce[be])return(null===(qe=null==Se?void 0:Se.spy)||void 0===qe?void 0:qe.get)&&Se.spy.get(be,Ce[be]),Ce[be];if(le.indexOf(be)>-1)return()=>{};const $e=tt.toPromise().then(re=>{const Z=re&&re[be];return"function"==typeof Z?Z.bind(re):Z&&Z.then?Z.then(se=>Ze.run(()=>se)):Ze.run(()=>Z)});return new Proxy(()=>{},{get:(re,Z)=>$e[Z],apply:(re,Z,se)=>$e.then(ye=>{var oe;const Pe=ye&&ye(...se);return(null===(oe=null==Se?void 0:Se.spy)||void 0===oe?void 0:oe.apply)&&Se.spy.apply(be,se,Pe),Pe})})})}),_e=(Ce,tt)=>{tt.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Se=>{Object.defineProperty(Ce.prototype,Se,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Se))})})};class ie{constructor(tt){return tt}}const fe=new h.OlP("angularfire2.app.options"),ce=new h.OlP("angularfire2.app.name");function q(Ce,tt,Ze){const Ee="object"==typeof Ze&&Ze||{};Ee.name=Ee.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const qe=J.Z.apps.filter($e=>$e&&$e.name===Ee.name)[0]||tt.runOutsideAngular(()=>J.Z.initializeApp(Ce,Ee));try{JSON.stringify(Ce)!==JSON.stringify(qe.options)&&G("error",`${qe.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch($e){}return new ie(qe)}const G=(Ce,...tt)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[Ce](...tt)},ee={provide:ie,useFactory:q,deps:[fe,h.R0b,[new h.FiY,ce]]};let We=(()=>{class Ce{constructor(Ze){J.Z.registerVersion("angularfire",F.q4.full,"core"),J.Z.registerVersion("angularfire",F.q4.full,"app-compat"),J.Z.registerVersion("angular",h.q4F.full,Ze.toString())}static initializeApp(Ze,Se){return{ngModule:Ce,providers:[{provide:fe,useValue:Ze},{provide:ce,useValue:Se}]}}}return Ce.\u0275fac=function(Ze){return new(Ze||Ce)(h.LFG(h.Lbi))},Ce.\u0275mod=h.oAB({type:Ce}),Ce.\u0275inj=h.cJS({providers:[ee]}),Ce})();function xe(Ce,tt,Ze,Se,Ee){const[,be,qe]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===Ce)||[];if(be)return function Oe(Ce,tt){try{return Ce.toString()===tt.toString()}catch(Ze){return Ce===tt}}(Ee,qe)||(ge("error",`${tt} was already initialized on the ${Ze} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Ee,was:qe})),be;{const $e=Se();return globalThis.\u0275AngularfireInstanceCache.push([Ce,$e,Ee]),$e}}const Ue=!!lt.hot,ge=(Ce,...tt)=>{(0,h.X6Q)()&&"undefined"!=typeof console&&console[Ce](...tt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(lt,De,L)=>{L.d(De,{q4:()=>pu,iC:()=>Sc,fc:()=>Pa,HU:()=>Dc,vb:()=>Ff,JM:()=>ml});var h=L(5e3),J=L(5867),F=L(5861),le=L(9681),te=L(2090),_e=L(4859),ie=L(1877);const fe="@firebase/installations",G="w:0.5.7",ee="FIS_v2",Ce=new te.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function tt(T){return T instanceof te.ZR&&T.code.includes("request-failed")}function Ze({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Se(T){return{token:T.token,requestStatus:2,expiresIn:se(T.expiresIn),creationTime:Date.now()}}function Ee(T,S){return be.apply(this,arguments)}function be(){return(be=(0,F.Z)(function*(T,S){const B=(yield S.json()).error;return Ce.create("request-failed",{requestName:T,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function qe({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function $e(T,{refreshToken:S}){const N=qe(T);return N.append("Authorization",function ye(T){return`${ee} ${T}`}(S)),N}function re(T){return Z.apply(this,arguments)}function Z(){return(Z=(0,F.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function se(T){return Number(T.replace("s","000"))}function oe(T,S){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,F.Z)(function*({appConfig:T,heartbeatServiceProvider:S},{fid:N}){const B=Ze(T),Y=qe(T),ne=S.getImmediate({optional:!0});if(ne){const Ct=yield ne.getHeartbeatsHeader();Ct&&Y.append("x-firebase-client",Ct)}const Qe={method:"POST",headers:Y,body:JSON.stringify({fid:N,authVersion:ee,appId:T.appId,sdkVersion:G})},it=yield re(()=>fetch(B,Qe));if(it.ok){const Ct=yield it.json();return{fid:Ct.fid||N,registrationStatus:2,refreshToken:Ct.refreshToken,authToken:Se(Ct.authToken)}}throw yield Ee("Create Installation",it)})).apply(this,arguments)}function ue(T){return new Promise(S=>{setTimeout(S,T)})}const sn=/^[cdef][\w-]{21}$/;function ut(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const N=function vt(T){return function St(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return sn.test(N)?N:""}catch(T){return""}}function mn(T){return`${T.appName}!${T.appId}`}const _n=new Map;function ji(T,S){const N=mn(T);on(N,S),function qt(T,S){const N=function ri(){return!wr&&"BroadcastChannel"in self&&(wr=new BroadcastChannel("[Firebase] FID Change"),wr.onmessage=T=>{on(T.data.key,T.data.fid)}),wr}();N&&N.postMessage({key:T,fid:S}),function to(){0===_n.size&&wr&&(wr.close(),wr=null)}()}(N,S)}function on(T,S){const N=_n.get(T);if(N)for(const B of N)B(S)}let wr=null;const Wr="firebase-installations-store";let ws=null;function is(){return ws||(ws=(0,te.X3)("firebase-installations-database",1,(T,S)=>{0===S&&T.createObjectStore(Wr)})),ws}function ht(T,S){return ii.apply(this,arguments)}function ii(){return(ii=(0,F.Z)(function*(T,S){const N=mn(T),Y=(yield is()).transaction(Wr,"readwrite"),ne=Y.objectStore(Wr),Me=yield ne.get(N);return yield ne.put(S,N),yield Y.complete,(!Me||Me.fid!==S.fid)&&ji(T,S.fid),S})).apply(this,arguments)}function gr(T){return or.apply(this,arguments)}function or(){return(or=(0,F.Z)(function*(T){const S=mn(T),B=(yield is()).transaction(Wr,"readwrite");yield B.objectStore(Wr).delete(S),yield B.complete})).apply(this,arguments)}function wi(T,S){return no.apply(this,arguments)}function no(){return(no=(0,F.Z)(function*(T,S){const N=mn(T),Y=(yield is()).transaction(Wr,"readwrite"),ne=Y.objectStore(Wr),Me=yield ne.get(N),Qe=S(Me);return void 0===Qe?yield ne.delete(N):yield ne.put(Qe,N),yield Y.complete,Qe&&(!Me||Me.fid!==Qe.fid)&&ji(T,Qe.fid),Qe})).apply(this,arguments)}function Tn(T){return mr.apply(this,arguments)}function mr(){return(mr=(0,F.Z)(function*(T){let S;const N=yield wi(T.appConfig,B=>{const Y=Es(B),ne=Ca(T,Y);return S=ne.registrationPromise,ne.installationEntry});return""===N.fid?{installationEntry:yield S}:{installationEntry:N,registrationPromise:S}})).apply(this,arguments)}function Es(T){return Wt(T||{fid:ut(),registrationStatus:0})}function Ca(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Ce.create("app-offline"))};const N={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},B=function zt(T,S){return ot.apply(this,arguments)}(T,N);return{installationEntry:N,registrationPromise:B}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:It(T)}:{installationEntry:S}}function ot(){return(ot=(0,F.Z)(function*(T,S){try{const N=yield oe(T,S);return ht(T.appConfig,N)}catch(N){throw tt(N)&&409===N.customData.serverCode?yield gr(T.appConfig):yield ht(T.appConfig,{fid:S.fid,registrationStatus:0}),N}})).apply(this,arguments)}function It(T){return Er.apply(this,arguments)}function Er(){return(Er=(0,F.Z)(function*(T){let S=yield ss(T.appConfig);for(;1===S.registrationStatus;)yield ue(100),S=yield ss(T.appConfig);if(0===S.registrationStatus){const{installationEntry:N,registrationPromise:B}=yield Tn(T);return B||N}return S})).apply(this,arguments)}function ss(T){return wi(T,S=>{if(!S)throw Ce.create("installation-not-found");return Wt(S)})}function Wt(T){return function Oo(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function Mr(T,S){return br.apply(this,arguments)}function br(){return(br=(0,F.Z)(function*({appConfig:T,heartbeatServiceProvider:S},N){const B=ft(T,N),Y=$e(T,N),ne=S.getImmediate({optional:!0});if(ne){const Ct=yield ne.getHeartbeatsHeader();Ct&&Y.append("x-firebase-client",Ct)}const Qe={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:G,appId:T.appId}})},it=yield re(()=>fetch(B,Qe));if(it.ok)return Se(yield it.json());throw yield Ee("Generate Auth Token",it)})).apply(this,arguments)}function ft(T,{fid:S}){return`${Ze(T)}/${S}/authTokens:generate`}function Nr(T){return $t.apply(this,arguments)}function $t(){return($t=(0,F.Z)(function*(T,S=!1){let N;const B=yield wi(T.appConfig,ne=>{if(!Bt(ne))throw Ce.create("not-registered");const Me=ne.authToken;if(!S&&$(Me))return ne;if(1===Me.requestStatus)return N=Ye(T,S),ne;{if(!navigator.onLine)throw Ce.create("app-offline");const Qe=z(ne);return N=pt(T,Qe),Qe}});return N?yield N:B.authToken})).apply(this,arguments)}function Ye(T,S){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,F.Z)(function*(T,S){let N=yield Je(T.appConfig);for(;1===N.authToken.requestStatus;)yield ue(100),N=yield Je(T.appConfig);const B=N.authToken;return 0===B.requestStatus?Nr(T,S):B})).apply(this,arguments)}function Je(T){return wi(T,S=>{if(!Bt(S))throw Ce.create("not-registered");return function de(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function pt(T,S){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,F.Z)(function*(T,S){try{const N=yield Mr(T,S),B=Object.assign(Object.assign({},S),{authToken:N});return yield ht(T.appConfig,B),N}catch(N){if(!tt(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const B=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield ht(T.appConfig,B)}else yield gr(T.appConfig);throw N}})).apply(this,arguments)}function Bt(T){return void 0!==T&&2===T.registrationStatus}function $(T){return 2===T.requestStatus&&!function j(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+36e5}(T)}function z(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}function je(){return(je=(0,F.Z)(function*(T){const S=T,{installationEntry:N,registrationPromise:B}=yield Tn(S);return B?B.catch(console.error):Nr(S).catch(console.error),N.fid})).apply(this,arguments)}function nn(){return(nn=(0,F.Z)(function*(T,S=!1){const N=T;return yield Pr(N),(yield Nr(N,S)).token})).apply(this,arguments)}function Pr(T){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,F.Z)(function*(T){const{registrationPromise:S}=yield Tn(T);S&&(yield S)})).apply(this,arguments)}function ar(T){return Ce.create("missing-app-config-values",{valueName:T})}const rl="installations",ke=T=>{const S=T.getProvider("app").getImmediate(),N=function bs(T){if(!T||!T.options)throw ar("App Configuration");if(!T.name)throw ar("App Name");const S=["projectId","apiKey","appId"];for(const N of S)if(!T.options[N])throw ar(N);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:N,heartbeatServiceProvider:(0,le._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},Ft=T=>{const S=T.getProvider("app").getImmediate(),N=(0,le._getProvider)(S,rl).getImmediate();return{getId:()=>function X(T){return je.apply(this,arguments)}(N),getToken:Y=>function Et(T){return nn.apply(this,arguments)}(N,Y)}};(function bn(){(0,le._registerComponent)(new _e.wA(rl,ke,"PUBLIC")),(0,le._registerComponent)(new _e.wA("installations-internal",Ft,"PRIVATE"))})(),(0,le.registerVersion)(fe,"0.5.7"),(0,le.registerVersion)(fe,"0.5.7","esm2017");const Cr="@firebase/remote-config",zn=new te.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Df{constructor(S,N,B,Y){this.client=S,this.storage=N,this.storageCache=B,this.logger=Y}isCachedDataFresh(S,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-N,Y=B<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${Y}.`),Y}fetch(S){var N=this;return(0,F.Z)(function*(){const[B,Y]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(Y&&N.isCachedDataFresh(S.cacheMaxAgeMillis,B))return Y;S.eTag=Y&&Y.eTag;const ne=yield N.client.fetch(S),Me=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&Me.push(N.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(Me),ne})()}}function Nd(T=navigator){return T.languages&&T.languages[0]||T.language}class Wl{constructor(S,N,B,Y,ne,Me){this.firebaseInstallations=S,this.sdkVersion=N,this.namespace=B,this.projectId=Y,this.apiKey=ne,this.appId=Me}fetch(S){var N=this;return(0,F.Z)(function*(){const[B,Y]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Me=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},it={sdk_version:N.sdkVersion,app_instance_id:B,app_instance_id_token:Y,app_id:N.appId,language_code:Nd()},Ct={method:"POST",headers:Qe,body:JSON.stringify(it)},Qt=fetch(Me,Ct),At=new Promise((Yr,gi)=>{S.signal.addEventListener(()=>{const Wi=new Error("The operation was aborted.");Wi.name="AbortError",gi(Wi)})});let Kn;try{yield Promise.race([Qt,At]),Kn=yield Qt}catch(Yr){let gi="fetch-client-network";throw"AbortError"===Yr.name&&(gi="fetch-timeout"),zn.create(gi,{originalErrorMessage:Yr.message})}let kn=Kn.status;const yl=Kn.headers.get("ETag")||void 0;let ka,Zr;if(200===Kn.status){let Yr;try{Yr=yield Kn.json()}catch(gi){throw zn.create("fetch-client-parse",{originalErrorMessage:gi.message})}ka=Yr.entries,Zr=Yr.state}if("INSTANCE_STATE_UNSPECIFIED"===Zr?kn=500:"NO_CHANGE"===Zr?kn=304:("NO_TEMPLATE"===Zr||"EMPTY_CONFIG"===Zr)&&(ka={}),304!==kn&&200!==kn)throw zn.create("fetch-status",{httpStatus:kn});return{status:kn,eTag:yl,config:ka}})()}}class lm{constructor(S,N){this.client=S,this.storage=N}fetch(S){var N=this;return(0,F.Z)(function*(){const B=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(S,B)})()}attemptFetch(S,{throttleEndTimeMillis:N,backoffCount:B}){var Y=this;return(0,F.Z)(function*(){yield function er(T,S){return new Promise((N,B)=>{const Y=Math.max(S-Date.now(),0),ne=setTimeout(N,Y);T.addEventListener(()=>{clearTimeout(ne),B(zn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,N);try{const ne=yield Y.client.fetch(S);return yield Y.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function Pd(T){if(!(T instanceof te.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(ne))throw ne;const Me={throttleEndTimeMillis:Date.now()+(0,te.$s)(B),backoffCount:B+1};return yield Y.storage.setThrottleMetadata(Me),Y.attemptFetch(S,Me)}})()}}class Od{constructor(S,N,B,Y,ne){this.app=S,this._client=N,this._storageCache=B,this._storage=Y,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ju(T,S){const N=T.target.error||void 0;return zn.create(S,{originalErrorMessage:N&&N.message})}const ao="app_namespace_store";class hm{constructor(S,N,B,Y=function dm(){return new Promise((T,S)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=B=>{S(Ju(B,"storage-open"))},N.onsuccess=B=>{T(B.target.result)},N.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(ao,{keyPath:"compositeKey"})}}catch(N){S(zn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=S,this.appName=N,this.namespace=B,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var N=this;return(0,F.Z)(function*(){const B=yield N.openDbPromise;return new Promise((Y,ne)=>{const Qe=B.transaction([ao],"readonly").objectStore(ao),it=N.createCompositeKey(S);try{const Ct=Qe.get(it);Ct.onerror=Qt=>{ne(Ju(Qt,"storage-get"))},Ct.onsuccess=Qt=>{const At=Qt.target.result;Y(At?At.value:void 0)}}catch(Ct){ne(zn.create("storage-get",{originalErrorMessage:Ct&&Ct.message}))}})})()}set(S,N){var B=this;return(0,F.Z)(function*(){const Y=yield B.openDbPromise;return new Promise((ne,Me)=>{const it=Y.transaction([ao],"readwrite").objectStore(ao),Ct=B.createCompositeKey(S);try{const Qt=it.put({compositeKey:Ct,value:N});Qt.onerror=At=>{Me(Ju(At,"storage-set"))},Qt.onsuccess=()=>{ne()}}catch(Qt){Me(zn.create("storage-set",{originalErrorMessage:Qt&&Qt.message}))}})})()}delete(S){var N=this;return(0,F.Z)(function*(){const B=yield N.openDbPromise;return new Promise((Y,ne)=>{const Qe=B.transaction([ao],"readwrite").objectStore(ao),it=N.createCompositeKey(S);try{const Ct=Qe.delete(it);Ct.onerror=Qt=>{ne(Ju(Qt,"storage-delete"))},Ct.onsuccess=()=>{Y()}}catch(Ct){ne(zn.create("storage-delete",{originalErrorMessage:Ct&&Ct.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Fd{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,F.Z)(function*(){const N=S.storage.getLastFetchStatus(),B=S.storage.getLastSuccessfulFetchTimestampMillis(),Y=S.storage.getActiveConfig(),ne=yield N;ne&&(S.lastFetchStatus=ne);const Me=yield B;Me&&(S.lastSuccessfulFetchTimestampMillis=Me);const Qe=yield Y;Qe&&(S.activeConfig=Qe)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Vo(){return Sf.apply(this,arguments)}function Sf(){return(Sf=(0,F.Z)(function*(){if(!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(T){return!1}})).apply(this,arguments)}!function Ia(){(0,le._registerComponent)(new _e.wA("remote-config",function T(S,{instanceIdentifier:N}){const B=S.getProvider("app").getImmediate(),Y=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw zn.create("registration-window");if(!(0,te.hl)())throw zn.create("indexed-db-unavailable");const{projectId:ne,apiKey:Me,appId:Qe}=B.options;if(!ne)throw zn.create("registration-project-id");if(!Me)throw zn.create("registration-api-key");if(!Qe)throw zn.create("registration-app-id");const it=new hm(Qe,B.name,N=N||"firebase"),Ct=new Fd(it),Qt=new ie.Yd(Cr);Qt.logLevel=ie.in.ERROR;const At=new Wl(Y,le.SDK_VERSION,N,ne,Me,Qe),Kn=new lm(At,it),kn=new Df(Kn,it,Ct,Qt),yl=new Od(B,kn,Ct,it,Qt);return function ur(T){const S=(0,te.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(yl),yl},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(Cr,"0.3.6"),(0,le.registerVersion)(Cr,"0.3.6","esm2017")}();const Xu="/firebase-messaging-sw.js",Ds="/firebase-cloud-messaging-push-scope",oi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Uo="google.c.a.c_id",sl="google.c.a.c_l",ec="google.c.a.ts",fm="google.c.a.e";var uo=(()=>{return(T=uo||(uo={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",uo;var T})();function Ci(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zl(T){const N=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(N),Y=new Uint8Array(B.length);for(let ne=0;ne<B.length;++ne)Y[ne]=B.charCodeAt(ne);return Y}const Yl="fcm_token_details_db",Ir="fcm_token_object_Store";function Af(T){return Ql.apply(this,arguments)}function Ql(){return Ql=(0,F.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(Yl))return null;let S=null;return(yield(0,te.X3)(Yl,5,function(){var B=(0,F.Z)(function*(Y,ne,Me,Qe){var it;if(ne<2||!Y.objectStoreNames.contains(Ir))return;const Ct=Qe.objectStore(Ir),Qt=yield Ct.index("fcmSenderId").get(T);if(yield Ct.clear(),Qt)if(2===ne){const At=Qt;if(!At.auth||!At.p256dh||!At.endpoint)return;S={token:At.fcmToken,createTime:null!==(it=At.createTime)&&void 0!==it?it:Date.now(),subscriptionOptions:{auth:At.auth,p256dh:At.p256dh,endpoint:At.endpoint,swScope:At.swScope,vapidKey:"string"==typeof At.vapidKey?At.vapidKey:Ci(At.vapidKey)}}}else if(3===ne){const At=Qt;S={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Ci(At.auth),p256dh:Ci(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Ci(At.vapidKey)}}}else if(4===ne){const At=Qt;S={token:At.fcmToken,createTime:At.createTime,subscriptionOptions:{auth:Ci(At.auth),p256dh:Ci(At.p256dh),endpoint:At.endpoint,swScope:At.swScope,vapidKey:Ci(At.vapidKey)}}}});return function(Y,ne,Me,Qe){return B.apply(this,arguments)}}())).close(),yield(0,te.Lj)(Yl),yield(0,te.Lj)("fcm_vapid_details_db"),yield(0,te.Lj)("undefined"),Ld(S)?S:null}),Ql.apply(this,arguments)}function Ld(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Ss="firebase-messaging-store";let ol=null;function tc(){return ol||(ol=(0,te.X3)("firebase-messaging-database",1,(T,S)=>{0===S&&T.createObjectStore(Ss)})),ol}function Cn(T){return Da.apply(this,arguments)}function Da(){return(Da=(0,F.Z)(function*(T){const S=jo(T),B=yield(yield tc()).transaction(Ss).objectStore(Ss).get(S);if(B)return B;{const Y=yield Af(T.appConfig.senderId);if(Y)return yield co(T,Y),Y}})).apply(this,arguments)}function co(T,S){return fn.apply(this,arguments)}function fn(){return(fn=(0,F.Z)(function*(T,S){const N=jo(T),Y=(yield tc()).transaction(Ss,"readwrite");return yield Y.objectStore(Ss).put(S,N),yield Y.complete,S})).apply(this,arguments)}function Vd(T){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,F.Z)(function*(T){const S=jo(T),B=(yield tc()).transaction(Ss,"readwrite");yield B.objectStore(Ss).delete(S),yield B.complete})).apply(this,arguments)}function jo({appConfig:T}){return T.appId}const Wn=new te.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function al(T,S){return $i.apply(this,arguments)}function $i(){return($i=(0,F.Z)(function*(T,S){const N=yield fo(T),B=gt(S),Y={method:"POST",headers:N,body:JSON.stringify(B)};let ne;try{ne=yield(yield fetch(li(T.appConfig),Y)).json()}catch(Me){throw Wn.create("token-subscribe-failed",{errorInfo:Me})}if(ne.error)throw Wn.create("token-subscribe-failed",{errorInfo:ne.error.message});if(!ne.token)throw Wn.create("token-subscribe-no-token");return ne.token})).apply(this,arguments)}function kr(T,S){return ho.apply(this,arguments)}function ho(){return(ho=(0,F.Z)(function*(T,S){const N=yield fo(T),B=gt(S.subscriptionOptions),Y={method:"PATCH",headers:N,body:JSON.stringify(B)};let ne;try{ne=yield(yield fetch(`${li(T.appConfig)}/${S.token}`,Y)).json()}catch(Me){throw Wn.create("token-update-failed",{errorInfo:Me})}if(ne.error)throw Wn.create("token-update-failed",{errorInfo:ne.error.message});if(!ne.token)throw Wn.create("token-update-no-token");return ne.token})).apply(this,arguments)}function As(T,S){return eu.apply(this,arguments)}function eu(){return(eu=(0,F.Z)(function*(T,S){const B={method:"DELETE",headers:yield fo(T)};try{const ne=yield(yield fetch(`${li(T.appConfig)}/${S}`,B)).json();if(ne.error)throw Wn.create("token-unsubscribe-failed",{errorInfo:ne.error.message})}catch(Y){throw Wn.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function li({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function fo(T){return po.apply(this,arguments)}function po(){return(po=(0,F.Z)(function*({appConfig:T,installations:S}){const N=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function gt({p256dh:T,auth:S,endpoint:N,vapidKey:B}){const Y={web:{endpoint:N,auth:S,p256dh:T}};return B!==oi&&(Y.web.applicationPubKey=B),Y}const tu=6048e5;function ll(T){return nu.apply(this,arguments)}function nu(){return(nu=(0,F.Z)(function*(T){const S=yield ic(T.swRegistration,T.vapidKey),N={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:Ci(S.getKey("auth")),p256dh:Ci(S.getKey("p256dh"))},B=yield Cn(T.firebaseDependencies);if(B){if(Sa(B.subscriptionOptions,N))return Date.now()>=B.createTime+tu?nc(T,{token:B.token,createTime:Date.now(),subscriptionOptions:N}):B.token;try{yield As(T.firebaseDependencies,B.token)}catch(Y){console.warn(Y)}return Ie(T.firebaseDependencies,N)}return Ie(T.firebaseDependencies,N)})).apply(this,arguments)}function ru(T){return iu.apply(this,arguments)}function iu(){return(iu=(0,F.Z)(function*(T){const S=yield Cn(T.firebaseDependencies);S&&(yield As(T.firebaseDependencies,S.token),yield Vd(T.firebaseDependencies));const N=yield T.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function nc(T,S){return rc.apply(this,arguments)}function rc(){return(rc=(0,F.Z)(function*(T,S){try{const N=yield kr(T.firebaseDependencies,S),B=Object.assign(Object.assign({},S),{token:N,createTime:Date.now()});return yield co(T.firebaseDependencies,B),N}catch(N){throw yield ru(T),N}})).apply(this,arguments)}function Ie(T,S){return jt.apply(this,arguments)}function jt(){return(jt=(0,F.Z)(function*(T,S){const B={token:yield al(T,S),createTime:Date.now(),subscriptionOptions:S};return yield co(T,B),B.token})).apply(this,arguments)}function ic(T,S){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,F.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zl(S)})})).apply(this,arguments)}function Sa(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}function Aa(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function ui(T,S){if(!S.notification)return;T.notification={};const N=S.notification.title;N&&(T.notification.title=N);const B=S.notification.body;B&&(T.notification.body=B);const Y=S.notification.image;Y&&(T.notification.image=Y)}(S,T),function sc(T,S){!S.data||(T.data=S.data)}(S,T),function oc(T,S){if(!S.fcmOptions)return;T.fcmOptions={};const N=S.fcmOptions.link;N&&(T.fcmOptions.link=N);const B=S.fcmOptions.analytics_label;B&&(T.fcmOptions.analyticsLabel=B)}(S,T),S}function Ud(T){return"object"==typeof T&&!!T&&Uo in T}function ac(T,S){const N=[];for(let B=0;B<T.length;B++)N.push(T.charAt(B)),B<S.length&&N.push(S.charAt(B));return N.join("")}function go(T){return Wn.create("missing-app-config-values",{valueName:T})}ac("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ac("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Tr{constructor(S,N,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function su(T){if(!T||!T.options)throw go("App Configuration Object");if(!T.name)throw go("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:N}=T;for(const B of S)if(!N[B])throw go(B);return{appName:T.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:Y,installations:N,analyticsProvider:B}}_delete(){return Promise.resolve()}}function Ii(T){return ou.apply(this,arguments)}function ou(){return(ou=(0,F.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(Xu,{scope:Ds}),T.swRegistration.update().catch(()=>{})}catch(S){throw Wn.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function mo(T,S){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,F.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield Ii(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Wn.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function lc(T,S){return au.apply(this,arguments)}function au(){return(au=(0,F.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=oi)})).apply(this,arguments)}function uc(){return(uc=(0,F.Z)(function*(T,S){if(!navigator)throw Wn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Wn.create("permission-blocked");return yield lc(T,null==S?void 0:S.vapidKey),yield mo(T,null==S?void 0:S.serviceWorkerRegistration),ll(T)})).apply(this,arguments)}function ul(T,S,N){return xa.apply(this,arguments)}function xa(){return(xa=(0,F.Z)(function*(T,S,N){const B=cc(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:N[Uo],message_name:N[sl],message_time:N[ec],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function cc(T){switch(T){case uo.NOTIFICATION_CLICKED:return"notification_open";case uo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Bd(){return(Bd=(0,F.Z)(function*(T,S){const N=S.data;if(!N.isFirebaseMessaging)return;T.onMessageHandler&&N.messageType===uo.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Aa(N)):T.onMessageHandler.next(Aa(N)));const B=N.data;Ud(B)&&"1"===B[fm]&&(yield ul(T,N.messageType,B))})).apply(this,arguments)}const hc="@firebase/messaging",jd=T=>{const S=new Tr(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function dc(T,S){return Bd.apply(this,arguments)}(S,N)),S},$o=T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:B=>function lu(T,S){return uc.apply(this,arguments)}(S,B)}};function $d(){return Go.apply(this,arguments)}function Go(){return(Go=(0,F.Z)(function*(){try{yield(0,te.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,te.hl)()&&(0,te.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Hd(){(0,le._registerComponent)(new _e.wA("messaging",jd,"PUBLIC")),(0,le._registerComponent)(new _e.wA("messaging-internal",$o,"PRIVATE")),(0,le.registerVersion)(hc,"0.9.11"),(0,le.registerVersion)(hc,"0.9.11","esm2017")}();const pc="analytics",rv="firebase_id",cl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",uu="https://www.googletagmanager.com/gtag/js",tr=new ie.Yd("@firebase/analytics");function Gd(T){return Promise.all(T.map(S=>S.catch(N=>N)))}function pm(T,S){const N=document.createElement("script");N.src=`${uu}?l=${T}&id=${S}`,N.async=!0,document.head.appendChild(N)}function Ra(T,S,N,B,Y,ne){return qd.apply(this,arguments)}function qd(){return(qd=(0,F.Z)(function*(T,S,N,B,Y,ne){const Me=B[Y];try{if(Me)yield S[Me];else{const it=(yield Gd(N)).find(Ct=>Ct.measurementId===Y);it&&(yield S[it.appId])}}catch(Qe){tr.error(Qe)}T("config",Y,ne)})).apply(this,arguments)}function mc(T,S,N,B,Y){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,F.Z)(function*(T,S,N,B,Y){try{let ne=[];if(Y&&Y.send_to){let Me=Y.send_to;Array.isArray(Me)||(Me=[Me]);const Qe=yield Gd(N);for(const it of Me){const Ct=Qe.find(At=>At.measurementId===it),Qt=Ct&&S[Ct.appId];if(!Qt){ne=[];break}ne.push(Qt)}}0===ne.length&&(ne=Object.values(S)),yield Promise.all(ne),T("event",B,Y||{})}catch(ne){tr.error(ne)}})).apply(this,arguments)}function gm(){const T=window.document.getElementsByTagName("script");for(const S of Object.values(T))if(S.src&&S.src.includes(uu))return S;return null}const In=new te.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),dl=new class vc{constructor(S={},N=1e3){this.throttleMetadata=S,this.intervalMillis=N}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,N){this.throttleMetadata[S]=N}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function qo(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Wd(T){return an.apply(this,arguments)}function an(){return(an=(0,F.Z)(function*(T){var S;const{appId:N,apiKey:B}=T,Y={method:"GET",headers:qo(B)},ne=cl.replace("{app-id}",N),Me=yield fetch(ne,Y);if(200!==Me.status&&304!==Me.status){let Qe="";try{const it=yield Me.json();(null===(S=it.error)||void 0===S?void 0:S.message)&&(Qe=it.error.message)}catch(it){}throw In.create("config-fetch-failed",{httpStatus:Me.status,responseMessage:Qe})}return Me.json()})).apply(this,arguments)}function zo(T){return yn.apply(this,arguments)}function yn(){return(yn=(0,F.Z)(function*(T,S=dl,N){const{appId:B,apiKey:Y,measurementId:ne}=T.options;if(!B)throw In.create("no-app-id");if(!Y){if(ne)return{measurementId:ne,appId:B};throw In.create("no-api-key")}const Me=S.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qe=new cu;return setTimeout((0,F.Z)(function*(){Qe.abort()}),void 0!==N?N:6e4),mt({appId:B,apiKey:Y,measurementId:ne},Me,Qe,S)})).apply(this,arguments)}function mt(T,S,N){return vo.apply(this,arguments)}function vo(){return(vo=(0,F.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:N},B,Y=dl){const{appId:ne,measurementId:Me}=T;try{yield mm(B,S)}catch(Qe){if(Me)return tr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${Qe.message}]`),{appId:ne,measurementId:Me};throw Qe}try{const Qe=yield Wd(T);return Y.deleteThrottleMetadata(ne),Qe}catch(Qe){if(!wc(Qe)){if(Y.deleteThrottleMetadata(ne),Me)return tr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Me} provided in the "measurementId" field in the local Firebase config. [${Qe.message}]`),{appId:ne,measurementId:Me};throw Qe}const it=503===Number(Qe.customData.httpStatus)?(0,te.$s)(N,Y.intervalMillis,30):(0,te.$s)(N,Y.intervalMillis),Ct={throttleEndTimeMillis:Date.now()+it,backoffCount:N+1};return Y.setThrottleMetadata(ne,Ct),tr.debug(`Calling attemptFetch again in ${it} millis`),mt(T,Ct,B,Y)}})).apply(this,arguments)}function mm(T,S){return new Promise((N,B)=>{const Y=Math.max(S-Date.now(),0),ne=setTimeout(N,Y);T.addEventListener(()=>{clearTimeout(ne),B(In.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function wc(T){if(!(T instanceof te.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}class cu{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function Rf(){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,F.Z)(function*(){if(!(0,te.hl)())return tr.warn(In.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,te.eu)()}catch(T){return tr.warn(In.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function cr(){return(cr=(0,F.Z)(function*(T,S,N,B,Y,ne,Me){var Qe;const it=zo(T);it.then(kn=>{N[kn.measurementId]=kn.appId,T.options.measurementId&&kn.measurementId!==T.options.measurementId&&tr.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${kn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(kn=>tr.error(kn)),S.push(it);const Ct=Rf().then(kn=>{if(kn)return B.getId()}),[Qt,At]=yield Promise.all([it,Ct]);gm()||pm(ne,Qt.measurementId),Y("js",new Date);const Kn=null!==(Qe=null==Me?void 0:Me.config)&&void 0!==Qe?Qe:{};return Kn.origin="firebase",Kn.update=!0,null!=At&&(Kn[rv]=At),Y("config",Qt.measurementId,Kn),Qt.measurementId})).apply(this,arguments)}class Ma{constructor(S){this.app=S}_delete(){return delete ci[this.app.options.appId],Promise.resolve()}}let ci={},Ko=[];const Ec={};let Di,wo,Zo="dataLayer",dr=!1;function di(T,S,N){!function bc(){const T=[];if((0,te.ru)()&&T.push("This is a browser extension environment."),(0,te.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((B,Y)=>`(${Y+1}) ${B}`).join(" "),N=In.create("invalid-analytics-context",{errorInfo:S});tr.warn(N.message)}}();const B=T.options.appId;if(!B)throw In.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw In.create("no-api-key");tr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ci[B])throw In.create("already-exists",{id:B});if(!dr){!function Rs(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(Zo);const{wrappedGtag:ne,gtagCore:Me}=function zd(T,S,N,B,Y){let ne=function(...Me){window[B].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ne=window[Y]),window[Y]=function _c(T,S,N,B){function ne(){return(ne=(0,F.Z)(function*(Me,Qe,it){try{"event"===Me?yield mc(T,S,N,Qe,it):"config"===Me?yield Ra(T,S,N,B,Qe,it):T("set",Qe)}catch(Ct){tr.error(Ct)}})).apply(this,arguments)}return function Y(Me,Qe,it){return ne.apply(this,arguments)}}(ne,T,S,N),{gtagCore:ne,wrappedGtag:window[Y]}}(ci,Ko,Ec,Zo,"gtag");wo=ne,Di=Me,dr=!0}return ci[B]=function Ti(T,S,N,B,Y,ne,Me){return cr.apply(this,arguments)}(T,Ko,Ec,S,Di,Zo,N),new Ma(T)}function hl(){return(hl=(0,F.Z)(function*(T,S,N,B,Y){if(Y&&Y.global)T("event",N,B);else{const ne=yield S;T("event",N,Object.assign(Object.assign({},B),{send_to:ne}))}})).apply(this,arguments)}function Xo(){return Na.apply(this,arguments)}function Na(){return(Na=(0,F.Z)(function*(){if((0,te.ru)()||!(0,te.zI)()||!(0,te.hl)())return!1;try{return yield(0,te.eu)()}catch(T){return!1}})).apply(this,arguments)}const Tc="@firebase/analytics";!function Nf(){(0,le._registerComponent)(new _e.wA(pc,(S,{options:N})=>di(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,le._registerComponent)(new _e.wA("analytics-internal",function T(S){try{const N=S.getProvider(pc).getImmediate();return{logEvent:(B,Y,ne)=>function Qd(T,S,N,B){T=(0,te.m9)(T),function Kd(T,S,N,B,Y){return hl.apply(this,arguments)}(wo,ci[T.app.options.appId],S,N,B).catch(Y=>tr.error(Y))}(N,B,Y,ne)}}catch(N){throw In.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,le.registerVersion)(Tc,"0.7.7"),(0,le.registerVersion)(Tc,"0.7.7","esm2017")}();var Xd=L(4408),Pf=L(7565);const hu=new class On extends Pf.v{}(class as extends Xd.o{constructor(S,N){super(S,N),this.scheduler=S,this.work=N}schedule(S,N=0){return N>0?super.schedule(S,N):(this.delay=N,this.state=S,this.scheduler.flush(this),this)}execute(S,N){return N>0||this.closed?super.execute(S,N):this._execute(S,N)}requestAsyncId(S,N,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(S,N,B):S.flush(this)}});var Kr=L(4986),fu=L(8505),Lr=L(5363),zi=L(9468);const pu=new h.GfV("7.3.0"),ls="__angularfire_symbol__analyticsIsSupportedValue",fi="__angularfire_symbol__analyticsIsSupported",pi="__angularfire_symbol__remoteConfigIsSupportedValue",pl="__angularfire_symbol__remoteConfigIsSupported",gl="__angularfire_symbol__messagingIsSupportedValue",eh="__angularfire_symbol__messagingIsSupported";function ml(T,S,N){if(S){if(1===S.length)return S[0];const ne=S.filter(Me=>Me.app===N);if(1===ne.length)return ne[0]}return N.container.getProvider(T).getImmediate({optional:!0})}globalThis[fi]||(globalThis[fi]=Xo().then(T=>globalThis[ls]=T).catch(()=>globalThis[ls]=!1)),globalThis[eh]||(globalThis[eh]=$d().then(T=>globalThis[gl]=T).catch(()=>globalThis[gl]=!1)),globalThis[pl]||(globalThis[pl]=Vo().then(T=>globalThis[pi]=T).catch(()=>globalThis[pi]=!1));const Ff=(T,S)=>{const N=S?[S]:(0,J.C6)(),B=[];return N.forEach(Y=>{Y.container.getProvider(T).instances.forEach(Me=>{B.includes(Me)||B.push(Me)})}),B};function ea(){}class _l{constructor(S,N=hu){this.zone=S,this.delegate=N}now(){return this.delegate.now()}schedule(S,N,B){const Y=this.zone;return this.delegate.schedule(function(Me){Y.runGuarded(()=>{S.apply(this,[Me])})},N,B)}}class Lf{constructor(S){this.zone=S,this.task=null}call(S,N){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ea,{},ea,ea)),N.pipe((0,fu.b)({next:B,complete:B,error:B})).subscribe(S).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Dc=(()=>{class T{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new _l(Zone.current)),this.insideAngular=N.run(()=>new _l(Zone.current,Kr.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(N){return new(N||T)(h.LFG(h.R0b))},T.\u0275prov=h.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function ks(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Pa(T){return T.pipe((0,Lr.Q)(ks().outsideAngular))}function Sc(T){return ks(),function Fs(T){return function(N){return(N=N.lift(new Lf(T.ngZone))).pipe((0,zi.R)(T.outsideAngular),(0,Lr.Q)(T.insideAngular))}}(ks())(T)}},2090:(lt,De,L)=>{L.d(De,{$s:()=>Oo,BH:()=>xe,DV:()=>qt,Dv:()=>no,G6:()=>re,GJ:()=>ns,L:()=>ce,LL:()=>St,Lj:()=>Gt,Mn:()=>qe,Pz:()=>vt,Sg:()=>Oe,UG:()=>Ce,UI:()=>ri,US:()=>ie,Wj:()=>Es,X3:()=>pt,Yr:()=>$e,ZB:()=>ee,ZR:()=>ue,b$:()=>Se,cI:()=>ut,d:()=>Ee,dS:()=>zt,eu:()=>se,g5:()=>le,gK:()=>Tn,gQ:()=>is,h$:()=>fe,hl:()=>Z,hu:()=>F,jU:()=>tt,lb:()=>Ca,m9:()=>ft,ne:()=>ht,p$:()=>G,pd:()=>ws,r3:()=>on,ru:()=>Ze,tV:()=>q,uI:()=>ge,ug:()=>ot,vZ:()=>to,w1:()=>be,w9:()=>un,xO:()=>rs,xb:()=>wr,z$:()=>Ue,zI:()=>ye,zd:()=>Wr});var h=L(5861);const F=function($,j){if(!$)throw le(j)},le=function($){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+$)},te=function($){const j=[];let z=0;for(let de=0;de<$.length;de++){let X=$.charCodeAt(de);X<128?j[z++]=X:X<2048?(j[z++]=X>>6|192,j[z++]=63&X|128):55296==(64512&X)&&de+1<$.length&&56320==(64512&$.charCodeAt(de+1))?(X=65536+((1023&X)<<10)+(1023&$.charCodeAt(++de)),j[z++]=X>>18|240,j[z++]=X>>12&63|128,j[z++]=X>>6&63|128,j[z++]=63&X|128):(j[z++]=X>>12|224,j[z++]=X>>6&63|128,j[z++]=63&X|128)}return j},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,j){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,de=[];for(let X=0;X<$.length;X+=3){const je=$[X],Et=X+1<$.length,nn=Et?$[X+1]:0,Pr=X+2<$.length,Yt=Pr?$[X+2]:0;let En=(15&nn)<<2|Yt>>6,_r=63&Yt;Pr||(_r=64,Et||(En=64)),de.push(z[je>>2],z[(3&je)<<4|nn>>4],z[En],z[_r])}return de.join("")},encodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa($):this.encodeByteArray(te($),j)},decodeString($,j){return this.HAS_NATIVE_SUPPORT&&!j?atob($):function($){const j=[];let z=0,de=0;for(;z<$.length;){const X=$[z++];if(X<128)j[de++]=String.fromCharCode(X);else if(X>191&&X<224){const je=$[z++];j[de++]=String.fromCharCode((31&X)<<6|63&je)}else if(X>239&&X<365){const Pr=((7&X)<<18|(63&$[z++])<<12|(63&$[z++])<<6|63&$[z++])-65536;j[de++]=String.fromCharCode(55296+(Pr>>10)),j[de++]=String.fromCharCode(56320+(1023&Pr))}else{const je=$[z++],Et=$[z++];j[de++]=String.fromCharCode((15&X)<<12|(63&je)<<6|63&Et)}}return j.join("")}(this.decodeStringToByteArray($,j))},decodeStringToByteArray($,j){this.init_();const z=j?this.charToByteMapWebSafe_:this.charToByteMap_,de=[];for(let X=0;X<$.length;){const je=z[$.charAt(X++)],nn=X<$.length?z[$.charAt(X)]:0;++X;const Yt=X<$.length?z[$.charAt(X)]:64;++X;const Ot=X<$.length?z[$.charAt(X)]:64;if(++X,null==je||null==nn||null==Yt||null==Ot)throw Error();de.push(je<<2|nn>>4),64!==Yt&&(de.push(nn<<4&240|Yt>>2),64!==Ot&&de.push(Yt<<6&192|Ot))}return de},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},fe=function($){const j=te($);return ie.encodeByteArray(j,!0)},ce=function($){return fe($).replace(/\./g,"")},q=function($){try{return ie.decodeString($,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function G($){return ee(void 0,$)}function ee($,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return j}for(const z in j)!j.hasOwnProperty(z)||!We(z)||($[z]=ee($[z],j[z]));return $}function We($){return"__proto__"!==$}class xe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,z)=>{this.resolve=j,this.reject=z})}wrapCallback(j){return(z,de)=>{z?this.reject(z):this.resolve(de),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(z):j(z,de))}}}function Oe($,j){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const de=j||"demo-project",X=$.iat||0,je=$.sub||$.user_id;if(!je)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Et=Object.assign({iss:`https://securetoken.google.com/${de}`,aud:de,iat:X,exp:X+3600,auth_time:X,sub:je,user_id:je,firebase:{sign_in_provider:"custom",identities:{}}},$);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(Et)),""].join(".")}function Ue(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ge(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function Ce(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch($){return!1}}function tt(){return"object"==typeof self&&self.self===self}function Ze(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Se(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ee(){return Ue().indexOf("Electron/")>=0}function be(){const $=Ue();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function qe(){return Ue().indexOf("MSAppHost/")>=0}function $e(){return!1}function re(){return!Ce()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z(){return"object"==typeof indexedDB}function se(){return new Promise(($,j)=>{try{let z=!0;const de="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(de);X.onsuccess=()=>{X.result.close(),z||self.indexedDB.deleteDatabase(de),$(!0)},X.onupgradeneeded=()=>{z=!1},X.onerror=()=>{var je;j((null===(je=X.error)||void 0===je?void 0:je.message)||"")}}catch(z){j(z)}})}function ye(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ue extends Error{constructor(j,z,de){super(z),this.code=j,this.customData=de,this.name="FirebaseError",Object.setPrototypeOf(this,ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,St.prototype.create)}}class St{constructor(j,z,de){this.service=j,this.serviceName=z,this.errors=de}create(j,...z){const de=z[0]||{},X=`${this.service}/${j}`,je=this.errors[j],Et=je?function sn($,j){return $.replace(qn,(z,de)=>{const X=j[de];return null!=X?String(X):`<${de}?>`})}(je,de):"Error";return new ue(X,`${this.serviceName}: ${Et} (${X}).`,de)}}const qn=/\{\$([^}]+)}/g;function ut($){return JSON.parse($)}function vt($){return JSON.stringify($)}const mn=function($){let j={},z={},de={},X="";try{const je=$.split(".");j=ut(q(je[0])||""),z=ut(q(je[1])||""),X=je[2],de=z.d||{},delete z.d}catch(je){}return{header:j,claims:z,data:de,signature:X}},un=function($){const z=mn($).claims;return!!z&&"object"==typeof z&&z.hasOwnProperty("iat")},ns=function($){const j=mn($).claims;return"object"==typeof j&&!0===j.admin};function on($,j){return Object.prototype.hasOwnProperty.call($,j)}function qt($,j){if(Object.prototype.hasOwnProperty.call($,j))return $[j]}function wr($){for(const j in $)if(Object.prototype.hasOwnProperty.call($,j))return!1;return!0}function ri($,j,z){const de={};for(const X in $)Object.prototype.hasOwnProperty.call($,X)&&(de[X]=j.call(z,$[X],X,$));return de}function to($,j){if($===j)return!0;const z=Object.keys($),de=Object.keys(j);for(const X of z){if(!de.includes(X))return!1;const je=$[X],Et=j[X];if(zr(je)&&zr(Et)){if(!to(je,Et))return!1}else if(je!==Et)return!1}for(const X of de)if(!z.includes(X))return!1;return!0}function zr($){return null!==$&&"object"==typeof $}function rs($){const j=[];for(const[z,de]of Object.entries($))Array.isArray(de)?de.forEach(X=>{j.push(encodeURIComponent(z)+"="+encodeURIComponent(X))}):j.push(encodeURIComponent(z)+"="+encodeURIComponent(de));return j.length?"&"+j.join("&"):""}function Wr($){const j={};return $.replace(/^\?/,"").split("&").forEach(de=>{if(de){const[X,je]=de.split("=");j[decodeURIComponent(X)]=decodeURIComponent(je)}}),j}function ws($){const j=$.indexOf("?");if(!j)return"";const z=$.indexOf("#",j);return $.substring(j,z>0?z:void 0)}class is{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let j=1;j<this.blockSize;++j)this.pad_[j]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(j,z){z||(z=0);const de=this.W_;if("string"==typeof j)for(let Ot=0;Ot<16;Ot++)de[Ot]=j.charCodeAt(z)<<24|j.charCodeAt(z+1)<<16|j.charCodeAt(z+2)<<8|j.charCodeAt(z+3),z+=4;else for(let Ot=0;Ot<16;Ot++)de[Ot]=j[z]<<24|j[z+1]<<16|j[z+2]<<8|j[z+3],z+=4;for(let Ot=16;Ot<80;Ot++){const En=de[Ot-3]^de[Ot-8]^de[Ot-14]^de[Ot-16];de[Ot]=4294967295&(En<<1|En>>>31)}let Yt,jn,X=this.chain_[0],je=this.chain_[1],Et=this.chain_[2],nn=this.chain_[3],Pr=this.chain_[4];for(let Ot=0;Ot<80;Ot++){Ot<40?Ot<20?(Yt=nn^je&(Et^nn),jn=1518500249):(Yt=je^Et^nn,jn=1859775393):Ot<60?(Yt=je&Et|nn&(je|Et),jn=2400959708):(Yt=je^Et^nn,jn=3395469782);const En=(X<<5|X>>>27)+Yt+Pr+jn+de[Ot]&4294967295;Pr=nn,nn=Et,Et=4294967295&(je<<30|je>>>2),je=X,X=En}this.chain_[0]=this.chain_[0]+X&4294967295,this.chain_[1]=this.chain_[1]+je&4294967295,this.chain_[2]=this.chain_[2]+Et&4294967295,this.chain_[3]=this.chain_[3]+nn&4294967295,this.chain_[4]=this.chain_[4]+Pr&4294967295}update(j,z){if(null==j)return;void 0===z&&(z=j.length);const de=z-this.blockSize;let X=0;const je=this.buf_;let Et=this.inbuf_;for(;X<z;){if(0===Et)for(;X<=de;)this.compress_(j,X),X+=this.blockSize;if("string"==typeof j){for(;X<z;)if(je[Et]=j.charCodeAt(X),++Et,++X,Et===this.blockSize){this.compress_(je),Et=0;break}}else for(;X<z;)if(je[Et]=j[X],++Et,++X,Et===this.blockSize){this.compress_(je),Et=0;break}}this.inbuf_=Et,this.total_+=z}digest(){const j=[];let z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let X=this.blockSize-1;X>=56;X--)this.buf_[X]=255&z,z/=256;this.compress_(this.buf_);let de=0;for(let X=0;X<5;X++)for(let je=24;je>=0;je-=8)j[de]=this.chain_[X]>>je&255,++de;return j}}function ht($,j){const z=new ii($,j);return z.subscribe.bind(z)}class ii{constructor(j,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{j(this)}).catch(de=>{this.error(de)})}next(j){this.forEachObserver(z=>{z.next(j)})}error(j){this.forEachObserver(z=>{z.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,z,de){let X;if(void 0===j&&void 0===z&&void 0===de)throw new Error("Missing Observer.");X=function or($,j){if("object"!=typeof $||null===$)return!1;for(const z of j)if(z in $&&"function"==typeof $[z])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:z,complete:de},void 0===X.next&&(X.next=wi),void 0===X.error&&(X.error=wi),void 0===X.complete&&(X.complete=wi);const je=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch(Et){}}),this.observers.push(X),je}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,j)}sendOne(j,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{z(this.observers[j])}catch(de){"undefined"!=typeof console&&console.error&&console.error(de)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wi(){}const no=function($,j,z,de){let X;if(de<j?X="at least "+j:de>z&&(X=0===z?"none":"no more than "+z),X)throw new Error($+" failed: Was called with "+de+(1===de?" argument.":" arguments.")+" Expects "+X+".")};function Tn($,j){return`${$} failed: ${j} argument `}function Es($,j,z,de){if((!de||z)&&"function"!=typeof z)throw new Error(Tn($,j)+"must be a valid function.")}function Ca($,j,z,de){if((!de||z)&&("object"!=typeof z||null===z))throw new Error(Tn($,j)+"must be a valid context object.")}const zt=function($){const j=[];let z=0;for(let de=0;de<$.length;de++){let X=$.charCodeAt(de);if(X>=55296&&X<=56319){const je=X-55296;de++,F(de<$.length,"Surrogate pair missing trail surrogate."),X=65536+(je<<10)+($.charCodeAt(de)-56320)}X<128?j[z++]=X:X<2048?(j[z++]=X>>6|192,j[z++]=63&X|128):X<65536?(j[z++]=X>>12|224,j[z++]=X>>6&63|128,j[z++]=63&X|128):(j[z++]=X>>18|240,j[z++]=X>>12&63|128,j[z++]=X>>6&63|128,j[z++]=63&X|128)}return j},ot=function($){let j=0;for(let z=0;z<$.length;z++){const de=$.charCodeAt(z);de<128?j++:de<2048?j+=2:de>=55296&&de<=56319?(j+=4,z++):j+=3}return j};function Oo($,j=1e3,z=2){const de=j*Math.pow(z,$),X=Math.round(.5*de*(Math.random()-.5)*2);return Math.min(144e5,de+X)}function ft($){return $&&$._delegate?$._delegate:$}function Nr($,j){return new Promise((z,de)=>{$.onsuccess=X=>{z(X.target.result)},$.onerror=X=>{var je;de(`${j}: ${null===(je=X.target.error)||void 0===je?void 0:je.message}`)}})}class $t{constructor(j){this._db=j,this.objectStoreNames=this._db.objectStoreNames}transaction(j,z){return new Ye(this._db.transaction.call(this._db,j,z))}createObjectStore(j,z){return new Ae(this._db.createObjectStore(j,z))}close(){this._db.close()}}class Ye{constructor(j){this._transaction=j,this.complete=new Promise((z,de)=>{this._transaction.oncomplete=function(){z()},this._transaction.onerror=()=>{de(this._transaction.error)},this._transaction.onabort=()=>{de(this._transaction.error)}})}objectStore(j){return new Ae(this._transaction.objectStore(j))}}class Ae{constructor(j){this._store=j}index(j){return new Je(this._store.index(j))}createIndex(j,z,de){return new Je(this._store.createIndex(j,z,de))}get(j){return Nr(this._store.get(j),"Error reading from IndexedDB")}put(j,z){return Nr(this._store.put(j,z),"Error writing to IndexedDB")}delete(j){return Nr(this._store.delete(j),"Error deleting from IndexedDB")}clear(){return Nr(this._store.clear(),"Error clearing IndexedDB object store")}}class Je{constructor(j){this._index=j}get(j){return Nr(this._index.get(j),"Error reading from IndexedDB")}}function pt($,j,z){return new Promise((de,X)=>{try{const je=indexedDB.open($,j);je.onsuccess=Et=>{de(new $t(Et.target.result))},je.onerror=Et=>{var nn;X(`Error opening indexedDB: ${null===(nn=Et.target.error)||void 0===nn?void 0:nn.message}`)},je.onupgradeneeded=Et=>{z(new $t(je.result),Et.oldVersion,Et.newVersion,new Ye(je.transaction))}}catch(je){X(`Error opening indexedDB: ${je.message}`)}})}function Gt($){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,h.Z)(function*($){return new Promise((j,z)=>{try{const de=indexedDB.deleteDatabase($);de.onsuccess=()=>{j()},de.onerror=X=>{var je;z(`Error deleting indexedDB database "${$}": ${null===(je=X.target.error)||void 0===je?void 0:je.message}`)}}catch(de){z(`Error deleting indexedDB database "${$}": ${de.message}`)}})})).apply(this,arguments)}},9587:(lt,De,L)=>{var h=L(5e3);let J=null;function F(){return J}const ie=new h.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ce(){return(0,h.LFG)(G)}()},providedIn:"platform"}),n})();const q=new h.OlP("Location Initialized");let G=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ee()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ee()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ie))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function We(){return new G((0,h.LFG)(ie))}()},providedIn:"platform"}),n})();function ee(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ce(n){const e=(0,h.LFG)(ie).location;return new Ze((0,h.LFG)(fe),e&&e.origin||"")}()},providedIn:"root"}),n})();const tt=new h.OlP("appBaseHref");let Ze=(()=>{class n extends ge{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const u=this.prepareExternalUrl(i+Ue(a));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){const u=this.prepareExternalUrl(i+Ue(a));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(tt,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let u=this.prepareExternalUrl(i+Ue(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,a){let u=this.prepareExternalUrl(i+Ue(a));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(tt,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(t,r){this._subject=new h.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe($e(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function qe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=xe,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(h.LFG(ge),h.LFG(fe))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function be(){return new Ee((0,h.LFG)(ge),(0,h.LFG)(fe))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}var Z=(()=>((Z=Z||{})[Z.Decimal=0]="Decimal",Z[Z.Percent=1]="Percent",Z[Z.Currency=2]="Currency",Z[Z.Scientific=3]="Scientific",Z))(),ue=(()=>((ue=ue||{})[ue.Decimal=0]="Decimal",ue[ue.Group=1]="Group",ue[ue.List=2]="List",ue[ue.PercentSign=3]="PercentSign",ue[ue.PlusSign=4]="PlusSign",ue[ue.MinusSign=5]="MinusSign",ue[ue.Exponential=6]="Exponential",ue[ue.SuperscriptingExponent=7]="SuperscriptingExponent",ue[ue.PerMille=8]="PerMille",ue[ue.Infinity=9]="Infinity",ue[ue.NaN=10]="NaN",ue[ue.TimeSeparator=11]="TimeSeparator",ue[ue.CurrencyDecimal=12]="CurrencyDecimal",ue[ue.CurrencyGroup=13]="CurrencyGroup",ue))();function qt(n,e){const t=(0,h.cg1)(n),r=t[h.wAp.NumberSymbols][e];if(void 0===r){if(e===ue.CurrencyDecimal)return t[h.wAp.NumberSymbols][ue.Decimal];if(e===ue.CurrencyGroup)return t[h.wAp.NumberSymbols][ue.Group]}return r}const jn=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function os(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Fo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class so{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let lr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new so(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===a?void 0:a);else if(null!==a){const d=r.get(a);r.move(d,u),Cs(d,i)}});for(let i=0,a=r.length;i<a;i++){const d=r.get(i).context;d.index=i,d.count=a,d.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Cs(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Cs(n,e){n.context.$implicit=e.item}let ur=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new hn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Gl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Gl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class hn{constructor(){this.$implicit=null,this.ngIf=null}}function Gl(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}function er(n,e){return new h.vHH(2100,"")}let Ds=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function Uo(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function Ft(n,e,t){return function rl(n,e,t,r,i,a,u=!1){let d="",g=!1;if(isFinite(n)){let y=function ro(n){let r,i,a,u,d,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(a=e.search(/e/i))>0?(i<0&&(i=a),i+=+e.slice(a+1),e=e.substring(0,a)):i<0&&(i=e.length),a=0;"0"===e.charAt(a);a++);if(a===(d=e.length))r=[0],i=1;else{for(d--;"0"===e.charAt(d);)d--;for(i-=a,r=[],u=0;a<=d;a++,u++)r[u]=Number(e.charAt(a))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);u&&(y=function Cr(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(y));let I=e.minInt,D=e.minFrac,R=e.maxFrac;if(a){const Ne=a.match(jn);if(null===Ne)throw new Error(`${a} is not a valid digit info`);const et=Ne[1],Be=Ne[3],Tt=Ne[5];null!=et&&(I=os(et)),null!=Be&&(D=os(Be)),null!=Tt?R=os(Tt):null!=Be&&D>R&&(R=D)}!function Xn(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const a=Math.min(Math.max(e,i),t);let u=a+n.integerLen,d=r[u];if(u>0){r.splice(Math.max(n.integerLen,u));for(let D=u;D<r.length;D++)r[D]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,u=a+1),r[0]=0;for(let D=1;D<u;D++)r[D]=0}if(d>=5)if(u-1<0){for(let D=0;D>u;D--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[u-1]++;for(;i<Math.max(0,a);i++)r.push(0);let g=0!==a;const y=e+n.integerLen,I=r.reduceRight(function(D,R,O,U){return U[O]=(R+=D)<10?R:R-10,g&&(0===U[O]&&O>=y?U.pop():g=!1),R>=10?1:0},0);I&&(r.unshift(I),n.integerLen++)}(y,D,R);let O=y.digits,U=y.integerLen;const K=y.exponent;let pe=[];for(g=O.every(Ne=>!Ne);U<I;U++)O.unshift(0);for(;U<0;U++)O.unshift(0);U>0?pe=O.splice(U,O.length):(pe=O,O=[0]);const Ve=[];for(O.length>=e.lgSize&&Ve.unshift(O.splice(-e.lgSize,O.length).join(""));O.length>e.gSize;)Ve.unshift(O.splice(-e.gSize,O.length).join(""));O.length&&Ve.unshift(O.join("")),d=Ve.join(qt(t,r)),pe.length&&(d+=qt(t,i)+pe.join("")),K&&(d+=qt(t,ue.Exponential)+"+"+K)}else d=qt(t,ue.Infinity);return d=n<0&&!g?e.negPre+d+e.negSuf:e.posPre+d+e.posSuf,d}(n,function bn(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],a=r[1],u=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],d=u[0],g=u[1]||"";t.posPre=d.substr(0,d.indexOf("#"));for(let I=0;I<g.length;I++){const D=g.charAt(I);"0"===D?t.minFrac=t.maxFrac=I+1:"#"===D?t.maxFrac=I+1:t.posSuf+=D}const y=d.split(",");if(t.gSize=y[1]?y[1].length:0,t.lgSize=y[2]||y[1]?(y[2]||y[1]).length:0,a){const I=i.length-t.posPre.length-t.posSuf.length,D=a.indexOf("#");t.negPre=a.substr(0,D).replace(/'/g,""),t.negSuf=a.substr(D+I).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function wr(n,e){return(0,h.cg1)(n)[h.wAp.NumberFormats][e]}(e,Z.Decimal),qt(e,ue.MinusSign)),e,ue.Group,ue.Decimal,t)}(function sl(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(a){throw er()}}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.soG,16))},n.\u0275pipe=h.Yjl({name:"number",type:n,pure:!0}),n})();let ec=(()=>{class n{transform(t,r,i){if(null==t)return null;if(!this.supports(t))throw er();return t.slice(r,i)}supports(t){return"string"==typeof t||Array.isArray(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=h.Yjl({name:"slice",type:n,pure:!1}),n})(),lo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function Ir(n){return"server"===n}let Jl=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Xl((0,h.LFG)(ie),window)}),n})();class Xl{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ol(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const u=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ss(this.window.history)||Ss(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ss(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Cn{}class co extends class Da extends class _e{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function te(n){J||(J=n)}(new co)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Vd(){return fn=fn||document.querySelector("base"),fn?fn.getAttribute("href"):null}();return null==t?null:function jo(n){Bo=Bo||document.createElement("a"),Bo.setAttribute("href",n);const e=Bo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){fn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Fo(document.cookie,e)}}let Bo,fn=null;const Or=new h.OlP("TRANSITION_ID"),al=[{provide:h.ip1,useFactory:function Wn(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[Or,ie,h.zs3],multi:!0}];class $i{static init(){(0,h.VLi)(new $i)}addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const d=function(g){u=u||g,a--,0==a&&r(u)};i.forEach(function(g){g.whenStable(d)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let kr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ho=new h.OlP("EventManagerPlugins");let As=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ho),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class eu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let li=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),fo=(()=>{class n extends li{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(po),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(po))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ie))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function po(n){F().remove(n)}const gt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},tu=/%COMP%/g;function Ie(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ie(n,i,t):(i=i.replace(tu,n),t.push(i))}return t}function jt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Dn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Sa(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new sc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new oc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ie(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(As),h.LFG(fo),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Sa{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(gt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=gt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=gt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,jt(r)):this.eventManager.addEventListener(e,t,jt(r))}}class sc extends Sa{constructor(e,t,r,i){super(e),this.component=r;const a=Ie(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function nc(n){return"_ngcontent-%COMP%".replace(tu,n)}(i+"-"+r.id),this.hostAttr=function rc(n){return"_nghost-%COMP%".replace(tu,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class oc extends Sa{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ie(i.id,i.styles,[]);for(let u=0;u<a.length;u++){const d=document.createElement("style");d.textContent=a[u],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ud=(()=>{class n extends eu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ie))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ac=["alt","control","meta","shift"],go={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Tr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ii={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ou=(()=>{class n extends eu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="";if(ac.forEach(g=>{const y=r.indexOf(g);y>-1&&(r.splice(y,1),u+=g+".")}),u+=a,0!=r.length||0===a.length)return null;const d={};return d.domEventName=i,d.fullKey=u,d}static getEventFullKey(t){let r="",i=function mo(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Tr.hasOwnProperty(e)&&(e=Tr[e]))}return go[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ac.forEach(a=>{a!=i&&Ii[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ie))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const uc=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function Gi(){co.makeCurrent(),$i.init()},multi:!0},{provide:ie,useFactory:function au(){return(0,h.RDi)(document),document},deps:[]}]),ul=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function lc(){return new h.qLn},deps:[]},{provide:ho,useClass:Ud,multi:!0,deps:[ie,h.R0b,h.Lbi]},{provide:ho,useClass:ou,multi:!0,deps:[ie]},{provide:Dn,useClass:Dn,deps:[As,fo,h.AFp]},{provide:h.FYo,useExisting:Dn},{provide:li,useExisting:fo},{provide:fo,useClass:fo,deps:[ie]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b]},{provide:As,useClass:As,deps:[ho,h.R0b]},{provide:Cn,useClass:kr,deps:[]}];let xa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:Or,useExisting:h.AFp},al]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(n,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:ul,imports:[lo,h.hGG]}),n})();"undefined"!=typeof window&&window;let Ms=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):h.LFG(zd),r},providedIn:"root"}),n})(),zd=(()=>{class n extends Ms{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case h.q3G.NONE:return r;case h.q3G.HTML:return(0,h.qzn)(r,"HTML")?(0,h.z3N)(r):(0,h.EiD)(this._doc,String(r)).toString();case h.q3G.STYLE:return(0,h.qzn)(r,"Style")?(0,h.z3N)(r):r;case h.q3G.SCRIPT:if((0,h.qzn)(r,"Script"))return(0,h.z3N)(r);throw new Error("unsafe value used in a script context");case h.q3G.URL:return(0,h.yhl)(r),(0,h.qzn)(r,"URL")?(0,h.z3N)(r):(0,h.mCW)(String(r));case h.q3G.RESOURCE_URL:if((0,h.qzn)(r,"ResourceURL"))return(0,h.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,h.JVY)(t)}bypassSecurityTrustStyle(t){return(0,h.L6k)(t)}bypassSecurityTrustScript(t){return(0,h.eBb)(t)}bypassSecurityTrustUrl(t){return(0,h.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,h.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ie))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function _c(n){return new zd(n.get(ie))}(h.LFG(h.zs3)),r},providedIn:"root"}),n})();var Sn=L(8996),In=L(8306);const{isArray:yc}=Array,{getPrototypeOf:Ns,prototype:vc,keys:dl}=Object;function qo(n){if(1===n.length){const e=n[0];if(yc(e))return{args:e,keys:null};if(function Wd(n){return n&&"object"==typeof n&&Ns(n)===vc}(e)){const t=dl(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var an=L(8421),zo=L(7669),yn=L(5403),mt=L(4004);const{isArray:vo}=Array;function wc(n){return(0,mt.U)(e=>function mm(n,e){return vo(e)?n(...e):n(e)}(n,e))}function cu(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let Wo=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),Ti=(()=>{class n extends Wo{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const cr=new h.OlP("NgValueAccessor"),Ko={provide:cr,useExisting:(0,h.Gpc)(()=>Yo),multi:!0},Zo=new h.OlP("CompositionEventMode");let Yo=(()=>{class n extends Wo{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ec(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(Zo,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[h._Bn([Ko]),h.qOj]}),n})();function Di(n){return null==n||0===n.length}function wo(n){return null!=n&&"number"==typeof n.length}const dr=new h.OlP("NgValidators"),Qo=new h.OlP("NgAsyncValidators"),bc=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class di{static min(e){return function Kd(n){return e=>{if(Di(e.value)||Di(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function hl(n){return e=>{if(Di(e.value)||Di(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return Cc(e)}static requiredTrue(e){return function qi(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Ic(n){return Di(n.value)||bc.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Jo(n){return e=>Di(e.value)||!wo(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function fl(n){return e=>wo(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Ps(n){if(!n)return Os;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Di(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return $n(e)}static composeAsync(e){return _m(e)}}function Cc(n){return Di(n.value)?{required:!0}:null}function Os(n){return null}function Si(n){return null!=n}function Zd(n){const e=(0,h.QGY)(n)?(0,Sn.D)(n):n;return(0,h.CqO)(e),e}function du(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Xo(n,e){return e.map(t=>t(n))}function Mf(n){return n.map(e=>function Na(n){return!n.validate}(e)?e:t=>e.validate(t))}function $n(n){if(!n)return null;const e=n.filter(Si);return 0==e.length?null:function(t){return du(Xo(t,e))}}function Yd(n){return null!=n?$n(Mf(n)):null}function _m(n){if(!n)return null;const e=n.filter(Si);return 0==e.length?null:function(t){return function Rf(...n){const e=(0,zo.jO)(n),{args:t,keys:r}=qo(n),i=new In.y(a=>{const{length:u}=t;if(!u)return void a.complete();const d=new Array(u);let g=u,y=u;for(let I=0;I<u;I++){let D=!1;(0,an.Xf)(t[I]).subscribe((0,yn.x)(a,R=>{D||(D=!0,y--),d[I]=R},()=>g--,void 0,()=>{(!g||!D)&&(y||a.next(r?cu(r,d):d),a.complete())}))}});return e?i.pipe(wc(e)):i}(Xo(t,e).map(Zd)).pipe((0,mt.U)(du))}}function Qd(n){return null!=n?_m(Mf(n)):null}function Tc(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Jd(n){return n._rawValidators}function Nf(n){return n._rawAsyncValidators}function Xd(n){return n?Array.isArray(n)?n:[n]:[]}function as(n,e){return Array.isArray(n)?n.includes(e):n===e}function Pf(n,e){const t=Xd(e);return Xd(n).forEach(i=>{as(t,i)||t.push(i)}),t}function On(n,e){return Xd(e).filter(t=>!as(n,t))}class hu{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Yd(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Qd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class hi extends hu{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Kr extends hu{get formDirective(){return null}get path(){return null}}class fu{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let pu=(()=>{class n extends fu{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(hi,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[h.qOj]}),n})(),ls=(()=>{class n extends fu{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Kr,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[h.qOj]}),n})();function Vr(n,e){Fs(n,e),e.valueAccessor.writeValue(n.value),function Ac(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&S(n,e)})}(n,e),function N(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function T(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&S(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Sc(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Pa(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Eo(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Oa(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Fs(n,e){const t=Jd(n);null!==e.validator?n.setValidators(Tc(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Nf(n);null!==e.asyncValidator?n.setAsyncValidators(Tc(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Oa(e._rawValidators,i),Oa(e._rawAsyncValidators,i)}function Eo(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Jd(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=Nf(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(u=>u!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return Oa(e._rawValidators,r),Oa(e._rawAsyncValidators,r),t}function S(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function kn(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Zr="VALID",Yr="INVALID",gi="PENDING",Wi="DISABLED";function nh(n){return(rh(n)?n.validators:n)||null}function xc(n){return Array.isArray(n)?Yd(n):n||null}function Fa(n,e){return(rh(e)?e.asyncValidators:n)||null}function Vf(n){return Array.isArray(n)?Qd(n):n||null}function rh(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Uf=n=>n instanceof Em,Ls=n=>n instanceof ih,mu=n=>n instanceof bm;function vm(n){return Uf(n)?n.value:n.getRawValue()}function wm(n,e){const t=Ls(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[e])throw new h.vHH(1001,"")}function Bf(n,e){Ls(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new h.vHH(1002,"")})}class _u{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=xc(this._rawValidators),this._composedAsyncValidatorFn=Vf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Zr}get invalid(){return this.status===Yr}get pending(){return this.status==gi}get disabled(){return this.status===Wi}get enabled(){return this.status!==Wi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=xc(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Vf(e)}addValidators(e){this.setValidators(Pf(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Pf(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(On(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(On(e,this._rawAsyncValidators))}hasValidator(e){return as(this._rawValidators,e)}hasAsyncValidator(e){return as(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=gi,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Wi,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Zr,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Zr||this.status===gi)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wi:Zr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=gi,this._hasOwnPendingAsyncValidator=!0;const t=Zd(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function ym(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Ls(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:mu(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?Wi:this.errors?Yr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gi)?gi:this._anyControlsHaveStatus(Yr)?Yr:Zr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){rh(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Em extends _u{constructor(e=null,t,r){super(nh(t),Fa(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),rh(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){kn(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){kn(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class ih extends _u{constructor(e,t,r){super(nh(t),Fa(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Bf(this,e),Object.keys(e).forEach(r=>{wm(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=vm(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class bm extends _u{constructor(e,t,r){super(nh(t),Fa(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Bf(this,e),e.forEach((r,i)=>{wm(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>vm(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let Gf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),us=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const zf=new h.OlP("NgModelWithFormControlWarning"),Sm={provide:Kr,useExisting:(0,h.Gpc)(()=>Mc)};let Mc=(()=>{class n extends Kr{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Eo(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Vr(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Pa(t.control||null,t,!1),kn(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function At(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Pa(r||null,t),Uf(i)&&(Vr(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function B(n,e){Fs(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Y(n,e){return Eo(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Fs(this.form,this),this._oldForm&&Eo(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(dr,10),h.Y36(Qo,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([Sm]),h.qOj,h.TTD]}),n})();const El={provide:hi,useExisting:(0,h.Gpc)(()=>Nc)};let Nc=(()=>{class n extends hi{constructor(t,r,i,a,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Kn(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Yo?t=a:function Qt(n){return Object.getPrototypeOf(n.constructor)===Ti}(a)?r=a:i=a}),i||r||t||null}(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Ct(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function gu(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(Kr,13),h.Y36(dr,10),h.Y36(Qo,10),h.Y36(cr,10),h.Y36(zf,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([El]),h.qOj,h.TTD]}),n})(),bl=(()=>{class n{constructor(){this._validator=Os}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Os,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const uh={provide:dr,useExisting:(0,h.Gpc)(()=>Cl),multi:!0};let Cl=(()=>{class n extends bl{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function uv(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>Cc}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([uh]),h.qOj]}),n})(),fv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[us]]}),n})(),Fc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[fv]}),n})(),Ur=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:zf,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[fv]}),n})(),Vc=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let d,a=null,u=null;return null!=r&&(function Lc(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(a=null!=r.validators?r.validators:null,u=null!=r.asyncValidators?r.asyncValidators:null,d=null!=r.updateOn?r.updateOn:void 0):(a=null!=r.validator?r.validator:null,u=null!=r.asyncValidator?r.asyncValidator:null)),new ih(i,{asyncValidators:u,updateOn:d,validators:a})}control(t,r,i){return new Em(t,r,i)}array(t,r,i){const a=t.map(u=>this._createControl(u));return new bm(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return Uf(t)||Ls(t)||mu(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:Ur}),n})();function Xe(...n){const e=(0,zo.yG)(n);return(0,Sn.D)(n,e)}var Zn=L(5577),Uc=L(576);function Dr(n,e){return(0,Uc.m)(e)?(0,Zn.z)(n,e,1):(0,Zn.z)(n,1)}var hr=L(4482);function ds(n,e){return(0,hr.e)((t,r)=>{let i=0;t.subscribe((0,yn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}class Um{}class Bc{}class Vs{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(u):this.headers.set(a,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Vs?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Vs;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Vs?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let u=this.headers.get(t);if(!u)return;u=u.filter(d=>-1===a.indexOf(d)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Bm{encodeKey(e){return Jf(e)}encodeValue(e){return Jf(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const pv=/%(\d[a-f0-9])/gi,bo={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function Jf(n){return encodeURIComponent(n).replace(pv,(e,t)=>{var r;return null!==(r=bo[t])&&void 0!==r?r:e})}function Hm(n){return`${n}`}class Co{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Bm,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function jm(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[u,d]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],g=t.get(u)||[];g.push(d),t.set(u,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Co({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Hm(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Hm(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class $m{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function fh(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function ph(n){return"undefined"!=typeof Blob&&n instanceof Blob}function Gm(n){return"undefined"!=typeof FormData&&n instanceof FormData}class na{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Br(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Vs),this.context||(this.context=new $m),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+u}}else this.params=new Co,this.urlWithParams=t}serializeBody(){return null===this.body?null:fh(this.body)||ph(this.body)||Gm(this.body)||function ta(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Co?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Gm(this.body)?null:ph(this.body)?this.body.type||null:fh(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Co?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,d=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,I=e.params||this.params;const D=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((R,O)=>R.set(O,e.setHeaders[O]),y)),e.setParams&&(I=Object.keys(e.setParams).reduce((R,O)=>R.set(O,e.setParams[O]),I)),new na(r,i,u,{params:I,headers:y,context:D,reportProgress:g,responseType:a,withCredentials:d})}}var Yn=(()=>((Yn=Yn||{})[Yn.Sent=0]="Sent",Yn[Yn.UploadProgress=1]="UploadProgress",Yn[Yn.ResponseHeader=2]="ResponseHeader",Yn[Yn.DownloadProgress=3]="DownloadProgress",Yn[Yn.Response=4]="Response",Yn[Yn.User=5]="User",Yn))();class gh{constructor(e,t=200,r="OK"){this.headers=e.headers||new Vs,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Xf extends gh{constructor(e={}){super(e),this.type=Yn.ResponseHeader}clone(e={}){return new Xf({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Eu extends gh{constructor(e={}){super(e),this.type=Yn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Eu({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class qm extends gh{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function ep(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let gv=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof na)a=t;else{let g,y;g=i.headers instanceof Vs?i.headers:new Vs(i.headers),i.params&&(y=i.params instanceof Co?i.params:new Co({fromObject:i.params})),a=new na(t,r,void 0!==i.body?i.body:null,{headers:g,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=Xe(a).pipe(Dr(g=>this.handler.handle(g)));if(t instanceof na||"events"===i.observe)return u;const d=u.pipe(ds(g=>g instanceof Eu));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return d.pipe((0,mt.U)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return d.pipe((0,mt.U)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return d.pipe((0,mt.U)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return d.pipe((0,mt.U)(g=>g.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Co).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,ep(i,r))}post(t,r,i={}){return this.request("POST",t,ep(i,r))}put(t,r,i={}){return this.request("PUT",t,ep(i,r))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Um))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class zm{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const v=new h.OlP("HTTP_INTERCEPTORS");let p=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const bt=/^\)\]\}',?\n/;let Fn=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new In.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((O,U)=>i.setRequestHeader(O,U.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const O=t.detectContentTypeHeader();null!==O&&i.setRequestHeader("Content-Type",O)}if(t.responseType){const O=t.responseType.toLowerCase();i.responseType="json"!==O?O:"text"}const a=t.serializeBody();let u=null;const d=()=>{if(null!==u)return u;const O=i.statusText||"OK",U=new Vs(i.getAllResponseHeaders()),K=function dt(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return u=new Xf({headers:U,status:i.status,statusText:O,url:K}),u},g=()=>{let{headers:O,status:U,statusText:K,url:pe}=d(),Ve=null;204!==U&&(Ve=void 0===i.response?i.responseText:i.response),0===U&&(U=Ve?200:0);let Ne=U>=200&&U<300;if("json"===t.responseType&&"string"==typeof Ve){const et=Ve;Ve=Ve.replace(bt,"");try{Ve=""!==Ve?JSON.parse(Ve):null}catch(Be){Ve=et,Ne&&(Ne=!1,Ve={error:Be,text:Ve})}}Ne?(r.next(new Eu({body:Ve,headers:O,status:U,statusText:K,url:pe||void 0})),r.complete()):r.error(new qm({error:Ve,headers:O,status:U,statusText:K,url:pe||void 0}))},y=O=>{const{url:U}=d(),K=new qm({error:O,status:i.status||0,statusText:i.statusText||"Unknown Error",url:U||void 0});r.error(K)};let I=!1;const D=O=>{I||(r.next(d()),I=!0);let U={type:Yn.DownloadProgress,loaded:O.loaded};O.lengthComputable&&(U.total=O.total),"text"===t.responseType&&!!i.responseText&&(U.partialText=i.responseText),r.next(U)},R=O=>{let U={type:Yn.UploadProgress,loaded:O.loaded};O.lengthComputable&&(U.total=O.total),r.next(U)};return i.addEventListener("load",g),i.addEventListener("error",y),i.addEventListener("timeout",y),i.addEventListener("abort",y),t.reportProgress&&(i.addEventListener("progress",D),null!==a&&i.upload&&i.upload.addEventListener("progress",R)),i.send(a),r.next({type:Yn.Sent}),()=>{i.removeEventListener("error",y),i.removeEventListener("abort",y),i.removeEventListener("load",g),i.removeEventListener("timeout",y),t.reportProgress&&(i.removeEventListener("progress",D),null!==a&&i.upload&&i.upload.removeEventListener("progress",R)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Cn))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const xi=new h.OlP("XSRF_COOKIE_NAME"),Il=new h.OlP("XSRF_HEADER_NAME");class jc{}let Hc=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Fo(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ie),h.LFG(h.Lbi),h.LFG(xi))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),$c=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(jc),h.LFG(Il))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),mv=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(v,[]);this.chain=r.reduceRight((i,a)=>new zm(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Bc),h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),np=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:$c,useClass:p}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:xi,useValue:t.cookieName}:[],t.headerName?{provide:Il,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[$c,{provide:v,useExisting:$c,multi:!0},{provide:jc,useClass:Hc},{provide:xi,useValue:"XSRF-TOKEN"},{provide:Il,useValue:"X-XSRF-TOKEN"}]}),n})(),rp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[gv,{provide:Um,useClass:mv},Fn,{provide:Bc,useExisting:Fn}],imports:[[np.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();var jr=L(7579);class Us extends jr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var mh=L(4671),HS=L(9672);function Wm(n,e,t){n?(0,HS.f)(t,n,e):e()}function sp(n,e){const t=(0,Uc.m)(n)?n:()=>n,r=i=>i.error(t());return new In.y(e?i=>e.schedule(r,0,i):r)}const Km=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Zm=L(8189);function Ym(...n){return function fb(){return(0,Zm.J)(1)}()((0,Sn.D)(n,(0,zo.yG)(n)))}function bu(n){return new In.y(e=>{(0,an.Xf)(n()).subscribe(e)})}var Gc=L(515),yv=L(727);function pb(){return(0,hr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,yn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Qm extends In.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,hr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new yv.w0;const t=this.getSubject();e.add(this.source.subscribe((0,yn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=yv.w0.EMPTY)}return e}refCount(){return pb()(this)}}function Qr(n,e){return(0,hr.e)((t,r)=>{let i=null,a=0,u=!1;const d=()=>u&&!i&&r.complete();t.subscribe((0,yn.x)(r,g=>{null==i||i.unsubscribe();let y=0;const I=a++;(0,an.Xf)(n(g,I)).subscribe(i=(0,yn.x)(r,D=>r.next(e?e(g,D,I,y++):D),()=>{i=null,d()}))},()=>{u=!0,d()}))})}var Jm=L(5698);function op(...n){const e=(0,zo.yG)(n);return(0,hr.e)((t,r)=>{(e?Ym(n,t,e):Ym(n,t)).subscribe(r)})}function gb(n,e,t,r,i){return(a,u)=>{let d=t,g=e,y=0;a.subscribe((0,yn.x)(u,I=>{const D=y++;g=d?n(g,I,D):(d=!0,I),r&&u.next(g)},i&&(()=>{d&&u.next(g),u.complete()})))}}function Dl(n,e){return(0,hr.e)(gb(n,e,arguments.length>=2,!0))}function Sl(n){return(0,hr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,yn.x)(t,void 0,void 0,u=>{a=(0,an.Xf)(n(u,Sl(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function _h(n){return n<=0?()=>Gc.E:(0,hr.e)((e,t)=>{let r=[];e.subscribe((0,yn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function ap(n=mb){return(0,hr.e)((e,t)=>{let r=!1;e.subscribe((0,yn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function mb(){return new Km}function Xm(n){return(0,hr.e)((e,t)=>{let r=!1;e.subscribe((0,yn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Al(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ds((i,a)=>n(i,a,r)):mh.y,(0,Jm.q)(1),t?Xm(e):ap(()=>new Km))}var mi=L(8505);class Ua{constructor(e,t){this.id=e,this.url=t}}class vv extends Ua{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class lp extends Ua{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wv extends Ua{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ev extends Ua{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class yb extends Ua{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class TO extends Ua{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vb extends Ua{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qS extends Ua{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wb extends Ua{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Eb{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bb{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ra{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zS{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Cb{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WS{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ib{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Jt="primary";class KS{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qc(n){return new KS(n)}const Tb="ngNavigationCancelingError";function bv(n){const e=Error("NavigationCancelingError: "+n);return e[Tb]=!0,e}function kt(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const u=r[a],d=n[a];if(u.startsWith(":"))i[u.substring(1)]=d;else if(u!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ia(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Cv(n[i],e[i]))return!1;return!0}function Cv(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function up(n){return Array.prototype.concat.apply([],n)}function Io(n){return n.length>0?n[n.length-1]:null}function _i(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function To(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,Sn.D)(Promise.resolve(n)):Xe(n)}const Iv={exact:function Dv(n,e,t){if(!zc(n.segments,e.segments)||!yh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Dv(n.children[r],e.children[r],t))return!1;return!0},subset:cp},Tv={exact:function DO(n,e){return ia(n,e)},subset:function SO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Cv(n[t],e[t]))},ignored:()=>!0};function e_(n,e,t){return Iv[t.paths](n.root,e.root,t.matrixParams)&&Tv[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function cp(n,e,t){return dp(n,e,e.segments,t)}function dp(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!zc(i,t)||e.hasChildren()||!yh(i,t,r))}if(n.segments.length===t.length){if(!zc(n.segments,t)||!yh(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!cp(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(zc(n.segments,i)&&yh(n.segments,i,r)&&n.children[Jt])&&dp(n.children[Jt],e,a,r)}}function yh(n,e,t){return e.every((r,i)=>Tv[t](n[i].parameters,r.parameters))}class Rl{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qc(this.queryParams)),this._queryParamMap}toString(){return AO.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,_i(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return n_(this)}}class t_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qc(this.parameters)),this._parameterMap}toString(){return tA(this)}}function zc(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Sb{}class Sv{parse(e){const t=new Mv(e);return new Rl(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${r_(e.root,!0)}`,r=function RO(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${hp(t)}=${hp(i)}`).join("&"):`${hp(t)}=${hp(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function XS(n){return encodeURI(n)}(e.fragment)}`:""}`}}const AO=new Sv;function n_(n){return n.segments.map(e=>tA(e)).join("/")}function r_(n,e){if(!n.hasChildren())return n_(n);if(e){const t=n.children[Jt]?r_(n.children[Jt],!1):"",r=[];return _i(n.children,(i,a)=>{a!==Jt&&r.push(`${a}:${r_(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function JS(n,e){let t=[];return _i(n.children,(r,i)=>{i===Jt&&(t=t.concat(e(r,i)))}),_i(n.children,(r,i)=>{i!==Jt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Jt?[r_(n.children[Jt],!1)]:[`${i}:${r_(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Jt]?`${n_(n)}/${t[0]}`:`${n_(n)}/(${t.join("//")})`}}function Av(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hp(n){return Av(n).replace(/%3B/gi,";")}function fp(n){return Av(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xv(n){return decodeURIComponent(n)}function eA(n){return xv(n.replace(/\+/g,"%20"))}function tA(n){return`${fp(n.path)}${function xO(n){return Object.keys(n).map(e=>`;${fp(e)}=${fp(n[e])}`).join("")}(n.parameters)}`}const MO=/^[^\/()?;=#]+/;function Rv(n){const e=n.match(MO);return e?e[0]:""}const NO=/^[^=?&#]+/,OO=/^[^&#]+/;class Mv{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Jt]=new Xt(e,t)),r}parseSegment(){const e=Rv(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new t_(xv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Rv(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Rv(this.remaining);i&&(r=i,this.capture(r))}e[xv(t)]=xv(r)}parseQueryParam(e){const t=function PO(n){const e=n.match(NO);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function Cu(n){const e=n.match(OO);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=eA(t),a=eA(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Rv(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Jt);const u=this.parseChildren();t[a]=1===Object.keys(u).length?u[Jt]:new Xt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Ab{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=i_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=i_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=pp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return pp(e,this._root).map(t=>t.value)}}function i_(n,e){if(n===e.value)return e;for(const t of e.children){const r=i_(n,t);if(r)return r}return null}function pp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=pp(n,t);if(r.length)return r.unshift(e),r}return[]}class Ba{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Iu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class xb extends Ab{constructor(e,t){super(e),this.snapshot=t,Nv(this,e)}toString(){return this.snapshot.toString()}}function Ml(n,e){const t=function Rb(n,e){const u=new gp([],{},{},"",{},Jt,e,null,n.root,-1,{});return new Mb("",new Ba(u,[]))}(n,e),r=new Us([new t_("",{})]),i=new Us({}),a=new Us({}),u=new Us({}),d=new Us(""),g=new Tu(r,i,u,d,a,Jt,e,t.root);return g.snapshot=t.root,new xb(new Ba(g,[]),t)}class Tu{constructor(e,t,r,i,a,u,d,g){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=d,this._futureSnapshot=g}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,mt.U)(e=>qc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,mt.U)(e=>qc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function s_(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function nA(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class gp{constructor(e,t,r,i,a,u,d,g,y,I,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=u,this.component=d,this.routeConfig=g,this._urlSegment=y,this._lastPathIndex=I,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Mb extends Ab{constructor(e,t){super(t),this.url=e,Nv(this,t)}toString(){return vh(this._root)}}function Nv(n,e){e.value._routerState=n,e.children.forEach(t=>Nv(n,t))}function vh(n){const e=n.children.length>0?` { ${n.children.map(vh).join(", ")} } `:"";return`${n.value}${e}`}function Du(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ia(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ia(e.params,t.params)||n.params.next(t.params),function Db(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ia(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ia(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function mp(n,e){const t=ia(n.params,e.params)&&function QS(n,e){return zc(n,e)&&n.every((t,r)=>ia(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||mp(n.parent,e.parent))}function Nl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Eh(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Nl(n,r,i);return Nl(n,r)})}(n,e,t);return new Ba(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const u=a.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(d=>Nl(n,d)),u}}const r=function rA(n){return new Tu(new Us(n.url),new Us(n.params),new Us(n.queryParams),new Us(n.fragment),new Us(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Nl(n,a));return new Ba(r,i)}}function _p(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Wc(n){return"object"==typeof n&&null!=n&&n.outlets}function yp(n,e,t,r,i){let a={};if(r&&_i(r,(d,g)=>{a[g]=Array.isArray(d)?d.map(y=>`${y}`):`${d}`}),n===e)return new Rl(t,a,i);const u=Pv(n,e,t);return new Rl(u,a,i)}function Pv(n,e,t){const r={};return _i(n.children,(i,a)=>{r[a]=i===e?t:Pv(i,e,t)}),new Xt(n.segments,r)}class vp{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&_p(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Wc);if(i&&i!==Io(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class o_{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function kb(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return wp(n,e,t);const r=function sA(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const u=n.segments[i],d=t[r];if(Wc(d))break;const g=`${d}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===g)break;if(g&&y&&"object"==typeof y&&void 0===y.outlets){if(!Lb(g,y,u))return a;r+=2}else{if(!Lb(g,{},u))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Xt(n.segments.slice(0,r.pathIndex),{});return a.children[Jt]=new Xt(n.segments.slice(r.pathIndex),n.children),wp(a,0,i)}return r.match&&0===i.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?Ov(n,e,t):r.match?wp(n,0,i):Ov(n,e,t)}function wp(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const r=function Ob(n){return Wc(n[0])?n[0].outlets:{[Jt]:n}}(t),i={};return _i(r,(a,u)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[u]=kb(n.children[u],e,a))}),_i(n.children,(a,u)=>{void 0===r[u]&&(i[u]=a)}),new Xt(n.segments,i)}}function Ov(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Wc(a)){const g=Bs(a.outlets);return new Xt(r,g)}if(0===i&&_p(t[0])){r.push(new t_(n.segments[e].path,Fb(t[0]))),i++;continue}const u=Wc(a)?a.outlets[Jt]:`${a}`,d=i<t.length-1?t[i+1]:null;u&&d&&_p(d)?(r.push(new t_(u,Fb(d))),i+=2):(r.push(new t_(u,{})),i++)}return new Xt(r,{})}function Bs(n){const e={};return _i(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ov(new Xt([],{}),0,t))}),e}function Fb(n){const e={};return _i(n,(t,r)=>e[r]=`${t}`),e}function Lb(n,e,t){return n==t.path&&ia(e,t.parameters)}class LO{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Du(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Iu(t);e.children.forEach(a=>{const u=a.value.outlet;this.deactivateRoutes(a,i[u],r),delete i[u]}),_i(i,(a,u)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Iu(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);if(r&&r.outlet){const u=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Iu(e);for(const u of Object.keys(a))this.deactivateRouteAndItsChildren(a[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Iu(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new WS(a.value.snapshot))}),e.children.length&&this.forwardEvent(new zS(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Du(i),i===a)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(d.contexts),u.attachRef=d.componentRef,u.route=d.route.value,u.outlet&&u.outlet.attach(d.componentRef,d.route.value),Du(d.route.value),this.activateChildRoutes(e,null,u.children)}else{const d=function Vb(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),g=d?d.module.componentFactoryResolver:null;u.attachRef=null,u.route=i,u.resolver=g,u.outlet&&u.outlet.activateWith(i,g),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class Ub{constructor(e,t){this.routes=e,this.module=t}}function Su(n){return"function"==typeof n}function Au(n){return n instanceof Rl}const Ep=Symbol("INITIAL_VALUE");function bh(){return Qr(n=>function $S(...n){const e=(0,zo.yG)(n),t=(0,zo.jO)(n),{args:r,keys:i}=qo(n);if(0===r.length)return(0,Sn.D)([],e);const a=new In.y(function hb(n,e,t=mh.y){return r=>{Wm(e,()=>{const{length:i}=n,a=new Array(i);let u=i,d=i;for(let g=0;g<i;g++)Wm(e,()=>{const y=(0,Sn.D)(n[g],e);let I=!1;y.subscribe((0,yn.x)(r,D=>{a[g]=D,I||(I=!0,d--),d||r.next(t(a.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>cu(i,u):mh.y));return t?a.pipe(wc(t)):a}(n.map(e=>e.pipe((0,Jm.q)(1),op(Ep)))).pipe(Dl((e,t)=>{let r=!1;return t.reduce((i,a,u)=>i!==Ep?i:(a===Ep&&(r=!0),r||!1!==a&&u!==t.length-1&&!Au(a)?i:a),e)},Ep),ds(e=>e!==Ep),(0,mt.U)(e=>Au(e)?e:!0===e),(0,Jm.q)(1)))}class uA{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new bp,this.attachRef=null}}class bp{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new uA,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let a_=(()=>{class n{constructor(t,r,i,a,u){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=a||Jt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,g=new jb(t,d,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,g),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(bp),h.Y36(h.s_b),h.Y36(h._Vd),h.$8M("name"),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class jb{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Tu?this.route:e===bp?this.childContexts:this.parent.get(e,t)}}let Hb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},directives:[a_],encapsulation:2}),n})();function sa(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Fv(r,cA(e,r))}}function Fv(n,e){n.children&&sa(n.children,e)}function cA(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Lv(n){const e=n.children&&n.children.map(Lv),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Jt&&(t.component=Hb),t}function oa(n){return n.outlet||Jt}function Vv(n,e){const t=n.filter(r=>oa(r)===e);return t.push(...n.filter(r=>oa(r)!==e)),t}const $b={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function l_(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},$b):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||kt)(t,n,e);if(!a)return Object.assign({},$b);const u={};_i(a.posParams,(g,y)=>{u[y]=g.path});const d=a.consumed.length>0?Object.assign(Object.assign({},u),a.consumed[a.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:d,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function u_(n,e,t,r,i="corrected"){if(t.length>0&&function hA(n,e,t){return t.some(r=>Ch(n,e,r)&&oa(r)!==Jt)}(n,t,r)){const u=new Xt(e,function dA(n,e,t,r){const i={};i[Jt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&oa(a)!==Jt){const u=new Xt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[oa(a)]=u}return i}(n,e,r,new Xt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function c_(n,e,t){return t.some(r=>Ch(n,e,r))}(n,t,r)){const u=new Xt(n.segments,function Uv(n,e,t,r,i,a){const u={};for(const d of r)if(Ch(n,t,d)&&!i[oa(d)]){const g=new Xt([],{});g._sourceSegment=n,g._segmentIndexShift="legacy"===a?n.segments.length:e.length,u[oa(d)]=g}return Object.assign(Object.assign({},i),u)}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const a=new Xt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Ch(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Gb(n,e,t,r){return!!(oa(n)===r||r!==Jt&&Ch(e,t,n))&&("**"===n.path||l_(e,n,t).matched)}function d_(n,e,t){return 0===e.length&&!n.children[t]}class Ih{constructor(e){this.segmentGroup=e||null}}class Bv{constructor(e){this.urlTree=e}}function Cp(n){return sp(new Ih(n))}function qb(n){return sp(new Bv(n))}class zb{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(h.h0i)}apply(){const e=u_(this.urlTree.root,[],[],this.config).segmentGroup,t=new Xt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Jt).pipe((0,mt.U)(a=>this.createUrlTree(h_(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Sl(a=>{if(a instanceof Bv)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Ih?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Jt).pipe((0,mt.U)(i=>this.createUrlTree(h_(i),e.queryParams,e.fragment))).pipe(Sl(i=>{throw i instanceof Ih?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Xt([],{[Jt]:e}):e;return new Rl(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,mt.U)(a=>new Xt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Sn.D)(i).pipe(Dr(a=>{const u=r.children[a],d=Vv(t,a);return this.expandSegmentGroup(e,d,u,a).pipe((0,mt.U)(g=>({segment:g,outlet:a})))}),Dl((a,u)=>(a[u.outlet]=u.segment,a),{}),function _b(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ds((i,a)=>n(i,a,r)):mh.y,_h(1),t?Xm(e):ap(()=>new Km))}())}expandSegment(e,t,r,i,a,u){return(0,Sn.D)(r).pipe(Dr(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,a,u).pipe(Sl(y=>{if(y instanceof Ih)return Xe(null);throw y}))),Al(d=>!!d),Sl((d,g)=>{if(d instanceof Km||"EmptyError"===d.name)return d_(t,i,a)?Xe(new Xt([],{})):Cp(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,a,u,d){return Gb(i,t,a,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,u):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u):Cp(t):Cp(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?qb(a):this.lineralizeSegments(r,a).pipe((0,Zn.z)(u=>{const d=new Xt(u,{});return this.expandSegment(e,d,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,u){const{matched:d,consumedSegments:g,remainingSegments:y,positionalParamSegments:I}=l_(t,i,a);if(!d)return Cp(t);const D=this.applyRedirectCommands(g,i.redirectTo,I);return i.redirectTo.startsWith("/")?qb(D):this.lineralizeSegments(i,D).pipe((0,Zn.z)(R=>this.expandSegment(e,t,r,R.concat(y),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?Xe(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,mt.U)(D=>(r._loadedConfig=D,new Xt(i,{})))):Xe(new Xt(i,{}));const{matched:u,consumedSegments:d,remainingSegments:g}=l_(t,r,i);return u?this.getChildConfig(e,r,i).pipe((0,Zn.z)(I=>{const D=I.module,R=I.routes,{segmentGroup:O,slicedSegments:U}=u_(t,d,g,R),K=new Xt(O.segments,O.children);if(0===U.length&&K.hasChildren())return this.expandChildren(D,R,K).pipe((0,mt.U)(et=>new Xt(d,et)));if(0===R.length&&0===U.length)return Xe(new Xt(d,{}));const pe=oa(r)===a;return this.expandSegment(D,K,R,U,pe?Jt:a,!0).pipe((0,mt.U)(Ne=>new Xt(d.concat(Ne.segments),Ne.children)))})):Cp(t)}getChildConfig(e,t,r){return t.children?Xe(new Ub(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Xe(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Zn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,mt.U)(a=>(t._loadedConfig=a,a))):function VO(n){return sp(bv(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):Xe(new Ub([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?Xe(i.map(u=>{const d=e.get(u);let g;if(function oA(n){return n&&Su(n.canLoad)}(d))g=d.canLoad(t,r);else{if(!Su(d))throw new Error("Invalid CanLoad guard");g=d(t,r)}return To(g)})).pipe(bh(),(0,mi.b)(u=>{if(!Au(u))return;const d=bv(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw d.url=u,d}),(0,mt.U)(u=>!0===u)):Xe(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Xe(r);if(i.numberOfChildren>1||!i.children[Jt])return sp(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Jt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Rl(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return _i(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[a]=t[d]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let u={};return _i(t.children,(d,g)=>{u[g]=this.createSegmentGroup(e,d,r,i)}),new Xt(a,u)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function h_(n){const e={};for(const r of Object.keys(n.children)){const a=h_(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function Wb(n){if(1===n.numberOfChildren&&n.children[Jt]){const e=n.children[Jt];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}class Hv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Do{constructor(e,t){this.component=e,this.route=t}}function f_(n,e,t){const r=n._root;return Kc(r,e?e._root:null,t,[r.value])}function p_(n,e,t){const r=function UO(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Kc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Iu(e);return n.children.forEach(u=>{(function Zb(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,u=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(u&&a.routeConfig===u.routeConfig){const g=function $v(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!zc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!zc(n.url,e.url)||!ia(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mp(n,e)||!ia(n.queryParams,e.queryParams);default:return!mp(n,e)}}(u,a,a.routeConfig.runGuardsAndResolvers);g?i.canActivateChecks.push(new Hv(r)):(a.data=u.data,a._resolvedData=u._resolvedData),Kc(n,e,a.component?d?d.children:null:t,r,i),g&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new Do(d.outlet.component,u))}else u&&Pl(e,d,i),i.canActivateChecks.push(new Hv(r)),Kc(n,null,a.component?d?d.children:null:t,r,i)})(u,a[u.value.outlet],t,r.concat([u.value]),i),delete a[u.value.outlet]}),_i(a,(u,d)=>Pl(u,t.getContext(d),i)),i}function Pl(n,e,t){const r=Iu(n),i=n.value;_i(r,(a,u)=>{Pl(a,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Do(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class yA{}function zv(n){return new In.y(e=>e.error(n))}class Xb{constructor(e,t,r,i,a,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=u}recognize(){const e=u_(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Jt);if(null===t)return null;const r=new gp([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Jt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ba(r,t),a=new Mb(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=s_(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const u=t.children[a],d=Vv(e,a),g=this.processSegmentGroup(d,u,a);if(null===g)return null;r.push(...g)}const i=eC(r);return function vA(n){n.sort((e,t)=>e.value.outlet===Jt?-1:t.value.outlet===Jt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const u=this.processSegmentAgainstRoute(a,t,r,i);if(null!==u)return u}return d_(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Gb(e,t,r,i))return null;let a,u=[],d=[];if("**"===e.path){const O=r.length>0?Io(r).parameters:{};a=new gp(r,O,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,So(e),oa(e),e.component,e,tC(t),nC(t)+r.length,g_(e))}else{const O=l_(t,e,r);if(!O.matched)return null;u=O.consumedSegments,d=O.remainingSegments,a=new gp(u,O.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,So(e),oa(e),e.component,e,tC(t),nC(t)+u.length,g_(e))}const g=function wA(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:y,slicedSegments:I}=u_(t,u,d,g.filter(O=>void 0===O.redirectTo),this.relativeLinkResolution);if(0===I.length&&y.hasChildren()){const O=this.processChildren(g,y);return null===O?null:[new Ba(a,O)]}if(0===g.length&&0===I.length)return[new Ba(a,[])];const D=oa(e)===i,R=this.processSegment(g,y,I,D?Jt:i);return null===R?null:[new Ba(a,R)]}}function Dh(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function eC(n){const e=[],t=new Set;for(const r of n){if(!Dh(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=eC(r.children);e.push(new Ba(r.value,i))}return e.filter(r=>!t.has(r))}function tC(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function nC(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function So(n){return n.data||{}}function g_(n){return n.resolve||{}}function aC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Wv(n){return Qr(e=>{const t=n(e);return t?(0,Sn.D)(t).pipe((0,mt.U)(()=>e)):Xe(e)})}class jO extends class lC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const m_=new h.OlP("ROUTES");class uC{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,mt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=a.create(e);return new Ub(up(u.injector.get(m_,void 0,h.XFs.Self|h.XFs.Optional)).map(Lv),u)}),Sl(a=>{throw t._loader$=void 0,a}));return t._loader$=new Qm(i,()=>new jr.x).pipe(pb()),t._loader$}loadModuleFactory(e){return To(e()).pipe((0,Zn.z)(t=>t instanceof h.YKP?Xe(t):(0,Sn.D)(this.compiler.compileModuleAsync(t))))}}class HO{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function $O(n){throw n}function Kv(n,e,t){return e.parse("/")}function cC(n,e){return Xe(null)}const dC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let hs=(()=>{class n{constructor(t,r,i,a,u,d,g){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=g,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new jr.x,this.errorHandler=$O,this.malformedUriErrorHandler=Kv,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:cC,afterPreactivation:cC},this.urlHandlingStrategy=new HO,this.routeReuseStrategy=new jO,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(h.h0i),this.console=u.get(h.c2e);const D=u.get(h.R0b);this.isNgZoneEnabled=D instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(g),this.currentUrlTree=function xl(){return new Rl(new Xt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new uC(u,d,R=>this.triggerEvent(new Eb(R)),R=>this.triggerEvent(new bb(R))),this.routerState=Ml(this.currentUrlTree,this.rootComponentType),this.transitions=new Us({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ds(i=>0!==i.id),(0,mt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Qr(i=>{let a=!1,u=!1;return Xe(i).pipe((0,mi.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Qr(d=>{const g=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==g||g!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return IA(d.source)&&(this.browserUrlTree=d.extractedUrl),Xe(d).pipe(Qr(D=>{const R=this.transitions.getValue();return r.next(new vv(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),R!==this.transitions.getValue()?Gc.E:Promise.resolve(D)}),function Kb(n,e,t,r){return Qr(i=>function fA(n,e,t,r,i){return new zb(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,mt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,mi.b)(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function rC(n,e,t,r,i){return(0,Zn.z)(a=>function Th(n,e,t,r,i="emptyOnly",a="legacy"){try{const u=new Xb(n,e,t,r,i,a).recognize();return null===u?zv(new yA):Xe(u)}catch(u){return zv(u)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,mt.U)(u=>Object.assign(Object.assign({},a),{targetSnapshot:u}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,mi.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const O=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(O,D)}this.browserUrlTree=D.urlAfterRedirects}const R=new yb(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(R)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R,extractedUrl:O,source:U,restoredState:K,extras:pe}=d,Ve=new vv(R,this.serializeUrl(O),U,K);r.next(Ve);const Ne=Ml(O,this.rootComponentType).snapshot;return Xe(Object.assign(Object.assign({},d),{targetSnapshot:Ne,urlAfterRedirects:O,extras:Object.assign(Object.assign({},pe),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),Gc.E}),Wv(d=>{const{targetSnapshot:g,id:y,extractedUrl:I,rawUrl:D,extras:{skipLocationChange:R,replaceUrl:O}}=d;return this.hooks.beforePreactivation(g,{navigationId:y,appliedUrlTree:I,rawUrlTree:D,skipLocationChange:!!R,replaceUrl:!!O})}),(0,mi.b)(d=>{const g=new TO(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(g)}),(0,mt.U)(d=>Object.assign(Object.assign({},d),{guards:f_(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function gA(n,e){return(0,Zn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:u}}=t;return 0===u.length&&0===a.length?Xe(Object.assign(Object.assign({},t),{guardsResult:!0})):function Gv(n,e,t,r){return(0,Sn.D)(n).pipe((0,Zn.z)(i=>function _A(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?Xe(a.map(d=>{const g=p_(d,e,i);let y;if(function Bb(n){return n&&Su(n.canDeactivate)}(g))y=To(g.canDeactivate(n,e,t,r));else{if(!Su(g))throw new Error("Invalid CanDeactivate guard");y=To(g(n,e,t,r))}return y.pipe(Al())})).pipe(bh()):Xe(!0)}(i.component,i.route,t,e,r)),Al(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Zn.z)(d=>d&&function kv(n){return"boolean"==typeof n}(d)?function Yb(n,e,t,r){return(0,Sn.D)(e).pipe(Dr(i=>Ym(function Jb(n,e){return null!==n&&e&&e(new ra(n)),Xe(!0)}(i.route.parent,r),function Qb(n,e){return null!==n&&e&&e(new Cb(n)),Xe(!0)}(i.route,r),function qv(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(u=>function pA(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>bu(()=>Xe(u.guards.map(g=>{const y=p_(g,u.node,t);let I;if(function lA(n){return n&&Su(n.canActivateChild)}(y))I=To(y.canActivateChild(r,n));else{if(!Su(y))throw new Error("Invalid CanActivateChild guard");I=To(y(r,n))}return I.pipe(Al())})).pipe(bh())));return Xe(a).pipe(bh())}(n,i.path,t),function mA(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Xe(!0);const i=r.map(a=>bu(()=>{const u=p_(a,e,t);let d;if(function aA(n){return n&&Su(n.canActivate)}(u))d=To(u.canActivate(e,n));else{if(!Su(u))throw new Error("Invalid CanActivate guard");d=To(u(e,n))}return d.pipe(Al())}));return Xe(i).pipe(bh())}(n,i.route,t))),Al(i=>!0!==i,!0))}(r,a,n,e):Xe(d)),(0,mt.U)(d=>Object.assign(Object.assign({},t),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,mi.b)(d=>{if(Au(d.guardsResult)){const y=bv(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw y.url=d.guardsResult,y}const g=new vb(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(g)}),ds(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),Wv(d=>{if(d.guards.canActivateChecks.length)return Xe(d).pipe((0,mi.b)(g=>{const y=new qS(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}),Qr(g=>{let y=!1;return Xe(g).pipe(function iC(n,e){return(0,Zn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Xe(t);let a=0;return(0,Sn.D)(i).pipe(Dr(u=>function sC(n,e,t,r){return function oC(n,e,t,r){const i=aC(n);if(0===i.length)return Xe({});const a={};return(0,Sn.D)(i).pipe((0,Zn.z)(u=>function EA(n,e,t,r){const i=p_(n,e,r);return To(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe((0,mi.b)(d=>{a[u]=d}))),_h(1),(0,Zn.z)(()=>aC(a).length===i.length?Xe(a):Gc.E))}(n._resolve,n,e,r).pipe((0,mt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),s_(n,t).resolve),null)))}(u.route,r,n,e)),(0,mi.b)(()=>a++),_h(1),(0,Zn.z)(u=>a===i.length?Xe(t):Gc.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,mi.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(g),this.cancelNavigationTransition(g,"At least one route resolver didn't emit any value."))}}))}),(0,mi.b)(g=>{const y=new wb(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(y)}))}),Wv(d=>{const{targetSnapshot:g,id:y,extractedUrl:I,rawUrl:D,extras:{skipLocationChange:R,replaceUrl:O}}=d;return this.hooks.afterPreactivation(g,{navigationId:y,appliedUrlTree:I,rawUrlTree:D,skipLocationChange:!!R,replaceUrl:!!O})}),(0,mt.U)(d=>{const g=function wh(n,e,t){const r=Nl(n,e._root,t?t._root:void 0);return new xb(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:g})}),(0,mi.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,mt.U)(r=>(new LO(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,mi.b)({next(){a=!0},complete(){a=!0}}),function GS(n){return(0,hr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var d;a||u||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===i.id&&(this.currentNavigation=null)}),Sl(d=>{if(u=!0,function ZS(n){return n&&n[Tb]}(d)){const g=Au(d.url);g||(this.navigated=!0,this.restoreHistory(i,!0));const y=new wv(i.id,this.serializeUrl(i.extractedUrl),d.message);r.next(y),g?setTimeout(()=>{const I=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||IA(i.source)};this.scheduleNavigation(I,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const g=new Ev(i.id,this.serializeUrl(i.extractedUrl),d);r.next(g);try{i.resolve(this.errorHandler(d))}catch(y){i.reject(y)}}return Gc.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},u=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(u){const g=Object.assign({},u);delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(a.state=g)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){sa(t),this.config=t.map(Lv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:u,queryParamsHandling:d,preserveFragment:g}=r,y=i||this.routerState.root,I=g?this.currentUrlTree.fragment:u;let D=null;switch(d){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=a||null}return null!==D&&(D=this.removeEmptyProps(D)),function Nb(n,e,t,r,i){if(0===t.length)return yp(e.root,e.root,e.root,r,i);const a=function iA(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new vp(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,u)=>{if("object"==typeof a&&null!=a){if(a.outlets){const d={};return _i(a.outlets,(g,y)=>{d[y]="string"==typeof g?g.split("/"):g}),[...i,{outlets:d}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===u?(a.split("/").forEach((d,g)=>{0==g&&"."===d||(0==g&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,a]},[]);return new vp(t,e,r)}(t);if(a.toRoot())return yp(e.root,e.root,new Xt([],{}),r,i);const u=function kO(n,e,t){if(n.isAbsolute)return new o_(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new o_(a,a===e.root,0)}const r=_p(n.commands[0])?0:1;return function Pb(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new o_(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),d=u.processChildren?wp(u.segmentGroup,u.index,a.commands):kb(u.segmentGroup,u.index,a.commands);return yp(e.root,u.segmentGroup,d,r,i)}(y,this.currentUrlTree,t,D,null!=I?I:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Au(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function aa(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},dC):!1===r?Object.assign({},hC):r,Au(t))return e_(this.currentUrlTree,t,i);const a=this.parseUrl(t);return e_(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new lp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,u){var d,g;if(this.disposed)return Promise.resolve(!1);let y,I,D;u?(y=u.resolve,I=u.reject,D=u.promise):D=new Promise((U,K)=>{y=U,I=K});const R=++this.navigationId;let O;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),O=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(d=this.browserPageId)&&void 0!==d?d:0:(null!==(g=this.browserPageId)&&void 0!==g?g:0)+1):O=0,this.setTransition({id:R,targetPageId:O,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:y,reject:I,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(U=>Promise.reject(U))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===u?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new wv(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function IA(n){return"imperative"!==n}let xu=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new jr.x,this.subscription=t.events.subscribe(a=>{a instanceof lp&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,u){if(0!==t||r||i||a||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const d={skipLocationChange:Zc(this.skipLocationChange),replaceUrl:Zc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,d),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Zc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(hs),h.Y36(Tu),h.Y36(ge))},n.\u0275dir=h.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&h.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&h.uIk("target",r.target)("href",r.href,h.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[h.TTD]}),n})();function Zc(n){return""===n||!!n}class DA{}class __{preload(e,t){return Xe(null)}}let mC=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new uC(i,r,g=>t.triggerEvent(new Eb(g)),g=>t.triggerEvent(new bb(g)))}setUpPreloading(){this.subscription=this.router.events.pipe(ds(t=>t instanceof lp),Dr(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(h.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const u=a._loadedConfig;i.push(this.processRoutes(u.module,u.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,Sn.D)(i).pipe((0,Zm.J)(),(0,mt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?Xe(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Zn.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(hs),h.LFG(h.Sil),h.LFG(h.zs3),h.LFG(DA))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ip=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof lp&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ib&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ib(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Yc=new h.OlP("ROUTER_CONFIGURATION"),_C=new h.OlP("ROUTER_FORROOT_GUARD"),SA=[Ee,{provide:Sb,useClass:Sv},{provide:hs,useFactory:function RA(n,e,t,r,i,a,u={},d,g){const y=new hs(null,n,e,t,r,i,up(a));return d&&(y.urlHandlingStrategy=d),g&&(y.routeReuseStrategy=g),function MA(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,y),u.enableTracing&&y.events.subscribe(I=>{var D,R;null===(D=console.group)||void 0===D||D.call(console,`Router Event: ${I.constructor.name}`),console.log(I.toString()),console.log(I),null===(R=console.groupEnd)||void 0===R||R.call(console)}),y},deps:[Sb,bp,Ee,h.zs3,h.Sil,m_,Yc,[class CA{},new h.FiY],[class bA{},new h.FiY]]},bp,{provide:Tu,useFactory:function Zv(n){return n.routerState.root},deps:[hs]},mC,__,class gC{preload(e,t){return t().pipe(Sl(()=>Xe(null)))}},{provide:Yc,useValue:{enableTracing:!1}}];function AA(){return new h.PXZ("Router",hs)}let yC=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[SA,Ah(t),{provide:_C,useFactory:xA,deps:[[hs,new h.FiY,new h.tp0]]},{provide:Yc,useValue:r||{}},{provide:ge,useFactory:Sh,deps:[fe,[new h.tBr(tt),new h.FiY],Yc]},{provide:Ip,useFactory:y_,deps:[hs,Jl,Yc]},{provide:DA,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:__},{provide:h.PXZ,multi:!0,useFactory:AA},[Ao,{provide:h.ip1,multi:!0,useFactory:Tp,deps:[Ao]},{provide:Ru,useFactory:Ri,deps:[Ao]},{provide:h.tb,multi:!0,useExisting:Ru}]]}}static forChild(t){return{ngModule:n,providers:[Ah(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(_C,8),h.LFG(hs,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function y_(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ip(n,e,t)}function Sh(n,e,t={}){return t.useHash?new Se(n,e):new Ze(n,e)}function xA(n){return"guarded"}function Ah(n){return[{provide:h.deG,multi:!0,useValue:n},{provide:m_,multi:!0,useValue:n}]}let Ao=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new jr.x}appInitializer(){return this.injector.get(q,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(d=>r=d),a=this.injector.get(hs),u=this.injector.get(Yc);return"disabled"===u.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?Xe(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Yc),i=this.injector.get(mC),a=this.injector.get(Ip),u=this.injector.get(hs),d=this.injector.get(h.z2F);t===d.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),i.setUpPreloading(),a.init(),u.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Tp(n){return n.appInitializer.bind(n)}function Ri(n){return n.bootstrapListener.bind(n)}const Ru=new h.OlP("Router Initializer");var Dp=L(4986),Mu=L(6451),Qc=L(3099);function Jc(n,e=mh.y){return n=null!=n?n:xh,(0,hr.e)((t,r)=>{let i,a=!0;t.subscribe((0,yn.x)(r,u=>{const d=e(u);(a||!n(i,d))&&(a=!1,i=d,r.next(u))}))})}function xh(n,e){return n===e}var Rh=L(5032),tn=L(5813),Qn=L(2011),w_=(L(4087),L(3942)),xo=L(4859),ve=L(5861),Mi=L(9681),k=L(2090),Ro=L(1877);const Yv="@firebase/database";let Jv="";function Xv(n){Jv=n}class PA{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class vC{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const ew=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new PA(e)}}catch(e){}return new vC},Xc=ew("localStorage"),tw=ew("sessionStorage"),ed=new Ro.Yd("@firebase/database"),wC=function(){let n=1;return function(){return n++}}(),nw=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},Sp=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Sp.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let td=null,OA=!0;const EC=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(ed.logLevel=Ro.in.VERBOSE,td=ed.log.bind(ed),e&&tw.set("logging_enabled",!0)):"function"==typeof n?td=n:(td=null,tw.remove("logging_enabled"))},Sr=function(...n){if(!0===OA&&(OA=!1,null===td&&!0===tw.get("logging_enabled")&&EC(!0)),td){const e=Sp.apply(null,n);td(e)}},nd=function(n){return function(...e){Sr(n,...e)}},rw=function(...n){const e="FIREBASE INTERNAL ERROR: "+Sp(...n);ed.error(e)},Ol=function(...n){const e=`FIREBASE FATAL ERROR: ${Sp(...n)}`;throw ed.error(e),new Error(e)},fs=function(...n){const e="FIREBASE WARNING: "+Sp(...n);ed.warn(e)},E_=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Nu="[MIN_NAME]",ja="[MAX_NAME]",Mo=function(n,e){if(n===e)return 0;if(n===Nu||e===ja)return-1;if(e===Nu||n===ja)return 1;{const t=Ap(n),r=Ap(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},kA=function(n,e){return n===e?0:n<e?-1:1},Ph=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},iw=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=iw(n[e[r]]);return t+="}",t},sw=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const CC=function(n){(0,k.hu)(!E_(n),"Invalid JSON number");const r=1023;let i,a,u,d,g;0===n?(a=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=d+r,u=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(g=52;g;g-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(g=11;g;g-=1)y.push(a%2?1:0),a=Math.floor(a/2);y.push(i?1:0),y.reverse();const I=y.join("");let D="";for(g=0;g<64;g+=8){let R=parseInt(I.substr(g,8),2).toString(16);1===R.length&&(R="0"+R),D+=R}return D.toLowerCase()},VA=new RegExp("^-?(0*)\\d{1,10}$"),TC=-2147483648,ow=2147483647,Ap=function(n){if(VA.test(n)){const e=Number(n);if(e>=TC&&e<=ow)return e}return null},Oh=function(n){try{n()}catch(e){setTimeout(()=>{throw fs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},kh=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class aw{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){fs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class zO{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Sr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',fs(e)}}let rd=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const I_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,D_="websocket",BA="long_polling";class uw{constructor(e,t,r,i,a=!1,u="",d=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Xc.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Xc.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function xp(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===D_)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==BA)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function S_(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return yr(t,(a,u)=>{i.push(a+"="+u)}),r+i.join("&")}class AC{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const A_={},Rp={};function x_(n){const e=n.toString();return A_[e]||(A_[e]=new AC),A_[e]}class cw{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Oh(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class id{constructor(e,t,r,i,a,u,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nd(e),this.stats_=x_(t),this.urlFn=g=>(this.appCheckToken&&(g.ac=this.appCheckToken),xp(t,BA,g))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new cw(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new N_((...a)=>{const[u,d,g,y,I]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=d,this.password=g;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&I_.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){id.forceAllow_=!0}static forceDisallow(){id.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!id.forceAllow_&&(id.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=sw(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class N_{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=wC(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=N_.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(d){Sr("frame writing exception"),d.stack&&Sr(d.stack),Sr(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Sr("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Sr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Mp=null;"undefined"!=typeof MozWebSocket?Mp=MozWebSocket:"undefined"!=typeof WebSocket&&(Mp=WebSocket);let Vh=(()=>{class n{constructor(t,r,i,a,u,d,g){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nd(this.connId),this.stats_=x_(r),this.connURL=n.connectionURL_(r,d,g,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const u={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&I_.test(location.hostname)&&(u.r="f"),r&&(u.s=r),i&&(u.ls=i),a&&(u.ac=a),xp(t,D_,u)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Xc.set("previous_websocket_failure",!0);try{if((0,k.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${Jv}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,d=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;d&&(a.proxy={origin:d}),this.mySock=new Mp(this.connURL,[],a)}else this.mySock=new Mp(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Mp&&!n.forceDisallow_}static previouslyFailed(){return Xc.isInMemoryStorage||!0===Xc.get("previous_websocket_failure")}markConnectionHealthy(){Xc.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=sw(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class gw{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[id,Vh]}initTransports_(e){const t=Vh&&Vh.isAvailable();let r=t&&!Vh.previouslyFailed();if(e.webSocketOnly&&(t||fs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Vh];else{const i=this.transports_=[];for(const a of gw.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class WA{constructor(e,t,r,i,a,u,d,g,y,I){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=d,this.onDisconnect_=g,this.onKill_=y,this.lastSessionId=I,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nd("c:"+this.id+":"),this.transportManager_=new gw(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=kh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ph("t",e),r=Ph("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ph("t",e),r=Ph("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ph("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?rw("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):rw("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&fs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),kh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):kh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Xc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class O_{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class k_{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class js extends k_{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new js}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Kt{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Ht(){return new Kt("")}function xt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function kl(n){return n.pieces_.length-n.pieceNum_}function An(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Kt(n.pieces_,e)}function vw(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Np(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function zC(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Kt(e,0)}function Ln(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Kt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Kt(t,0)}function Lt(n){return n.pieceNum_>=n.pieces_.length}function Ki(n,e){const t=xt(n),r=xt(e);if(null===t)return e;if(t===r)return Ki(An(n),An(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function WC(n,e){const t=Np(n,0),r=Np(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Mo(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function ww(n,e){if(kl(n)!==kl(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Hs(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(kl(n)>kl(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class KC{constructor(e,t){this.errorPrefix_=t,this.parts_=Np(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);Ew(this)}}function Ew(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Pu(n))}function Pu(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Pp extends k_{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Pp}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ou=1e3;let V_,ku=(()=>{class n extends O_{constructor(t,r,i,a,u,d,g,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=d,this.appCheckTokenProvider_=g,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=nd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ou,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Pp.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&js.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_((0,k.Pz)(u)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:d=>{const g=d.d;"ok"===d.s?(this.onDataUpdate_(i.p,g,!1,null),r.resolve(g)):r.reject(g)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const d=this.outstandingGets_[u];void 0===d||a!==d||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,a){this.initConnection_();const u=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+u),this.listens.has(d)||this.listens.set(d,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(d).has(u),"listen() called twice for same path/queryId.");const g={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(d).set(u,g),this.connected_&&this.sendListen_(g)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,g=>{const y=g.d,I=g.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",g),"ok"!==I&&this.removeListen_(i,a),t.onComplete&&t.onComplete(I,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();fs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const u=a.s,d=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t};a&&(u.q=i,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,u){this.initConnection_();const d={p:r,d:i};void 0!==u&&(d.h=u),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):rw("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ou,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ou,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ou),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ve.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let g=!1,y=null;const I=function(){y?y.close():(g=!0,a())};t.realtime_={close:I,sendRequest:function(O){(0,k.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(O)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[O,U]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);g?Sr("getToken() completed but was canceled"):(Sr("getToken() completed. Creating connection."),t.authToken_=O&&O.accessToken,t.appCheckToken_=U&&U.token,y=new WA(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,K=>{fs(K+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(O){t.log_("Failed to get token: "+O),g||(t.repoInfo_.nodeAdmin&&fs(O),I())}}})()}interrupt(t){Sr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Sr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ou,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>iw(u)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Kt(t).toString();let a;if(this.listens.has(i)){const u=this.listens.get(i);a=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Sr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Sr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Jv.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=js.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class en{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new en(e,t)}}class L_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new en(Nu,e),i=new en(Nu,t);return 0!==this.compare(r,i)}minPost(){return en.MIN}}class XC extends L_{static get __EMPTY_NODE(){return V_}static set __EMPTY_NODE(e){V_=e}compare(e,t){return Mo(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return en.MIN}maxPost(){return new en(ja,V_)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new en(e,V_)}toString(){return".key"}}const Ha=new XC;class U_{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Dw,ua=(()=>{class n{constructor(t,r,i,a,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:ps.EMPTY_NODE,this.right=null!=u?u:ps.EMPTY_NODE}copy(t,r,i,a,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const u=i(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return ps.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ps.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ps{constructor(e,t=ps.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ps(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ua.BLACK,null,null))}remove(e){return new ps(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ua.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new U_(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new U_(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new U_(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new U_(this.root_,null,this.comparator_,!0,e)}}function QA(n,e){return Mo(n.name,e.name)}function Tw(n,e){return Mo(n,e)}ps.EMPTY_NODE=new class YA{copy(e,t,r,i,a){return this}insert(e,t,r){return new ua(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const eI=function(n){return"number"==typeof n?"number:"+CC(n):"string:"+n},tI=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===Dw||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===Dw||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let nI,rI,Sw,Bh=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),tI(this.priorityNode_)}static set __childrenNodeConstructor(t){nI=t}static get __childrenNodeConstructor(){return nI}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Lt(t)?this:".priority"===xt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=xt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===kl(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(An(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+eI(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?CC(this.value_):this.value_,this.lazyHash_=nw(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(u>=0,"Unknown leaf type: "+i),a===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Mn=new class oI extends L_{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Mo(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return en.MIN}maxPost(){return new en(ja,new Bh("[PRIORITY-POST]",Sw))}makePost(e,t){const r=rI(e);return new en(t,new Bh("[PRIORITY-POST]",r))}toString(){return".priority"}},aI=Math.log(2);class lI{constructor(e){this.count=parseInt(Math.log(e+1)/aI,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Op=function(n,e,t,r){n.sort(e);const i=function(g,y){const I=y-g;let D,R;if(0===I)return null;if(1===I)return D=n[g],R=t?t(D):D,new ua(R,D.node,ua.BLACK,null,null);{const O=parseInt(I/2,10)+g,U=i(g,O),K=i(O+1,y);return D=n[O],R=t?t(D):D,new ua(R,D.node,ua.BLACK,U,K)}},d=function(g){let y=null,I=null,D=n.length;const R=function(U,K){const pe=D-U,Ve=D;D-=U;const Ne=i(pe+1,Ve),et=n[pe],Be=t?t(et):et;O(new ua(Be,et.node,K,null,Ne))},O=function(U){y?(y.left=U,y=U):(I=U,y=U)};for(let U=0;U<g.count;++U){const K=g.nextBitIsOne(),pe=Math.pow(2,g.count-(U+1));K?R(pe,ua.BLACK):(R(pe,ua.BLACK),R(pe,ua.RED))}return I}(new lI(n.length));return new ps(r||e,d)};let B_;const sd={};class ca{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(sd&&Mn,"ChildrenNode.ts has not been loaded"),B_=B_||new ca({".priority":sd},{".priority":Mn}),B_}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ps?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Ha,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(en.Wrap);let d,u=a.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=a.getNext();d=i?Op(r,e.getCompare()):sd;const g=e.toString(),y=Object.assign({},this.indexSet_);y[g]=e;const I=Object.assign({},this.indexes_);return I[g]=d,new ca(I,y)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const u=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(u,"Missing index implementation for "+a),i===sd){if(u.isDefinedOn(e.node)){const d=[],g=t.getIterator(en.Wrap);let y=g.getNext();for(;y;)y.name!==e.name&&d.push(y),y=g.getNext();return d.push(e),Op(d,u.getCompare())}return sd}{const d=t.get(e.name);let g=i;return d&&(g=g.remove(new en(e.name,d))),g.insert(e,e.node)}});return new ca(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===sd)return i;{const a=t.get(e.name);return a?i.remove(new en(e.name,a)):i}});return new ca(r,this.indexSet_)}}let da,Vt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&tI(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return da||(da=new n(new ps(Tw),null,ca.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||da}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?da:r}}getChild(t){const r=xt(t);return null===r?this:this.getImmediateChild(r).getChild(An(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new en(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?da:this.priorityNode_;return new n(a,d,u)}}updateChild(t,r){const i=xt(t);if(null===i)return r;{(0,k.hu)(".priority"!==xt(t)||1===kl(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(An(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,u=!0;if(this.forEachChild(Mn,(d,g)=>{r[d]=g.val(t),i++,u&&n.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):u=!1}),!t&&u&&a<2*i){const d=[];for(const g in r)d[g]=r[g];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+eI(this.getPriority().val())+":"),this.forEachChild(Mn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":nw(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const u=a.getPredecessorKey(new en(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new en(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new en(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,en.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,en.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===$a?-1:0}withIndex(t){if(t===Ha||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ha||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Mn),a=r.getIterator(Mn);let u=i.getNext(),d=a.getNext();for(;u&&d;){if(u.name!==d.name||!u.node.equals(d.node))return!1;u=i.getNext(),d=a.getNext()}return null===u&&null===d}return!1}return!1}}resolveIndex_(t){return t===Ha?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const $a=new class XA extends Vt{constructor(){super(new ps(Tw),Vt.EMPTY_NODE,ca.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Vt.EMPTY_NODE}isEmpty(){return!1}};function Gn(n,e=null){if(null===n)return Vt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Bh(n,Gn(e));if(n instanceof Array){let t=Vt.EMPTY_NODE;return yr(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=Gn(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Gn(e))}{const t=[];let r=!1;if(yr(n,(u,d)=>{if("."!==u.substring(0,1)){const g=Gn(d);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),t.push(new en(u,g)))}}),0===t.length)return Vt.EMPTY_NODE;const a=Op(t,QA,u=>u.name,Tw);if(r){const u=Op(t,Mn.getCompare());return new Vt(a,Gn(e),new ca({".priority":u},{".priority":Mn}))}return new Vt(a,Gn(e),ca.Default)}}Object.defineProperties(en,{MIN:{value:new en(Nu,Vt.EMPTY_NODE)},MAX:{value:new en(ja,$a)}}),XC.__EMPTY_NODE=Vt.EMPTY_NODE,Bh.__childrenNodeConstructor=Vt,function JA(n){Dw=n}($a),function sI(n){Sw=n}($a),function iI(n){rI=n}(Gn);class uI extends L_{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!Lt(e)&&".priority"!==xt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Mo(e.name,t.name):a}makePost(e,t){const r=Gn(e),i=Vt.EMPTY_NODE.updateChild(this.indexPath_,r);return new en(t,i)}maxPost(){const e=Vt.EMPTY_NODE.updateChild(this.indexPath_,$a);return new en(ja,e)}toString(){return Np(this.indexPath_,0).join("/")}}const j_=new class cI extends L_{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Mo(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return en.MIN}maxPost(){return en.MAX}makePost(e,t){const r=Gn(e);return new en(t,r)}toString(){return".value"}},kp="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ex=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=kp.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let u=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=kp.charAt(e[i]);return(0,k.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),Fp=function(n){if(n===""+ow)return"-";const e=Ap(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return ja;const a=kp.charAt(kp.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},fI=function(n){if(n===""+TC)return Nu;const e=Ap(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+ow:(delete t[t.length-1],t.join("")):(t[t.length-1]=kp.charAt(kp.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Lp(n){return{type:"value",snapshotNode:n}}function Fl(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Vn(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function H_(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Aw{constructor(e){this.index_=e}updateChild(e,t,r,i,a,u){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(Vn(t,d)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?u.trackChildChange(Fl(t,r)):u.trackChildChange(H_(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Mn,(i,a)=>{t.hasChild(i)||r.trackChildChange(Vn(i,a))}),t.isLeafNode()||t.forEachChild(Mn,(i,a)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(a)||r.trackChildChange(H_(i,a,u))}else r.trackChildChange(Fl(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Vt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Vp{constructor(e){this.indexedFilter_=new Aw(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Vp.getStartPost_(e),this.endPost_=Vp.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,u){return this.matches(new en(t,r))||(r=Vt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Vt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Vt.EMPTY_NODE);const a=this;return t.forEachChild(Mn,(u,d)=>{a.matches(new en(u,d))||(i=i.updateImmediateChild(u,Vt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class gI{constructor(e){this.rangedFilter_=new Vp(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,u){return this.rangedFilter_.matches(new en(t,r))||(r=Vt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,u):this.fullLimitUpdateChild_(e,t,r,a,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Vt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Vt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;a.hasNext()&&u<this.limit_;){const d=a.getNext();let g;if(g=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!g)break;i=i.updateImmediateChild(d.name,d.node),u++}}else{let a,u,d,g;if(i=t.withIndex(this.index_),i=i.updatePriority(Vt.EMPTY_NODE),this.reverse_){g=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();d=(R,O)=>D(O,R)}else g=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let y=0,I=!1;for(;g.hasNext();){const D=g.getNext();!I&&d(a,D)<=0&&(I=!0),I&&y<this.limit_&&d(D,u)<=0?y++:i=i.updateImmediateChild(D.name,Vt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let u;if(this.reverse_){const D=this.index_.getCompare();u=(R,O)=>D(O,R)}else u=this.index_.getCompare();const d=e;(0,k.hu)(d.numChildren()===this.limit_,"");const g=new en(t,r),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),I=this.rangedFilter_.matches(g);if(d.hasChild(t)){const D=d.getImmediateChild(t);let R=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=R&&(R.name===t||d.hasChild(R.name));)R=i.getChildAfterChild(this.index_,R,this.reverse_);const O=null==R?1:u(R,g);if(I&&!r.isEmpty()&&O>=0)return null!=a&&a.trackChildChange(H_(t,r,D)),d.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(Vn(t,D));const K=d.updateImmediateChild(t,Vt.EMPTY_NODE);return null!=R&&this.rangedFilter_.matches(R)?(null!=a&&a.trackChildChange(Fl(R.name,R.node)),K.updateImmediateChild(R.name,R.node)):K}}return r.isEmpty()?e:I&&u(y,g)>=0?(null!=a&&(a.trackChildChange(Vn(y.name,y.node)),a.trackChildChange(Fl(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(y.name,Vt.EMPTY_NODE)):e}}class Up{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Mn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Nu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ja}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Mn}copy(){const e=new Up;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function xw(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function od(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function $_(n,e){const t=n.copy();return t.index_=e,t}function yI(n){const e={};if(n.isDefault())return e;let t;return n.index_===Mn?t="$priority":n.index_===j_?t="$value":n.index_===Ha?t="$key":((0,k.hu)(n.index_ instanceof uI,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Bp(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Mn&&(e.i=n.index_.toString()),e}class jp extends O_{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=nd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=jp.getListenId_(e,r),d={};this.listens_[u]=d;const g=yI(e._queryParams);this.restRequest_(a+".json",g,(y,I)=>{let D=I;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(a,D,!1,r),(0,k.DV)(this.listens_,u)===d){let R;R=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(R,null)}})}unlisten(e,t){const r=jp.getListenId_(e,t);delete this.listens_[r]}get(e){const t=yI(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,u)=>{let d=u;404===a&&(d=null,a=null),null===a?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+u);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+u+" received. status:",d.status,"response:",d.responseText);let g=null;if(d.status>=200&&d.status<300){try{g=(0,k.cI)(d.responseText)}catch(y){fs("Failed to parse JSON response for "+u+": "+d.responseText)}r(null,g)}else 401!==d.status&&404!==d.status&&fs("Got unsuccessful REST response for "+u+" Status: "+d.status),r(d.status);r=null}},d.open("GET",u,!0),d.send()})}}class vI{constructor(){this.rootNode_=Vt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Hp(){return{value:null,children:new Map}}function jh(n,e,t){if(Lt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=xt(e);n.children.has(r)||n.children.set(r,Hp()),jh(n.children.get(r),e=An(e),t)}}function ad(n,e){if(Lt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Mn,(r,i)=>{jh(n,new Kt(r),i)}),ad(n,e)}}if(n.children.size>0){const t=xt(e);return e=An(e),n.children.has(t)&&ad(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function ld(n,e,t){null!==n.value?t(e,n.value):function ix(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{ld(i,new Kt(e.toString()+"/"+r),t)})}class sx{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&yr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class CI{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new sx(e);const r=1e4+2e4*Math.random();kh(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;yr(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),kh(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var No=(()=>{return(n=No||(No={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",No;var n})();function Mw(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Nw{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=No.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Lt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Kt(e));return new Nw(Ht(),t,this.revert)}}return(0,k.hu)(xt(this.path)===e,"operationForChild called for unrelated child."),new Nw(An(this.path),this.affectedTree,this.revert)}}class q_{constructor(e,t){this.source=e,this.path=t,this.type=No.LISTEN_COMPLETE}operationForChild(e){return Lt(this.path)?new q_(this.source,Ht()):new q_(this.source,An(this.path))}}class Hh{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=No.OVERWRITE}operationForChild(e){return Lt(this.path)?new Hh(this.source,Ht(),this.snap.getImmediateChild(e)):new Hh(this.source,An(this.path),this.snap)}}class $p{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=No.MERGE}operationForChild(e){if(Lt(this.path)){const t=this.children.subtree(new Kt(e));return t.isEmpty()?null:t.value?new Hh(this.source,Ht(),t.value):new $p(this.source,Ht(),t)}return(0,k.hu)(xt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new $p(this.source,An(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ll{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Lt(e))return this.isFullyInitialized()&&!this.filtered_;const t=xt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class z_{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Gp(n,e,t,r,i,a){const u=r.filter(d=>d.type===t);u.sort((d,g)=>function qp(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new en(e.childName,e.snapshotNode),i=new en(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,g)),u.forEach(d=>{const g=function II(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,a);i.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(g,n.query_))})})}function W_(n,e){return{eventCache:n,serverCache:e}}function zp(n,e,t,r){return W_(new Ll(e,t,r),n.serverCache)}function TI(n,e,t,r){return W_(n.eventCache,new Ll(e,t,r))}function K_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ud(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Z_;class Un{constructor(e,t=(()=>(Z_||(Z_=new ps(kA)),Z_))()){this.value=e,this.children=t}static fromObject(e){let t=new Un(null);return yr(e,(r,i)=>{t=t.set(new Kt(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Ht(),value:this.value};if(Lt(e))return null;{const r=xt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(An(e),t);return null!=a?{path:Ln(new Kt(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Lt(e))return this;{const t=xt(e),r=this.children.get(t);return null!==r?r.subtree(An(e)):new Un(null)}}set(e,t){if(Lt(e))return new Un(t,this.children);{const r=xt(e),a=(this.children.get(r)||new Un(null)).set(An(e),t),u=this.children.insert(r,a);return new Un(this.value,u)}}remove(e){if(Lt(e))return this.children.isEmpty()?new Un(null):new Un(null,this.children);{const t=xt(e),r=this.children.get(t);if(r){const i=r.remove(An(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Un(null):new Un(this.value,a)}return this}}get(e){if(Lt(e))return this.value;{const t=xt(e),r=this.children.get(t);return r?r.get(An(e)):null}}setTree(e,t){if(Lt(e))return t;{const r=xt(e),a=(this.children.get(r)||new Un(null)).setTree(An(e),t);let u;return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Un(this.value,u)}}fold(e){return this.fold_(Ht(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Ln(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Ht(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Lt(e))return null;{const a=xt(e),u=this.children.get(a);return u?u.findOnPath_(An(e),Ln(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ht(),t)}foreachOnPath_(e,t,r){if(Lt(e))return this;{this.value&&r(t,this.value);const i=xt(e),a=this.children.get(i);return a?a.foreachOnPath_(An(e),Ln(t,i),r):new Un(null)}}foreach(e){this.foreach_(Ht(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ln(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Ni{constructor(e){this.writeTree_=e}static empty(){return new Ni(new Un(null))}}function Wp(n,e,t){if(Lt(e))return new Ni(new Un(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const u=Ki(i,e);return a=a.updateChild(u,t),new Ni(n.writeTree_.set(i,a))}{const i=new Un(t),a=n.writeTree_.setTree(e,i);return new Ni(a)}}}function Y_(n,e,t){let r=n;return yr(t,(i,a)=>{r=Wp(r,Ln(e,i),a)}),r}function DI(n,e){if(Lt(e))return Ni.empty();{const t=n.writeTree_.setTree(e,new Un(null));return new Ni(t)}}function Q_(n,e){return null!=cd(n,e)}function cd(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ki(t.path,e)):null}function Pw(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Mn,(r,i)=>{e.push(new en(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new en(r,i.value))}),e}function Fu(n,e){if(Lt(e))return n;{const t=cd(n,e);return new Ni(null!=t?new Un(t):n.writeTree_.subtree(e))}}function Kp(n){return n.writeTree_.isEmpty()}function $h(n,e){return Ow(Ht(),n.writeTree_,e)}function Ow(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=Ow(Ln(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Ln(n,".priority"),r)),t}}function Zp(n,e){return J_(e,n)}function dx(n,e){if(n.snap)return Hs(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Hs(Ln(n.path,t),e))return!0;return!1}function hx(n){return n.visible}function AI(n,e,t){let r=Ni.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const u=a.path;let d;if(a.snap)Hs(t,u)?(d=Ki(t,u),r=Wp(r,d,a.snap)):Hs(u,t)&&(d=Ki(u,t),r=Wp(r,Ht(),a.snap.getChild(d)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(Hs(t,u))d=Ki(t,u),r=Y_(r,d,a.children);else if(Hs(u,t))if(d=Ki(u,t),Lt(d))r=Y_(r,Ht(),a.children);else{const g=(0,k.DV)(a.children,xt(d));if(g){const y=g.getChild(An(d));r=Wp(r,Ht(),y)}}}}}return r}function xI(n,e,t,r,i){if(r||i){const a=Fu(n.visibleWrites,e);return!i&&Kp(a)?t:i||null!=t||Q_(a,Ht())?$h(AI(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Hs(y.path,e)||Hs(e,y.path))},e),t||Vt.EMPTY_NODE):null}{const a=cd(n.visibleWrites,e);if(null!=a)return a;{const u=Fu(n.visibleWrites,e);return Kp(u)?t:null!=t||Q_(u,Ht())?$h(u,t||Vt.EMPTY_NODE):null}}}function Yp(n,e,t,r){return xI(n.writeTree,n.treePath,e,t,r)}function Fw(n,e){return function fx(n,e,t){let r=Vt.EMPTY_NODE;const i=cd(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Mn,(a,u)=>{r=r.updateImmediateChild(a,u)}),r;if(t){const a=Fu(n.visibleWrites,e);return t.forEachChild(Mn,(u,d)=>{const g=$h(Fu(a,new Kt(u)),d);r=r.updateImmediateChild(u,g)}),Pw(a).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return Pw(Fu(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function MI(n,e,t,r){return function px(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Ln(e,t);if(Q_(n.visibleWrites,a))return null;{const u=Fu(n.visibleWrites,a);return Kp(u)?i.getChild(t):$h(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Qp(n,e){return function mx(n,e){return cd(n.visibleWrites,e)}(n.writeTree,Ln(n.treePath,e))}function Lw(n,e,t){return function gx(n,e,t,r){const i=Ln(e,t),a=cd(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?$h(Fu(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function NI(n,e){return J_(Ln(n.treePath,e),n.writeTree)}function J_(n,e){return{treePath:n,writeTree:e}}class Vw{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,H_(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Vn(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Fl(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,H_(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const X_=new class PI{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Uw{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Ll(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Lw(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ud(this.viewCache_),a=function yx(n,e,t,r,i,a){return function _x(n,e,t,r,i,a,u){let d;const g=Fu(n.visibleWrites,e),y=cd(g,Ht());if(null!=y)d=y;else{if(null==t)return[];d=$h(g,t)}if(d=d.withIndex(u),d.isEmpty()||d.isLeafNode())return[];{const I=[],D=u.getCompare(),R=a?d.getReverseIteratorFrom(r,u):d.getIteratorFrom(r,u);let O=R.getNext();for(;O&&I.length<i;)0!==D(O,r)&&I.push(O),O=R.getNext();return I}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function kI(n,e,t,r,i,a){const u=e.eventCache;if(null!=Qp(r,t))return e;{let d,g;if(Lt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=ud(e),D=Fw(r,y instanceof Vt?y:Vt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),D,a)}else{const y=Yp(r,ud(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,a)}else{const y=xt(t);if(".priority"===y){(0,k.hu)(1===kl(t),"Can't have a priority with additional path components");const I=u.getNode();g=e.serverCache.getNode();const D=MI(r,t,I,g);d=null!=D?n.filter.updatePriority(I,D):u.getNode()}else{const I=An(t);let D;if(u.isCompleteForChild(y)){g=e.serverCache.getNode();const R=MI(r,t,u.getNode(),g);D=null!=R?u.getNode().getImmediateChild(y).updateChild(I,R):u.getNode().getImmediateChild(y)}else D=Lw(r,y,e.serverCache);d=null!=D?n.filter.updateChild(u.getNode(),y,D,I,i,a):u.getNode()}}return zp(e,d,u.isFullyInitialized()||Lt(t),n.filter.filtersNodes())}}function Jp(n,e,t,r,i,a,u,d){const g=e.serverCache;let y;const I=u?n.filter:n.filter.getIndexedFilter();if(Lt(t))y=I.updateFullNode(g.getNode(),r,null);else if(I.filtersNodes()&&!g.isFiltered()){const O=g.getNode().updateChild(t,r);y=I.updateFullNode(g.getNode(),O,null)}else{const O=xt(t);if(!g.isCompleteForPath(t)&&kl(t)>1)return e;const U=An(t),pe=g.getNode().getImmediateChild(O).updateChild(U,r);y=".priority"===O?I.updatePriority(g.getNode(),pe):I.updateChild(g.getNode(),O,pe,U,X_,null)}const D=TI(e,y,g.isFullyInitialized()||Lt(t),I.filtersNodes());return kI(n,D,t,i,new Uw(i,D,a),d)}function jw(n,e,t,r,i,a,u){const d=e.eventCache;let g,y;const I=new Uw(i,e,a);if(Lt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,u),g=zp(e,y,!0,n.filter.filtersNodes());else{const D=xt(t);if(".priority"===D)y=n.filter.updatePriority(e.eventCache.getNode(),r),g=zp(e,y,d.isFullyInitialized(),d.isFiltered());else{const R=An(t),O=d.getNode().getImmediateChild(D);let U;if(Lt(R))U=r;else{const K=I.getCompleteChild(D);U=null!=K?".priority"===vw(R)&&K.getChild(zC(R)).isEmpty()?K:K.updateChild(R,r):Vt.EMPTY_NODE}g=O.equals(U)?e:zp(e,n.filter.updateChild(d.getNode(),D,U,R,I,u),d.isFullyInitialized(),n.filter.filtersNodes())}}return g}function Hw(n,e){return n.eventCache.isCompleteForChild(e)}function FI(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Gh(n,e,t,r,i,a,u,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,g=e;y=Lt(t)?r:new Un(null).setTree(t,r);const I=e.serverCache.getNode();return y.children.inorderTraversal((D,R)=>{if(I.hasChild(D)){const U=FI(0,e.serverCache.getNode().getImmediateChild(D),R);g=Jp(n,g,new Kt(D),U,i,a,u,d)}}),y.children.inorderTraversal((D,R)=>{const O=!e.serverCache.isCompleteForChild(D)&&void 0===R.value;if(!I.hasChild(D)&&!O){const K=FI(0,e.serverCache.getNode().getImmediateChild(D),R);g=Jp(n,g,new Kt(D),K,i,a,u,d)}}),g}class bx{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Aw(r.getIndex()),a=function mI(n){return n.loadsAllData()?new Aw(n.getIndex()):n.hasLimit()?new gI(n):new Vp(n)}(r);this.processor_=function vx(n){return{filter:n}}(a);const u=t.serverCache,d=t.eventCache,g=i.updateFullNode(Vt.EMPTY_NODE,u.getNode(),null),y=a.updateFullNode(Vt.EMPTY_NODE,d.getNode(),null),I=new Ll(g,u.isFullyInitialized(),i.filtersNodes()),D=new Ll(y,d.isFullyInitialized(),a.filtersNodes());this.viewCache_=W_(D,I),this.eventGenerator_=new z_(this.query_)}get query(){return this.query_}}function Cx(n,e){const t=ud(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Lt(e)&&!t.getImmediateChild(xt(e)).isEmpty())?t.getChild(e):null}function VI(n){return 0===n.eventRegistrations_.length}function UI(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const u=a.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const u=n.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function $w(n,e,t,r){e.type===No.MERGE&&null!==e.source.queryId&&((0,k.hu)(ud(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(K_(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function wx(n,e,t,r,i){const a=new Vw;let u,d;if(t.type===No.OVERWRITE){const y=t;y.source.fromUser?u=jw(n,e,y.path,y.snap,r,i,a):((0,k.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!Lt(y.path),u=Jp(n,e,y.path,y.snap,r,i,d,a))}else if(t.type===No.MERGE){const y=t;y.source.fromUser?u=function ZO(n,e,t,r,i,a,u){let d=e;return r.foreach((g,y)=>{const I=Ln(t,g);Hw(e,xt(I))&&(d=jw(n,d,I,y,i,a,u))}),r.foreach((g,y)=>{const I=Ln(t,g);Hw(e,xt(I))||(d=jw(n,d,I,y,i,a,u))}),d}(n,e,y.path,y.children,r,i,a):((0,k.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),u=Gh(n,e,y.path,y.children,r,i,d,a))}else if(t.type===No.ACK_USER_WRITE){const y=t;u=y.revert?function Xp(n,e,t,r,i,a){let u;if(null!=Qp(r,t))return e;{const d=new Uw(r,e,i),g=e.eventCache.getNode();let y;if(Lt(t)||".priority"===xt(t)){let I;if(e.serverCache.isFullyInitialized())I=Yp(r,ud(e));else{const D=e.serverCache.getNode();(0,k.hu)(D instanceof Vt,"serverChildren would be complete if leaf node"),I=Fw(r,D)}I=I,y=n.filter.updateFullNode(g,I,a)}else{const I=xt(t);let D=Lw(r,I,e.serverCache);null==D&&e.serverCache.isCompleteForChild(I)&&(D=g.getImmediateChild(I)),y=null!=D?n.filter.updateChild(g,I,D,An(t),d,a):e.eventCache.getNode().hasChild(I)?n.filter.updateChild(g,I,Vt.EMPTY_NODE,An(t),d,a):g,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Yp(r,ud(e)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=Qp(r,Ht()),zp(e,y,u,n.filter.filtersNodes())}}(n,e,y.path,r,i,a):function Ex(n,e,t,r,i,a,u){if(null!=Qp(i,t))return e;const d=e.serverCache.isFiltered(),g=e.serverCache;if(null!=r.value){if(Lt(t)&&g.isFullyInitialized()||g.isCompleteForPath(t))return Jp(n,e,t,g.getNode().getChild(t),i,a,d,u);if(Lt(t)){let y=new Un(null);return g.getNode().forEachChild(Ha,(I,D)=>{y=y.set(new Kt(I),D)}),Gh(n,e,t,y,i,a,d,u)}return e}{let y=new Un(null);return r.foreach((I,D)=>{const R=Ln(t,I);g.isCompleteForPath(R)&&(y=y.set(I,g.getNode().getChild(R)))}),Gh(n,e,t,y,i,a,d,u)}}(n,e,y.path,y.affectedTree,r,i,a)}else{if(t.type!==No.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);u=function qh(n,e,t,r,i){const a=e.serverCache;return kI(n,TI(e,a.getNode(),a.isFullyInitialized()||Lt(t),a.isFiltered()),t,r,X_,i)}(n,e,t.path,r,a)}const g=a.getChanges();return function OI(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=K_(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(Lp(K_(e)))}}(e,u,g),{viewCache:u,changes:g}}(n.processor_,i,e,t,r);return function Bw(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,ey(n,a.changes,a.viewCache.eventCache.getNode(),null)}function ey(n,e,t,r){return function ox(n,e,t,r){const i=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function pI(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),Gp(n,i,"child_removed",e,r,t),Gp(n,i,"child_added",e,r,t),Gp(n,i,"child_moved",a,r,t),Gp(n,i,"child_changed",e,r,t),Gp(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let dd,zw;class zh{constructor(){this.views=new Map}}function Gw(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),$w(a,e,t,r)}{let a=[];for(const u of n.views.values())a=a.concat($w(u,e,t,r));return a}}function $I(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let d=Yp(t,i?r:null),g=!1;d?g=!0:r instanceof Vt?(d=Fw(t,r),g=!1):(d=Vt.EMPTY_NODE,g=!1);const y=W_(new Ll(d,g,!1),new Ll(r,i,!1));return new bx(e,y)}return u}function Sx(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Lu(n,e){let t=null;for(const r of n.views.values())t=t||Cx(r,e);return t}function GI(n,e){return e._queryParams.loadsAllData()?Ul(n):n.views.get(e._queryIdentifier)}function hd(n,e){return null!=GI(n,e)}function Vl(n){return null!=Ul(n)}function Ul(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let QO=1;class Ww{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Un(null),this.pendingWriteTree_=function RI(){return{visibleWrites:Ni.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function zI(n,e,t,r,i){return function lx(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Wp(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?qa(n,new Hh({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Ga(n,e,t=!1){const r=function cx(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function kw(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const d=n.allWrites[u];d.visible&&(u>=t&&dx(d,r.path)?i=!1:Hs(r.path,d.path)&&(a=!0)),u--}return!!i&&(a?(function SI(n){n.visibleWrites=AI(n.allWrites,hx,Ht()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=DI(n.visibleWrites,r.path):yr(r.children,g=>{n.visibleWrites=DI(n.visibleWrites,Ln(r.path,g))}),!0))}(n.pendingWriteTree_,e)){let a=new Un(null);return null!=r.snap?a=a.set(Ht(),!0):yr(r.children,u=>{a=a.set(new Kt(u),!0)}),qa(n,new Nw(r.path,a,t))}return[]}function eg(n,e,t){return qa(n,new Hh({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Kw(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let u=[];if(a&&("default"===e._queryIdentifier||hd(a,e))){const d=function Dx(n,e,t,r){const i=e._queryIdentifier,a=[];let u=[];const d=Vl(n);if("default"===i)for(const[g,y]of n.views.entries())u=u.concat(UI(y,t,r)),VI(y)&&(n.views.delete(g),y.query._queryParams.loadsAllData()||a.push(y.query));else{const g=n.views.get(i);g&&(u=u.concat(UI(g,t,r)),VI(g)&&(n.views.delete(i),g.query._queryParams.loadsAllData()||a.push(g.query)))}return d&&!Vl(n)&&a.push(new(function jI(){return(0,k.hu)(dd,"Reference.ts has not been loaded"),dd}())(e._repo,e._path)),{removed:a,events:u}}(a,e,t,r);(function HI(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const g=d.removed;u=d.events;const y=-1!==g.findIndex(D=>D._queryParams.loadsAllData()),I=n.syncPointTree_.findOnPath(i,(D,R)=>Vl(R));if(y&&!I){const D=n.syncPointTree_.subtree(i);if(!D.isEmpty()){const R=function YI(n){return n.fold((e,t,r)=>{if(t&&Vl(t))return[Ul(t)];{let i=[];return t&&(i=Sx(t)),yr(r,(a,u)=>{i=i.concat(u)}),i}})}(D);for(let O=0;O<R.length;++O){const U=R[O],K=U.query,pe=Qw(n,U);n.listenProvider_.startListening(Wh(K),tg(n,K),pe.hashFn,pe.onComplete)}}}!I&&g.length>0&&!r&&(y?n.listenProvider_.stopListening(Wh(e),null):g.forEach(D=>{const R=n.queryToTagMap.get(ng(D));n.listenProvider_.stopListening(Wh(D),R)})),function Ox(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=ng(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,g)}return u}function ZI(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(D,R)=>{const O=Ki(D,r);i=i||Lu(R,O),a=a||Vl(R)});let d,u=n.syncPointTree_.get(r);u?(a=a||Vl(u),i=i||Lu(u,Ht())):(u=new zh,n.syncPointTree_=n.syncPointTree_.set(r,u)),null!=i?d=!0:(d=!1,i=Vt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((R,O)=>{const U=Lu(O,Ht());U&&(i=i.updateImmediateChild(R,U))}));const g=hd(u,e);if(!g&&!e._queryParams.loadsAllData()){const D=ng(e);(0,k.hu)(!n.queryToTagMap.has(D),"View does not exist, but we have a tag");const R=function kx(){return QO++}();n.queryToTagMap.set(D,R),n.tagToQueryMap.set(R,D)}let I=function qw(n,e,t,r,i,a){const u=$I(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function Ix(n,e){n.eventRegistrations_.push(e)}(u,t),function BI(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Mn,(a,u)=>{r.push(Fl(a,u))}),t.isFullyInitialized()&&r.push(Lp(t.getNode())),ey(n,r,t.getNode(),e)}(u,t)}(u,e,t,Zp(n.pendingWriteTree_,r),i,d);if(!g&&!a){const D=GI(u,e);I=I.concat(function rg(n,e,t){const r=e._path,i=tg(n,e),a=Qw(n,t),u=n.listenProvider_.startListening(Wh(e),i,a.hashFn,a.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!Vl(d.value),"If we're adding a query, it shouldn't be shadowed");else{const g=d.fold((y,I,D)=>{if(!Lt(y)&&I&&Vl(I))return[Ul(I).query];{let R=[];return I&&(R=R.concat(Sx(I).map(O=>O.query))),yr(D,(O,U)=>{R=R.concat(U)}),R}});for(let y=0;y<g.length;++y){const I=g[y];n.listenProvider_.stopListening(Wh(I),tg(n,I))}}return u}(n,e,D))}return I}function ty(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,d)=>{const y=Lu(d,Ki(u,e));if(y)return y});return xI(i,e,a,t,!0)}function qa(n,e){return Zw(e,n.syncPointTree_,null,Zp(n.pendingWriteTree_,Ht()))}function Zw(n,e,t,r){if(Lt(n.path))return Yw(n,e,t,r);{const i=e.get(Ht());null==t&&null!=i&&(t=Lu(i,Ht()));let a=[];const u=xt(n.path),d=n.operationForChild(u),g=e.children.get(u);if(g&&d){const y=t?t.getImmediateChild(u):null,I=NI(r,u);a=a.concat(Zw(d,g,y,I))}return i&&(a=a.concat(Gw(i,n,r,t))),a}}function Yw(n,e,t,r){const i=e.get(Ht());null==t&&null!=i&&(t=Lu(i,Ht()));let a=[];return e.children.inorderTraversal((u,d)=>{const g=t?t.getImmediateChild(u):null,y=NI(r,u),I=n.operationForChild(u);I&&(a=a.concat(Yw(I,d,g,y)))}),i&&(a=a.concat(Gw(i,n,r,t))),a}function Qw(n,e){const t=e.query,r=tg(n,t);return{hashFn:()=>(function YO(n){return n.viewCache_.serverCache.getNode()}(e)||Vt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Rx(n,e,t){const r=ny(n,t);if(r){const i=Jw(r),a=i.path,u=i.queryId,d=Ki(a,e);return Xw(n,a,new q_(Mw(u),d))}return[]}(n,t._path,r):function xx(n,e){return qa(n,new q_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function LA(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Kw(n,t,null,a)}}}}function tg(n,e){const t=ng(e);return n.queryToTagMap.get(t)}function ng(n){return n._path.toString()+"$"+n._queryIdentifier}function ny(n,e){return n.tagToQueryMap.get(e)}function Jw(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Kt(n.substr(0,e))}}function Xw(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),Gw(r,t,Zp(n.pendingWriteTree_,e),null)}function Wh(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Ax(){return(0,k.hu)(zw,"Reference.ts has not been loaded"),zw}())(n._repo,n._path):n}class e0{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new e0(t)}node(){return this.node_}}class ig{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ln(this.path_,e);return new ig(this.syncTree_,t)}node(){return ty(this.syncTree_,this.path_)}}const QI=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?t0(n[".sv"],e,t):"object"==typeof n[".sv"]?sg(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},t0=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},sg=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},JI=function(n,e,t,r){return r0(e,new ig(t,n),r)},n0=function(n,e,t){return r0(n,new e0(e),t)};function r0(n,e,t){const r=n.getPriority().val(),i=QI(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,d=QI(u.getValue(),e,t);return d!==u.getValue()||i!==u.getPriority().val()?new Bh(d,Gn(i)):n}{const u=n;return a=u,i!==u.getPriority().val()&&(a=a.updatePriority(new Bh(i))),u.forEachChild(Mn,(d,g)=>{const y=r0(g,e.getImmediateChild(d),t);y!==g&&(a=a.updateImmediateChild(d,y))}),a}}class Kh{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function fd(n,e){let t=e instanceof Kt?e:new Kt(e),r=n,i=xt(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new Kh(i,r,a),t=An(t),i=xt(t)}return r}function pd(n){return n.node.value}function s0(n,e){n.node.value=e,eT(n)}function o0(n){return n.node.childCount>0}function Zh(n,e){yr(n.node.children,(t,r)=>{e(new Kh(t,n,r))})}function a0(n,e,t,r){t&&!r&&e(n),Zh(n,i=>{a0(i,e,!0,r)}),t&&r&&e(n)}function og(n){return new Kt(null===n.parent?n.name:og(n.parent)+"/"+n.name)}function eT(n){null!==n.parent&&function l0(n,e,t){const r=function XI(n){return void 0===pd(n)&&!o0(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,eT(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,eT(n))}(n.parent,n.name,n)}const u0=/[\[\].#$\/\u0000-\u001F\u007F]/,tT=/[\[\].#$\u0000-\u001F\u007F]/,ag=10485760,Yh=function(n){return"string"==typeof n&&0!==n.length&&!u0.test(n)},nT=function(n){return"string"==typeof n&&0!==n.length&&!tT.test(n)},lg=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!E_(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},Wa=function(n,e,t,r){r&&void 0===e||Qh((0,k.gK)(n,"value"),e,t)},Qh=function(n,e,t){const r=t instanceof Kt?new KC(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Pu(r));if("function"==typeof e)throw new Error(n+"contains a function "+Pu(r)+" with contents = "+e.toString());if(E_(e))throw new Error(n+"contains "+e.toString()+" "+Pu(r));if("string"==typeof e&&e.length>ag/3&&(0,k.ug)(e)>ag)throw new Error(n+"contains a string greater than "+ag+" utf8 bytes "+Pu(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(yr(e,(u,d)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!Yh(u)))throw new Error(n+" contains an invalid key ("+u+") "+Pu(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function F_(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),Ew(n)})(r,u),Qh(n,d,r),function ZA(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Pu(r)+" in addition to actual children.")}},d0=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];yr(e,(u,d)=>{const g=new Kt(u);if(Qh(i,d,Ln(t,g)),".priority"===vw(g)&&!lg(d))throw new Error(i+"contains an invalid value for '"+g.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(g)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Np(r);for(let u=0;u<a.length;u++)if((".priority"!==a[u]||u!==a.length-1)&&!Yh(a[u]))throw new Error(n+"contains an invalid key ("+a[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(WC);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Hs(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},h0=function(n,e,t){if(!t||void 0!==e){if(E_(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!lg(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Jh=function(n,e,t,r){if(!(r&&void 0===t||Yh(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Xh=function(n,e,t,r){if(!(r&&void 0===t||nT(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},$s=function(n,e){if(".info"===xt(e))throw new Error(n+" failed = Can't modify data under /.info/")},f0=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Yh(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),nT(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ux{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ug(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!ww(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function p0(n,e,t){ug(n,t),gd(n,r=>ww(r,e))}function Bn(n,e,t){ug(n,t),gd(n,r=>Hs(r,e)||Hs(e,r))}function gd(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Bx(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Bx(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();td&&Sr("event: "+t.toString()),Oh(r)}}}const rT="repo_interrupt";class cg{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ux,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Hp(),this.transactionQueueTree_=new Kh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ry(n){const t=n.infoData_.getNode(new Kt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function dg(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:ry(n)})}function g0(n,e,t,r,i){n.dataUpdateCount++;const a=new Kt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const g=(0,k.UI)(t,y=>Gn(y));u=function Nx(n,e,t,r){const i=ny(n,r);if(i){const a=Jw(i),u=a.path,d=a.queryId,g=Ki(u,e),y=Un.fromObject(t);return Xw(n,u,new $p(Mw(d),g,y))}return[]}(n.serverSyncTree_,a,g,i)}else{const g=Gn(t);u=function Mx(n,e,t,r){const i=ny(n,r);if(null!=i){const a=Jw(i),u=a.path,d=a.queryId,g=Ki(u,e);return Xw(n,u,new Hh(Mw(d),g,t))}return[]}(n.serverSyncTree_,a,g,i)}else if(r){const g=(0,k.UI)(t,y=>Gn(y));u=function KI(n,e,t){const r=Un.fromObject(t);return qa(n,new $p({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,g)}else{const g=Gn(t);u=eg(n.serverSyncTree_,a,g)}let d=a;u.length>0&&(d=md(n,a)),Bn(n.eventQueue_,d,u)}function iT(n,e){hg(n,"connected",e),!1===e&&function XO(n){pg(n,"onDisconnectEvents");const e=dg(n),t=Hp();ld(n.onDisconnect_,Ht(),(i,a)=>{const u=JI(i,a,n.serverSyncTree_,e);jh(t,i,u)});let r=[];ld(t,Ht(),(i,a)=>{r=r.concat(eg(n.serverSyncTree_,i,a));const u=ly(n,i);md(n,u)}),n.onDisconnect_=Hp(),Bn(n.eventQueue_,Ht(),r)}(n)}function hg(n,e,t){const r=new Kt("/.info/"+e),i=Gn(t);n.infoData_.updateSnapshot(r,i);const a=eg(n.infoSyncTree_,r,i);Bn(n.eventQueue_,r,a)}function fg(n){return n.nextWriteId_++}function ef(n,e,t,r,i){pg(n,"set",{path:e.toString(),value:t,priority:r});const a=dg(n),u=Gn(t,r),d=ty(n.serverSyncTree_,e),g=n0(u,d,a),y=fg(n),I=zI(n.serverSyncTree_,e,g,y,!0);ug(n.eventQueue_,I),n.server_.put(e.toString(),u.val(!0),(R,O)=>{const U="ok"===R;U||fs("set at "+e+" failed: "+R);const K=Ga(n.serverSyncTree_,y,!U);Bn(n.eventQueue_,e,K),Vu(0,i,R,O)});const D=ly(n,e);md(n,D),Bn(n.eventQueue_,D,[])}function oT(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&ad(n.onDisconnect_,e),Vu(0,t,r,i)})}function aT(n,e,t,r){const i=Gn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,u)=>{"ok"===a&&jh(n.onDisconnect_,e,i),Vu(0,r,a,u)})}function _0(n,e,t){let r;r=".info"===xt(e._path)?Kw(n.infoSyncTree_,e,t):Kw(n.serverSyncTree_,e,t),p0(n.eventQueue_,e._path,r)}function sy(n){n.persistentConnection_&&n.persistentConnection_.interrupt(rT)}function pg(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Sr(t,...e)}function Vu(n,e,t,r){e&&Oh(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const u=new Error(a);u.code=i,e(u)}})}function oy(n,e,t){return ty(n.serverSyncTree_,e,t)||Vt.EMPTY_NODE}function gg(n,e=n.transactionQueueTree_){if(e||ay(n,e),pd(e)){const t=hT(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function Gx(n,e,t){const r=t.map(y=>y.currentWriteId),i=oy(n,e,r);let a=i;const u=i.hash();for(let y=0;y<t.length;y++){const I=t[y];(0,k.hu)(0===I.status,"tryToSendTransactionQueue_: items in queue should all be run."),I.status=1,I.retryCount++;const D=Ki(e,I.path);a=a.updateChild(D,I.currentOutputSnapshotRaw)}const d=a.val(!0),g=e;n.server_.put(g.toString(),d,y=>{pg(n,"transaction put response",{path:g.toString(),status:y});let I=[];if("ok"===y){const D=[];for(let R=0;R<t.length;R++)t[R].status=2,I=I.concat(Ga(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&D.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();ay(n,fd(n.transactionQueueTree_,e)),gg(n,n.transactionQueueTree_),Bn(n.eventQueue_,e,I);for(let R=0;R<D.length;R++)Oh(D[R])}else{if("datastale"===y)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{fs("transaction at "+g.toString()+" failed: "+y);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=y}md(n,e)}},u)}(n,og(e),t)}else o0(e)&&Zh(e,t=>{gg(n,t)})}function md(n,e){const t=dT(n,e),r=og(t);return function cT(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const g=e[d],y=Ki(t,g.path);let D,I=!1;if((0,k.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===g.status)I=!0,D=g.abortReason,i=i.concat(Ga(n.serverSyncTree_,g.currentWriteId,!0));else if(0===g.status)if(g.retryCount>=25)I=!0,D="maxretry",i=i.concat(Ga(n.serverSyncTree_,g.currentWriteId,!0));else{const R=oy(n,g.path,u);g.currentInputSnapshot=R;const O=e[d].update(R.val());if(void 0!==O){Qh("transaction failed: Data returned ",O,g.path);let U=Gn(O);"object"==typeof O&&null!=O&&(0,k.r3)(O,".priority")||(U=U.updatePriority(R.getPriority()));const pe=g.currentWriteId,Ve=dg(n),Ne=n0(U,R,Ve);g.currentOutputSnapshotRaw=U,g.currentOutputSnapshotResolved=Ne,g.currentWriteId=fg(n),u.splice(u.indexOf(pe),1),i=i.concat(zI(n.serverSyncTree_,g.path,Ne,g.currentWriteId,g.applyLocally)),i=i.concat(Ga(n.serverSyncTree_,pe,!0))}else I=!0,D="nodata",i=i.concat(Ga(n.serverSyncTree_,g.currentWriteId,!0))}Bn(n.eventQueue_,t,i),i=[],I&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===D?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(D),!1,null)))}ay(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)Oh(r[d]);gg(n,n.transactionQueueTree_)}(n,hT(n,t),r),r}function dT(n,e){let t,r=n.transactionQueueTree_;for(t=xt(e);null!==t&&void 0===pd(r);)r=fd(r,t),t=xt(e=An(e));return r}function hT(n,e){const t=[];return v0(n,e,t),t.sort((r,i)=>r.order-i.order),t}function v0(n,e,t){const r=pd(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Zh(e,i=>{v0(n,i,t)})}function ay(n,e){const t=pd(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,s0(e,t.length>0?t:void 0)}Zh(e,r=>{ay(n,r)})}function ly(n,e){const t=og(dT(n,e)),r=fd(n.transactionQueueTree_,e);return function Fx(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{uy(n,i)}),uy(n,r),a0(r,i=>{uy(n,i)}),t}function uy(n,e){const t=pd(e);if(t){const r=[];let i=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,k.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):((0,k.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(Ga(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?s0(e,void 0):t.length=a+1,Bn(n.eventQueue_,og(e),i);for(let u=0;u<r.length;u++)Oh(r[u])}}const w0=function(n,e){const t=qx(n),r=t.namespace;return"firebase.com"===t.domain&&Ol(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ol("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&fs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new uw(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new Kt(t.pathString)}},qx=function(n){let e="",t="",r="",i="",a="",u=!0,d="https",g=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let I=n.indexOf("/");-1===I&&(I=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(I,D)),I<D&&(i=function fT(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(I,D)));const R=function pT(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):fs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));y=e.indexOf(":"),y>=0?(u="https"===d||"wss"===d,g=parseInt(e.substring(y+1),10)):y=e.length;const O=e.slice(0,y);if("localhost"===O.toLowerCase())t="localhost";else if(O.split(".").length<=2)t=O;else{const U=e.indexOf(".");r=e.substring(0,U).toLowerCase(),t=e.substring(U+1),a=r}"ns"in R&&(a=R.ns)}return{host:e,port:g,domain:t,subdomain:r,secure:u,scheme:d,pathString:i,namespace:a}};class zx{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class E0{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Wx{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Kx{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return oT(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){$s("OnDisconnect.remove",this._path);const e=new k.BH;return aT(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){$s("OnDisconnect.set",this._path),Wa("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return aT(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){$s("OnDisconnect.setWithPriority",this._path),Wa("OnDisconnect.setWithPriority",e,this._path,!1),h0("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function lT(n,e,t,r,i){const a=Gn(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(u,d)=>{"ok"===u&&jh(n.onDisconnect_,e,a),Vu(0,i,u,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){$s("OnDisconnect.update",this._path),d0("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function iy(n,e,t,r){if((0,k.xb)(t))return Sr("onDisconnect().update() called with empty data.  Don't do anything."),void Vu(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&yr(t,(u,d)=>{const g=Gn(d);jh(n.onDisconnect_,Ln(e,u),g)}),Vu(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Gs{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Lt(this._path)?null:vw(this._path)}get ref(){return new ha(this._repo,this._path)}get _queryIdentifier(){const e=Bp(this._queryParams),t=iw(e);return"{}"===t?"default":t}get _queryObject(){return Bp(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof Gs))return!1;const t=this._repo===e._repo,r=ww(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function KA(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function cy(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Uu(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ha){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Nu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==ja)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Mn){if(null!=e&&!lg(e)||null!=t&&!lg(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof uI||n.getIndex()===j_,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function b0(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ha extends Gs{constructor(e,t){super(e,t,new Up,!1)}get parent(){const e=zC(this._path);return null===e?null:new ha(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class tf{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Kt(e),r=Bu(this.ref,e);return new tf(this._node.getChild(t),r,Mn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new tf(i,Bu(this.ref,r),Mn)))}hasChild(e){const t=new Kt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function mg(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?Bu(n._root,e):n._root}function Zx(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=w0(e,n._repo.repoInfo_.nodeAdmin);f0("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ol("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),mg(n,t.path.toString())}function Bu(n,e){return null===xt((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Xh("child","path",t,!1)):Xh("child","path",e,!1),new ha(n._repo,Ln(n._path,e));var t}function yT(n,e){n=(0,k.m9)(n),$s("set",n._path),Wa("set",e,n._path,!1);const t=new k.BH;return ef(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function wT(n,e){d0("update",e,n._path,!1);const t=new k.BH;return function m0(n,e,t,r){pg(n,"update",{path:e.toString(),value:t});let i=!0;const a=dg(n),u={};if(yr(t,(d,g)=>{i=!1,u[d]=JI(Ln(e,d),Gn(g),n.serverSyncTree_,a)}),i)Sr("update() called with empty data.  Don't do anything."),Vu(0,r,"ok",void 0);else{const d=fg(n),g=function WI(n,e,t,r){!function ux(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Y_(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Un.fromObject(t);return qa(n,new $p({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,d);ug(n.eventQueue_,g),n.server_.merge(e.toString(),t,(y,I)=>{const D="ok"===y;D||fs("update at "+e+" failed: "+y);const R=Ga(n.serverSyncTree_,d,!D),O=R.length>0?md(n,e):e;Bn(n.eventQueue_,O,R),Vu(0,r,y,I)}),yr(t,y=>{const I=ly(n,Ln(e,y));md(n,I)}),Bn(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function ET(n){return function sT(n,e){const t=function Px(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,I)=>{const D=Ki(y,t);r=r||Lu(I,D)});let i=n.syncPointTree_.get(t);i?r=r||Lu(i,Ht()):(i=new zh,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,u=a?new Ll(r,!0,!1):null;return function LI(n){return K_(n.viewCache_)}($I(i,e,Zp(n.pendingWriteTree_,e._path),a?u.getNode():Vt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Gn(r).withIndex(e._queryParams.getIndex()),a=eg(n.serverSyncTree_,e._path,i);return p0(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(pg(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,k.m9)(n))._repo,n).then(e=>new tf(e,new ha(n._repo,n._path),n._queryParams.getIndex()))}class I0{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new zx("value",this,new tf(e.snapshotNode,new ha(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new E0(this,e,t):null}matches(e){return e instanceof I0&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class _g{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new E0(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=Bu(new ha(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new zx(e.type,this,new tf(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof _g&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function yg(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const g=t,y=(I,D)=>{_0(n._repo,n,d),g(I,D)};y.userCallback=t.userCallback,y.context=t.context,t=y}const u=new Wx(t,a||void 0),d="value"===e?new I0(u):new _g(e,u);return function uT(n,e,t){let r;r=".info"===xt(e._path)?ZI(n.infoSyncTree_,e,t):ZI(n.serverSyncTree_,e,t),p0(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>_0(n._repo,n,d)}function vg(n,e,t,r){return yg(n,"value",e,t,r)}function bT(n,e,t,r){return yg(n,"child_added",e,t,r)}function Yx(n,e,t,r){return yg(n,"child_changed",e,t,r)}function Qx(n,e,t,r){return yg(n,"child_moved",e,t,r)}function Jx(n,e,t,r){return yg(n,"child_removed",e,t,r)}function CT(n,e,t){let r=null;const i=t?new Wx(t):null;"value"===e?r=new I0(i):e&&(r=new _g(e,i)),_0(n._repo,n,r)}class fa{}class IT extends fa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Wa("endAt",this._value,e._path,!0);const t=od(e._queryParams,this._value,this._key);if(b0(t),Uu(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Gs(e._repo,e._path,t,e._orderByCalled)}}class Xx extends fa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Wa("endBefore",this._value,e._path,!1);const t=function rx(n,e,t){let r,i;return n.index_===Ha?("string"==typeof e&&(e=fI(e)),i=od(n,e,t)):(r=null==t?Nu:fI(t),i=od(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(b0(t),Uu(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Gs(e._repo,e._path,t,e._orderByCalled)}}class TT extends fa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Wa("startAt",this._value,e._path,!0);const t=xw(e._queryParams,this._value,this._key);if(b0(t),Uu(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Gs(e._repo,e._path,t,e._orderByCalled)}}class eR extends fa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Wa("startAfter",this._value,e._path,!1);const t=function nx(n,e,t){let r;if(n.index_===Ha)"string"==typeof e&&(e=Fp(e)),r=xw(n,e,t);else{let i;i=null==t?ja:Fp(t),r=xw(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(b0(t),Uu(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Gs(e._repo,e._path,t,e._orderByCalled)}}class tR extends fa{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Gs(e._repo,e._path,function _I(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class S0 extends fa{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Gs(e._repo,e._path,function tx(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class ST extends fa{constructor(e){super(),this._path=e}_apply(e){cy(e,"orderByChild");const t=new Kt(this._path);if(Lt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new uI(t),i=$_(e._queryParams,r);return Uu(i),new Gs(e._repo,e._path,i,!0)}}class AT extends fa{_apply(e){cy(e,"orderByKey");const t=$_(e._queryParams,Ha);return Uu(t),new Gs(e._repo,e._path,t,!0)}}class iR extends fa{_apply(e){cy(e,"orderByPriority");const t=$_(e._queryParams,Mn);return Uu(t),new Gs(e._repo,e._path,t,!0)}}class A0 extends fa{_apply(e){cy(e,"orderByValue");const t=$_(e._queryParams,j_);return Uu(t),new Gs(e._repo,e._path,t,!0)}}class oR extends fa{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Wa("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new IT(this._value,this._key)._apply(new TT(this._value,this._key)._apply(e))}}function ma(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function Tx(n){(0,k.hu)(!dd,"__referenceConstructor has already been defined"),dd=n})(ha),function qI(n){(0,k.hu)(!zw,"__referenceConstructor has already been defined"),zw=n}(ha);const x0={};function PT(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Ol("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Sr("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let g,y,u=w0(a,i),d=u.repoInfo;"undefined"!=typeof process&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(g=!0,a=`http://${y}?ns=${d.namespace}`,u=w0(a,i),d=u.repoInfo):g=!u.repoInfo.secure;const I=i&&g?new rd(rd.OWNER):new zO(n.name,n.options,e);f0("Invalid Firebase Database URL",u),Lt(u.path)||Ol("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function OT(n,e,t,r){let i=x0[e.name];i||(i={},x0[e.name]=i);let a=i[n.toURLString()];return a&&Ol("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new cg(n,false,t,r),i[n.toURLString()]=a,a}(d,n,I,new aw(n.name,t));return new aR(D,n)}class aR{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function jx(n,e,t){if(n.stats_=x_(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new jp(n.repoInfo_,(r,i,a,u)=>{g0(n,r,i,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>iT(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new ku(n.repoInfo_,e,(r,i,a,u)=>{g0(n,r,i,a,u)},r=>{iT(n,r)},r=>{!function Hx(n,e){yr(e,(t,r)=>{hg(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function xC(n,e){const t=n.toString();return Rp[t]||(Rp[t]=e()),Rp[t]}(n.repoInfo_,()=>new CI(n.stats_,n.server_)),n.infoData_=new vI,n.infoSyncTree_=new Ww({startListening:(r,i,a,u)=>{let d=[];const g=n.infoData_.getNode(r._path);return g.isEmpty()||(d=eg(n.infoSyncTree_,r._path,g),setTimeout(()=>{u("ok")},0)),d},stopListening:()=>{}}),hg(n,"connected",!1),n.serverSyncTree_=new Ww({startListening:(r,i,a,u)=>(n.server_.listen(r,a,i,(d,g)=>{const y=u(d,g);Bn(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ha(this._repo,Ht())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function nk(n,e){const t=x0[e];(!t||t[n.key]!==n)&&Ol(`Database ${e}(${n.repoInfo_}) has already been deleted.`),sy(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ol("Cannot call "+e+" on a deleted database.")}}function LT(n,e){EC(n,e)}const VT={".sv":"timestamp"};class cR{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ku.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},ku.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function lR(n){Xv(Mi.SDK_VERSION),(0,Mi._registerComponent)(new xo.wA("database",(e,{instanceIdentifier:t})=>PT(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Mi.registerVersion)(Yv,"0.12.7",n),(0,Mi.registerVersion)(Yv,"0.12.7","esm2017")}();const pR=new Ro.Yd("@firebase/database-compat"),gR=function(n){pR.warn("FIREBASE WARNING: "+n)};class ak{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,gR("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class lk{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ju{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Xh("DataSnapshot.child","path",e,!1),new ju(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Xh("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new ju(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new qs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ar{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const u=Ar.getCancelAndContextArgs_("Query.on",r,i),d=(y,I)=>{t.call(u.context,new ju(this.database,y),I)};d.userCallback=t,d.context=u.context;const g=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return vg(this._delegate,d,g),t;case"child_added":return bT(this._delegate,d,g),t;case"child_removed":return Jx(this._delegate,d,g),t;case"child_changed":return Yx(this._delegate,d,g),t;case"child_moved":return Qx(this._delegate,d,g),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,CT(this._delegate,e,i)}else CT(this._delegate,e)}get(){return ET(this._delegate).then(e=>new ju(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=Ar.getCancelAndContextArgs_("Query.once",r,i),u=new k.BH,d=(y,I)=>{const D=new ju(this.database,y);t&&t.call(a.context,D,I),u.resolve(D)};d.userCallback=t,d.context=a.context;const g=y=>{a.cancel&&a.cancel.call(a.context,y),u.reject(y)};switch(e){case"value":vg(this._delegate,d,g,{onlyOnce:!0});break;case"child_added":bT(this._delegate,d,g,{onlyOnce:!0});break;case"child_removed":Jx(this._delegate,d,g,{onlyOnce:!0});break;case"child_changed":Yx(this._delegate,d,g,{onlyOnce:!0});break;case"child_moved":Qx(this._delegate,d,g,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new Ar(this.database,ma(this._delegate,function nR(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new tR(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new Ar(this.database,ma(this._delegate,function DT(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new S0(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new Ar(this.database,ma(this._delegate,function rR(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Xh("orderByChild","path",n,!1),new ST(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new Ar(this.database,ma(this._delegate,function xT(){return new AT}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new Ar(this.database,ma(this._delegate,function sR(){return new iR}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new Ar(this.database,ma(this._delegate,function ga(){return new A0}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new Ar(this.database,ma(this._delegate,function pa(n=null,e){return Jh("startAt","key",e,!0),new TT(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new Ar(this.database,ma(this._delegate,function D0(n,e){return Jh("startAfter","key",e,!0),new eR(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new Ar(this.database,ma(this._delegate,function ek(n,e){return Jh("endAt","key",e,!0),new IT(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new Ar(this.database,ma(this._delegate,function T0(n,e){return Jh("endBefore","key",e,!0),new Xx(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new Ar(this.database,ma(this._delegate,function tk(n,e){return Jh("equalTo","key",e,!0),new oR(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ar))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new qs(this.database,new ha(this._delegate._repo,this._delegate._path))}}class qs extends Ar{constructor(e,t){super(e,new Gs(t._repo,t._path,new Up,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new qs(this.database,Bu(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new qs(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new qs(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=yT(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,gR("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}$s("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=wT(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function vT(n,e,t){if($s("setWithPriority",n._path),Wa("setWithPriority",e,n._path,!1),h0("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return ef(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function _T(n){return $s("remove",n._path),yT(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function ik(n,e,t){var r;if(n=(0,k.m9)(n),$s("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new k.BH,d=vg(n,()=>{});return function $x(n,e,t,r,i,a){pg(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:wC(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=oy(n,e,void 0);u.currentInputSnapshot=d;const g=u.update(d.val());if(void 0===g)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{Qh("transaction failed: Data returned ",g,u.path),u.status=0;const y=fd(n.transactionQueueTree_,e),I=pd(y)||[];let D;I.push(u),s0(y,I),"object"==typeof g&&null!==g&&(0,k.r3)(g,".priority")?(D=(0,k.DV)(g,".priority"),(0,k.hu)(lg(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(ty(n.serverSyncTree_,e)||Vt.EMPTY_NODE).getPriority().val();const R=dg(n),O=Gn(g,D),U=n0(O,d,R);u.currentOutputSnapshotRaw=O,u.currentOutputSnapshotResolved=U,u.currentWriteId=fg(n);const K=zI(n.serverSyncTree_,e,U,u.currentWriteId,u.applyLocally);Bn(n.eventQueue_,e,K),gg(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(g,y,I)=>{let D=null;g?a.reject(g):(D=new tf(I,new ha(n._repo,n._path),Mn),a.resolve(new cR(y,D)))},d,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new lk(a.committed,new ju(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function C0(n,e){n=(0,k.m9)(n),$s("setPriority",n._path),h0("setPriority",e,!1);const t=new k.BH;return ef(n._repo,Ln(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function mT(n,e){n=(0,k.m9)(n),$s("push",n._path),Wa("push",e,n._path,!0);const t=ry(n._repo),r=ex(t),i=Bu(n,r),a=Bu(n,r);let u;return u=null!=e?yT(a,e).then(()=>a):Promise.resolve(a),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new qs(this.database,u));t&&i.then(()=>t(null),u=>t(u));const a=new qs(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return $s("Reference.onDisconnect",this._delegate._path),new ak(new Kx(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class wg{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function FT(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ol("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ol('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new rd(rd.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new rd(u)}!function NT(n,e,t,r){n.repoInfo_=new uw(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof qs){const t=Zx(this._delegate,e.toString());return new qs(this,t)}{const t=mg(this._delegate,e);return new qs(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=Zx(this._delegate,e);return new qs(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function R0(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),sy(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function M0(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function y0(n){n.persistentConnection_&&n.persistentConnection_.resume(rT)}(n._repo)}(this._delegate)}}wg.ServerValue={TIMESTAMP:function UT(){return VT}(),increment:n=>function uR(n){return{".sv":{increment:n}}}(n)};var _d=Object.freeze({__proto__:null,initStandalone:function BT({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){Xv(t);const u=new xo.zt("auth-internal",new xo.H0("database-standalone"));return u.setComponent(new xo.wA("auth-internal",()=>r,"PRIVATE")),{instance:new wg(PT(n,u,void 0,e,a),n),namespace:i}}});const jT=wg.ServerValue;!function N0(n){n.INTERNAL.registerComponent(new xo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new wg(i,r)},"PUBLIC").setServiceProps({Reference:qs,Query:Ar,Database:wg,DataSnapshot:ju,enableLogging:LT,INTERNAL:_d,ServerValue:jT}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.7")}(w_.Z);var nf=L(5363),mR=L(6063);class P0 extends jr.x{constructor(e=1/0,t=1/0,r=mR.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let d=0;for(let g=1;g<r.length&&r[g]<=u;g+=2)d=g;d&&r.splice(0,d+1)}}}function dy(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,Qc.B)({connector:()=>new P0(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Eg(n,e){return(0,Uc.m)(e)?Qr(()=>n,e):Qr(()=>n)}var HT=L(9468);L(5867);const WT=new Map,CR={activated:!1,tokenObservers:[]},pk={initialized:!1,enabled:!1};function yi(n){return WT.get(n)||CR}function Ka(n,e){WT.set(n,e)}function hy(){return pk}class TR{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ve.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function vk(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const gs=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function s(n){if(!yi(n).activated)throw gs.create("use-before-activation",{appName:n.name})}function f(n,e){return m.apply(this,arguments)}function m(){return(m=(0,ve.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const D=yield i.getHeartbeatsHeader();D&&(r["X-Firebase-Client"]=D)}const a={method:"POST",body:JSON.stringify(e),headers:r};let u,d;try{u=yield fetch(n,a)}catch(D){throw gs.create("fetch-network-error",{originalErrorMessage:D.message})}if(200!==u.status)throw gs.create("fetch-status-error",{httpStatus:u.status});try{d=yield u.json()}catch(D){throw gs.create("fetch-parse-error",{originalErrorMessage:D.message})}const g=d.ttl.match(/^([\d.]+)(s)$/);if(!g||!g[2]||isNaN(Number(g[1])))throw gs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const y=1e3*Number(g[1]),I=Date.now();return{token:d.attestationToken,expireTimeMillis:I+y,issuedAtTimeMillis:I}})).apply(this,arguments)}function C(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const V="firebase-app-check-store";let Q=null;function we(){return Q||(Q=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(gs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(V,{keyPath:"compositeKey"})}}catch(t){e(gs.create("storage-open",{originalErrorMessage:t.message}))}}),Q)}function Zt(){return(Zt=(0,ve.Z)(function*(n,e){const r=(yield we()).transaction(V,"readwrite"),a=r.objectStore(V).put({compositeKey:n,value:e});return new Promise((u,d)=>{a.onsuccess=g=>{u()},r.onerror=g=>{var y;d(gs.create("storage-set",{originalErrorMessage:null===(y=g.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const yd=new Ro.Yd("@firebase/app-check");function fy(n,e){return(0,k.hl)()?function Ge(n,e){return function _t(n,e){return Zt.apply(this,arguments)}(function Hu(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{yd.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function py(){return hy().enabled}function gy(){return Ig.apply(this,arguments)}function Ig(){return(Ig=(0,ve.Z)(function*(){const n=hy();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const n2={error:"UNKNOWN_ERROR"};function r2(n){return k.US.encodeString(JSON.stringify(n),!1)}function KT(n){return DR.apply(this,arguments)}function DR(){return(DR=(0,ve.Z)(function*(n,e=!1){const t=n.app;s(t);const r=yi(t);let a,i=r.token;if(!i){const g=yield r.cachedTokenPromise;g&&ZT(g)&&(i=g)}if(!e&&i&&ZT(i))return{token:i.token};let d,u=!1;if(py()){r.exchangeTokenPromise||(r.exchangeTokenPromise=f(C(t,yield gy()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),u=!0);const g=yield r.exchangeTokenPromise;return yield fy(t,g),Ka(t,Object.assign(Object.assign({},r),{token:g})),{token:g.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(g=>(r.exchangeTokenPromise=void 0,g)),u=!0),i=yield r.exchangeTokenPromise}catch(g){"appCheck/throttled"===g.code?yd.warn(g.message):yd.error(g),a=g}return i?(d={token:i.token},Ka(t,Object.assign(Object.assign({},r),{token:i})),yield fy(t,i)):d=s2(a),u&&bk(t,d),d})).apply(this,arguments)}function AR(n,e){const t=yi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ka(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Ek(n){const{app:e}=n,t=yi(e);let r=t.tokenRefresher;r||(r=function i2(n){const{app:e}=n;return new TR((0,ve.Z)(function*(){let r;if(r=yi(e).token?yield KT(n,!0):yield KT(n),r.error)throw r.error}),()=>!0,()=>{const t=yi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ka(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function bk(n,e){const t=yi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function ZT(n){return n.expireTimeMillis-Date.now()>0}function s2(n){return{token:r2(n2),error:n}}class o2{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=yi(this.app);for(const t of e)AR(this.app,t.next);return Promise.resolve()}}const Rk="app-check-internal";!function w2(){(0,Mi._registerComponent)(new xo.wA("app-check",n=>function a2(n,e){return new o2(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Rk).initialize()})),(0,Mi._registerComponent)(new xo.wA(Rk,n=>function l2(n){return{getToken:e=>KT(n,e),addTokenListener:e=>function SR(n,e,t,r){const{app:i}=n,a=yi(i),u={next:t,error:r,type:e};if(Ka(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,u]})),a.token&&ZT(a.token)){const d=a.token;Promise.resolve().then(()=>{t({token:d.token}),Ek(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Ek(n))}(n,"INTERNAL",e),removeTokenListener:e=>AR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Mi.registerVersion)("@firebase/app-check","0.5.5")}();class B0{constructor(){return(0,tn.vb)("app-check")}}"undefined"!=typeof window&&window;var QT=L(127);const PR=new h.OlP("angularfire2.auth.use-emulator"),OR=new h.OlP("angularfire2.auth.settings"),kR=new h.OlP("angularfire2.auth.tenant-id"),FR=new h.OlP("angularfire2.auth.langugage-code"),LR=new h.OlP("angularfire2.auth.use-device-language"),VR=new h.OlP("angularfire.auth.persistence"),UR=(n,e,t,r,i,a,u,d)=>(0,Qn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const g=e.runOutsideAngular(()=>n.auth());if(t&&g.useEmulator(...t),r&&(g.tenantId=r),g.languageCode=i,a&&g.useDeviceLanguage(),u)for(const[y,I]of Object.entries(u))g.settings[y]=I;return d&&g.setPersistence(d),g},[t,r,i,a,u,d]);let JT=(()=>{class n{constructor(t,r,i,a,u,d,g,y,I,D,R,O){const U=new jr.x,K=Xe(void 0).pipe((0,nf.Q)(u.outsideAngular),Qr(()=>a.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,4087)))),(0,mt.U)(()=>(0,Qn.on)(t,a,r)),(0,mt.U)(pe=>UR(pe,a,d,y,I,D,g,R)),dy({bufferSize:1,refCount:!1}));if(Ir(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Xe(null);else{K.pipe(Al()).subscribe();const Ve=K.pipe(Qr(Be=>Be.getRedirectResult().then(Tt=>Tt,()=>null)),tn.iC,dy({bufferSize:1,refCount:!1})),Ne=K.pipe(Qr(Be=>new In.y(Tt=>({unsubscribe:a.runOutsideAngular(()=>Be.onAuthStateChanged(yt=>Tt.next(yt),yt=>Tt.error(yt),()=>Tt.complete()))})))),et=K.pipe(Qr(Be=>new In.y(Tt=>({unsubscribe:a.runOutsideAngular(()=>Be.onIdTokenChanged(yt=>Tt.next(yt),yt=>Tt.error(yt),()=>Tt.complete()))}))));this.authState=Ve.pipe(Eg(Ne),(0,HT.R)(u.outsideAngular),(0,nf.Q)(u.insideAngular)),this.user=Ve.pipe(Eg(et),(0,HT.R)(u.outsideAngular),(0,nf.Q)(u.insideAngular)),this.idToken=this.user.pipe(Qr(Be=>Be?(0,Sn.D)(Be.getIdToken()):Xe(null))),this.idTokenResult=this.user.pipe(Qr(Be=>Be?(0,Sn.D)(Be.getIdTokenResult()):Xe(null))),this.credential=(0,Mu.T)(Ve,U,this.authState.pipe(ds(Be=>!Be))).pipe((0,mt.U)(Be=>(null==Be?void 0:Be.user)?Be:null),(0,HT.R)(u.outsideAngular),(0,nf.Q)(u.insideAngular))}return(0,Qn.pX)(this,K,a,{spy:{apply:(pe,Ve,Ne)=>{(pe.startsWith("signIn")||pe.startsWith("createUser"))&&Ne.then(et=>U.next(et))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Qn.Dh),h.LFG(Qn.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(tn.HU),h.LFG(PR,8),h.LFG(OR,8),h.LFG(kR,8),h.LFG(FR,8),h.LFG(LR,8),h.LFG(VR,8),h.LFG(B0,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),D2=(()=>{class n{constructor(){QT.Z.registerVersion("angularfire",tn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[JT]}),n})();function Nk(n){return null==n}function Pk(n){return"function"==typeof n.set}function Ok(n,e){return Pk(e)?e:n.ref(e)}function kk(n,e){if(function S2(n){return"string"==typeof n}(n))return e.stringCase();if(Pk(n))return e.firebaseCase();if(function A2(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function j0(n,e,t="on",r=Dp.z){return new In.y(i=>{let a=null;return a=n[t](e,(u,d)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,mt.U)(i=>{const{snapshot:a,prevKey:u}=i;let d=null;return a.exists()&&(d=a.key),{type:e,payload:a,prevKey:u,key:d}}),(0,Qc.B)())}function Fk(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function M2(n,e){const{payload:t,prevKey:r,key:i}=e,a=Fk(n,i),u=function R2(n,e){if(Nk(e))return 0;{const t=Fk(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(g=>{const y={payload:g,type:"value",prevKey:d,key:g.key};return d=g.key,n=[...n,y],!1})}return n;case"child_added":if(a>-1){const d=n[a-1];(d&&d.key||null)!==r&&(n=n.filter(g=>g.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(a>-1){const d=n.splice(a,1)[0];return(n=n.slice()).splice(u,0,d),n}return n;default:return n}}function Lk(n){return(Nk(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Vk(n,e,t){return function x2(n,e,t){return j0(n,"value","once",t).pipe(Qr(r=>{const i=[Xe(r)];return e.forEach(a=>i.push(j0(n,a,"on",t))),(0,Mu.T)(...i).pipe(Dl(M2,[]))}),Jc())}(n,e=Lk(e),t)}function Uk(n,e,t){const r=(e=Lk(e)).map(i=>j0(n,i,"on",t));return(0,Mu.T)(...r)}function Bk(n,e){return function(r,i){return kk(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function k2(n){return function(t){return t?kk(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function jk(n,e){return function(){return j0(n,"value","on",e)}}const V2=new h.OlP("angularfire2.realtimeDatabaseURL"),U2=new h.OlP("angularfire2.database.use-emulator");let Hk=(()=>{class n{constructor(t,r,i,a,u,d,g,y,I,D,R,O,U,K,pe){this.schedulers=d;const Ve=g,Ne=(0,Qn.on)(t,u,r);y&&UR(Ne,u,I,R,O,U,D,K),this.database=(0,Qn.cc)(`${Ne.name}.database.${i}`,"AngularFireDatabase",Ne.name,()=>{const et=u.runOutsideAngular(()=>Ne.database(i||void 0));return Ve&&et.useEmulator(...Ve),et},[Ve])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Ok(this.database,t));let a=i;return r&&(a=r(i)),function F2(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Bk(r,"update"),set:Bk(r,"set"),push:i=>r.push(i),remove:k2(r),snapshotChanges:i=>Vk(n,i,t).pipe(tn.iC),stateChanges:i=>Uk(n,i,t).pipe(tn.iC),auditTrail:i=>function N2(n,e,t){return function O2(n,e,t){return function P2(n,e){return j0(n,"value","on",e).pipe((0,mt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function Mh(...n){const e=(0,zo.jO)(n);return(0,hr.e)((t,r)=>{const i=n.length,a=new Array(i);let u=n.map(()=>!1),d=!1;for(let g=0;g<i;g++)(0,an.Xf)(n[g]).subscribe((0,yn.x)(r,y=>{a[g]=y,!d&&!u[g]&&(u[g]=!0,(d=u.every(mh.y))&&(u=null))},Rh.Z));t.subscribe((0,yn.x)(r,g=>{if(d){const y=[g,...a];r.next(e?e(...y):y)}}))})}(e),(0,mt.U)(([i,a])=>{const u=i.lastKeyToLoad,d=a.map(g=>g.key);return{actions:a,lastKeyToLoad:u,loadedKeys:d}}),function Nh(n){return(0,hr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,yn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,mt.U)(i=>i.actions))}(n,Uk(n,e).pipe(Dl((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(tn.iC),valueChanges:(i,a)=>Vk(n,i,t).pipe((0,mt.U)(d=>d.map(g=>a&&a.idField?Object.assign(Object.assign({},g.payload.val()),{[a.idField]:g.key}):g.payload.val())),tn.iC)}}(a,this)}object(t){return function L2(n,e){return{query:n,snapshotChanges:()=>jk(n,e.schedulers.outsideAngular)().pipe(tn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>jk(n,e.schedulers.outsideAngular)().pipe(tn.iC,(0,mt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Ok(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Qn.Dh),h.LFG(Qn.xv,8),h.LFG(V2,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(tn.HU),h.LFG(U2,8),h.LFG(JT,8),h.LFG(PR,8),h.LFG(OR,8),h.LFG(kR,8),h.LFG(FR,8),h.LFG(LR,8),h.LFG(VR,8),h.LFG(B0,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),B2=(()=>{class n{constructor(){QT.Z.registerVersion("angularfire",tn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Hk]}),n})(),H0=(()=>{class n{constructor(t){this.db=t}addNews(t){this.newsListRef.push({title:t.title})}getNews(t){return this.newsRef=this.db.object("newslist/"+t),this.newsRef}getNewsList(){return this.newsListRef=this.db.list("newslist"),this.newsListRef}updateNews(t){this.newsRef.update({title:t.title})}deleteNews(t){this.newsRef=this.db.object("newslist/"+t),this.newsRef.remove()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Hk))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class $k{}const vd="*";function H2(n,e){return{type:7,name:n,definitions:e,options:{}}}function Gk(n,e=null){return{type:4,styles:e,timings:n}}function qk(n,e=null){return{type:2,steps:n,options:e}}function $0(n){return{type:6,styles:n,offset:null}}function BR(n,e,t){return{type:0,name:n,styles:e,options:t}}function zk(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Wk(n){Promise.resolve(null).then(n)}class G0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Wk(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Kk{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?Wk(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==a&&this._onFinish()}),u.onDestroy(()=>{++r==a&&this._onDestroy()}),u.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((u,d)=>Math.max(u,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const Zk=["toast-component",""];function $2(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",5),h.NdJ("click",function(){return h.CHM(t),h.oxw().remove()}),h.TgZ(1,"span",6),h._uU(2,"\xd7"),h.qZA()()}}function G2(n,e){if(1&n&&(h.ynx(0),h._uU(1),h.BQk()),2&n){const t=h.oxw(2);h.xp6(1),h.hij("[",t.duplicatesCount+1,"]")}}function q2(n,e){if(1&n&&(h.TgZ(0,"div"),h._uU(1),h.YNc(2,G2,2,1,"ng-container",4),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.titleClass),h.uIk("aria-label",t.title),h.xp6(1),h.hij(" ",t.title," "),h.xp6(1),h.Q6J("ngIf",t.duplicatesCount)}}function z2(n,e){if(1&n&&h._UZ(0,"div",7),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.Q6J("innerHTML",t.message,h.oJD)}}function W2(n,e){if(1&n&&(h.TgZ(0,"div",8),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.uIk("aria-label",t.message),h.xp6(1),h.hij(" ",t.message," ")}}function K2(n,e){if(1&n&&(h.TgZ(0,"div"),h._UZ(1,"div",9),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Udp("width",t.width+"%")}}function Z2(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",5),h.NdJ("click",function(){return h.CHM(t),h.oxw().remove()}),h.TgZ(1,"span",6),h._uU(2,"\xd7"),h.qZA()()}}function Y2(n,e){if(1&n&&(h.ynx(0),h._uU(1),h.BQk()),2&n){const t=h.oxw(2);h.xp6(1),h.hij("[",t.duplicatesCount+1,"]")}}function Q2(n,e){if(1&n&&(h.TgZ(0,"div"),h._uU(1),h.YNc(2,Y2,2,1,"ng-container",4),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.titleClass),h.uIk("aria-label",t.title),h.xp6(1),h.hij(" ",t.title," "),h.xp6(1),h.Q6J("ngIf",t.duplicatesCount)}}function J2(n,e){if(1&n&&h._UZ(0,"div",7),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.Q6J("innerHTML",t.message,h.oJD)}}function X2(n,e){if(1&n&&(h.TgZ(0,"div",8),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.uIk("aria-label",t.message),h.xp6(1),h.hij(" ",t.message," ")}}function ej(n,e){if(1&n&&(h.TgZ(0,"div"),h._UZ(1,"div",9),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Udp("width",t.width+"%")}}class tj{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class XT{constructor(e,t,r,i,a,u){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=a,this.toastRef=u,this._onTap=new jr.x,this._onAction=new jr.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const Yk={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null},Qk=new h.OlP("ToastConfig");class rj{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new jr.x,this._activate=new jr.x,this._manualClose=new jr.x,this._resetTimeout=new jr.x,this._countDuplicate=new jr.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class ij{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,r){return e===XT?this._toastPackage:this._parentInjector.get(e,t,r)}}class sj extends class nj{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class oj{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let aj=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ie))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lj=(()=>{class n{constructor(t,r,i,a){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=a,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new sj(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new oj(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(aj),h.LFG(h._Vd),h.LFG(h.z2F),h.LFG(ie))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),q0=(()=>{class n{constructor(t,r,i,a,u){this.overlay=r,this._injector=i,this.sanitizer=a,this.ngZone=u,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}show(t,r,i={},a=""){return this._preBuildNotification(a,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.toasts[this.currentlyActive]&&(this.currentlyActive=this.currentlyActive-1),!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,a){const{includeTitleDuplicates:u}=this.toastrConfig;for(const d of this.toasts){const g=u&&d.title===t;if((!u||g)&&d.message===r)return d.toastRef.onDuplicate(i,a),d}return null}applyConfig(t={}){return Object.assign(Object.assign({},this.toastrConfig),t)}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,a){return a.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,a)):this._buildNotification(t,r,i,a)}_buildNotification(t,r,i,a){if(!a.toastComponent)throw new Error("toastComponent required");const u=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&a.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==u)return u;this.previousToastMessage=r;let d=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(d=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const g=this.overlay.create(a.positionClass,this.overlayContainer);this.index=this.index+1;let y=r;r&&a.enableHtml&&(y=this.sanitizer.sanitize(h.q3G.HTML,r));const I=new rj(g),D=new XT(this.index,a,y,i,t,I),R=new ij(D,this._injector),O=new tj(a.toastComponent,R),U=g.attach(O,this.toastrConfig.newestOnTop);I.componentInstance=U.instance;const K={toastId:this.index,title:i||"",message:r||"",toastRef:I,onShown:I.afterActivate(),onHidden:I.afterClosed(),onTap:D.onTap(),onAction:D.onAction(),portal:U};return d||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{K.toastRef.activate()})),this.toasts.push(K),K}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Qk),h.LFG(lj),h.LFG(h.zs3),h.LFG(Ms),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uj=(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(a=>{this.duplicatesCount=a})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(q0),h.Y36(XT),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(h.d8E("@flyInOut",r.state),h.Tol(r.toastClasses),h.Udp("display",r.displayStyle))},attrs:Zk,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(t,r){1&t&&(h.YNc(0,$2,3,0,"button",0),h.YNc(1,q2,3,5,"div",1),h.YNc(2,z2,1,3,"div",2),h.YNc(3,W2,2,4,"div",3),h.YNc(4,K2,2,2,"div",4)),2&t&&(h.Q6J("ngIf",r.options.closeButton),h.xp6(1),h.Q6J("ngIf",r.title),h.xp6(1),h.Q6J("ngIf",r.message&&r.options.enableHtml),h.xp6(1),h.Q6J("ngIf",r.message&&!r.options.enableHtml),h.xp6(1),h.Q6J("ngIf",r.options.progressBar))},directives:[ur],encapsulation:2,data:{animation:[H2("flyInOut",[BR("inactive",$0({opacity:0})),BR("active",$0({opacity:1})),BR("removed",$0({opacity:0})),zk("inactive => active",Gk("{{ easeTime }}ms {{ easing }}")),zk("active => removed",Gk("{{ easeTime }}ms {{ easing }}"))])]}}),n})();const cj=Object.assign(Object.assign({},Yk),{toastComponent:uj});let dj=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:Qk,useValue:{default:cj,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[lo]]}),n})(),hj=(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.appRef=i,this.width=-1,this.toastClasses="",this.state="inactive",this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(a=>{this.duplicatesCount=a})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(q0),h.Y36(XT),h.Y36(h.z2F))},n.\u0275cmp=h.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(h.Tol(r.toastClasses),h.Udp("display",r.displayStyle))},attrs:Zk,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(t,r){1&t&&(h.YNc(0,Z2,3,0,"button",0),h.YNc(1,Q2,3,5,"div",1),h.YNc(2,J2,1,3,"div",2),h.YNc(3,X2,2,4,"div",3),h.YNc(4,ej,2,2,"div",4)),2&t&&(h.Q6J("ngIf",r.options.closeButton),h.xp6(1),h.Q6J("ngIf",r.title),h.xp6(1),h.Q6J("ngIf",r.message&&r.options.enableHtml),h.xp6(1),h.Q6J("ngIf",r.message&&!r.options.enableHtml),h.xp6(1),h.Q6J("ngIf",r.options.progressBar))},directives:[ur],encapsulation:2}),n})();function fj(n,e){1&n&&(h.TgZ(0,"p",11)(1,"sup"),h._uU(2,"*"),h.qZA(),h._uU(3,"Please enter a title "),h.qZA())}function pj(n,e){1&n&&(h.TgZ(0,"p",11)(1,"sup"),h._uU(2,"*"),h.qZA(),h._uU(3,"Title shouldn't be less than 10 characters "),h.qZA())}Object.assign(Object.assign({},Yk),{toastComponent:hj});let gj=(()=>{class n{constructor(t,r,i){this.newsServive=t,this.fb=r,this.toastr=i}ngOnInit(){this.newsServive.getNewsList(),this.createForm()}createForm(){this.newsForm=this.fb.group({title:["",[di.required,di.minLength(10)]]})}get title(){return this.newsForm.get("title")}ResetForm(){this.newsForm.reset()}submitNewsData(){this.newsServive.addNews(this.newsForm.value),this.toastr.success(this.newsForm.controls.title.value+" successfully added!"),this.ResetForm()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(H0),h.Y36(Vc),h.Y36(q0))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-add-news"]],decls:18,vars:4,consts:[[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["novalidate","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","formControlName","title","required","",1,"form-control"],["class","error",4,"ngIf"],[1,"form-group","text-right"],["type","button",1,"btn","btn-secondary","gap-right",3,"click"],["type","submit",1,"btn","btn-secondary",3,"disabled"],[1,"error"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"h2",1),h._uU(2,"Add News"),h.qZA()(),h.TgZ(3,"form",2),h.NdJ("ngSubmit",function(){return r.submitNewsData()}),h.TgZ(4,"div",3)(5,"div",4)(6,"div",3)(7,"div",5)(8,"label"),h._uU(9,"News title"),h.qZA(),h._UZ(10,"input",6),h.YNc(11,fj,4,0,"p",7),h.YNc(12,pj,4,0,"p",7),h.qZA(),h.TgZ(13,"div",8)(14,"button",9),h.NdJ("click",function(){return r.ResetForm()}),h._uU(15," Reset "),h.qZA(),h.TgZ(16,"button",10),h._uU(17," Add News "),h.qZA()()()()()()),2&t&&(h.xp6(3),h.Q6J("formGroup",r.newsForm),h.xp6(8),h.Q6J("ngIf",r.title.touched&&r.title.invalid),h.xp6(1),h.Q6J("ngIf",null==r.title.errors?null:r.title.errors.minlength),h.xp6(4),h.Q6J("disabled",!r.newsForm.valid))},directives:[Gf,ls,Mc,Yo,pu,Nc,Cl,ur],styles:[""]}),n})();function mj(n,e){if(1&n&&(h.TgZ(0,"a",2),h._uU(1),h.qZA()),2&n){const t=e.$implicit;h.MGl("routerLink","/detail/",t.$key,""),h.xp6(1),h.hij(" ",t.title," ")}}let _j=(()=>{class n{constructor(t){this.newsService=t,this.maxTop=4,this.newsList=[]}ngOnInit(){this.getNewsList()}getNewsList(){this.newsService.getNewsList().snapshotChanges().subscribe(r=>{this.newsList=[],r.forEach(i=>{let a=i.payload.toJSON();a.$key=i.key,this.newsList.push(a)})})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(H0))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-dashboard"]],decls:5,vars:5,consts:[[1,"news-menu"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,r){1&t&&(h.TgZ(0,"h2"),h._uU(1,"Top News"),h.qZA(),h.TgZ(2,"div",0),h.YNc(3,mj,2,2,"a",1),h.ALo(4,"slice"),h.qZA()),2&t&&(h.xp6(3),h.Q6J("ngForOf",h.Dn7(4,1,r.newsList,0,4)))},directives:[lr,xu],pipes:[ec],styles:["h2[_ngcontent-%COMP%]{text-align:center}.news-menu[_ngcontent-%COMP%]{padding:0;margin:auto;max-width:1000px;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-around;align-content:flex-start;align-items:flex-start}a[_ngcontent-%COMP%]{background-color:#3f525c;border-radius:2px;padding:1rem;font-size:1.2rem;text-decoration:none;display:inline-block;color:#fff;text-align:center;width:100%;min-width:70px;margin:.5rem auto;box-sizing:border-box;order:0;flex:0 1 auto;align-self:auto}@media (min-width: 600px){a[_ngcontent-%COMP%]{width:18%;box-sizing:content-box}}a[_ngcontent-%COMP%]:hover{background-color:#000}"]}),n})();function yj(n,e){1&n&&(h.TgZ(0,"p",15)(1,"sup"),h._uU(2,"*"),h.qZA(),h._uU(3,"Please enter title "),h.qZA())}function vj(n,e){1&n&&(h.TgZ(0,"p",15)(1,"sup"),h._uU(2,"*"),h.qZA(),h._uU(3,"Title shouldn't be less than 10 characters "),h.qZA())}let wj=(()=>{class n{constructor(t,r,i,a,u,d){this.newsService=t,this.fb=r,this.location=i,this.actRoute=a,this.router=u,this.toastr=d}ngOnInit(){this.updateNewsData();const t=this.actRoute.snapshot.paramMap.get("id");this.newsService.getNews(t).valueChanges().subscribe(r=>{this.editForm.setValue(r)})}get title(){return this.editForm.get("title")}updateNewsData(){this.editForm=this.fb.group({title:["",[di.required,di.minLength(10)]]})}goBack(){this.location.back()}updateForm(){this.newsService.updateNews(this.editForm.value),this.toastr.success(this.editForm.controls.title.value+" updated successfully"),this.router.navigate([""])}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(H0),h.Y36(Vc),h.Y36(Ee),h.Y36(Tu),h.Y36(hs),h.Y36(q0))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-edit-news"]],decls:23,vars:4,consts:[[1,"d-flex","justify-content-between","flex-wrap","flex-md-nowrap","align-items-center","pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],[1,"btn-toolbar","mb-2","mb-md-0"],[1,"btn-group"],[1,"backButton",3,"click"],[1,"row"],[1,"col-lg-12"],[1,"pricing-header","form-block","mx-auto"],["novalidate","",3,"formGroup","ngSubmit"],[1,"col-lg-5","col-md-12","col-sm-12"],[1,"col-md-12","mb-3"],["type","text","formControlName","title","value","","required","",1,"form-control"],["class","error",4,"ngIf"],[1,"form-group","text-right"],["type","submit",3,"disabled"],[1,"error"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"h1",1),h._uU(2,"Edit News Details"),h.qZA(),h.TgZ(3,"div",2)(4,"div",3)(5,"button",4),h.NdJ("click",function(){return r.goBack()}),h._uU(6," Go Back "),h.qZA()()()(),h.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"form",8),h.NdJ("ngSubmit",function(){return r.updateForm()}),h.TgZ(11,"div",5)(12,"div",9)(13,"div",5)(14,"div",10)(15,"label"),h._uU(16,"News Title"),h.qZA(),h._UZ(17,"input",11),h.YNc(18,yj,4,0,"p",12),h.YNc(19,vj,4,0,"p",12),h.qZA()(),h.TgZ(20,"div",13)(21,"button",14),h._uU(22," Update News "),h.qZA()()()()()()()()),2&t&&(h.xp6(10),h.Q6J("formGroup",r.editForm),h.xp6(8),h.Q6J("ngIf",r.title.touched&&r.title.invalid),h.xp6(1),h.Q6J("ngIf",null==r.title.errors?null:r.title.errors.minlength),h.xp6(2),h.Q6J("disabled",!r.editForm.valid))},directives:[Gf,ls,Mc,Yo,pu,Nc,Cl,ur],styles:[".backButton[_ngcontent-%COMP%]{margin-top:20px;background-color:#eee;padding:1rem;border-radius:4px;font-size:1rem}.backButton[_ngcontent-%COMP%]:hover{background-color:#cfd8dc}.backButton[_ngcontent-%COMP%]:disabled{background-color:#eee;color:#ccc;cursor:auto}"]}),n})();function Ej(n,e){if(1&n&&(h.TgZ(0,"div")(1,"div")(2,"label",4),h._uU(3,"News title: "),h.qZA(),h.TgZ(4,"p",5),h._uU(5),h.qZA()()()),2&n){const t=h.oxw();h.xp6(5),h.AsE("",t.news.title," ",t.news.$key,"")}}let bj=(()=>{class n{constructor(t,r,i,a,u){this.route=t,this.newsService=r,this.location=i,this.toastr=a,this.router=u,this.id=this.route.snapshot.paramMap.get("id")}ngOnInit(){this.getNews()}getNews(){this.newsService.getNews(this.id).valueChanges().subscribe(t=>this.news=t)}goBack(){this.location.back()}deleteNews(t){window.confirm("Are sure you want to delete this news ?")&&(this.newsService.deleteNews(this.id),this.toastr.success(this.news.title+" successfully deleted!"),this.router.navigate([""]))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Tu),h.Y36(H0),h.Y36(Ee),h.Y36(q0),h.Y36(hs))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-news-details"]],decls:8,vars:2,consts:[[4,"ngIf"],["type","button",3,"click"],[3,"routerLink"],["type","button"],["for","news-title"],["id","news-title"]],template:function(t,r){1&t&&(h.YNc(0,Ej,6,2,"div",0),h.TgZ(1,"button",1),h.NdJ("click",function(){return r.goBack()}),h._uU(2,"Back"),h.qZA(),h.TgZ(3,"a",2)(4,"button",3),h._uU(5,"Edit"),h.qZA()(),h.TgZ(6,"button",1),h.NdJ("click",function(){return r.deleteNews(r.id)}),h._uU(7,"Delete"),h.qZA()),2&t&&(h.Q6J("ngIf",r.news),h.xp6(3),h.MGl("routerLink","/edit/",r.id,""))},directives:[ur,xu],styles:["label[_ngcontent-%COMP%]{color:#435960;font-weight:700}input[_ngcontent-%COMP%]{font-size:1em;padding:.5rem;width:max-content}button[_ngcontent-%COMP%]{margin-top:20px;background-color:#eee;padding:1rem;border-radius:4px;font-size:1rem}button[_ngcontent-%COMP%]:hover{background-color:#cfd8dc}button[_ngcontent-%COMP%]:disabled{background-color:#eee;color:#ccc;cursor:auto}"]}),n})();function Cj(n,e){if(1&n){var t=h.EpF();h.TgZ(0,"a",11),h.NdJ("keyup.enter",function(){return h.CHM(t),h.oxw(3),h.MAs(1).previous()})("click",function(){return h.CHM(t),h.oxw(3),h.MAs(1).previous()}),h._uU(1),h.TgZ(2,"span",12),h._uU(3),h.qZA()()}if(2&n){var r=h.oxw(3);h.uIk("aria-label",r.previousLabel+" "+r.screenReaderPageLabel),h.xp6(1),h.hij(" ",r.previousLabel," "),h.xp6(2),h.Oqu(r.screenReaderPageLabel)}}function Ij(n,e){if(1&n&&(h.TgZ(0,"span"),h._uU(1),h.TgZ(2,"span",12),h._uU(3),h.qZA()()),2&n){var t=h.oxw(3);h.xp6(1),h.hij(" ",t.previousLabel," "),h.xp6(2),h.Oqu(t.screenReaderPageLabel)}}function Tj(n,e){if(1&n&&(h.TgZ(0,"li",8),h.YNc(1,Cj,4,3,"a",9),h.YNc(2,Ij,4,2,"span",10),h.qZA()),2&n){h.oxw(2);var t=h.MAs(1);h.ekj("disabled",t.isFirstPage()),h.xp6(1),h.Q6J("ngIf",1<t.getCurrent()),h.xp6(1),h.Q6J("ngIf",t.isFirstPage())}}function Dj(n,e){if(1&n){var t=h.EpF();h.TgZ(0,"a",11),h.NdJ("keyup.enter",function(){h.CHM(t);var u=h.oxw().$implicit;return h.oxw(2),h.MAs(1).setCurrent(u.value)})("click",function(){h.CHM(t);var u=h.oxw().$implicit;return h.oxw(2),h.MAs(1).setCurrent(u.value)}),h.TgZ(1,"span",12),h._uU(2),h.qZA(),h.TgZ(3,"span"),h._uU(4),h.ALo(5,"number"),h.qZA()()}if(2&n){var r=h.oxw().$implicit,i=h.oxw(2);h.xp6(2),h.hij("",i.screenReaderPageLabel," "),h.xp6(2),h.Oqu("..."===r.label?r.label:h.xi3(5,2,r.label,""))}}function Sj(n,e){if(1&n&&(h.ynx(0),h.TgZ(1,"span",12),h._uU(2),h.qZA(),h.TgZ(3,"span"),h._uU(4),h.ALo(5,"number"),h.qZA(),h.BQk()),2&n){var t=h.oxw().$implicit,r=h.oxw(2);h.xp6(2),h.hij("",r.screenReaderCurrentLabel," "),h.xp6(2),h.Oqu("..."===t.label?t.label:h.xi3(5,2,t.label,""))}}function Aj(n,e){if(1&n&&(h.TgZ(0,"li"),h.YNc(1,Dj,6,5,"a",9),h.YNc(2,Sj,6,5,"ng-container",10),h.qZA()),2&n){var t=e.$implicit;h.oxw(2);var r=h.MAs(1);h.ekj("current",r.getCurrent()===t.value)("ellipsis","..."===t.label),h.xp6(1),h.Q6J("ngIf",r.getCurrent()!==t.value),h.xp6(1),h.Q6J("ngIf",r.getCurrent()===t.value)}}function xj(n,e){if(1&n){var t=h.EpF();h.TgZ(0,"a",11),h.NdJ("keyup.enter",function(){return h.CHM(t),h.oxw(3),h.MAs(1).next()})("click",function(){return h.CHM(t),h.oxw(3),h.MAs(1).next()}),h._uU(1),h.TgZ(2,"span",12),h._uU(3),h.qZA()()}if(2&n){var r=h.oxw(3);h.uIk("aria-label",r.nextLabel+" "+r.screenReaderPageLabel),h.xp6(1),h.hij(" ",r.nextLabel," "),h.xp6(2),h.Oqu(r.screenReaderPageLabel)}}function Rj(n,e){if(1&n&&(h.TgZ(0,"span"),h._uU(1),h.TgZ(2,"span",12),h._uU(3),h.qZA()()),2&n){var t=h.oxw(3);h.xp6(1),h.hij(" ",t.nextLabel," "),h.xp6(2),h.Oqu(t.screenReaderPageLabel)}}function Mj(n,e){if(1&n&&(h.TgZ(0,"li",13),h.YNc(1,xj,4,3,"a",9),h.YNc(2,Rj,4,2,"span",10),h.qZA()),2&n){h.oxw(2);var t=h.MAs(1);h.ekj("disabled",t.isLastPage()),h.xp6(1),h.Q6J("ngIf",!t.isLastPage()),h.xp6(1),h.Q6J("ngIf",t.isLastPage())}}function Nj(n,e){if(1&n&&(h.TgZ(0,"ul",3),h.YNc(1,Tj,3,4,"li",4),h.TgZ(2,"li",5),h._uU(3),h.qZA(),h.YNc(4,Aj,3,6,"li",6),h.YNc(5,Mj,3,4,"li",7),h.qZA()),2&n){var t=h.oxw(),r=h.MAs(1);h.ekj("responsive",t.responsive),h.uIk("aria-label",t.screenReaderPaginationLabel),h.xp6(1),h.Q6J("ngIf",t.directionLinks),h.xp6(2),h.AsE(" ",r.getCurrent()," / ",r.getLastPage()," "),h.xp6(1),h.Q6J("ngForOf",r.pages)("ngForTrackBy",t.trackByIndex),h.xp6(1),h.Q6J("ngIf",t.directionLinks)}}var z0=function(){function n(){this.change=new h.vpe,this.instances={},this.DEFAULT_ID="DEFAULT_PAGINATION_ID"}return n.prototype.defaultId=function(){return this.DEFAULT_ID},n.prototype.register=function(e){return null==e.id&&(e.id=this.DEFAULT_ID),this.instances[e.id]?this.updateInstance(e):(this.instances[e.id]=e,!0)},n.prototype.updateInstance=function(e){var t=!1;for(var r in this.instances[e.id])e[r]!==this.instances[e.id][r]&&(this.instances[e.id][r]=e[r],t=!0);return t},n.prototype.getCurrentPage=function(e){if(this.instances[e])return this.instances[e].currentPage},n.prototype.setCurrentPage=function(e,t){if(this.instances[e]){var r=this.instances[e];t<=Math.ceil(r.totalItems/r.itemsPerPage)&&1<=t&&(this.instances[e].currentPage=t,this.change.emit(e))}},n.prototype.setTotalItems=function(e,t){this.instances[e]&&0<=t&&(this.instances[e].totalItems=t,this.change.emit(e))},n.prototype.setItemsPerPage=function(e,t){this.instances[e]&&(this.instances[e].itemsPerPage=t,this.change.emit(e))},n.prototype.getInstance=function(e){return void 0===e&&(e=this.DEFAULT_ID),this.instances[e]?this.clone(this.instances[e]):{}},n.prototype.clone=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(e){return n.\u0275fac(e)}}),n}(),Oj=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)},kj=Number.MAX_SAFE_INTEGER,Fj=function(){function n(e){this.service=e,this.state={}}return n.prototype.transform=function(e,t){if(!(e instanceof Array)){var r=t.id||this.service.defaultId();return this.state[r]?this.state[r].slice:e}var d,g,i=t.totalItems&&t.totalItems!==e.length,a=this.createInstance(e,t),u=a.id,y=a.itemsPerPage,I=this.service.register(a);if(!i&&e instanceof Array){if(this.stateIsIdentical(u,e,d=(a.currentPage-1)*(y=+y||kj),g=d+y))return this.state[u].slice;var R=e.slice(d,g);return this.saveState(u,e,R,d,g),this.service.change.emit(u),R}return I&&this.service.change.emit(u),this.saveState(u,e,e,d,g),e},n.prototype.createInstance=function(e,t){return this.checkConfig(t),{id:null!=t.id?t.id:this.service.defaultId(),itemsPerPage:+t.itemsPerPage||0,currentPage:+t.currentPage||1,totalItems:+t.totalItems||e.length}},n.prototype.checkConfig=function(e){var r=["itemsPerPage","currentPage"].filter(function(i){return!(i in e)});if(0<r.length)throw new Error("PaginatePipe: Argument is missing the following required properties: "+r.join(", "))},n.prototype.saveState=function(e,t,r,i,a){this.state[e]={collection:t,size:t.length,slice:r,start:i,end:a}},n.prototype.stateIsIdentical=function(e,t,r,i){var a=this.state[e];return!!a&&!(a.size!==t.length||a.start!==r||a.end!==i)&&a.slice.every(function(d,g){return d===t[r+g]})},n=function(n,e,t,r){var u,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,r);else for(var d=n.length-1;d>=0;d--)(u=n[d])&&(a=(i<3?u(a):i>3?u(e,t,a):u(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a}([Oj("design:paramtypes",[z0])],n),n.\u0275fac=function(t){return new(t||n)(h.Y36(z0,16))},n.\u0275pipe=h.Yjl({name:"paginate",type:n,pure:!1}),n}(),Za=function(n,e,t,r){var u,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,r);else for(var d=n.length-1;d>=0;d--)(u=n[d])&&(a=(i<3?u(a):i>3?u(e,t,a):u(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a},zs=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)};function HR(n){return!!n&&"false"!==n}var Lj=function(){function n(){this.maxSize=7,this.previousLabel="Previous",this.nextLabel="Next",this.screenReaderPaginationLabel="Pagination",this.screenReaderPageLabel="page",this.screenReaderCurrentLabel="You're on page",this.pageChange=new h.vpe,this.pageBoundsCorrection=new h.vpe,this._directionLinks=!0,this._autoHide=!1,this._responsive=!1}return Object.defineProperty(n.prototype,"directionLinks",{get:function(){return this._directionLinks},set:function(e){this._directionLinks=HR(e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"autoHide",{get:function(){return this._autoHide},set:function(e){this._autoHide=HR(e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"responsive",{get:function(){return this._responsive},set:function(e){this._responsive=HR(e)},enumerable:!0,configurable:!0}),n.prototype.trackByIndex=function(e){return e},Za([(0,h.IIB)(),zs("design:type",String)],n.prototype,"id",void 0),Za([(0,h.IIB)(),zs("design:type",Number)],n.prototype,"maxSize",void 0),Za([(0,h.IIB)(),zs("design:type",Boolean),zs("design:paramtypes",[Boolean])],n.prototype,"directionLinks",null),Za([(0,h.IIB)(),zs("design:type",Boolean),zs("design:paramtypes",[Boolean])],n.prototype,"autoHide",null),Za([(0,h.IIB)(),zs("design:type",Boolean),zs("design:paramtypes",[Boolean])],n.prototype,"responsive",null),Za([(0,h.IIB)(),zs("design:type",String)],n.prototype,"previousLabel",void 0),Za([(0,h.IIB)(),zs("design:type",String)],n.prototype,"nextLabel",void 0),Za([(0,h.IIB)(),zs("design:type",String)],n.prototype,"screenReaderPaginationLabel",void 0),Za([(0,h.IIB)(),zs("design:type",String)],n.prototype,"screenReaderPageLabel",void 0),Za([(0,h.IIB)(),zs("design:type",String)],n.prototype,"screenReaderCurrentLabel",void 0),Za([(0,h.r_U)(),zs("design:type",h.vpe)],n.prototype,"pageChange",void 0),Za([(0,h.r_U)(),zs("design:type",h.vpe)],n.prototype,"pageBoundsCorrection",void 0),n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["pagination-controls"]],inputs:{maxSize:"maxSize",previousLabel:"previousLabel",nextLabel:"nextLabel",screenReaderPaginationLabel:"screenReaderPaginationLabel",screenReaderPageLabel:"screenReaderPageLabel",screenReaderCurrentLabel:"screenReaderCurrentLabel",directionLinks:"directionLinks",autoHide:"autoHide",responsive:"responsive",id:"id"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},decls:3,vars:3,consts:[[3,"id","maxSize","pageChange","pageBoundsCorrection"],["p","paginationApi"],["class","ngx-pagination",3,"responsive",4,"ngIf"],[1,"ngx-pagination"],["class","pagination-previous",3,"disabled",4,"ngIf"],[1,"small-screen"],[3,"current","ellipsis",4,"ngFor","ngForOf","ngForTrackBy"],["class","pagination-next",3,"disabled",4,"ngIf"],[1,"pagination-previous"],["tabindex","0",3,"keyup.enter","click",4,"ngIf"],[4,"ngIf"],["tabindex","0",3,"keyup.enter","click"],[1,"show-for-sr"],[1,"pagination-next"]],template:function(t,r){if(1&t&&(h.TgZ(0,"pagination-template",0,1),h.NdJ("pageChange",function(u){return r.pageChange.emit(u)})("pageBoundsCorrection",function(u){return r.pageBoundsCorrection.emit(u)}),h.YNc(2,Nj,6,9,"ul",2),h.qZA()),2&t){var i=h.MAs(1);h.Q6J("id",r.id)("maxSize",r.maxSize),h.xp6(2),h.Q6J("ngIf",!(r.autoHide&&i.pages.length<=1))}},directives:function(){return[Vj,ur,lr]},pipes:function(){return[Ds]},styles:["\n.ngx-pagination {\n  margin-left: 0;\n  margin-bottom: 1rem; }\n  .ngx-pagination::before, .ngx-pagination::after {\n    content: ' ';\n    display: table; }\n  .ngx-pagination::after {\n    clear: both; }\n  .ngx-pagination li {\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    -ms-user-select: none;\n    margin-right: 0.0625rem;\n    border-radius: 0; }\n  .ngx-pagination li {\n    display: inline-block; }\n  .ngx-pagination a,\n  .ngx-pagination button {\n    color: #0a0a0a; \n    display: block;\n    padding: 0.1875rem 0.625rem;\n    border-radius: 0; }\n    .ngx-pagination a:hover,\n    .ngx-pagination button:hover {\n      background: #e6e6e6; }\n  .ngx-pagination .current {\n    padding: 0.1875rem 0.625rem;\n    background: #2199e8;\n    color: #fefefe;\n    cursor: default; }\n  .ngx-pagination .disabled {\n    padding: 0.1875rem 0.625rem;\n    color: #cacaca;\n    cursor: default; } \n    .ngx-pagination .disabled:hover {\n      background: transparent; }\n  .ngx-pagination a, .ngx-pagination button {\n    cursor: pointer; }\n\n.ngx-pagination .pagination-previous a::before,\n.ngx-pagination .pagination-previous.disabled::before { \n  content: '\xab';\n  display: inline-block;\n  margin-right: 0.5rem; }\n\n.ngx-pagination .pagination-next a::after,\n.ngx-pagination .pagination-next.disabled::after {\n  content: '\xbb';\n  display: inline-block;\n  margin-left: 0.5rem; }\n\n.ngx-pagination .show-for-sr {\n  position: absolute !important;\n  width: 1px;\n  height: 1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0); }\n.ngx-pagination .small-screen {\n  display: none; }\n@media screen and (max-width: 601px) {\n  .ngx-pagination.responsive .small-screen {\n    display: inline-block; } \n  .ngx-pagination.responsive li:not(.small-screen):not(.pagination-previous):not(.pagination-next) {\n    display: none; }\n}\n  "],encapsulation:2,changeDetection:0}),n}(),W0=function(n,e,t,r){var u,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(n,e,t,r);else for(var d=n.length-1;d>=0;d--)(u=n[d])&&(a=(i<3?u(a):i>3?u(e,t,a):u(e,t))||a);return i>3&&a&&Object.defineProperty(e,t,a),a},K0=function(n,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,e)},Vj=function(){function n(e,t){var r=this;this.service=e,this.changeDetectorRef=t,this.maxSize=7,this.pageChange=new h.vpe,this.pageBoundsCorrection=new h.vpe,this.pages=[],this.changeSub=this.service.change.subscribe(function(i){r.id===i&&(r.updatePageLinks(),r.changeDetectorRef.markForCheck(),r.changeDetectorRef.detectChanges())})}return n.prototype.ngOnInit=function(){void 0===this.id&&(this.id=this.service.defaultId()),this.updatePageLinks()},n.prototype.ngOnChanges=function(e){this.updatePageLinks()},n.prototype.ngOnDestroy=function(){this.changeSub.unsubscribe()},n.prototype.previous=function(){this.checkValidId(),this.setCurrent(this.getCurrent()-1)},n.prototype.next=function(){this.checkValidId(),this.setCurrent(this.getCurrent()+1)},n.prototype.isFirstPage=function(){return 1===this.getCurrent()},n.prototype.isLastPage=function(){return this.getLastPage()===this.getCurrent()},n.prototype.setCurrent=function(e){this.pageChange.emit(e)},n.prototype.getCurrent=function(){return this.service.getCurrentPage(this.id)},n.prototype.getLastPage=function(){var e=this.service.getInstance(this.id);return e.totalItems<1?1:Math.ceil(e.totalItems/e.itemsPerPage)},n.prototype.getTotalItems=function(){return this.service.getInstance(this.id).totalItems},n.prototype.checkValidId=function(){null==this.service.getInstance(this.id).id&&console.warn('PaginationControlsDirective: the specified id "'+this.id+'" does not match any registered PaginationInstance')},n.prototype.updatePageLinks=function(){var e=this,t=this.service.getInstance(this.id),r=this.outOfBoundCorrection(t);r!==t.currentPage?setTimeout(function(){e.pageBoundsCorrection.emit(r),e.pages=e.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,e.maxSize)}):this.pages=this.createPageArray(t.currentPage,t.itemsPerPage,t.totalItems,this.maxSize)},n.prototype.outOfBoundCorrection=function(e){var t=Math.ceil(e.totalItems/e.itemsPerPage);return t<e.currentPage&&0<t?t:e.currentPage<1?1:e.currentPage},n.prototype.createPageArray=function(e,t,r,i){i=+i;for(var a=[],u=Math.max(Math.ceil(r/t),1),d=Math.ceil(i/2),g=e<=d,y=u-d<e,I=!g&&!y,D=i<u,R=1;R<=u&&R<=i;){var U=this.calculatePageNumber(R,e,i,u);a.push({label:D&&(2===R&&(I||y)||R===i-1&&(I||g))?"...":U,value:U}),R++}return a},n.prototype.calculatePageNumber=function(e,t,r,i){var a=Math.ceil(r/2);return e===r?i:1===e?e:r<i?i-a<t?i-r+e:a<t?t-a+e:e:e},W0([(0,h.IIB)(),K0("design:type",String)],n.prototype,"id",void 0),W0([(0,h.IIB)(),K0("design:type",Number)],n.prototype,"maxSize",void 0),W0([(0,h.r_U)(),K0("design:type",h.vpe)],n.prototype,"pageChange",void 0),W0([(0,h.r_U)(),K0("design:type",h.vpe)],n.prototype,"pageBoundsCorrection",void 0),(n=W0([K0("design:paramtypes",[z0,h.sBO])],n)).\u0275fac=function(t){return new(t||n)(h.Y36(z0),h.Y36(h.sBO))},n.\u0275dir=h.lG2({type:n,selectors:[["pagination-template"],["","pagination-template",""]],inputs:{maxSize:"maxSize",id:"id"},outputs:{pageChange:"pageChange",pageBoundsCorrection:"pageBoundsCorrection"},exportAs:["paginationApi"],features:[h.TTD]}),n}(),Uj=function(){function n(){}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[z0],imports:[[lo]]}),n}();function Bj(n,e){1&n&&(h.TgZ(0,"div",6)(1,"p",7),h._uU(2,"No news added yet!"),h.qZA()())}function jj(n,e){if(1&n&&(h.TgZ(0,"li")(1,"a",8),h._UZ(2,"span",9),h.TgZ(3,"span",10),h._uU(4),h.qZA()()()),2&n){const t=e.$implicit;h.xp6(1),h.MGl("routerLink","/detail/",t.$key,""),h.xp6(3),h.Oqu(t.title)}}const Hj=function(n){return{itemsPerPage:8,currentPage:n}},$j=[{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"dashboard",component:_j},{path:"news",component:(()=>{class n{constructor(t){this.newsService=t,this.p=1,this.hideWhenNoNews=!0,this.noData=!1,this.newsList=[]}ngOnInit(){this.dataState(),this.newsService.getNewsList().snapshotChanges().subscribe(r=>{this.newsList=[],r.forEach(i=>{let a=i.payload.toJSON();a.$key=i.key,this.newsList.push(a)})})}dataState(){this.newsService.getNewsList().valueChanges().subscribe(t=>{t.length<=0?(this.hideWhenNoNews=!1,this.noData=!0):(this.hideWhenNoNews=!0,this.noData=!1)})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(H0))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-news"]],decls:8,vars:7,consts:[["class","no-data text-center",4,"ngIf"],[1,"newslist"],[4,"ngFor","ngForOf"],["routerLink","/add"],["type","button"],[3,"pageChange"],[1,"no-data","text-center"],[1,"nodata-msg"],[3,"routerLink"],[1,"badge"],[1,"title"]],template:function(t,r){1&t&&(h.YNc(0,Bj,3,0,"div",0),h.TgZ(1,"ul",1),h.YNc(2,jj,5,2,"li",2),h.ALo(3,"paginate"),h.qZA(),h.TgZ(4,"a",3)(5,"button",4),h._uU(6,"Add News"),h.qZA()(),h.TgZ(7,"pagination-controls",5),h.NdJ("pageChange",function(a){return r.p=a}),h.qZA()),2&t&&(h.Q6J("ngIf",r.noData),h.xp6(2),h.Q6J("ngForOf",h.xi3(3,2,r.newsList,h.VKq(5,Hj,r.p))))},directives:[ur,lr,xu,Lj],pipes:[Fj],styles:[".newslist[_ngcontent-%COMP%]{margin:0 0 2em;list-style-type:none;padding:0;width:100%}.newslist[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex}.newslist[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{flex:1;color:#000;cursor:pointer;position:relative;left:0;background-color:#eee;margin:.5em;padding:0;border-radius:4px;display:flex;align-items:stretch;height:1.8em}.newslist[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#2c3a41;background-color:#e6e6e6;left:.1em}.newslist[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active{background-color:#525252;color:#fafafa}.newslist[_ngcontent-%COMP%]   a.selected[_ngcontent-%COMP%]{background-color:#000;color:#fff}.newslist[_ngcontent-%COMP%]   a.selected[_ngcontent-%COMP%]:hover{background-color:#505050;color:#fff}.newslist[_ngcontent-%COMP%]   a.selected[_ngcontent-%COMP%]:active{background-color:#000;color:#fff}.newslist[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{display:inline-block;font-size:small;color:#fff;padding:.8em .7em 0;background-color:#405061;line-height:1em;margin-right:.8em;border-radius:4px 0 0 4px}.newslist[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{align-self:center}button[_ngcontent-%COMP%]{margin-top:20px;background-color:#eee;padding:1rem;border-radius:4px;font-size:1rem}button[_ngcontent-%COMP%]:hover{background-color:#cfd8dc}button[_ngcontent-%COMP%]:disabled{background-color:#eee;color:#ccc;cursor:auto}"]}),n})()},{path:"add",component:gj},{path:"detail/:id",component:bj},{path:"edit/:id",component:wj}];let Gj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[yC.forRoot($j)],yC]}),n})(),qj=(()=>{class n{constructor(){this.title="News"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:7,vars:0,consts:[[1,"container"],["routerLink","/dashboard"],["routerLink","/news"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"nav")(2,"a",1),h._uU(3,"Dashboard"),h.qZA(),h.TgZ(4,"a",2),h._uU(5,"News"),h.qZA()(),h._UZ(6,"router-outlet"),h.qZA())},directives:[xu,a_],styles:["h1[_ngcontent-%COMP%]{margin-bottom:0}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:1rem;text-decoration:none;margin-top:10px;display:inline-block;background-color:#e8e8e8;color:#3d3d3d;border-radius:4px}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;background-color:#42545c}nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#000}"]}),n})();const ln=!1;function Jk(n){return new h.vHH(3e3,ln)}function TH(){return"undefined"!=typeof window&&void 0!==window.document}function $R(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function rf(n){switch(n.length){case 0:return new G0;case 1:return n[0];default:return new Kk(n)}}function Xk(n,e,t,r,i={},a={}){const u=[],d=[];let g=-1,y=null;if(r.forEach(I=>{const D=I.offset,R=D==g,O=R&&y||{};Object.keys(I).forEach(U=>{let K=U,pe=I[U];if("offset"!==U)switch(K=e.normalizePropertyName(K,u),pe){case"!":pe=i[U];break;case vd:pe=a[U];break;default:pe=e.normalizeStyleValue(U,K,pe,u)}O[K]=pe}),R||d.push(O),y=O,g=D}),u.length)throw function pH(n){return new h.vHH(3502,ln)}();return d}function GR(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&qR(t,"start",n)));break;case"done":n.onDone(()=>r(t&&qR(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&qR(t,"destroy",n)))}}function qR(n,e,t){const r=t.totalTime,a=zR(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),u=n._data;return null!=u&&(a._data=u),a}function zR(n,e,t,r,i="",a=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!u}}function _a(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function e1(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let WR=(n,e)=>!1,t1=(n,e,t)=>[],n1=null;function KR(n){const e=n.parentNode||n.host;return e===n1?null:e}($R()||"undefined"!=typeof Element)&&(TH()?(n1=(()=>document.documentElement)(),WR=(n,e)=>{for(;e;){if(e===n)return!0;e=KR(e)}return!1}):WR=(n,e)=>n.contains(e),t1=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Tg=null,r1=!1;function i1(n){Tg||(Tg=function SH(){return"undefined"!=typeof document?document.body:null}()||{},r1=!!Tg.style&&"WebkitAppearance"in Tg.style);let e=!0;return Tg.style&&!function DH(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Tg.style,!e&&r1&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Tg.style)),e}const s1=WR,o1=t1;let a1=(()=>{class n{validateStyleProperty(t){return i1(t)}matchesElement(t,r){return!1}containsElement(t,r){return s1(t,r)}getParentElement(t){return KR(t)}query(t,r,i){return o1(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,u,d=[],g){return new G0(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ZR=(()=>{class n{}return n.NOOP=new a1,n})();const YR="ng-enter",tD="ng-leave",nD="ng-trigger",rD=".ng-trigger",u1="ng-animating",QR=".ng-animating";function Dg(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:JR(parseFloat(e[1]),e[2])}function JR(n,e){return"s"===e?1e3*n:n}function iD(n,e,t){return n.hasOwnProperty("duration")?n:function RH(n,e,t){let i,a=0,u="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(Jk()),{duration:0,delay:0,easing:""};i=JR(parseFloat(d[1]),d[2]);const g=d[3];null!=g&&(a=JR(parseFloat(g),d[4]));const y=d[5];y&&(u=y)}else i=n;if(!t){let d=!1,g=e.length;i<0&&(e.push(function zj(){return new h.vHH(3100,ln)}()),d=!0),a<0&&(e.push(function Wj(){return new h.vHH(3101,ln)}()),d=!0),d&&e.splice(g,0,Jk())}return{duration:i,delay:a,easing:u}}(n,e,t)}function my(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function sf(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else my(n,t);return t}function d1(n,e,t){return t?e+":"+t+";":""}function h1(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=d1(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=d1(0,PH(t),n.style[t]));n.setAttribute("style",e)}function $u(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=eM(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),$R()&&h1(n))}function Sg(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=eM(t);n.style[r]=""}),$R()&&h1(n))}function Z0(n){return Array.isArray(n)?1==n.length?n[0]:qk(n):n}const XR=new RegExp("{{\\s*(.+?)\\s*}}","g");function f1(n){let e=[];if("string"==typeof n){let t;for(;t=XR.exec(n);)e.push(t[1]);XR.lastIndex=0}return e}function sD(n,e,t){const r=n.toString(),i=r.replace(XR,(a,u)=>{let d=e[u];return e.hasOwnProperty(u)||(t.push(function Zj(n){return new h.vHH(3003,ln)}()),d=""),d.toString()});return i==r?n:i}function oD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const NH=/-+([a-z0-9])/g;function eM(n){return n.replace(NH,(...e)=>e[1].toUpperCase())}function PH(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ya(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Yj(n){return new h.vHH(3004,ln)}()}}function p1(n,e){return window.getComputedStyle(n)[e]}function UH(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function BH(n,e,t){if(":"==n[0]){const g=function jH(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function cH(n){return new h.vHH(3016,ln)}()),"* => *"}}(n,t);if("function"==typeof g)return void e.push(g);n=g}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function uH(n){return new h.vHH(3015,ln)}()),e;const i=r[1],a=r[2],u=r[3];e.push(g1(i,u));"<"==a[0]&&!("*"==i&&"*"==u)&&e.push(g1(u,i))}(r,t,e)):t.push(n),t}const cD=new Set(["true","1"]),dD=new Set(["false","0"]);function g1(n,e){const t=cD.has(n)||dD.has(n),r=cD.has(e)||dD.has(e);return(i,a)=>{let u="*"==n||n==i,d="*"==e||e==a;return!u&&t&&"boolean"==typeof i&&(u=i?cD.has(n):dD.has(n)),!d&&r&&"boolean"==typeof a&&(d=a?cD.has(e):dD.has(e)),u&&d}}const HH=new RegExp("s*:selfs*,?","g");function tM(n,e,t,r){return new $H(n).build(e,t,r)}class $H{constructor(e){this._driver=e}build(e,t,r){const i=new zH(t);this._resetContextStyleTimingState(i);const a=ya(this,Z0(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),a}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function Jj(){return new h.vHH(3006,ln)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const g=d,y=g.name;y.toString().split(/\s*,\s*/).forEach(I=>{g.name=I,a.push(this.visitState(g,t))}),g.name=y}else if(1==d.type){const g=this.visitTransition(d,t);r+=g.queryCount,i+=g.depCount,u.push(g)}else t.errors.push(function Xj(){return new h.vHH(3007,ln)}())}),{type:7,name:e.name,states:a,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,u=i||{};r.styles.forEach(d=>{if(hD(d)){const g=d;Object.keys(g).forEach(y=>{f1(g[y]).forEach(I=>{u.hasOwnProperty(I)||a.add(I)})})}}),a.size&&(oD(a.values()),t.errors.push(function eH(n,e){return new h.vHH(3008,ln)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=ya(this,Z0(e.animation),t);return{type:1,matchers:UH(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Ag(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>ya(this,r,t)),options:Ag(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(u=>{t.currentTime=r;const d=ya(this,u,t);return i=Math.max(i,t.currentTime),d});return t.currentTime=i,{type:3,steps:a,options:Ag(e.options)}}visitAnimate(e,t){const r=function KH(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return nM(iD(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=nM(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=iD(t,e);return nM(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:$0({});if(5==a.type)i=this.visitKeyframes(a,t);else{let u=e.styles,d=!1;if(!u){d=!0;const y={};r.easing&&(y.easing=r.easing),u=$0(y)}t.currentTime+=r.duration+r.delay;const g=this.visitStyle(u,t);g.isEmptyStep=d,i=g}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(u=>{"string"==typeof u?u==vd?r.push(u):t.errors.push(function tH(n){return new h.vHH(3002,ln)}()):r.push(u)}):r.push(e.styles);let i=!1,a=null;return r.forEach(u=>{if(hD(u)){const d=u,g=d.easing;if(g&&(a=g,delete d.easing),!i)for(let y in d)if(d[y].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(d=>{if(!this._driver.validateStyleProperty(d))return delete u[d],void t.unsupportedCSSPropertiesFound.add(d);const g=t.collectedStyles[t.currentQuerySelector],y=g[d];let I=!0;y&&(a!=i&&a>=y.startTime&&i<=y.endTime&&(t.errors.push(function nH(n,e,t,r,i){return new h.vHH(3010,ln)}()),I=!1),a=y.startTime),I&&(g[d]={startTime:a,endTime:i}),t.options&&function MH(n,e,t){const r=e.params||{},i=f1(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function Kj(n){return new h.vHH(3001,ln)}())})}(u[d],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function rH(){return new h.vHH(3011,ln)}()),r;let a=0;const u=[];let d=!1,g=!1,y=0;const I=e.steps.map(Ve=>{const Ne=this._makeStyleAst(Ve,t);let et=null!=Ne.offset?Ne.offset:function WH(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(hD(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(hD(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Ne.styles),Be=0;return null!=et&&(a++,Be=Ne.offset=et),g=g||Be<0||Be>1,d=d||Be<y,y=Be,u.push(Be),Ne});g&&t.errors.push(function iH(){return new h.vHH(3012,ln)}()),d&&t.errors.push(function sH(){return new h.vHH(3200,ln)}());const D=e.steps.length;let R=0;a>0&&a<D?t.errors.push(function oH(){return new h.vHH(3202,ln)}()):0==a&&(R=1/(D-1));const O=D-1,U=t.currentTime,K=t.currentAnimateTimings,pe=K.duration;return I.forEach((Ve,Ne)=>{const et=R>0?Ne==O?1:R*Ne:u[Ne],Be=et*pe;t.currentTime=U+K.delay+Be,K.duration=Be,this._validateStyleAst(Ve,t),Ve.offset=et,r.styles.push(Ve)}),r}visitReference(e,t){return{type:8,animation:ya(this,Z0(e.animation),t),options:Ag(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Ag(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Ag(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,u]=function GH(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(HH,"")),n=n.replace(/@\*/g,rD).replace(/@\w+/g,t=>rD+"-"+t.substr(1)).replace(/:animating/g,QR),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,_a(t.collectedStyles,t.currentQuerySelector,{});const d=ya(this,Z0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:d,originalSelector:e.selector,options:Ag(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function aH(){return new h.vHH(3013,ln)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:iD(e.timings,t.errors,!0);return{type:12,animation:ya(this,Z0(e.animation),t),timings:r,options:null}}}class zH{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function hD(n){return!Array.isArray(n)&&"object"==typeof n}function Ag(n){return n?(n=my(n)).params&&(n.params=function qH(n){return n?my(n):null}(n.params)):n={},n}function nM(n,e,t){return{duration:n,delay:e,easing:t}}function rM(n,e,t,r,i,a,u=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:u,subTimeline:d}}class fD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const QH=new RegExp(":enter","g"),XH=new RegExp(":leave","g");function iM(n,e,t,r,i,a={},u={},d,g,y=[]){return(new e$).buildKeyframes(n,e,t,r,i,a,u,d,g,y)}class e${buildKeyframes(e,t,r,i,a,u,d,g,y,I=[]){y=y||new fD;const D=new sM(e,t,y,i,a,I,[]);D.options=g,D.currentTimeline.setStyles([u],null,D.errors,g),ya(this,r,D);const R=D.timelines.filter(O=>O.containsAnimation());if(Object.keys(d).length){let O;for(let U=R.length-1;U>=0;U--){const K=R[U];if(K.element===t){O=K;break}}O&&!O.allowOnlyTimelineStyles()&&O.setStyles([d],null,D.errors,g)}return R.length?R.map(O=>O.buildKeyframes()):[rM(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);a!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const u=null!=r.duration?Dg(r.duration):null,d=null!=r.delay?Dg(r.delay):null;return 0!==u&&e.forEach(g=>{const y=t.appendInstructionToTimeline(g,u,d);a=Math.max(a,y.duration+y.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),ya(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=pD);const u=Dg(a.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>ya(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?Dg(e.options.delay):0;e.steps.forEach(u=>{const d=t.createSubContext(e.options);a&&d.delayNextStep(a),ya(this,u,d),i=Math.max(i,d.currentTimeline.currentTime),r.push(d.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return iD(t.params?sD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,d=t.createSubContext().currentTimeline;d.easing=r.easing,e.styles.forEach(g=>{d.forwardTime((g.offset||0)*a),d.setStyles(g.styles,g.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?Dg(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=pD);let u=r;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=d.length;let g=null;d.forEach((y,I)=>{t.currentQueryIndex=I;const D=t.createSubContext(e.options,y);a&&D.delayNextStep(a),y===t.element&&(g=D.currentTimeline),ya(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),g&&(t.currentTimeline.mergeTimelineCollectedStyles(g),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,u=Math.abs(a.duration),d=u*(t.currentQueryTotal-1);let g=u*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":g=d-g;break;case"full":g=r.currentStaggerTime}const I=t.currentTimeline;g&&I.delayNextStep(g);const D=I.currentTime;ya(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const pD={};class sM{constructor(e,t,r,i,a,u,d,g){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=u,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=pD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=g||new gD(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Dg(r.duration)),null!=r.delay&&(i.delay=Dg(r.delay));const a=r.params;if(a){let u=i.params;u||(u=this.options.params={}),Object.keys(a).forEach(d=>{(!t||!u.hasOwnProperty(d))&&(u[d]=sD(a[d],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new sM(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=pD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},a=new t$(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,u){let d=[];if(i&&d.push(this.element),e.length>0){e=(e=e.replace(QH,"."+this._enterClassName)).replace(XH,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),d.push(...y)}return!a&&0==d.length&&u.push(function lH(n){return new h.vHH(3014,ln)}()),d}}class gD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new gD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||vd,this._currentKeyframe[t]=vd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const a=i&&i.params||{},u=function n$(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(a=>{t[a]=vd})):sf(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(u).forEach(d=>{const g=sD(u[d],a,r);this._pendingStyles[d]=g,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:vd),this._updateStyle(d,g)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((d,g)=>{const y=sf(d,!0);Object.keys(y).forEach(I=>{const D=y[I];"!"==D?e.add(I):D==vd&&t.add(I)}),r||(y.offset=g/this.duration),i.push(y)});const a=e.size?oD(e.values()):[],u=t.size?oD(t.values()):[];if(r){const d=i[0],g=my(d);d.offset=0,g.offset=1,i=[d,g]}return rM(this.element,i,a,u,this.duration,this.startTime,this.easing,!1)}}class t$ extends gD{constructor(e,t,r,i,a,u,d=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=d,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],u=r+t,d=t/u,g=sf(e[0],!1);g.offset=0,a.push(g);const y=sf(e[0],!1);y.offset=y1(d),a.push(y);const I=e.length-1;for(let D=1;D<=I;D++){let R=sf(e[D],!1);R.offset=y1((t+R.offset*r)/u),a.push(R)}r=u,t=0,i="",e=a}return rM(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function y1(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class oM{}class r$ extends oM{normalizePropertyName(e,t){return eM(e)}normalizeStyleValue(e,t,r,i){let a="";const u=r.toString().trim();if(i$[t]&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const d=r.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&i.push(function Qj(n,e){return new h.vHH(3005,ln)}())}return u+a}}const i$=(()=>function s$(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function v1(n,e,t,r,i,a,u,d,g,y,I,D,R){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:u,timelines:d,queriedElements:g,preStyleProps:y,postStyleProps:I,totalTime:D,errors:R}}const aM={};class w1{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function o$(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],a=this._stateStyles[e],u=i?i.buildStyles(t,r):{};return a?a.buildStyles(t,r):u}build(e,t,r,i,a,u,d,g,y,I){const D=[],R=this.ast.options&&this.ast.options.params||aM,U=this.buildStyles(r,d&&d.params||aM,D),K=g&&g.params||aM,pe=this.buildStyles(i,K,D),Ve=new Set,Ne=new Map,et=new Map,Be="void"===i,Tt={params:Object.assign(Object.assign({},R),K)},yt=I?[]:iM(e,t,this.ast.animation,a,u,U,pe,Tt,y,D);let Rn=0;if(yt.forEach(qr=>{Rn=Math.max(qr.duration+qr.delay,Rn)}),D.length)return v1(t,this._triggerName,r,i,Be,U,pe,[],[],Ne,et,Rn,D);yt.forEach(qr=>{const Pn=qr.element,Jn=_a(Ne,Pn,{});qr.preStyleProps.forEach(sm=>Jn[sm]=!0);const tl=_a(et,Pn,{});qr.postStyleProps.forEach(sm=>tl[sm]=!0),Pn!==t&&Ve.add(Pn)});const Nn=oD(Ve.values());return v1(t,this._triggerName,r,i,Be,U,pe,yt,Nn,Ne,et,Rn)}}class a${constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=my(this.defaultParams);return Object.keys(e).forEach(a=>{const u=e[a];null!=u&&(i[a]=u)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const u=a;Object.keys(u).forEach(d=>{let g=u[d];g.length>1&&(g=sD(g,i,t));const y=this.normalizer.normalizePropertyName(d,t);g=this.normalizer.normalizeStyleValue(d,y,g,t),r[y]=g})}}),r}}class u${constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new a$(i.style,i.options&&i.options.params||{},r)}),E1(this.states,"true","1"),E1(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new w1(e,i,this.states))}),this.fallbackTransition=function c$(n,e,t){return new w1(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function E1(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const d$=new fD;class h${constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],a=tM(this._driver,t,r,[]);if(r.length)throw function gH(n){return new h.vHH(3503,ln)}();this._animations[e]=a}_buildPlayer(e,t,r){const i=e.element,a=Xk(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations[e];let u;const d=new Map;if(a?(u=iM(this._driver,t,a,YR,tD,{},{},r,d$,i),u.forEach(I=>{const D=_a(d,I.element,{});I.postStyleProps.forEach(R=>D[R]=null)})):(i.push(function mH(){return new h.vHH(3300,ln)}()),u=[]),i.length)throw function _H(n){return new h.vHH(3504,ln)}();d.forEach((I,D)=>{Object.keys(I).forEach(R=>{I[R]=this._driver.computeStyle(D,R,vd)})});const y=rf(u.map(I=>{const D=d.get(I.element);return this._buildPlayer(I,{},D)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function yH(n){return new h.vHH(3301,ln)}();return t}listen(e,t,r,i){const a=zR(t,"","","");return GR(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const b1="ng-animate-queued",lM="ng-animate-disabled",_$=[],C1={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},y$={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ya="__ng_removed";class uM{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function b$(n){return null!=n?n:null}(r?e.value:e),r){const a=my(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Y0="void",cM=new uM(Y0);class v${constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Qa(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function vH(n,e){return new h.vHH(3302,ln)}();if(null==r||0==r.length)throw function wH(n){return new h.vHH(3303,ln)}();if(!function C$(n){return"start"==n||"done"==n}(r))throw function EH(n,e){return new h.vHH(3400,ln)}();const a=_a(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};a.push(u);const d=_a(this._engine.statesByElement,e,{});return d.hasOwnProperty(t)||(Qa(e,nD),Qa(e,nD+"-"+t),d[t]=cM),()=>{this._engine.afterFlush(()=>{const g=a.indexOf(u);g>=0&&a.splice(g,1),this._triggers[t]||delete d[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function bH(n){return new h.vHH(3401,ln)}();return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),u=new dM(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(Qa(e,nD),Qa(e,nD+"-"+t),this._engine.statesByElement.set(e,d={}));let g=d[t];const y=new uM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&g&&y.absorbOptions(g.options),d[t]=y,g||(g=cM),y.value!==Y0&&g.value===y.value){if(!function D$(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(g.params,y.params)){const K=[],pe=a.matchStyles(g.value,g.params,K),Ve=a.matchStyles(y.value,y.params,K);K.length?this._engine.reportError(K):this._engine.afterFlush(()=>{Sg(e,pe),$u(e,Ve)})}return}const R=_a(this._engine.playersByElement,e,[]);R.forEach(K=>{K.namespaceId==this.id&&K.triggerName==t&&K.queued&&K.destroy()});let O=a.matchTransition(g.value,y.value,e,y.params),U=!1;if(!O){if(!i)return;O=a.fallbackTransition,U=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:O,fromState:g,toState:y,player:u,isFallbackTransition:U}),U||(Qa(e,b1),u.onStart(()=>{_y(e,b1)})),u.onDone(()=>{let K=this.players.indexOf(u);K>=0&&this.players.splice(K,1);const pe=this._engine.playersByElement.get(e);if(pe){let Ve=pe.indexOf(u);Ve>=0&&pe.splice(Ve,1)}}),this.players.push(u),R.push(u),u}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,rD,!0);r.forEach(i=>{if(i[Ya])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),u=new Map;if(a){const d=[];if(Object.keys(a).forEach(g=>{if(u.set(g,a[g].value),this._triggers[g]){const y=this.trigger(e,g,Y0,i);y&&d.push(y)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&rf(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const u=a.name;if(i.has(u))return;i.add(u);const g=this._triggers[u].fallbackTransition,y=r[u]||cM,I=new uM(Y0),D=new dM(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:g,fromState:y,toState:I,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Ya];(!a||a===C1)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Qa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,u=this._elementListeners.get(a);u&&u.forEach(d=>{if(d.name==r.triggerName){const g=zR(a,r.triggerName,r.fromState.value,r.toState.value);g._data=e,GR(r.player,d.phase,g,d.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==a||0==u?a-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class w${constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new v$(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,a=r.length-1;if(a>=0){let u=!1;if(void 0!==this.driver.getParentElement){let d=this.driver.getParentElement(t);for(;d;){const g=i.get(d);if(g){const y=r.indexOf(g);r.splice(y+1,0,e),u=!0;break}d=this.driver.getParentElement(d)}}else for(let d=a;d>=0;d--)if(this.driver.containsElement(r[d].hostElement,t)){r.splice(d+1,0,e),u=!0;break}u||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let a=0;a<i.length;a++){const u=r[i[a]].namespaceId;if(u){const d=this._fetchNamespace(u);d&&t.add(d)}}}return t}trigger(e,t,r,i){if(mD(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!mD(t))return;const a=t[Ya];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Qa(e,lM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),_y(e,lM))}removeNode(e,t,r,i){if(mD(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[Ya]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return mD(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,rD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,QR,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return rf(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Ya];if(r&&r.setForRemoval){if(e[Ya]=C1,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(lM))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Qa(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?rf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function CH(n){return new h.vHH(3402,ln)}()}_flushAnimations(e,t){const r=new fD,i=[],a=new Map,u=[],d=new Map,g=new Map,y=new Map,I=new Set;this.disabledNodes.forEach(ct=>{I.add(ct);const Dt=this.driver.query(ct,".ng-animate-queued",!0);for(let Mt=0;Mt<Dt.length;Mt++)I.add(Dt[Mt])});const D=this.bodyNode,R=Array.from(this.statesByElement.keys()),O=D1(R,this.collectedEnterElements),U=new Map;let K=0;O.forEach((ct,Dt)=>{const Mt=YR+K++;U.set(Dt,Mt),ct.forEach(wn=>Qa(wn,Mt))});const pe=[],Ve=new Set,Ne=new Set;for(let ct=0;ct<this.collectedLeaveElements.length;ct++){const Dt=this.collectedLeaveElements[ct],Mt=Dt[Ya];Mt&&Mt.setForRemoval&&(pe.push(Dt),Ve.add(Dt),Mt.hasAnimation?this.driver.query(Dt,".ng-star-inserted",!0).forEach(wn=>Ve.add(wn)):Ne.add(Dt))}const et=new Map,Be=D1(R,Array.from(Ve));Be.forEach((ct,Dt)=>{const Mt=tD+K++;et.set(Dt,Mt),ct.forEach(wn=>Qa(wn,Mt))}),e.push(()=>{O.forEach((ct,Dt)=>{const Mt=U.get(Dt);ct.forEach(wn=>_y(wn,Mt))}),Be.forEach((ct,Dt)=>{const Mt=et.get(Dt);ct.forEach(wn=>_y(wn,Mt))}),pe.forEach(ct=>{this.processLeaveNode(ct)})});const Tt=[],yt=[];for(let ct=this._namespaceList.length-1;ct>=0;ct--)this._namespaceList[ct].drainQueuedTransitions(t).forEach(Mt=>{const wn=Mt.player,Bi=Mt.element;if(Tt.push(wn),this.collectedEnterElements.length){const eo=Bi[Ya];if(eo&&eo.setForMove){if(eo.previousTriggersValues&&eo.previousTriggersValues.has(Mt.triggerName)){const om=eo.previousTriggersValues.get(Mt.triggerName),Tf=this.statesByElement.get(Mt.element);Tf&&Tf[Mt.triggerName]&&(Tf[Mt.triggerName].value=om)}return void wn.destroy()}}const Qu=!D||!this.driver.containsElement(D,Bi),ba=et.get(Bi),If=U.get(Bi),vr=this._buildInstruction(Mt,r,If,ba,Qu);if(vr.errors&&vr.errors.length)return void yt.push(vr);if(Qu)return wn.onStart(()=>Sg(Bi,vr.fromStyles)),wn.onDestroy(()=>$u(Bi,vr.toStyles)),void i.push(wn);if(Mt.isFallbackTransition)return wn.onStart(()=>Sg(Bi,vr.fromStyles)),wn.onDestroy(()=>$u(Bi,vr.toStyles)),void i.push(wn);const JB=[];vr.timelines.forEach(eo=>{eo.stretchStartingKeyframe=!0,this.disabledNodes.has(eo.element)||JB.push(eo)}),vr.timelines=JB,r.append(Bi,vr.timelines),u.push({instruction:vr,player:wn,element:Bi}),vr.queriedElements.forEach(eo=>_a(d,eo,[]).push(wn)),vr.preStyleProps.forEach((eo,om)=>{const Tf=Object.keys(eo);if(Tf.length){let am=g.get(om);am||g.set(om,am=new Set),Tf.forEach(IO=>am.add(IO))}}),vr.postStyleProps.forEach((eo,om)=>{const Tf=Object.keys(eo);let am=y.get(om);am||y.set(om,am=new Set),Tf.forEach(IO=>am.add(IO))})});if(yt.length){const ct=[];yt.forEach(Dt=>{ct.push(function IH(n,e){return new h.vHH(3505,ln)}())}),Tt.forEach(Dt=>Dt.destroy()),this.reportError(ct)}const Rn=new Map,Nn=new Map;u.forEach(ct=>{const Dt=ct.element;r.has(Dt)&&(Nn.set(Dt,Dt),this._beforeAnimationBuild(ct.player.namespaceId,ct.instruction,Rn))}),i.forEach(ct=>{const Dt=ct.element;this._getPreviousPlayers(Dt,!1,ct.namespaceId,ct.triggerName,null).forEach(wn=>{_a(Rn,Dt,[]).push(wn),wn.destroy()})});const qr=pe.filter(ct=>A1(ct,g,y)),Pn=new Map;T1(Pn,this.driver,Ne,y,vd).forEach(ct=>{A1(ct,g,y)&&qr.push(ct)});const tl=new Map;O.forEach((ct,Dt)=>{T1(tl,this.driver,new Set(ct),g,"!")}),qr.forEach(ct=>{const Dt=Pn.get(ct),Mt=tl.get(ct);Pn.set(ct,Object.assign(Object.assign({},Dt),Mt))});const sm=[],YB=[],QB={};u.forEach(ct=>{const{element:Dt,player:Mt,instruction:wn}=ct;if(r.has(Dt)){if(I.has(Dt))return Mt.onDestroy(()=>$u(Dt,wn.toStyles)),Mt.disabled=!0,Mt.overrideTotalTime(wn.totalTime),void i.push(Mt);let Bi=QB;if(Nn.size>1){let ba=Dt;const If=[];for(;ba=ba.parentNode;){const vr=Nn.get(ba);if(vr){Bi=vr;break}If.push(ba)}If.forEach(vr=>Nn.set(vr,Bi))}const Qu=this._buildAnimation(Mt.namespaceId,wn,Rn,a,tl,Pn);if(Mt.setRealPlayer(Qu),Bi===QB)sm.push(Mt);else{const ba=this.playersByElement.get(Bi);ba&&ba.length&&(Mt.parentPlayer=rf(ba)),i.push(Mt)}}else Sg(Dt,wn.fromStyles),Mt.onDestroy(()=>$u(Dt,wn.toStyles)),YB.push(Mt),I.has(Dt)&&i.push(Mt)}),YB.forEach(ct=>{const Dt=a.get(ct.element);if(Dt&&Dt.length){const Mt=rf(Dt);ct.setRealPlayer(Mt)}}),i.forEach(ct=>{ct.parentPlayer?ct.syncPlayerEvents(ct.parentPlayer):ct.destroy()});for(let ct=0;ct<pe.length;ct++){const Dt=pe[ct],Mt=Dt[Ya];if(_y(Dt,tD),Mt&&Mt.hasAnimation)continue;let wn=[];if(d.size){let Qu=d.get(Dt);Qu&&Qu.length&&wn.push(...Qu);let ba=this.driver.query(Dt,QR,!0);for(let If=0;If<ba.length;If++){let vr=d.get(ba[If]);vr&&vr.length&&wn.push(...vr)}}const Bi=wn.filter(Qu=>!Qu.destroyed);Bi.length?I$(this,Dt,Bi):this.processLeaveNode(Dt)}return pe.length=0,sm.forEach(ct=>{this.players.push(ct),ct.onDone(()=>{ct.destroy();const Dt=this.players.indexOf(ct);this.players.splice(Dt,1)}),ct.play()}),sm}elementContainsData(e,t){let r=!1;const i=t[Ya];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let u=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(u=d)}else{const d=this.playersByElement.get(e);if(d){const g=!a||a==Y0;d.forEach(y=>{y.queued||!g&&y.triggerName!=i||u.push(y)})}}return(r||i)&&(u=u.filter(d=>!(r&&r!=d.namespaceId||i&&i!=d.triggerName))),u}_beforeAnimationBuild(e,t,r){const a=t.element,u=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const g of t.timelines){const y=g.element,I=y!==a,D=_a(r,y,[]);this._getPreviousPlayers(y,I,u,d,t.toState).forEach(O=>{const U=O.getRealPlayer();U.beforeDestroy&&U.beforeDestroy(),O.destroy(),D.push(O)})}Sg(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,u){const d=t.triggerName,g=t.element,y=[],I=new Set,D=new Set,R=t.timelines.map(U=>{const K=U.element;I.add(K);const pe=K[Ya];if(pe&&pe.removedBeforeQueried)return new G0(U.duration,U.delay);const Ve=K!==g,Ne=function T$(n){const e=[];return S1(n,e),e}((r.get(K)||_$).map(Rn=>Rn.getRealPlayer())).filter(Rn=>!!Rn.element&&Rn.element===K),et=a.get(K),Be=u.get(K),Tt=Xk(0,this._normalizer,0,U.keyframes,et,Be),yt=this._buildPlayer(U,Tt,Ne);if(U.subTimeline&&i&&D.add(K),Ve){const Rn=new dM(e,d,K);Rn.setRealPlayer(yt),y.push(Rn)}return yt});y.forEach(U=>{_a(this.playersByQueriedElement,U.element,[]).push(U),U.onDone(()=>function E$(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,U.element,U))}),I.forEach(U=>Qa(U,u1));const O=rf(R);return O.onDestroy(()=>{I.forEach(U=>_y(U,u1)),$u(g,t.toStyles)}),D.forEach(U=>{_a(i,U,[]).push(O)}),O}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new G0(e.duration,e.delay)}}class dM{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new G0,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>GR(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){_a(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function mD(n){return n&&1===n.nodeType}function I1(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function T1(n,e,t,r,i){const a=[];t.forEach(g=>a.push(I1(g)));const u=[];r.forEach((g,y)=>{const I={};g.forEach(D=>{const R=I[D]=e.computeStyle(y,D,i);(!R||0==R.length)&&(y[Ya]=y$,u.push(y))}),n.set(y,I)});let d=0;return t.forEach(g=>I1(g,a[d++])),u}function D1(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const i=new Set(e),a=new Map;function u(d){if(!d)return 1;let g=a.get(d);if(g)return g;const y=d.parentNode;return g=t.has(y)?y:i.has(y)?1:u(y),a.set(d,g),g}return e.forEach(d=>{const g=u(d);1!==g&&t.get(g).push(d)}),t}function Qa(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function _y(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function I$(n,e,t){rf(t).onDone(()=>n.processLeaveNode(e))}function S1(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof Kk?S1(r.players,e):e.push(r)}}function A1(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class _D{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new w$(e,t,r),this._timelineEngine=new h$(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const u=e+"-"+i;let d=this._triggerCache[u];if(!d){const g=[],I=tM(this._driver,a,g,[]);if(g.length)throw function fH(n,e){return new h.vHH(3404,ln)}();d=function l$(n,e,t){return new u$(n,e,t)}(i,I,this._normalizer),this._triggerCache[u]=d}this._transitionEngine.registerTrigger(t,i,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,u]=e1(r);this._timelineEngine.command(a,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[u,d]=e1(r);return this._timelineEngine.listen(u,t,d,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let A$=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&$u(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&($u(this._element,this._initialStyles),this._endStyles&&($u(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Sg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Sg(this._element,this._endStyles),this._endStyles=null),$u(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function hM(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];x$(i)&&(e=e||{},e[i]=n[i])}return e}function x$(n){return"display"===n||"position"===n}class x1{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:p1(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class R${validateStyleProperty(e){return i1(e)}matchesElement(e,t){return!1}containsElement(e,t){return s1(e,t)}getParentElement(e){return KR(e)}query(e,t,r){return o1(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,a,u=[]){const g={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(g.easing=a);const y={},I=u.filter(R=>R instanceof x1);(function OH(n,e){return 0===n||0===e})(r,i)&&I.forEach(R=>{let O=R.currentSnapshot;Object.keys(O).forEach(U=>y[U]=O[U])}),t=function kH(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let a=e[0],u=[];if(r.forEach(d=>{a.hasOwnProperty(d)||u.push(d),a[d]=t[d]}),u.length)for(var i=1;i<e.length;i++){let d=e[i];u.forEach(function(g){d[g]=p1(n,g)})}}return e}(e,t=t.map(R=>sf(R,!1)),y);const D=function S$(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=hM(e[0]),e.length>1&&(r=hM(e[e.length-1]))):e&&(t=hM(e)),t||r?new A$(n,t,r):null}(e,t);return new x1(e,t,g,D)}}let M$=(()=>{class n extends $k{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?qk(t):t;return R1(this._renderer,null,r,"register",[i]),new N$(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(ie))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class N$ extends class j2{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new P$(this._id,e,t||{},this._renderer)}}class P${constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return R1(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function R1(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const M1="@.disabled";let O$=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,u)=>{const d=null==u?void 0:u.parentNode(a);d&&u.removeChild(d,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let I=this._rendererCache.get(a);return I||(I=new N1("",a,this.engine),this._rendererCache.set(a,I)),I}const u=r.id,d=r.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const g=I=>{Array.isArray(I)?I.forEach(g):this.engine.registerTrigger(u,d,t,I.name,I)};return r.data.animation.forEach(g),new k$(this,d,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[u,d]=a;u(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(_D),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class N1{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==M1?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class k$ extends N1{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==M1?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function F$(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.substr(1),u="";return"@"!=a.charAt(0)&&([a,u]=function L$(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,u,d=>{this.factory.scheduleListenerCallback(d._data||-1,r,d)})}return this.delegate.listen(e,t,r)}}let V$=(()=>{class n extends _D{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ie),h.LFG(ZR),h.LFG(oM))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const P1=new h.OlP("AnimationModuleType"),O1=[{provide:$k,useClass:M$},{provide:oM,useFactory:function U$(){return new r$}},{provide:_D,useClass:V$},{provide:h.FYo,useFactory:function B$(n,e,t){return new O$(n,e,t)},deps:[Dn,_D,h.R0b]}],k1=[{provide:ZR,useFactory:()=>new R$},{provide:P1,useValue:"BrowserAnimations"},...O1],j$=[{provide:ZR,useClass:a1},{provide:P1,useValue:"NoopAnimations"},...O1];let H$=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?j$:k1}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:k1,imports:[xa]}),n})();const F1="firebasestorage.googleapis.com",L1="storageBucket";class xr extends k.ZR{constructor(e,t){super(fM(e),`Firebase Storage: ${t} (${fM(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xr.prototype)}_codeEquals(e){return fM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function fM(n){return"storage/"+n}function pM(){return new xr("unknown","An unknown error occurred, please check the error payload for server response.")}function V1(){return new xr("canceled","User canceled the upload/download.")}function U1(){return new xr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function yy(n){return new xr("invalid-argument",n)}function B1(){return new xr("app-deleted","The Firebase app was deleted.")}function j1(n){return new xr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Q0(n,e){return new xr("invalid-format","String does not match format '"+n+"': "+e)}function J0(n){throw new xr("internal-error","Internal error: "+n)}class ms{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ms.makeFromUrl(e,t)}catch(i){return new ms(e,"")}if(""===r.path)return r;throw function X$(n){return new xr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Be){Be.path_=decodeURIComponent(Be.path)}const D=t.replace(/[.]/g,"\\."),et=[{regex:d,indices:{bucket:1,path:3},postModify:function a(Be){"/"===Be.path.charAt(Be.path.length-1)&&(Be.path_=Be.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${D}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===F1?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Be=0;Be<et.length;Be++){const Tt=et[Be],yt=Tt.regex.exec(e);if(yt){let Nn=yt[Tt.indices.path];Nn||(Nn=""),r=new ms(yt[Tt.indices.bucket],Nn),Tt.postModify(r);break}}if(null==r)throw function J$(n){return new xr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class rG{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function vD(n){return"string"==typeof n||n instanceof String}function H1(n){return gM()&&n instanceof Blob}function gM(){return"undefined"!=typeof Blob}function mM(n,e,t,r){if(r<e)throw yy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw yy(`Invalid value for '${n}'. Expected ${t} or less.`)}function wd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function $1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var af=(()=>{return(n=af||(af={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",af;var n})();class uG{constructor(e,t,r,i,a,u,d,g,y,I,D){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=I,this.connectionFactory_=D,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((R,O)=>{this.resolve_=R,this.reject_=O,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,u=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const g=this.callback_(d,d.getResponse());!function oG(n){return void 0!==n}(g)?a():a(g)}catch(g){u(g)}else if(null!==d){const g=pM();g.serverResponse=d.getErrorText(),u(this.errorCallback_?this.errorCallback_(d,g):g)}else u(i.canceled?this.appDelete_?B1():V1():function Q$(){return new xr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new wD(!1,null,!0)):this.backoffId_=function iG(n,e,t){let r=1,i=null,a=null,u=!1,d=0;function g(){return 2===d}let y=!1;function I(...pe){y||(y=!0,e.apply(null,pe))}function D(pe){i=setTimeout(()=>{i=null,n(O,g())},pe)}function R(){a&&clearTimeout(a)}function O(pe,...Ve){if(y)return void R();if(pe)return R(),void I.call(null,pe,...Ve);if(g()||u)return R(),void I.call(null,pe,...Ve);let et;r<64&&(r*=2),1===d?(d=2,et=0):et=1e3*(r+Math.random()),D(et)}let U=!1;function K(pe){U||(U=!0,R(),!y&&(null!==i?(pe||(d=2),clearTimeout(i),D(0)):pe||(d=1)))}return D(0),a=setTimeout(()=>{u=!0,K(!0)},t),K}((r,i)=>{if(i)return void r(!1,new wD(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===af.NO_ERROR,g=a.getStatus();if(!d||this.isRetryStatusCode_(g)){const I=a.getErrorCode()===af.ABORT;return void r(!1,new wD(!1,null,I))}const y=-1!==this.successCodes_.indexOf(g);r(!0,new wD(y,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function sG(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class wD{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function mG(...n){const e=function gG(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(gM())return new Blob(n);throw new xr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const va={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class _M{constructor(e,t){this.data=e,this.contentType=t||null}}function yM(n,e){switch(n){case va.RAW:return new _M(G1(e));case va.BASE64:case va.BASE64URL:return new _M(q1(n,e));case va.DATA_URL:return new _M(function wG(n){const e=new z1(n);return e.base64?q1(va.BASE64,e.rest):function vG(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Q0(va.DATA_URL,"Malformed data URL.")}return G1(e)}(e.rest)}(e),function EG(n){return new z1(n).contentType}(e))}throw pM()}function G1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function q1(n,e){switch(n){case va.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Q0(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case va.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Q0(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function yG(n){return atob(n)}(e)}catch(i){throw Q0(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class z1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Q0(va.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function bG(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Gu{constructor(e,t){let r=0,i="";H1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(H1(this.data_)){const i=function _G(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Gu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Gu(r,!0)}}static getBlob(...e){if(gM()){const t=e.map(r=>r instanceof Gu?r.data_:r);return new Gu(mG.apply(null,t))}{const t=e.map(u=>vD(u)?yM(va.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let d=0;d<u.length;d++)i[a++]=u[d]}),new Gu(i,!0)}}uploadData(){return this.data_}}function vM(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function lG(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function W1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function TG(n,e){return e}class Ws{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||TG}}let ED=null;function X0(){if(ED)return ED;const n=[];n.push(new Ws("bucket")),n.push(new Ws("generation")),n.push(new Ws("metageneration")),n.push(new Ws("name","fullPath",!0));const t=new Ws("name");t.xform=function e(a,u){return function DG(n){return!vD(n)||n.length<2?n:W1(n)}(u)},n.push(t);const i=new Ws("size");return i.xform=function r(a,u){return void 0!==u?Number(u):u},n.push(i),n.push(new Ws("timeCreated")),n.push(new Ws("updated")),n.push(new Ws("md5Hash",null,!0)),n.push(new Ws("cacheControl",null,!0)),n.push(new Ws("contentDisposition",null,!0)),n.push(new Ws("contentEncoding",null,!0)),n.push(new Ws("contentLanguage",null,!0)),n.push(new Ws("contentType",null,!0)),n.push(new Ws("metadata","customMetadata",!0)),ED=n,ED}function K1(n,e,t){const r=vM(e);return null===r?null:function AG(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return function SG(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new ms(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function wM(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const Z1="prefixes";class qu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function zu(n){if(!n)throw pM()}function bD(n,e){return function t(r,i){const a=K1(n,i,e);return zu(null!==a),a}}function vy(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Z$(){return new xr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function K$(){return new xr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function W$(n){return new xr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Y$(n){return new xr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function eE(n){const e=vy(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function z$(n){return new xr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function Q1(n,e,t){const i=wd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new qu(i,"GET",bD(n,t),u);return d.errorHandler=eE(e),d}function OG(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const d=wd(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,I=new qu(d,"GET",function NG(n,e){return function t(r,i){const a=function MG(n,e,t){const r=vM(t);return null===r?null:function RG(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Z1])for(const i of t[Z1]){const a=i.replace(/\/$/,""),u=n._makeStorageReference(new ms(e,a));r.prefixes.push(u)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new ms(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return zu(null!==a),a}}(n,e.bucket),y);return I.urlParams=a,I.errorHandler=vy(e),I}function X1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function VG(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class CD{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function EM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){zu(!1)}return zu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const HG={STATE_CHANGED:"state_changed"},Ks={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function bM(n){switch(n){case"running":case"pausing":case"canceling":return Ks.RUNNING;case"paused":return Ks.PAUSED;case"success":return Ks.SUCCESS;case"canceled":return Ks.CANCELED;default:return Ks.ERROR}}class $G{constructor(e,t,r){if(function aG(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function wy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class qG extends class GG{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=af.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=af.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=af.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw J0("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw J0("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw J0("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw J0("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw J0("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Bl(){return new qG}class rF{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=X0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function UG(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u=X1(e,r,i),d={name:u.fullPath},g=wd(a,n.host,n._protocol),I={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},D=wM(u,t),U=new qu(g,"POST",function O(K){let pe;EM(K);try{pe=K.getResponseHeader("X-Goog-Upload-URL")}catch(Ve){zu(!1)}return zu(vD(pe)),pe},n.maxUploadRetryTime);return U.urlParams=d,U.headers=I,U.body=D,U.errorHandler=vy(e),U}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Bl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function BG(n,e,t,r){const g=new qu(t,"POST",function a(y){const I=EM(y,["active","final"]);let D=null;try{D=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch(O){zu(!1)}D||zu(!1);const R=Number(D);return zu(!isNaN(R)),new CD(R,r.size(),"final"===I)},n.maxUploadRetryTime);return g.headers={"X-Goog-Upload-Command":"query"},g.errorHandler=vy(e),g}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Bl,t,r);this._request=a,a.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new CD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let u;try{u=function jG(n,e,t,r,i,a,u,d){const g=new CD(0,0);if(u?(g.current=u.current,g.total=u.total):(g.current=0,g.total=r.size()),r.size()!==g.total)throw function tG(){return new xr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=g.total-g.current;let I=y;i>0&&(I=Math.min(I,i));const D=g.current,U={"X-Goog-Upload-Command":I===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${g.current}`},K=r.slice(D,D+I);if(null===K)throw U1();const et=new qu(t,"POST",function pe(Be,Tt){const yt=EM(Be,["active","final"]),Rn=g.current+I,Nn=r.size();let qr;return qr="final"===yt?bD(e,a)(Be,Tt):null,new CD(Rn,Nn,"final"===yt,qr)},e.maxUploadRetryTime);return et.headers=U,et.body=K.uploadData(),et.progressCallback=d||null,et.errorHandler=vy(n),et}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(g){return this._error=g,void this._transition("error")}const d=this._ref.storage._makeRequest(u,Bl,i,a);this._request=d,d.getPromise().then(g=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(g.current),g.finalized?(this._metadata=g.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Q1(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Bl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function eF(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},g=function d(){let et="";for(let Be=0;Be<2;Be++)et+=Math.random().toString().slice(2);return et}();u["Content-Type"]="multipart/related; boundary="+g;const y=X1(e,r,i),I=wM(y,t),O=Gu.getBlob("--"+g+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+I+"\r\n--"+g+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+g+"--");if(null===O)throw U1();const U={name:y.fullPath},K=wd(a,n.host,n._protocol),Ve=n.maxUploadRetryTime,Ne=new qu(K,"POST",bD(n,t),Ve);return Ne.urlParams=U,Ne.headers=u,Ne.body=O.uploadData(),Ne.errorHandler=vy(e),Ne}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Bl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=V1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=bM(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new $G(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(bM(this._state)){case Ks.SUCCESS:wy(this._resolve.bind(null,this.snapshot))();break;case Ks.CANCELED:case Ks.ERROR:wy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(bM(this._state)){case Ks.RUNNING:case Ks.PAUSED:e.next&&wy(e.next.bind(e,this.snapshot))();break;case Ks.SUCCESS:e.complete&&wy(e.complete.bind(e))();break;default:e.error&&wy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class xg{constructor(e,t){this._service=e,this._location=t instanceof ms?t:ms.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new xg(e,t)}get root(){const e=new ms(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return W1(this._location.path)}get storage(){return this._service}get parent(){const e=function CG(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ms(this._location.bucket,e);return new xg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw j1(e)}}function sF(n,e,t){return CM.apply(this,arguments)}function CM(){return(CM=(0,ve.Z)(function*(n,e,t){const i=yield oF(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield sF(n,e,i.nextPageToken))})).apply(this,arguments)}function oF(n,e){null!=e&&"number"==typeof e.maxResults&&mM("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=OG(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Bl)}function r3(n){n._throwIfRoot("getDownloadURL");const e=function kG(n,e,t){const i=wd(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,d=new qu(i,"GET",function PG(n,e){return function t(r,i){const a=K1(n,i,e);return zu(null!==a),function xG(n,e,t,r){const i=vM(e);if(null===i||!vD(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const u=encodeURIComponent;return a.split(",").map(y=>{const D=n.fullPath;return wd("/b/"+u(n.bucket)+"/o/"+u(D),t,r)+$1({alt:"media",token:y})})[0]}(a,i,n.host,n._protocol)}}(n,t),u);return d.errorHandler=eE(e),d}(n.storage,n._location,X0());return n.storage.makeRequestWithTokens(e,Bl).then(t=>{if(null===t)throw function nG(){return new xr("no-download-url","The given file does not have any download URLs.")}();return t})}function aF(n,e){const t=function IG(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ms(n._location.bucket,t);return new xg(n.storage,r)}function lF(n,e){if(n instanceof IM){const t=n;if(null==t._bucket)throw function eG(){return new xr("no-default-bucket","No default bucket found. Did you set the '"+L1+"' property when initializing the app?")}();const r=new xg(t,t._bucket);return null!=e?lF(r,e):r}return void 0!==e?aF(n,e):n}function a3(n,e){if(e&&function s3(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof IM)return function o3(n,e){return new xg(n,e)}(n,e);throw yy("To use ref(service, url), the first argument must be a Storage instance.")}return lF(n,e)}function uF(n,e){const t=null==e?void 0:e[L1];return null==t?null:ms.makeFromBucketSpec(t,n)}class IM{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=F1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ms.makeFromBucketSpec(i,this._host):uF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ms.makeFromBucketSpec(this._url,e):uF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){mM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){mM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ve.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ve.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xg(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new rG(B1());{const a=function pG(n,e,t,r,i,a){const u=$1(n.urlParams),d=n.url+u,g=Object.assign({},n.headers);return function hG(n,e){e&&(n["X-Firebase-GMPID"]=e)}(g,e),function cG(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(g,t),function dG(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(g,a),function fG(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(g,r),new uG(d,n.method,g,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,ve.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const cF="@firebase/storage";function fF(n,e){return a3(n=(0,k.m9)(n),e)}function y3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new IM(t,r,i,e,Mi.SDK_VERSION)}!function v3(){(0,Mi._registerComponent)(new xo.wA("storage",y3,"PUBLIC").setMultipleInstances(!0)),(0,Mi.registerVersion)(cF,"0.9.4",""),(0,Mi.registerVersion)(cF,"0.9.4","esm2017")}();class ID{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class pF{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ID(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new ID(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?u=>t(new ID(u,this,this._ref)):{next:t.next?u=>t.next(new ID(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class gF{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ed(e,this._service))}get items(){return this._delegate.items.map(e=>new Ed(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ed{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function m3(n,e){return aF(n,e)}(this._delegate,e);return new Ed(t,this.storage)}get root(){return new Ed(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ed(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new pF(function u3(n,e,t){return function JG(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new rF(n,new Gu(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=va.RAW,r){this._throwIfRoot("putString");const i=yM(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new pF(new rF(this._delegate,new Gu(i.data,!0),a),this)}listAll(){return function f3(n){return function e3(n){const e={prefixes:[],items:[]};return sF(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new gF(e,this.storage))}list(e){return function h3(n,e){return oF(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new gF(t,this.storage))}getMetadata(){return function c3(n){return function t3(n){n._throwIfRoot("getMetadata");const e=Q1(n.storage,n._location,X0());return n.storage.makeRequestWithTokens(e,Bl)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function d3(n,e){return function n3(n,e){n._throwIfRoot("updateMetadata");const t=function FG(n,e,t,r){const a=wd(e.fullServerUrl(),n.host,n._protocol),d=wM(t,r),y=n.maxOperationRetryTime,I=new qu(a,"PATCH",bD(n,r),y);return I.headers={"Content-Type":"application/json; charset=utf-8"},I.body=d,I.errorHandler=eE(e),I}(n.storage,n._location,e,X0());return n.storage.makeRequestWithTokens(t,Bl)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function p3(n){return r3(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function g3(n){return function i3(n){n._throwIfRoot("deleteObject");const e=function LG(n,e){const r=wd(e.fullServerUrl(),n.host,n._protocol),d=new qu(r,"DELETE",function u(g,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=eE(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Bl)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw j1(e)}}class mF{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(_F(e))throw yy("ref() expected a child path but got a URL, use refFromURL instead.");return new Ed(fF(this._delegate,e),this)}refFromURL(e){if(!_F(e))throw yy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ms.makeFromUrl(e,this._delegate.host)}catch(t){throw yy("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ed(fF(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function _3(n,e,t,r={}){!function l3(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function _F(n){return/^[A-Za-z]+:\/\//.test(n)}function C3(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new mF(t,r)}function yF(n){const e=function T3(n){return new In.y(e=>{const t=u=>e.next(u);t(n.snapshot);const a=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){a()}}).pipe(function $$(n,e=Dp.z){return(0,hr.e)((t,r)=>{let i=null,a=null,u=null;const d=()=>{if(i){i.unsubscribe(),i=null;const y=a;a=null,r.next(y)}};function g(){const y=u+n,I=e.now();if(I<y)return i=this.schedule(void 0,y-I),void r.add(i);d()}t.subscribe((0,yn.x)(r,y=>{a=y,u=e.now(),i||(i=e.schedule(g,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,mt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function TD(n){return{getDownloadURL:()=>Xe(void 0).pipe(tn.fc,Qr(()=>n.getDownloadURL()),tn.iC),getMetadata:()=>Xe(void 0).pipe(tn.fc,Qr(()=>n.getMetadata()),tn.iC),delete:()=>(0,Sn.D)(n.delete()),child:e=>TD(n.child(e)),updateMetadata:e=>(0,Sn.D)(n.updateMetadata(e)),put:(e,t)=>yF(n.put(e,t)),putString:(e,t,r)=>yF(n.putString(e,t,r)),list:e=>(0,Sn.D)(n.list(e)),listAll:()=>(0,Sn.D)(n.listAll())}}!function I3(n){const e={TaskState:Ks,TaskEvent:HG,StringFormat:va,Storage:mF,Reference:Ed};n.INTERNAL.registerComponent(new xo.wA("storage-compat",C3,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.12")}(w_.Z);const D3=new h.OlP("angularfire2.storageBucket"),S3=new h.OlP("angularfire2.storage.maxUploadRetryTime"),A3=new h.OlP("angularfire2.storage.maxOperationRetryTime"),x3=new h.OlP("angularfire2.storage.use-emulator");let R3=(()=>{class n{constructor(t,r,i,a,u,d,g,y,I,D){const R=(0,Qn.on)(t,u,r);this.storage=(0,Qn.cc)(`${R.name}.storage.${i}`,"AngularFireStorage",R.name,()=>{const O=u.runOutsideAngular(()=>R.storage(i||void 0)),U=I;return U&&O.useEmulator(...U),g&&O.setMaxUploadRetryTime(g),y&&O.setMaxOperationRetryTime(y),O},[g,y])}ref(t){return TD(this.storage.ref(t))}refFromURL(t){return TD(this.storage.refFromURL(t))}upload(t,r,i){return TD(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Qn.Dh),h.LFG(Qn.xv,8),h.LFG(D3,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(tn.HU),h.LFG(S3,8),h.LFG(A3,8),h.LFG(x3,8),h.LFG(B0,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),M3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),N3=(()=>{class n{constructor(){QT.Z.registerVersion("angularfire",tn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[R3],imports:[M3]}),n})();function TM(){return(0,hr.e)((n,e)=>{let t,r=!1;n.subscribe((0,yn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var st,P3="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},bd={},DM=DM||{},Ut=P3||self;function DD(){}function SM(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function tE(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var AM="closure_uid_"+(1e9*Math.random()>>>0),k3=0;function F3(n,e,t){return n.call.apply(n.bind,arguments)}function L3(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Yi(n,e,t){return(Yi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?F3:L3).apply(null,arguments)}function SD(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Qi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var u=Array(arguments.length-2),d=2;d<arguments.length;d++)u[d-2]=arguments[d];return e.prototype[i].apply(r,u)}}function lf(){this.s=this.s,this.o=this.o}var U3={};lf.prototype.s=!1,lf.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function O3(n){return Object.prototype.hasOwnProperty.call(n,AM)&&n[AM]||(n[AM]=++k3)}(this);delete U3[n]}},lf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vF=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},wF=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function EF(n){return Array.prototype.concat.apply([],arguments)}function xM(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function AD(n){return/^[\s\xa0]*$/.test(n)}var Ys,bF=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Zs(n,e){return-1!=n.indexOf(e)}function RM(n,e){return n<e?-1:n>e?1:0}e:{var CF=Ut.navigator;if(CF){var IF=CF.userAgent;if(IF){Ys=IF;break e}}Ys=""}function MM(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function TF(n){const e={};for(const t in n)e[t]=n[t];return e}var DF="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function SF(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<DF.length;a++)t=DF[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function NM(n){return NM[" "](n),n}NM[" "]=DD;var xD,n,H3=Zs(Ys,"Opera"),Ey=Zs(Ys,"Trident")||Zs(Ys,"MSIE"),AF=Zs(Ys,"Edge"),PM=AF||Ey,xF=Zs(Ys,"Gecko")&&!(Zs(Ys.toLowerCase(),"webkit")&&!Zs(Ys,"Edge"))&&!(Zs(Ys,"Trident")||Zs(Ys,"MSIE"))&&!Zs(Ys,"Edge"),$3=Zs(Ys.toLowerCase(),"webkit")&&!Zs(Ys,"Edge");function RF(){var n=Ut.document;return n?n.documentMode:void 0}e:{var OM="",kM=(n=Ys,xF?/rv:([^\);]+)(\)|;)/.exec(n):AF?/Edge\/([\d\.]+)/.exec(n):Ey?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):$3?/WebKit\/(\S+)/.exec(n):H3?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(kM&&(OM=kM?kM[1]:""),Ey){var FM=RF();if(null!=FM&&FM>parseFloat(OM)){xD=String(FM);break e}}xD=OM}var G3={};var z3=Ut.document&&Ey&&(RF()||parseInt(xD,10))||void 0,W3=function(){if(!Ut.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ut.addEventListener("test",DD,e),Ut.removeEventListener("test",DD,e)}catch(t){}return n}();function _s(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function nE(n,e){if(_s.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(xF){e:{try{NM(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:K3[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&nE.Z.h.call(this)}}_s.prototype.h=function(){this.defaultPrevented=!0},Qi(nE,_s);var K3={2:"touch",3:"pen",4:"mouse"};nE.prototype.h=function(){nE.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var rE="closure_listenable_"+(1e6*Math.random()|0),Z3=0;function Y3(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++Z3,this.ca=this.fa=!1}function RD(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function MD(n){this.src=n,this.g={},this.h=0}function VM(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=vF(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(RD(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function UM(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}MD.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=UM(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new Y3(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var BM="closure_lm_"+(1e6*Math.random()|0),jM={};function NF(n,e,t,r,i){if(r&&r.once)return OF(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)NF(n,e[a],t,r,i);return null}return t=qM(t),n&&n[rE]?n.N(e,t,tE(r)?!!r.capture:!!r,i):PF(n,e,t,!1,r,i)}function PF(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=tE(i)?!!i.capture:!!i,d=$M(n);if(d||(n[BM]=d=new MD(n)),(t=d.add(e,t,r,u,a)).proxy)return t;if(r=function Q3(){var e=J3;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)W3||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(FF(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function OF(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)OF(n,e[a],t,r,i);return null}return t=qM(t),n&&n[rE]?n.O(e,t,tE(r)?!!r.capture:!!r,i):PF(n,e,t,!0,r,i)}function kF(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)kF(n,e[a],t,r,i);else r=tE(r)?!!r.capture:!!r,t=qM(t),n&&n[rE]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=UM(a=n.g[e],t,r,i))&&(RD(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=$M(n))&&(e=n.g[e.toString()],n=-1,e&&(n=UM(e,t,r,i)),(t=-1<n?e[n]:null)&&HM(t))}function HM(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[rE])VM(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(FF(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=$M(e))?(VM(t,n),0==t.h&&(t.src=null,e[BM]=null)):RD(n)}}}function FF(n){return n in jM?jM[n]:jM[n]="on"+n}function J3(n,e){if(n.ca)n=!0;else{e=new nE(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&HM(n),n=t.call(r,e)}return n}function $M(n){return(n=n[BM])instanceof MD?n:null}var GM="__closure_events_fn_"+(1e9*Math.random()>>>0);function qM(n){return"function"==typeof n?n:(n[GM]||(n[GM]=function(e){return n.handleEvent(e)}),n[GM])}function Pi(){lf.call(this),this.i=new MD(this),this.P=this,this.I=null}function Ji(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new _s(e,n);else if(e instanceof _s)e.target=e.target||n;else{var i=e;SF(e=new _s(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=ND(u,r,!0,e)&&i}if(i=ND(u=e.g=n,r,!0,e)&&i,i=ND(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=ND(u=e.g=t[a],r,!1,e)&&i}function ND(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ca&&u.capture==t){var d=u.listener,g=u.ia||u.src;u.fa&&VM(n.i,u),i=!1!==d.call(g,r)&&i}}return i&&!r.defaultPrevented}Qi(Pi,lf),Pi.prototype[rE]=!0,Pi.prototype.removeEventListener=function(n,e,t,r){kF(this,n,e,t,r)},Pi.prototype.M=function(){if(Pi.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)RD(t[r]);delete n.g[e],n.h--}}this.I=null},Pi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Pi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var zM=Ut.JSON.stringify;function X3(){var n=VF;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var KM,LF=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new tq,n=>n.reset());class tq{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function nq(n){Ut.setTimeout(()=>{throw n},0)}function WM(n,e){KM||function rq(){var n=Ut.Promise.resolve(void 0);KM=function(){n.then(iq)}}(),ZM||(KM(),ZM=!0),VF.add(n,e)}var ZM=!1,VF=new class eq{constructor(){this.h=this.g=null}add(e,t){const r=LF.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function iq(){for(var n;n=X3();){try{n.h.call(n.g)}catch(t){nq(t)}var e=LF;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}ZM=!1}function PD(n,e){Pi.call(this),this.h=n||1,this.g=e||Ut,this.j=Yi(this.kb,this),this.l=Date.now()}function YM(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function QM(n,e,t){if("function"==typeof n)t&&(n=Yi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Yi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ut.setTimeout(n,e||0)}function UF(n){n.g=QM(()=>{n.g=null,n.i&&(n.i=!1,UF(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Qi(PD,Pi),(st=PD.prototype).da=!1,st.S=null,st.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ji(this,"tick"),this.da&&(YM(this),this.start()))}},st.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.M=function(){PD.Z.M.call(this),YM(this),delete this.g};class sq extends lf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:UF(this)}M(){super.M(),this.g&&(Ut.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function iE(n){lf.call(this),this.h=n,this.g={}}Qi(iE,lf);var BF=[];function jF(n,e,t,r){Array.isArray(t)||(t&&(BF[0]=t.toString()),t=BF);for(var i=0;i<t.length;i++){var a=NF(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function HF(n){MM(n.g,function(e,t){this.g.hasOwnProperty(t)&&HM(e)},n),n.g={}}function OD(){this.g=!0}function by(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function uq(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return zM(t)}catch(d){return e}}(n,t)+(r?" "+r:"")})}iE.prototype.M=function(){iE.Z.M.call(this),HF(this)},iE.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},OD.prototype.Aa=function(){this.g=!1},OD.prototype.info=function(){};var Rg={},$F=null;function kD(){return $F=$F||new Pi}function GF(n){_s.call(this,Rg.Ma,n)}function sE(n){const e=kD();Ji(e,new GF(e,n))}function qF(n,e){_s.call(this,Rg.STAT_EVENT,n),this.stat=e}function Qs(n){const e=kD();Ji(e,new qF(e,n))}function zF(n,e){_s.call(this,Rg.Na,n),this.size=e}function oE(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ut.setTimeout(function(){n()},e)}Rg.Ma="serverreachability",Qi(GF,_s),Rg.STAT_EVENT="statevent",Qi(qF,_s),Rg.Na="timingevent",Qi(zF,_s);var FD={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},WF={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function JM(){}function ZF(){}JM.prototype.h=null;var tN,aE={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function XM(){_s.call(this,"d")}function eN(){_s.call(this,"c")}function LD(){}function lE(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new iE(this),this.P=cq,this.W=new PD(n=PM?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new YF}function YF(){this.i=null,this.g="",this.h=!1}Qi(XM,_s),Qi(eN,_s),Qi(LD,JM),LD.prototype.g=function(){return new XMLHttpRequest},LD.prototype.i=function(){return{}},tN=new LD;var cq=45e3,nN={},VD={};function rN(n,e,t){n.K=1,n.v=$D(Cd(e)),n.s=t,n.U=!0,QF(n,null)}function QF(n,e){n.F=Date.now(),uE(n),n.A=Cd(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),oL(t.h,"t",r),n.C=0,t=n.l.H,n.h=new YF,n.g=xL(n.l,t?e:null,!n.s),0<n.O&&(n.L=new sq(Yi(n.Ia,n,n.g),n.O)),jF(n.V,n.g,"readystatechange",n.gb),e=n.H?TF(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),sE(1),function oq(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",d=a.split("&"),g=0;g<d.length;g++){var y=d[g].split("=");if(1<y.length){var I=y[0];y=y[1];var D=I.split("_");u=2<=D.length&&"type"==D[1]?u+(I+"=")+y+"&":u+(I+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function JF(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function XF(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=dq(n,t),i==VD){4==e&&(n.o=4,Qs(14),r=!1),by(n.j,n.m,null,"[Incomplete Response]");break}if(i==nN){n.o=4,Qs(15),by(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}by(n.j,n.m,i,null),iN(n,i)}JF(n)&&i!=VD&&i!=nN&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Qs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),gN(e),e.L=!0,Qs(11))):(by(n.j,n.m,t,"[Invalid Chunked Response]"),Mg(n),cE(n))}function dq(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?VD:(t=Number(e.substring(t,r)),isNaN(t)?nN:(r+=1)+t>e.length?VD:(e=e.substr(r,t),n.C=r+t,e))}function uE(n){n.Y=Date.now()+n.P,eL(n,n.P)}function eL(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=oE(Yi(n.eb,n),e)}function UD(n){n.B&&(Ut.clearTimeout(n.B),n.B=null)}function cE(n){0==n.l.G||n.I||TL(n.l,n)}function Mg(n){UD(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,YM(n.W),HF(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function iN(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||aN(t.i,n)))if(t.I=n.N,!n.J&&aN(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=oE(Yi(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;ZD(t),WD(t)}pN(t),Qs(18)}if(1>=uL(t.i)&&t.ka){try{t.ka()}catch(y){}t.ka=void 0}}else Og(t,11)}else if((n.J||t.g==n)&&ZD(t),!AD(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const I=y[3];null!=I&&(t.ma=I,t.h.info("VER="+t.ma));const D=y[4];null!=D&&(t.za=D,t.h.info("SVER="+t.za));const R=y[5];null!=R&&"number"==typeof R&&0<R&&(t.K=r=1.5*R,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const O=n.g;if(O){const U=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(U){var a=r.i;!a.g&&(Zs(U,"spdy")||Zs(U,"quic")||Zs(U,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(lN(a,a.h),a.h=null))}if(r.D){const K=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;K&&(r.sa=K,fr(r.F,r.D,K))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=AL(r,r.H?r.la:null,r.W),u.J){cL(r.i,u);var d=u,g=r.K;g&&d.setTimeout(g),d.B&&(UD(d),uE(d)),r.g=u}else CL(r);0<t.l.length&&KD(t)}else"stop"!=y[0]&&"close"!=y[0]||Og(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Og(t,7):hN(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}sE(4)}catch(y){}}function sN(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(SM(n)||"string"==typeof n)wF(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(SM(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function hq(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(SM(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Cy(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Cy)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function oN(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Ng(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Ng(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Ng(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(st=lE.prototype).setTimeout=function(n){this.P=n},st.gb=function(n){n=n.target;const e=this.L;e&&3==Id(n)?e.l():this.Ia(n)},st.Ia=function(n){try{if(n==this.g)e:{const I=Id(this.g);var e=this.g.Da();const D=this.g.ba();if(!(3>I)&&(3!=I||PM||this.g&&(this.h.h||this.g.ga()||yL(this.g)))){this.I||4!=I||7==e||sE(8==e||0>=D?3:2),UD(this);var t=this.g.ba();this.N=t;t:if(JF(this)){var r=yL(this.g);n="";var i=r.length,a=4==Id(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Mg(this),cE(this);var u="";break t}this.h.i=new Ut.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function aq(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.X,I,t),this.i){if(this.$&&!this.J){t:{if(this.g){var d,g=this.g;if((d=g.g?g.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!AD(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Qs(12),Mg(this),cE(this);break e}by(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,iN(this,t)}this.U?(XF(this,I,u),PM&&this.i&&3==I&&(jF(this.V,this.W,"tick",this.fb),this.W.start())):(by(this.j,this.m,u,null),iN(this,u)),4==I&&Mg(this),this.i&&!this.I&&(4==I?TL(this.l,this):(this.i=!1,uE(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Qs(12)):(this.o=0,Qs(13)),Mg(this),cE(this)}}}catch(I){}},st.fb=function(){if(this.g){var n=Id(this.g),e=this.g.ga();this.C<e.length&&(UD(this),XF(this,n,e),this.i&&4!=n&&uE(this))}},st.cancel=function(){this.I=!0,Mg(this)},st.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function lq(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(sE(3),Qs(17)),Mg(this),this.o=2,cE(this)):eL(this,this.Y-n)},(st=Cy.prototype).R=function(){oN(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},st.T=function(){return oN(this),this.g.concat()},st.get=function(n,e){return Ng(this.h,n)?this.h[n]:e},st.set=function(n,e){Ng(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},st.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var tL=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pg(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Pg){this.g=void 0!==e?e:n.g,BD(this,n.j),this.s=n.s,jD(this,n.i),HD(this,n.m),this.l=n.l,e=n.h;var t=new fE;t.i=e.i,e.g&&(t.g=new Cy(e.g),t.h=e.h),nL(this,t),this.o=n.o}else n&&(t=String(n).match(tL))?(this.g=!!e,BD(this,t[1]||"",!0),this.s=dE(t[2]||""),jD(this,t[3]||"",!0),HD(this,t[4]),this.l=dE(t[5]||"",!0),nL(this,t[6]||"",!0),this.o=dE(t[7]||"")):(this.g=!!e,this.h=new fE(null,this.g))}function Cd(n){return new Pg(n)}function BD(n,e,t){n.j=t?dE(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function jD(n,e,t){n.i=t?dE(e,!0):e}function HD(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function nL(n,e,t){e instanceof fE?(n.h=e,function Eq(n,e){e&&!n.j&&(uf(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(iL(this,r),oL(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=hE(e,vq)),n.h=new fE(e,n.g))}function fr(n,e,t){n.h.set(e,t)}function $D(n){return fr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function dE(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function hE(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,mq),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function mq(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Pg.prototype.toString=function(){var n=[],e=this.j;e&&n.push(hE(e,rL,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(hE(e,rL,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(hE(t,"/"==t.charAt(0)?yq:_q,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",hE(t,wq)),n.join("")};var rL=/[#\/\?@]/g,_q=/[#\?:]/g,yq=/[#\?]/g,vq=/[#\?@]/g,wq=/#/g;function fE(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function uf(n){n.g||(n.g=new Cy,n.h=0,n.i&&function fq(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function iL(n,e){uf(n),e=Iy(n,e),Ng(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ng((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&oN(n)))}function sL(n,e){return uf(n),e=Iy(n,e),Ng(n.g.h,e)}function oL(n,e,t){iL(n,e),0<t.length&&(n.i=null,n.g.set(Iy(n,e),xM(t)),n.h+=t.length)}function Iy(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function aL(n){this.l=n||Cq,n=Ut.PerformanceNavigationTiming?0<(n=Ut.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ut.g&&Ut.g.Ea&&Ut.g.Ea()&&Ut.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=fE.prototype).add=function(n,e){uf(this),this.i=null,n=Iy(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){uf(this),this.g.forEach(function(t,r){wF(t,function(i){n.call(e,i,r,this)},this)},this)},st.T=function(){uf(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},st.R=function(n){uf(this);var e=[];if("string"==typeof n)sL(this,n)&&(e=EF(e,this.g.get(Iy(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=EF(e,n[t])}return e},st.set=function(n,e){return uf(this),this.i=null,sL(this,n=Iy(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var u=i;""!==r[a]&&(u+="="+encodeURIComponent(String(r[a]))),n.push(u)}}return this.i=n.join("&")};var Cq=10;function lL(n){return!!n.h||!!n.g&&n.g.size>=n.j}function uL(n){return n.h?1:n.g?n.g.size:0}function aN(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function lN(n,e){n.g?n.g.add(e):n.h=e}function cL(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function dL(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return xM(n.i)}function uN(){}function Iq(){this.g=new uN}function Tq(n,e,t){const r=t||"";try{sN(n,function(i,a){let u=i;tE(i)&&(u=zM(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function GD(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function pE(n){this.l=n.$b||null,this.j=n.ib||!1}function qD(n,e){Pi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=cN,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}aL.prototype.cancel=function(){if(this.i=dL(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},uN.prototype.stringify=function(n){return Ut.JSON.stringify(n,void 0)},uN.prototype.parse=function(n){return Ut.JSON.parse(n,void 0)},Qi(pE,JM),pE.prototype.g=function(){return new qD(this.l,this.j)},pE.prototype.i=function(n){return function(){return n}}({}),Qi(qD,Pi);var cN=0;function hL(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function gE(n){n.readyState=4,n.l=null,n.j=null,n.A=null,mE(n)}function mE(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=qD.prototype).open=function(n,e){if(this.readyState!=cN)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,mE(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ut).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gE(this)),this.readyState=cN},st.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,mE(this)),this.g&&(this.readyState=3,mE(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ut.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;hL(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},st.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?gE(this):mE(this),3==this.readyState&&hL(this)}},st.Ua=function(n){this.g&&(this.response=this.responseText=n,gE(this))},st.Ta=function(n){this.g&&(this.response=n,gE(this))},st.ha=function(){this.g&&gE(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(qD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Sq=Ut.JSON.parse;function Jr(n){Pi.call(this),this.headers=new Cy,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=fL,this.K=this.L=!1}Qi(Jr,Pi);var fL="",Aq=/^https?$/i,xq=["POST","PUT"];function Mq(n){return"content-type"==n.toLowerCase()}function pL(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,gL(n),zD(n)}function gL(n){n.D||(n.D=!0,Ji(n,"complete"),Ji(n,"error"))}function mL(n){if(n.h&&void 0!==DM&&(!n.C[1]||4!=Id(n)||2!=n.ba()))if(n.v&&4==Id(n))QM(n.Fa,0,n);else if(Ji(n,"readystatechange"),4==Id(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===d){var i=String(n.H).match(tL)[1]||null;if(!i&&Ut.self&&Ut.self.location){var a=Ut.self.location.protocol;i=a.substr(0,a.length-1)}r=!Aq.test(i?i.toLowerCase():"")}t=r}if(t)Ji(n,"complete"),Ji(n,"success");else{n.m=6;try{var u=2<Id(n)?n.g.statusText:""}catch(g){u=""}n.j=u+" ["+n.ba()+"]",gL(n)}}finally{zD(n)}}}function zD(n,e){if(n.g){_L(n);const t=n.g,r=n.C[0]?DD:null;n.g=null,n.C=null,e||Ji(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function _L(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ut.clearTimeout(n.A),n.A=null)}function Id(n){return n.g?n.g.readyState:0}function yL(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case fL:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function dN(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Nq(n){let e="";return MM(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):fr(n,e,t))}function _E(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function vL(n){this.za=0,this.l=[],this.h=new OD,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=_E("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=_E("baseRetryDelayMs",5e3,n),this.$a=_E("retryDelaySeedMs",1e4,n),this.Ya=_E("forwardChannelMaxRetries",2,n),this.ra=_E("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new aL(n&&n.concurrentRequestLimit),this.Ca=new Iq,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function hN(n){if(wL(n),3==n.G){var e=n.V++,t=Cd(n.F);fr(t,"SID",n.J),fr(t,"RID",e),fr(t,"TYPE","terminate"),yE(n,t),(e=new lE(n,n.h,e,void 0)).K=2,e.v=$D(Cd(t)),t=!1,Ut.navigator&&Ut.navigator.sendBeacon&&(t=Ut.navigator.sendBeacon(e.v.toString(),"")),!t&&Ut.Image&&((new Image).src=e.v,t=!0),t||(e.g=xL(e.l,null),e.g.ea(e.v)),e.F=Date.now(),uE(e)}SL(n)}function WD(n){n.g&&(gN(n),n.g.cancel(),n.g=null)}function wL(n){WD(n),n.u&&(Ut.clearTimeout(n.u),n.u=null),ZD(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ut.clearTimeout(n.m),n.m=null)}function fN(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&KD(n)}function KD(n){lL(n.i)||n.m||(n.m=!0,WM(n.Ha,n),n.C=0)}function EL(n,e){var t;t=e?e.m:n.V++;const r=Cd(n.F);fr(r,"SID",n.J),fr(r,"RID",t),fr(r,"AID",n.U),yE(n,r),n.o&&n.s&&dN(r,n.o,n.s),t=new lE(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=bL(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),lN(n.i,t),rN(t,r,e)}function yE(n,e){n.j&&sN({},function(t,r){fr(e,r,t)})}function bL(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Yi(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let d=!0;for(let g=0;g<t;g++){let y=i[g].h;const I=i[g].g;if(y-=a,0>y)a=Math.max(0,i[g].h-100),d=!1;else try{Tq(I,u,"req"+y+"_")}catch(D){r&&r(I)}}if(d){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function CL(n){n.g||n.u||(n.Y=1,WM(n.Ga,n),n.A=0)}function pN(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=oE(Yi(n.Ga,n),DL(n,n.A)),n.A++,0))}function gN(n){null!=n.B&&(Ut.clearTimeout(n.B),n.B=null)}function IL(n){n.g=new lE(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Cd(n.oa);fr(e,"RID","rpc"),fr(e,"SID",n.J),fr(e,"CI",n.N?"0":"1"),fr(e,"AID",n.U),yE(n,e),fr(e,"TYPE","xmlhttp"),n.o&&n.s&&dN(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=$D(Cd(e)),t.s=null,t.U=!0,QF(t,n)}function ZD(n){null!=n.v&&(Ut.clearTimeout(n.v),n.v=null)}function TL(n,e){var t=null;if(n.g==e){ZD(n),gN(n),n.g=null;var r=2}else{if(!aN(n.i,e))return;t=e.D,cL(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ji(r=kD(),new zF(r,t,e,i)),KD(n)}else CL(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function Pq(n,e){return!(uL(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=oE(Yi(n.Ha,n,e),DL(n,n.C)),n.C++,0)))}(n,e)||2==r&&pN(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Og(n,5);break;case 4:Og(n,10);break;case 3:Og(n,6);break;default:Og(n,2)}}function DL(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Og(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Yi(n.jb,n);t||(t=new Pg("//www.google.com/images/cleardot.gif"),Ut.location&&"http"==Ut.location.protocol||BD(t,"https"),$D(t)),function Dq(n,e){const t=new OD;if(Ut.Image){const r=new Image;r.onload=SD(GD,t,r,"TestLoadImage: loaded",!0,e),r.onerror=SD(GD,t,r,"TestLoadImage: error",!1,e),r.onabort=SD(GD,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=SD(GD,t,r,"TestLoadImage: timeout",!1,e),Ut.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Qs(2);n.G=0,n.j&&n.j.va(e),SL(n),wL(n)}function SL(n){n.G=0,n.I=-1,n.j&&((0!=dL(n.i).length||0!=n.l.length)&&(n.i.i.length=0,xM(n.l),n.l.length=0),n.j.ua())}function AL(n,e,t){let r=function pq(n){return n instanceof Pg?Cd(n):new Pg(n,void 0)}(t);if(""!=r.i)e&&jD(r,e+"."+r.i),HD(r,r.m);else{const i=Ut.location;r=function gq(n,e,t,r){var i=new Pg(null,void 0);return n&&BD(i,n),e&&jD(i,e),t&&HD(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&MM(n.aa,function(i,a){fr(r,a,i)}),t=n.sa,(e=n.D)&&t&&fr(r,e,t),fr(r,"VER",n.ma),yE(n,r),r}function xL(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Jr(t&&n.Ba&&!n.qa?new pE({ib:!0}):n.qa)).L=n.H,e}function RL(){}function YD(){if(Ey&&!(10<=Number(z3)))throw Error("Environmental error: no available transport.")}function wa(n,e){Pi.call(this),this.g=new vL(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!AD(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!AD(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ty(this)}function ML(n){XM.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function NL(){eN.call(this),this.status=1}function Ty(n){this.g=n}(st=Jr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():tN.g(),this.C=function KF(n){return n.h||(n.h=n.i())}(this.u?this.u:tN),this.g.onreadystatechange=Yi(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void pL(this,a)}n=t||"";const i=new Cy(this.headers);r&&sN(r,function(a,u){i.set(u,a)}),r=function B3(n){e:{var e=Mq;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ut.FormData&&n instanceof Ut.FormData,!(0<=vF(xq,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,u){this.g.setRequestHeader(u,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{_L(this),0<this.B&&((this.K=function Rq(n){return Ey&&function q3(){return function j3(n){var e=G3;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=bF(String(xD)).split("."),t=bF("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",a=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=RM(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||RM(0==i[2].length,0==a[2].length)||RM(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yi(this.pa,this)):this.A=QM(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){pL(this,a)}},st.pa=function(){void 0!==DM&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ji(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ji(this,"complete"),Ji(this,"abort"),zD(this))},st.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zD(this,!0)),Jr.Z.M.call(this)},st.Fa=function(){this.s||(this.F||this.v||this.l?mL(this):this.cb())},st.cb=function(){mL(this)},st.ba=function(){try{return 2<Id(this)?this.g.status:-1}catch(n){return-1}},st.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},st.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Sq(e)}},st.Da=function(){return this.m},st.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=vL.prototype).ma=8,st.G=1,st.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},st.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new lE(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=TF(a),SF(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=bL(this,i,e),fr(t=Cd(this.F),"RID",n),fr(t,"CVER",22),this.D&&fr(t,"X-HTTP-Session-Id",this.D),yE(this,t),this.o&&a&&dN(t,this.o,a),lN(this.i,i),this.Ra&&fr(t,"TYPE","init"),this.ja?(fr(t,"$req",e),fr(t,"SID","null"),i.$=!0,rN(i,t,null)):rN(i,t,e),this.G=2}}else 3==this.G&&(n?EL(this,n):0==this.l.length||lL(this.i)||EL(this))},st.Ga=function(){if(this.u=null,IL(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=oE(Yi(this.bb,this),n)}},st.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qs(10),WD(this),IL(this))},st.ab=function(){null!=this.v&&(this.v=null,WD(this),pN(this),Qs(19))},st.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Qs(2)):(this.h.info("Failed to ping google.com"),Qs(1))},(st=RL.prototype).xa=function(){},st.wa=function(){},st.va=function(){},st.ua=function(){},st.Oa=function(){},YD.prototype.g=function(n,e){return new wa(n,e)},Qi(wa,Pi),wa.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),WM(Yi(n.hb,n,e))),Qs(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=AL(n,null,n.W),KD(n)},wa.prototype.close=function(){hN(this.g)},wa.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,fN(this.g,e)}else this.v?((e={}).__data__=zM(n),fN(this.g,e)):fN(this.g,n)},wa.prototype.M=function(){this.g.j=null,delete this.j,hN(this.g),delete this.g,wa.Z.M.call(this)},Qi(ML,XM),Qi(NL,eN),Qi(Ty,RL),Ty.prototype.xa=function(){Ji(this.g,"a")},Ty.prototype.wa=function(n){Ji(this.g,new ML(n))},Ty.prototype.va=function(n){Ji(this.g,new NL(n))},Ty.prototype.ua=function(){Ji(this.g,"b")},YD.prototype.createWebChannel=YD.prototype.g,wa.prototype.send=wa.prototype.u,wa.prototype.open=wa.prototype.m,wa.prototype.close=wa.prototype.close,FD.NO_ERROR=0,FD.TIMEOUT=8,FD.HTTP_ERROR=6,WF.COMPLETE="complete",ZF.EventType=aE,aE.OPEN="a",aE.CLOSE="b",aE.ERROR="c",aE.MESSAGE="d",Pi.prototype.listen=Pi.prototype.N,Jr.prototype.listenOnce=Jr.prototype.O,Jr.prototype.getLastError=Jr.prototype.La,Jr.prototype.getLastErrorCode=Jr.prototype.Da,Jr.prototype.getStatus=Jr.prototype.ba,Jr.prototype.getResponseJson=Jr.prototype.Qa,Jr.prototype.getResponseText=Jr.prototype.ga,Jr.prototype.send=Jr.prototype.ea;var Oq=bd.createWebChannelTransport=function(){return new YD},kq=bd.getStatEventTarget=function(){return kD()},mN=bd.ErrorCode=FD,Fq=bd.EventType=WF,Lq=bd.Event=Rg,PL=bd.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Vq=bd.FetchXmlHttpFactory=pE,QD=bd.WebChannel=ZF,Uq=bd.XhrIo=Jr;const OL="@firebase/firestore";class Xi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xi.UNAUTHENTICATED=new Xi(null),Xi.GOOGLE_CREDENTIALS=new Xi("google-credentials-uid"),Xi.FIRST_PARTY=new Xi("first-party-uid"),Xi.MOCK_USER=new Xi("mock-user");let Dy="9.6.10";const cf=new Ro.Yd("@firebase/firestore");function _N(){return cf.logLevel}function Le(n,...e){if(cf.logLevel<=Ro.in.DEBUG){const t=e.map(yN);cf.debug(`Firestore (${Dy}): ${n}`,...t)}}function Xr(n,...e){if(cf.logLevel<=Ro.in.ERROR){const t=e.map(yN);cf.error(`Firestore (${Dy}): ${n}`,...t)}}function vE(n,...e){if(cf.logLevel<=Ro.in.WARN){const t=e.map(yN);cf.warn(`Firestore (${Dy}): ${n}`,...t)}}function yN(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function at(n="Unexpected state"){const e=`FIRESTORE (${Dy}) INTERNAL ASSERTION FAILED: `+n;throw Xr(e),new Error(e)}function Pt(n,e){n||at()}function Ke(n,e){return n}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class kL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Hq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xi.UNAUTHENTICATED))}shutdown(){}}class $q{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Gq{constructor(e){this.t=e,this.currentUser=Xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Oi,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const y=u;e.enqueueRetryable((0,ve.Z)(function*(){yield y.promise,yield a(r.currentUser)}))},g=y=>{Le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(Le("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Oi)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pt("string"==typeof r.accessToken),new kL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pt(null===e||"string"==typeof e),new Xi(e)}}class qq{constructor(e,t,r){this.type="FirstParty",this.user=Xi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class zq{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new qq(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Xi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Wq{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.p;return this.p=a.token,Le("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pt("string"==typeof t.token),this.p=t.token,new FL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Ea{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Kq(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Ea.A=-1;class LL{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Kq(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function rn(n,e){return n<e?-1:n>e?1:0}function Sy(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function VL(n){return n+"\0"}class $r{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $r.fromMillis(Date.now())}static fromDate(e){return $r.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new $r(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rn(this.nanoseconds,e.nanoseconds):rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Rt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Rt(e)}static min(){return new Rt(new $r(0,0))}static max(){return new Rt(new $r(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function UL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function kg(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function BL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class wE{constructor(e,t,r){void 0===t?t=0:t>e.length&&at(),void 0===r?r=e.length-t:r>e.length-t&&at(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===wE.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof wE?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class pn extends wE{construct(e,t,r){return new pn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(he.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new pn(t)}static emptyPath(){return new pn([])}}const Zq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ki extends wE{construct(e,t,r){return new ki(e,t,r)}static isValidIdentifier(e){return Zq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ki.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ki(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Re(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Re(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[i+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Re(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,i+=2}else"`"===d?(u=!u,i++):"."!==d||u?(r+=d,i++):(a(),i++)}if(a(),u)throw new Re(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ki(t)}static emptyPath(){return new ki([])}}class Ay{constructor(e){this.fields=e,e.sort(ki.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Sy(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class vi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new vi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new vi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vi.EMPTY_BYTE_STRING=new vi("");const Qq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function df(n){if(Pt(!!n),"string"==typeof n){let e=0;const t=Qq.exec(n);if(Pt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Rr(n.seconds),nanos:Rr(n.nanos)}}function Rr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Fg(n){return"string"==typeof n?vi.fromBase64String(n):vi.fromUint8Array(n)}function vN(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function jL(n){const e=n.mapValue.fields.__previous_value__;return vN(e)?jL(e):e}function EE(n){const e=df(n.mapValue.fields.__local_write_time__.timestampValue);return new $r(e.seconds,e.nanos)}class Jq{constructor(e,t,r,i,a,u,d,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.useFetchStreams=g}}class Td{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Td("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Td&&e.projectId===this.projectId&&e.database===this.database}}function Lg(n){return null==n}function bE(n){return 0===n&&1/n==-1/0}function HL(n){return"number"==typeof n&&Number.isInteger(n)&&!bE(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ze{constructor(e){this.path=e}static fromPath(e){return new ze(pn.fromString(e))}static fromName(e){return new ze(pn.fromString(e).popFirst(5))}static empty(){return new ze(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===pn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ze(new pn(e.slice()))}}const $L={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},GL={nullValue:"NULL_VALUE"};function Vg(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?vN(n)?4:KL(n)?9:10:at()}function Wu(n,e){if(n===e)return!0;const t=Vg(n);if(t!==Vg(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return EE(n).isEqual(EE(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=df(r.timestampValue),u=df(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Fg(n.bytesValue).isEqual(Fg(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Rr(r.geoPointValue.latitude)===Rr(i.geoPointValue.latitude)&&Rr(r.geoPointValue.longitude)===Rr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Rr(r.integerValue)===Rr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Rr(r.doubleValue),u=Rr(i.doubleValue);return a===u?bE(a)===bE(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return Sy(n.arrayValue.values||[],e.arrayValue.values||[],Wu);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(UL(a)!==UL(u))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(void 0===u[d]||!Wu(a[d],u[d])))return!1;return!0}(n,e);default:return at()}var i}function CE(n,e){return void 0!==(n.values||[]).find(t=>Wu(t,e))}function hf(n,e){if(n===e)return 0;const t=Vg(n),r=Vg(e);if(t!==r)return rn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return rn(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=Rr(i.integerValue||i.doubleValue),d=Rr(a.integerValue||a.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1}(n,e);case 3:return qL(n.timestampValue,e.timestampValue);case 4:return qL(EE(n),EE(e));case 5:return rn(n.stringValue,e.stringValue);case 6:return function(i,a){const u=Fg(i),d=Fg(a);return u.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),d=a.split("/");for(let g=0;g<u.length&&g<d.length;g++){const y=rn(u[g],d[g]);if(0!==y)return y}return rn(u.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=rn(Rr(i.latitude),Rr(a.latitude));return 0!==u?u:rn(Rr(i.longitude),Rr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],d=a.values||[];for(let g=0;g<u.length&&g<d.length;++g){const y=hf(u[g],d[g]);if(y)return y}return rn(u.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const u=i.fields||{},d=Object.keys(u),g=a.fields||{},y=Object.keys(g);d.sort(),y.sort();for(let I=0;I<d.length&&I<y.length;++I){const D=rn(d[I],y[I]);if(0!==D)return D;const R=hf(u[d[I]],g[y[I]]);if(0!==R)return R}return rn(d.length,y.length)}(n.mapValue,e.mapValue);default:throw at()}}function qL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return rn(n,e);const t=df(n),r=df(e),i=rn(t.seconds,r.seconds);return 0!==i?i:rn(t.nanos,r.nanos)}function xy(n){return wN(n)}function wN(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=df(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Fg(n.bytesValue).toBase64():"referenceValue"in n?ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=wN(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const d of i)u?u=!1:a+=",",a+=`${d}:${wN(r.fields[d])}`;return a+"}"}(n.mapValue):at();var e}function Ry(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function EN(n){return!!n&&"integerValue"in n}function IE(n){return!!n&&"arrayValue"in n}function zL(n){return!!n&&"nullValue"in n}function WL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function JD(n){return!!n&&"mapValue"in n}function TE(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return kg(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=TE(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=TE(n.arrayValue.values[t]);return e}return Object.assign({},n)}function KL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ZL(n,e){return void 0===n?e:void 0===e||hf(n,e)>0?n:e}function YL(n,e){return void 0===n?e:void 0===e||hf(n,e)<0?n:e}class ys{constructor(e){this.value=e}static empty(){return new ys({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!JD(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=TE(t)}setAll(e){let t=ki.emptyPath(),r={},i=[];e.forEach((u,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,r,i),r={},i=[],t=d.popLast()}u?r[d.lastSegment()]=TE(u):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());JD(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];JD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){kg(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new ys(TE(this.value))}}function QL(n){const e=[];return kg(n.fields,(t,r)=>{const i=new ki([t]);if(JD(r)){const a=QL(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new Ay(e)}class rr{constructor(e,t,r,i,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=u}static newInvalidDocument(e){return new rr(e,0,Rt.min(),Rt.min(),ys.empty(),0)}static newFoundDocument(e,t,r){return new rr(e,1,t,Rt.min(),r,0)}static newNoDocument(e,t){return new rr(e,2,t,Rt.min(),ys.empty(),0)}static newUnknownDocument(e,t){return new rr(e,3,t,Rt.min(),ys.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ys.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ys.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof rr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class XD{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function bN(n){return n.fields.find(e=>2===e.kind)}function My(n){return n.fields.filter(e=>2!==e.kind)}XD.UNKNOWN_ID=-1;class eS{constructor(e,t){this.fieldPath=e,this.kind=t}}class DE{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new DE(0,Dd.min())}}function JL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Rt.fromTimestamp(1e9===r?new $r(t+1,0):new $r(t,r));return new Dd(i,ze.empty(),e)}function Xq(n){return new Dd(n.readTime,n.key,-1)}class Dd{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Dd(Rt.min(),ze.empty(),-1)}static max(){return new Dd(Rt.max(),ze.empty(),-1)}}function ez(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ze.comparator(n.documentKey,e.documentKey),0!==t?t:rn(n.largestBatchId,e.largestBatchId))}class tz{constructor(e,t=null,r=[],i=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=d,this.P=null}}function XL(n,e=null,t=[],r=[],i=null,a=null,u=null){return new tz(n,e,t,r,i,a,u)}function Ug(n){const e=Ke(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+xy(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Lg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>xy(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>xy(r)).join(",")),e.P=t}return e.P}function SE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!cz(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Wu(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nV(n.startAt,e.startAt)&&nV(n.endAt,e.endAt)}function tS(n){return ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function nS(n,e){return n.filters.filter(t=>t instanceof es&&t.field.isEqual(e))}class es extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new rz(e,t,r):"array-contains"===t?new oz(e,r):"in"===t?new az(e,r):"not-in"===t?new lz(e,r):"array-contains-any"===t?new uz(e,r):new es(e,t,r)}static V(e,t,r){return"in"===t?new iz(e,r):new sz(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(hf(t,this.value)):null!==t&&Vg(this.value)===Vg(t)&&this.v(hf(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return at()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class rz extends es{constructor(e,t,r){super(e,t,r),this.key=ze.fromName(r.referenceValue)}matches(e){const t=ze.comparator(e.key,this.key);return this.v(t)}}class iz extends es{constructor(e,t){super(e,"in",t),this.keys=eV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sz extends es{constructor(e,t){super(e,"not-in",t),this.keys=eV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function eV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ze.fromName(r.referenceValue))}class oz extends es{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return IE(t)&&CE(t.arrayValue,this.value)}}class az extends es{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&CE(this.value.arrayValue,t)}}class lz extends es{constructor(e,t){super(e,"not-in",t)}matches(e){if(CE(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!CE(this.value.arrayValue,t)}}class uz extends es{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!IE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>CE(this.value.arrayValue,r))}}class ff{constructor(e,t){this.position=e,this.inclusive=t}}class Ny{constructor(e,t="asc"){this.field=e,this.dir=t}}function cz(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function tV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?ze.comparator(ze.fromName(u.referenceValue),t.key):hf(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function nV(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wu(n.position[t],e.position[t]))return!1;return!0}class Sd{constructor(e,t=null,r=[],i=[],a=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=g,this.D=null,this.C=null}}function rV(n,e,t,r,i,a,u,d){return new Sd(n,e,t,r,i,a,u,d)}function Py(n){return new Sd(n)}function rS(n){return!Lg(n.limit)&&"F"===n.limitType}function iS(n){return!Lg(n.limit)&&"L"===n.limitType}function CN(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function IN(n){for(const e of n.filters)if(e.S())return e.field;return null}function TN(n){return null!==n.collectionGroup}function Oy(n){const e=Ke(n);if(null===e.D){e.D=[];const t=IN(e),r=CN(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Ny(t)),e.D.push(new Ny(ki.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Ny(ki.keyField(),a))}}}return e.D}function Ja(n){const e=Ke(n);if(!e.C)if("F"===e.limitType)e.C=XL(e.path,e.collectionGroup,Oy(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Oy(e))t.push(new Ny(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new ff(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new ff(e.startAt.position,!e.startAt.inclusive):null;e.C=XL(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function iV(n,e,t){return new Sd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function AE(n,e){return SE(Ja(n),Ja(e))&&n.limitType===e.limitType}function sV(n){return`${Ug(Ja(n))}|lt:${n.limitType}`}function DN(n){return`Query(target=${function nz(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${xy(r.value)}`;var r}).join(", ")}]`),Lg(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>xy(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>xy(t)).join(",")),`Target(${e})`}(Ja(n))}; limitType=${n.limitType})`}function SN(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):ze.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,u){const d=tV(i,a,u);return i.inclusive?d<=0:d<0}(t.startAt,Oy(t),r)||t.endAt&&!function(i,a,u){const d=tV(i,a,u);return i.inclusive?d>=0:d>0}(t.endAt,Oy(t),r)));var t,r}function oV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function aV(n){return(e,t)=>{let r=!1;for(const i of Oy(n)){const a=dz(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function dz(n,e,t){const r=n.field.isKeyField()?ze.comparator(e.key,t.key):function(i,a,u){const d=a.data.field(i),g=u.data.field(i);return null!==d&&null!==g?hf(d,g):at()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return at()}}function lV(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bE(e)?"-0":e}}function uV(n){return{integerValue:""+n}}function cV(n,e){return HL(e)?uV(e):lV(n,e)}class sS{constructor(){this._=void 0}}function hz(n,e,t){return n instanceof ky?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Bg?hV(n,e):n instanceof jg?fV(n,e):function(r,i){const a=dV(r,i),u=pV(a)+pV(r.k);return EN(a)&&EN(r.k)?uV(u):lV(r.M,u)}(n,e)}function fz(n,e,t){return n instanceof Bg?hV(n,e):n instanceof jg?fV(n,e):t}function dV(n,e){return n instanceof Fy?EN(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ky extends sS{}class Bg extends sS{constructor(e){super(),this.elements=e}}function hV(n,e){const t=gV(e);for(const r of n.elements)t.some(i=>Wu(i,r))||t.push(r);return{arrayValue:{values:t}}}class jg extends sS{constructor(e){super(),this.elements=e}}function fV(n,e){let t=gV(e);for(const r of n.elements)t=t.filter(i=>!Wu(i,r));return{arrayValue:{values:t}}}class Fy extends sS{constructor(e,t){super(),this.M=e,this.k=t}}function pV(n){return Rr(n.integerValue||n.doubleValue)}function gV(n){return IE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class xE{constructor(e,t){this.field=e,this.transform=t}}class gz{constructor(e,t){this.version=e,this.transformResults=t}}class ei{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ei}static exists(e){return new ei(void 0,e)}static updateTime(e){return new ei(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oS(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class aS{}function mz(n,e,t){n instanceof RE?function(r,i,a){const u=r.value.clone(),d=vV(r.fieldTransforms,i,a.transformResults);u.setAll(d),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof Hg?function(r,i,a){if(!oS(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=vV(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(yV(r)),d.setAll(u),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function AN(n,e,t){var i;n instanceof RE?function(r,i,a){if(!oS(r.precondition,i))return;const u=r.value.clone(),d=wV(r.fieldTransforms,a,i);u.setAll(d),i.convertToFoundDocument(_V(i),u).setHasLocalMutations()}(n,e,t):n instanceof Hg?function(r,i,a){if(!oS(r.precondition,i))return;const u=wV(r.fieldTransforms,a,i),d=i.data;d.setAll(yV(r)),d.setAll(u),i.convertToFoundDocument(_V(i),d).setHasLocalMutations()}(n,e,t):oS(n.precondition,i=e)&&i.convertToNoDocument(Rt.min())}function _z(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=dV(r.transform,i||null);null!=a&&(null==t&&(t=ys.empty()),t.set(r.field,a))}return t||null}function mV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Sy(t,r,(i,a)=>function pz(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Bg&&r instanceof Bg||t instanceof jg&&r instanceof jg?Sy(t.elements,r.elements,Wu):t instanceof Fy&&r instanceof Fy?Wu(t.k,r.k):t instanceof ky&&r instanceof ky);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function _V(n){return n.isFoundDocument()?n.version:Rt.min()}class RE extends aS{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Hg extends aS{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function yV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function vV(n,e,t){const r=new Map;Pt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,d=e.data.field(a.field);r.set(a.field,fz(u,d,t[i]))}return r}function wV(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,hz(a,u,e))}return r}class ME extends aS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class xN extends aS{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class yz{constructor(e){this.count=e}}var ti,gn;function EV(n){switch(n){default:return at();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function bV(n){if(void 0===n)return Xr("GRPC error has no .code"),he.UNKNOWN;switch(n){case ti.OK:return he.OK;case ti.CANCELLED:return he.CANCELLED;case ti.UNKNOWN:return he.UNKNOWN;case ti.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case ti.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case ti.INTERNAL:return he.INTERNAL;case ti.UNAVAILABLE:return he.UNAVAILABLE;case ti.UNAUTHENTICATED:return he.UNAUTHENTICATED;case ti.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case ti.NOT_FOUND:return he.NOT_FOUND;case ti.ALREADY_EXISTS:return he.ALREADY_EXISTS;case ti.PERMISSION_DENIED:return he.PERMISSION_DENIED;case ti.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case ti.ABORTED:return he.ABORTED;case ti.OUT_OF_RANGE:return he.OUT_OF_RANGE;case ti.UNIMPLEMENTED:return he.UNIMPLEMENTED;case ti.DATA_LOSS:return he.DATA_LOSS;default:return at()}}(gn=ti||(ti={}))[gn.OK=0]="OK",gn[gn.CANCELLED=1]="CANCELLED",gn[gn.UNKNOWN=2]="UNKNOWN",gn[gn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gn[gn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gn[gn.NOT_FOUND=5]="NOT_FOUND",gn[gn.ALREADY_EXISTS=6]="ALREADY_EXISTS",gn[gn.PERMISSION_DENIED=7]="PERMISSION_DENIED",gn[gn.UNAUTHENTICATED=16]="UNAUTHENTICATED",gn[gn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gn[gn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gn[gn.ABORTED=10]="ABORTED",gn[gn.OUT_OF_RANGE=11]="OUT_OF_RANGE",gn[gn.UNIMPLEMENTED=12]="UNIMPLEMENTED",gn[gn.INTERNAL=13]="INTERNAL",gn[gn.UNAVAILABLE=14]="UNAVAILABLE",gn[gn.DATA_LOSS=15]="DATA_LOSS";class pf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){kg(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return BL(this.inner)}size(){return this.innerSize}}class Gr{constructor(e,t){this.comparator=e,this.root=t||ts.EMPTY}insert(e,t){return new Gr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ts.BLACK,null,null))}remove(e){return new Gr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ts.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lS(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lS(this.root,e,this.comparator,!1)}getReverseIterator(){return new lS(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lS(this.root,e,this.comparator,!0)}}class lS{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ts{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:ts.RED,this.left=null!=i?i:ts.EMPTY,this.right=null!=a?a:ts.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ts(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ts.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ts.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ts.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ts.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw at();const e=this.left.check();if(e!==this.right.check())throw at();return e+(this.isRed()?0:1)}}ts.EMPTY=null,ts.RED=!0,ts.BLACK=!1,ts.EMPTY=new class{constructor(){this.size=0}get key(){throw at()}get value(){throw at()}get color(){throw at()}get left(){throw at()}get right(){throw at()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ts(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ir{constructor(e){this.comparator=e,this.data=new Gr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new CV(this.data.getIterator())}getIteratorFrom(e){return new CV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ir)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ir(this.comparator);return t.data=e,t}}class CV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ly(n){return n.hasNext()?n.getNext():void 0}const vz=new Gr(ze.comparator);function Xa(){return vz}const wz=new Gr(ze.comparator);function RN(){return wz}function NE(){return new pf(n=>n.toString(),(n,e)=>n.isEqual(e))}const Ez=new Gr(ze.comparator),bz=new ir(ze.comparator);function xn(...n){let e=bz;for(const t of n)e=e.add(t);return e}const Cz=new ir(rn);function uS(){return Cz}class PE{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,OE.createSynthesizedTargetChangeForCurrentChange(e,t)),new PE(Rt.min(),r,uS(),Xa(),xn())}}class OE{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new OE(vi.EMPTY_BYTE_STRING,t,xn(),xn(),xn())}}class cS{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class IV{constructor(e,t){this.targetId=e,this.$=t}}class TV{constructor(e,t,r=vi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class DV{constructor(){this.B=0,this.L=AV(),this.U=vi.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=xn(),t=xn(),r=xn();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:at()}}),new OE(this.U,this.q,e,t,r)}J(){this.G=!1,this.L=AV()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class Iz{constructor(e){this.nt=e,this.st=new Map,this.it=Xa(),this.rt=SV(),this.ot=new ir(rn)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.K||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.K||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:at()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(tS(a))if(0===r){const u=new ze(a.path);this.ct(t,u,rr.newNoDocument(u,Rt.min()))}else Pt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,u)=>{const d=this.wt(u);if(d){if(a.current&&tS(d.target)){const g=new ze(d.target.path);null!==this.it.get(g)||this.It(u,g)||this.ct(u,g,rr.newNoDocument(g,e))}a.j&&(t.set(u,a.H()),a.J())}});let r=xn();this.rt.forEach((a,u)=>{let d=!0;u.forEachWhile(g=>{const y=this.wt(g);return!y||2===y.purpose||(d=!1,!1)}),d&&(r=r.add(a))}),this.it.forEach((a,u)=>u.setReadTime(e));const i=new PE(e,t,this.ot,this.it,r);return this.it=Xa(),this.rt=SV(),this.ot=new ir(rn),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new DV,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new ir(rn),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Le("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new DV),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function SV(){return new Gr(ze.comparator)}function AV(){return new Gr(ze.comparator)}const Tz={asc:"ASCENDING",desc:"DESCENDING"},Dz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Sz{constructor(e,t){this.databaseId=e,this.N=t}}function kE(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xV(n,e){return n.N?e.toBase64():e.toUint8Array()}function Az(n,e){return kE(n,e.toTimestamp())}function Fi(n){return Pt(!!n),Rt.fromTimestamp(function(e){const t=df(e);return new $r(t.seconds,t.nanos)}(n))}function MN(n,e){return(t=n,new pn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function RV(n){const e=pn.fromString(n);return Pt(UV(e)),e}function FE(n,e){return MN(n.databaseId,e.path)}function Ku(n,e){const t=RV(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ze(NV(t))}function NN(n,e){return MN(n.databaseId,e)}function MV(n){const e=RV(n);return 4===e.length?pn.emptyPath():NV(e)}function LE(n){return new pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function NV(n){return Pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function PV(n,e,t){return{name:FE(n,e),fields:t.value.mapValue.fields}}function OV(n,e,t){const r=Ku(n,e.name),i=Fi(e.updateTime),a=new ys({mapValue:{fields:e.fields}}),u=rr.newFoundDocument(r,i,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function VE(n,e){let t;if(e instanceof RE)t={update:PV(n,e.key,e.value)};else if(e instanceof ME)t={delete:FE(n,e.key)};else if(e instanceof Hg)t={update:PV(n,e.key,e.data),updateMask:Lz(e.fieldMask)};else{if(!(e instanceof xN))return at();t={verify:FE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof ky)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Bg)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof jg)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Fy)return{fieldPath:a.field.canonicalString(),increment:u.k};throw at()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Az(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:at()),t;var i}function PN(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ei.updateTime(Fi(i.updateTime)):void 0!==i.exists?ei.exists(i.exists):ei.none():ei.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let d=null;"setToServerValue"in u?(Pt("REQUEST_TIME"===u.setToServerValue),d=new ky):"appendMissingElements"in u?d=new Bg(u.appendMissingElements.values||[]):"removeAllFromArray"in u?d=new jg(u.removeAllFromArray.values||[]):"increment"in u?d=new Fy(a,u.increment):at();const g=ki.fromServerFormat(u.fieldPath);return new xE(g,d)}(n,i)):[];var i;if(e.update){const i=Ku(n,e.update.name),a=new ys({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Ay((e.updateMask.fieldPaths||[]).map(y=>ki.fromServerFormat(y)));return new Hg(i,a,u,t,r)}return new RE(i,a,t,r)}if(e.delete){const i=Ku(n,e.delete);return new ME(i,t)}if(e.verify){const i=Ku(n,e.verify);return new xN(i,t)}return at()}function kV(n,e){return{documents:[NN(n,e.path)]}}function FV(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=NN(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=NN(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(g){if(0===g.length)return;const y=g.map(I=>function(D){if("=="===D.op){if(WL(D.value))return{unaryFilter:{field:Vy(D.field),op:"IS_NAN"}};if(zL(D.value))return{unaryFilter:{field:Vy(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(WL(D.value))return{unaryFilter:{field:Vy(D.field),op:"IS_NOT_NAN"}};if(zL(D.value))return{unaryFilter:{field:Vy(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vy(D.field),op:Oz(D.op),value:D.value}}}(I));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(g){if(0!==g.length)return g.map(y=>{return{field:Vy((I=y).field),direction:Pz(I.dir)};var I})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(y=e.limit,n.N||Lg(y)?y:{value:y});var y,d,g;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(g=e.endAt).inclusive,values:g.position}),t}function LV(n){let e=MV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pt(1===r);const I=t.from[0];I.allDescendants?i=I.collectionId:e=e.child(I.collectionId)}let a=[];t.where&&(a=VV(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(I=>{return new Ny(Uy((D=I).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let d=null;t.limit&&(d=function(I){let D;return D="object"==typeof I?I.value:I,Lg(D)?null:D}(t.limit));let g=null;var I;t.startAt&&(g=new ff((I=t.startAt).values||[],!!I.before));let y=null;return t.endAt&&(y=function(I){return new ff(I.values||[],!I.before)}(t.endAt)),rV(e,i,u,a,d,"F",g,y)}function VV(n){return n?void 0!==n.unaryFilter?[Fz(n)]:void 0!==n.fieldFilter?[kz(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>VV(e)).reduce((e,t)=>e.concat(t)):at():[]}function Pz(n){return Tz[n]}function Oz(n){return Dz[n]}function Vy(n){return{fieldPath:n.canonicalString()}}function Uy(n){return ki.fromServerFormat(n.fieldPath)}function kz(n){return es.create(Uy(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return at()}}(n.fieldFilter.op),n.fieldFilter.value)}function Fz(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Uy(n.unaryFilter.field);return es.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Uy(n.unaryFilter.field);return es.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Uy(n.unaryFilter.field);return es.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Uy(n.unaryFilter.field);return es.create(i,"!=",{nullValue:"NULL_VALUE"});default:return at()}}function Lz(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function UV(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=BV(e)),e=Vz(n.get(t),e);return BV(e)}function Vz(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function BV(n){return n+"\x01\x01"}function jl(n){const e=n.length;if(Pt(e>=2),2===e)return Pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),pn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&at(),n.charAt(u+1)){case"\x01":const d=n.substring(a,u);let g;0===i.length?g=d:(i+=d,g=i,i=""),r.push(g);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:at()}a=u+2}return new pn(r)}const jV=["userId","batchId"];function dS(n,e){return[n,Li(e)]}function HV(n,e,t){return[n,Li(e),t]}const Uz={},Bz=["prefixPath","collectionGroup","readTime","documentId"],jz=["prefixPath","collectionGroup","documentId"],Hz=["collectionGroup","readTime","prefixPath","documentId"],$z=["canonicalId","targetId"],Gz=["targetId","path"],qz=["path","targetId"],zz=["collectionId","parent"],Wz=["indexId","uid"],Kz=["uid","sequenceNumber"],Zz=["indexId","uid","arrayValue","directionalValue","documentKey"],Yz=["indexId","uid","documentKey"],Qz=["userId","collectionPath","documentId"],Jz=["userId","collectionPath","largestBatchId"],Xz=["userId","collectionGroup","largestBatchId"],$V=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],eW=[...$V,"documentOverlays"],GV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tW=[...GV,"indexConfiguration","indexState","indexEntries"],qV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&at(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let i=0,a=0,u=!1;e.forEach(d=>{++i,d.next(()=>{++a,u&&a===i&&t()},g=>r(g))}),u=!0,a===i&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(i=>i?me.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class hS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Oi,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new UE(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=ON(r.target.error);this.At.reject(new UE(e,i))}}static open(e,t,r,i){try{return new hS(t,e.transaction(i,r))}catch(a){throw new UE(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Le("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new rW(t)}}class Hl{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Hl.Vt((0,k.z$)())&&Xr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Le("SimpleDb","Removing database:",e),Gg(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,k.hl)())return!1;if(Hl.St())return!0;const e=(0,k.z$)(),t=Hl.Vt(e),r=0<t&&t<10,i=Hl.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ve.Z)(function*(){return t.db||(Le("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new UE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const d=u.target.error;i("VersionError"===d.name?new Re(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Re(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new UE(e,d))},a.onupgradeneeded=u=>{Le("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.Pt.kt(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{Le("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,ve.Z)(function*(){const u="readonly"===t;let d=0;for(;;){++d;try{a.db=yield a.Nt(e);const g=hS.open(a.db,e,u?"readonly":"readwrite",r),y=i(g).next(I=>(g.bt(),I)).catch(I=>(g.abort(I),me.reject(I))).toPromise();return y.catch(()=>{}),yield g.Rt,y}catch(g){const y="FirebaseError"!==g.name&&d<3;if(Le("SimpleDb","Transaction failed with error:",g.message,"Retrying:",y),a.close(),!y)return Promise.reject(g)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class nW{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Gg(this.Ft.delete())}}class UE extends Re{constructor(e,t){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $g(n){return"IndexedDbTransactionError"===n.name}class rW{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Le("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Le("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Gg(r)}add(e){return Le("SimpleDb","ADD",this.store.name,e,e),Gg(this.store.add(e))}get(e){return Gg(this.store.get(e)).next(t=>(void 0===t&&(t=null),Le("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Le("SimpleDb","DELETE",this.store.name,e),Gg(this.store.delete(e))}count(){return Le("SimpleDb","COUNT",this.store.name),Gg(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Gt(i,(u,d)=>{a.push(d)}).next(()=>a)}{const i=this.store.getAll(r.range);return new me((a,u)=>{i.onerror=d=>{u(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}}Kt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new me((i,a)=>{r.onerror=u=>{a(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Qt(e,t){Le("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Gt(i,(a,u,d)=>d.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Gt(i,t)}zt(e){const t=this.cursor({});return new me((r,i)=>{t.onerror=a=>{const u=ON(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(d=>{d?u.continue():r()}):r()}})}Gt(e,t){const r=[];return new me((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const d=u.target.result;if(!d)return void i();const g=new nW(d),y=t(d.primaryKey,d.value,g);if(y instanceof me){const I=y.catch(D=>(g.done(),me.reject(D)));r.push(I)}g.isDone?i():null===g.Lt?d.continue():d.continue(g.Lt)}}).next(()=>me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Gg(n){return new me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=ON(r.target.error);t(i)}})}let WV=!1;function ON(n){const e=Hl.Vt((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return WV||(WV=!0,setTimeout(()=>{throw r},0)),r}}return n}class KV extends zV{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Vi(n,e){const t=Ke(n);return Hl.xt(t.Ht,e)}class kN{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&mz(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&AN(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&AN(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Rt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xn())}isEqual(e){return this.batchId===e.batchId&&Sy(this.mutations,e.mutations,(t,r)=>mV(t,r))&&Sy(this.baseMutations,e.baseMutations,(t,r)=>mV(t,r))}}class FN{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pt(e.mutations.length===r.length);let i=Ez;const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new FN(e,t,r,i)}}class LN{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gf{constructor(e,t,r,i,a=Rt.min(),u=Rt.min(),d=vi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d}withSequenceNumber(e){return new gf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new gf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ZV{constructor(e){this.Jt=e}}function YV(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:fS(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:FE(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:kE(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:qg(e.version)};else{if(!e.isUnknownDocument())return at();r.unknownDocument={path:t.path.toArray(),version:qg(e.version)}}var i,a;return r}function fS(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function qg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function zg(n){const e=new $r(n.seconds,n.nanoseconds);return Rt.fromTimestamp(e)}function By(n,e){const t=(e.baseMutations||[]).map(a=>PN(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(u.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>PN(n.Jt,a)),i=$r.fromMillis(e.localWriteTimeMs);return new kN(e.batchId,i,t,r)}function BE(n){const e=zg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?zg(n.lastLimboFreeSnapshotVersion):Rt.min();let r;var i;return void 0!==n.query.documents?(Pt(1===(i=n.query).documents.length),r=Ja(Py(MV(i.documents[0])))):r=Ja(LV(n.query)),new gf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,vi.fromBase64String(n.resumeToken))}function QV(n,e){const t=qg(e.snapshotVersion),r=qg(e.lastLimboFreeSnapshotVersion);let i;i=tS(e.target)?kV(n.Jt,e.target):FV(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ug(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function VN(n){const e=LV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?iV(e,e.limit,"L"):e}function UN(n,e){return new LN(e.largestBatchId,PN(n.Jt,e.overlayMutation))}function JV(n,e){const t=e.path.lastSegment();return[n,Li(e.path.popLast()),t]}class sW{getBundleMetadata(e,t){return XV(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:zg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return XV(e).put({bundleId:(r=t).id,createTime:qg(Fi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return eU(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:VN(i.bundledQuery),readTime:zg(i.readTime)};var i})}saveNamedQuery(e,t){return eU(e).put({name:(r=t).name,readTime:qg(Fi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function XV(n){return Vi(n,"bundles")}function eU(n){return Vi(n,"namedQueries")}class BN{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new BN(e,t.uid||"")}getOverlay(e,t){return jE(e).get(JV(this.userId,t)).next(r=>r?UN(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,u)=>{const d=new LN(t,u);i.push(this.Xt(e,d))}),me.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Li(u.getCollectionPath())));const a=[];return i.forEach(u=>{const d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);a.push(jE(e).Qt("collectionPathOverlayIndex",d))}),me.waitFor(a)}getOverlaysForCollection(e,t,r){const i=NE(),a=Li(t),u=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return jE(e).qt("collectionPathOverlayIndex",u).next(d=>{for(const g of d){const y=UN(this.M,g);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=NE();let u;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return jE(e).Wt({index:"collectionGroupOverlayIndex",range:d},(g,y,I)=>{const D=UN(this.M,y);a.size()<i||D.largestBatchId===u?(a.set(D.getKey(),D),u=D.largestBatchId):I.done()}).next(()=>a)}Xt(e,t){return jE(e).put(function(r,i,a){const[u,d,g]=JV(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:g,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:VE(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function jE(n){return Vi(n,"documentOverlays")}class jy{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Rr(e.integerValue));else if("doubleValue"in e){const r=Rr(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),bE(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Fg(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?KL(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):at()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),ze.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function oW(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function tU(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=oW(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}jy.fe=new jy;class aW{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=tU(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=tU(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class lW{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class uW{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class pS{constructor(){this.De=new aW,this.Ce=new lW(this.De),this.xe=new uW(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class mf{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new mf(this.indexId,this.documentKey,this.arrayValue,r)}}function Wg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=nU(n.arrayValue,e.arrayValue),0!==t?t:(t=nU(n.directionalValue,e.directionalValue),0!==t?t:ze.comparator(n.documentKey,e.documentKey)))}function nU(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class cW{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=bN(e);if(void 0!==t&&!this.Be(t))return!1;const r=My(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const u=r[i];if(!this.Le(this.Fe,u)||!this.Ue(this.Me[a++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],u))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class dW{constructor(){this.qe=new jN}addToCollectionParentIndex(e,t){return this.qe.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getFieldIndex(e,t){return me.resolve(null)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class jN{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ir(pn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ir(pn.comparator)).toArray()}}const gS=new Uint8Array(0);class hW{constructor(e){this.user=e,this.Ge=new jN,this.Ke=new pf(t=>Ug(t),(t,r)=>SE(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ge.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ge.add(t)});const a={collectionId:r,parent:Li(i)};return rU(e).put(a)}return me.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[VL(t),""],!1,!0);return rU(e).qt(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(jl(u.parent))}return r})}addFieldIndex(e,t){const r=mS(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=mS(e),i=_S(e),a=HE(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=HE(e);let i=!0;const a=new Map;return me.forEach(this.Qe(t),u=>this.getFieldIndex(e,u).next(d=>{i&&(i=!!d),a.set(u,d)})).next(()=>{if(i){let u=xn();return me.forEach(a,(d,g)=>{var y;Le("IndexedDbIndexManager",`Using index ${y=d,`id=${y.indexId}|cg=${y.collectionGroup}|f=${y.fields.map(Ne=>`${Ne.fieldPath}:${Ne.kind}`).join(",")}`} to execute ${Ug(t)}`);const I=function(Ne,et){const Be=bN(et);if(void 0===Be)return null;for(const Tt of nS(Ne,Be.fieldPath))switch(Tt.op){case"array-contains-any":return Tt.value.arrayValue.values||[];case"array-contains":return[Tt.value]}return null}(g,d),D=function(Ne,et){const Be=new Map;for(const Tt of My(et))for(const yt of nS(Ne,Tt.fieldPath))switch(yt.op){case"==":case"in":Be.set(Tt.fieldPath.canonicalString(),yt.value);break;case"not-in":case"!=":return Be.set(Tt.fieldPath.canonicalString(),yt.value),Array.from(Be.values())}return null}(g,d),R=function(Ne,et){const Be=[];let Tt=!0;for(const Rn of My(et)){let Nn,qr=!0;for(const Pn of nS(Ne,Rn.fieldPath)){let Jn,tl=!0;switch(Pn.op){case"<":case"<=":Jn="nullValue"in(yt=Pn.value)?GL:"booleanValue"in yt?{booleanValue:!1}:"integerValue"in yt||"doubleValue"in yt?{doubleValue:NaN}:"timestampValue"in yt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in yt?{stringValue:""}:"bytesValue"in yt?{bytesValue:""}:"referenceValue"in yt?Ry(Td.empty(),ze.empty()):"geoPointValue"in yt?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in yt?{arrayValue:{}}:"mapValue"in yt?{mapValue:{}}:at();break;case"==":case"in":case">=":Jn=Pn.value;break;case">":Jn=Pn.value,tl=!1;break;case"!=":case"not-in":Jn=GL}ZL(Nn,Jn)===Jn&&(Nn=Jn,qr=tl)}if(null!==Ne.startAt)for(let Pn=0;Pn<Ne.orderBy.length;++Pn)if(Ne.orderBy[Pn].field.isEqual(Rn.fieldPath)){const Jn=Ne.startAt.position[Pn];ZL(Nn,Jn)===Jn&&(Nn=Jn,qr=Ne.startAt.inclusive);break}if(void 0===Nn)return null;Be.push(Nn),Tt&&(Tt=qr)}var yt;return new ff(Be,Tt)}(g,d),O=function(Ne,et){const Be=[];let Tt=!0;for(const Rn of My(et)){let Nn,qr=!0;for(const Pn of nS(Ne,Rn.fieldPath)){let Jn,tl=!0;switch(Pn.op){case">=":case">":Jn="nullValue"in(yt=Pn.value)?{booleanValue:!1}:"booleanValue"in yt?{doubleValue:NaN}:"integerValue"in yt||"doubleValue"in yt?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in yt?{stringValue:""}:"stringValue"in yt?{bytesValue:""}:"bytesValue"in yt?Ry(Td.empty(),ze.empty()):"referenceValue"in yt?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in yt?{arrayValue:{}}:"arrayValue"in yt?{mapValue:{}}:"mapValue"in yt?$L:at(),tl=!1;break;case"==":case"in":case"<=":Jn=Pn.value;break;case"<":Jn=Pn.value,tl=!1;break;case"!=":case"not-in":Jn=$L}YL(Nn,Jn)===Jn&&(Nn=Jn,qr=tl)}if(null!==Ne.endAt)for(let Pn=0;Pn<Ne.orderBy.length;++Pn)if(Ne.orderBy[Pn].field.isEqual(Rn.fieldPath)){const Jn=Ne.endAt.position[Pn];YL(Nn,Jn)===Jn&&(Nn=Jn,qr=Ne.endAt.inclusive);break}if(void 0===Nn)return null;Be.push(Nn),Tt&&(Tt=qr)}var yt;return new ff(Be,Tt)}(g,d),U=this.je(d,g,R),K=this.je(d,g,O),pe=this.We(d,g,D),Ve=this.ze(d.indexId,I,U,!!R&&R.inclusive,K,!!O&&O.inclusive,pe);return me.forEach(Ve,Ne=>r.Kt(Ne,t.limit).next(et=>{et.forEach(Be=>{u=u.add(new ze(jl(Be.documentKey)))})}))}).next(()=>u)}return me.resolve(null)})}Qe(e){let t=this.Ke.get(e);return t||(t=[e],this.Ke.set(e,t),t)}ze(e,t,r,i,a,u,d){const g=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=a?a.length:1),y=g/(null!=t?t.length:1),I=[];for(let D=0;D<g;++D){const R=t?this.He(t[D/y]):gS,O=r?this.Je(e,R,r[D%y],i):this.Ye(e),U=a?this.Xe(e,R,a[D%y],u):this.Ye(e+1);I.push(...this.createRange(O,U,d.map(K=>this.Je(e,R,K,!0))))}return I}Je(e,t,r,i){const a=new mf(e,ze.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new mf(e,ze.empty(),t,r);return i?a.ke():a}Ye(e){return new mf(e,ze.empty(),gS,gS)}getFieldIndex(e,t){const r=new cW(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{const u=a.filter(d=>r.$e(d));return u.sort((d,g)=>g.fields.length-d.fields.length),u.length>0?u[0]:null})}Ze(e,t){const r=new pS;for(const i of My(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const u=r.Ne(i.kind);jy.fe.Zt(a,u)}return r.Se()}He(e){const t=new pS;return jy.fe.Zt(e,t.Ne(0)),t.Se()}We(e,t,r){if(null===r)return[];let i=[];i.push(new pS);let a=0;for(const u of My(e)){const d=r[a++];for(const g of i)if(this.tn(t,u.fieldPath)&&IE(d))i=this.en(i,u,d);else{const y=g.Ne(u.kind);jy.fe.Zt(d,y)}}return this.nn(i)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}nn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}en(e,t,r){const i=[...e],a=[];for(const u of r.arrayValue.values||[])for(const d of i){const g=new pS;g.seed(d.Se()),jy.fe.Zt(u,g.Ne(t.kind)),a.push(g)}return a}tn(e,t){return!!e.filters.find(r=>r instanceof es&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=mS(e),i=_S(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const u=[];return me.forEach(a,d=>i.get([d.indexId,this.uid]).next(g=>{u.push(function(y,I){const D=I?new DE(I.sequenceNumber,new Dd(zg(I.readTime),new ze(jl(I.documentKey)),I.largestBatchId)):DE.empty(),R=y.fields.map(([O,U])=>new eS(ki.fromServerFormat(O),U));return new XD(y.indexId,y.collectionGroup,R,D)}(d,g))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:rn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=mS(e),a=_S(e);return this.sn(e).next(u=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>me.forEach(d,g=>{return a.put({indexId:g.indexId,uid:this.user.uid||"",sequenceNumber:u,readTime:qg((R=r).readTime),documentKey:Li(R.documentKey.path),largestBatchId:R.largestBatchId});var R})))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(i,a)=>{const u=r.get(i.collectionGroup);return(u?me.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),me.forEach(d,g=>this.rn(e,i,g).next(y=>{const I=this.on(a,g);return y.isEqual(I)?me.resolve():this.un(e,a,y,I)}))))})}an(e,t,r){return HE(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,documentKey:Li(t.key.path)})}cn(e,t,r){return HE(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Li(t.key.path)])}rn(e,t,r){const i=HE(e);let a=new ir(Wg);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,Li(t.path)])},(u,d)=>{a=a.add(new mf(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}on(e,t){let r=new ir(Wg);const i=this.Ze(t,e);if(null==i)return r;const a=bN(t);if(null!=a){const u=e.data.field(a.fieldPath);if(IE(u))for(const d of u.arrayValue.values||[])r=r.add(new mf(t.indexId,e.key,this.He(d),i))}else r=r.add(new mf(t.indexId,e.key,gS,i));return r}un(e,t,r,i){Le("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(u,d,g,y,I){const D=u.getIterator(),R=d.getIterator();let O=Ly(D),U=Ly(R);for(;O||U;){let K=!1,pe=!1;if(O&&U){const Ve=g(O,U);Ve<0?pe=!0:Ve>0&&(K=!0)}else null!=O?pe=!0:K=!0;K?(y(U),U=Ly(R)):pe?(I(O),O=Ly(D)):(O=Ly(D),U=Ly(R))}}(r,i,Wg,u=>{a.push(this.an(e,t,u))},u=>{a.push(this.cn(e,t,u))}),me.waitFor(a)}sn(e){let t=1;return _S(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,d)=>Wg(u,d)).filter((u,d,g)=>!d||0!==Wg(u,g[d-1]));const i=[];i.push(e);for(const u of r){const d=Wg(u,e),g=Wg(u,t);if(0===d)i[0]=e.ke();else if(d>0&&g<0)i.push(u),i.push(u.ke());else if(g>0)break}i.push(t);const a=[];for(let u=0;u<i.length;u+=2)a.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,""],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,""]));return a}}function rU(n){return Vi(n,"collectionParents")}function HE(n){return Vi(n,"indexEntries")}function mS(n){return Vi(n,"indexConfiguration")}function _S(n){return Vi(n,"indexState")}const iU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Po{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Po(e,Po.DEFAULT_COLLECTION_PERCENTILE,Po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function sU(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],u=IDBKeyRange.only(t.batchId);let d=0;const g=r.Wt({range:u},(I,D,R)=>(d++,R.delete()));a.push(g.next(()=>{Pt(1===d)}));const y=[];for(const I of t.mutations){const D=HV(e,I.key.path,t.batchId);a.push(i.delete(D)),y.push(I.key)}return me.waitFor(a).next(()=>y)}function yS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw at();e=n.noDocument}return JSON.stringify(e).length}Po.DEFAULT_COLLECTION_PERCENTILE=10,Po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Po.DEFAULT=new Po(41943040,Po.DEFAULT_COLLECTION_PERCENTILE,Po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Po.DISABLED=new Po(-1,0,0);class HN{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.hn={}}static Yt(e,t,r,i){Pt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new HN(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _f(e).Wt({index:"userMutationsIndex",range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Hy(e),u=_f(e);return u.add({}).next(d=>{Pt("number"==typeof d);const g=new kN(d,t,r,i),y=function(R,O,U){const K=U.baseMutations.map(Ve=>VE(R.Jt,Ve)),pe=U.mutations.map(Ve=>VE(R.Jt,Ve));return{userId:O,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:K,mutations:pe}}(this.M,this.userId,g),I=[];let D=new ir((R,O)=>rn(R.canonicalString(),O.canonicalString()));for(const R of i){const O=HV(this.userId,R.key.path,d);D=D.add(R.key.path.popLast()),I.push(u.put(y)),I.push(a.put(O,Uz))}return D.forEach(R=>{I.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.hn[d]=g.keys()}),me.waitFor(I).next(()=>g)})}lookupMutationBatch(e,t){return _f(e).get(t).next(r=>r?(Pt(r.userId===this.userId),By(this.M,r)):null)}ln(e,t){return this.hn[t]?me.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.hn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return _f(e).Wt({index:"userMutationsIndex",range:i},(u,d,g)=>{d.userId===this.userId&&(Pt(d.batchId>=r),a=By(this.M,d)),g.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return _f(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _f(e).qt("userMutationsIndex",t).next(r=>r.map(i=>By(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=dS(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Hy(e).Wt({range:i},(u,d,g)=>{const[y,I,D]=u,R=jl(I);if(y===this.userId&&t.path.isEqual(R))return _f(e).get(D).next(O=>{if(!O)throw at();Pt(O.userId===this.userId),a.push(By(this.M,O))});g.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ir(rn);const i=[];return t.forEach(a=>{const u=dS(this.userId,a.path),d=IDBKeyRange.lowerBound(u),g=Hy(e).Wt({range:d},(y,I,D)=>{const[R,O,U]=y,K=jl(O);R===this.userId&&a.path.isEqual(K)?r=r.add(U):D.done()});i.push(g)}),me.waitFor(i).next(()=>this.fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=dS(this.userId,r),u=IDBKeyRange.lowerBound(a);let d=new ir(rn);return Hy(e).Wt({range:u},(g,y,I)=>{const[D,R,O]=g,U=jl(R);D===this.userId&&r.isPrefixOf(U)?U.length===i&&(d=d.add(O)):I.done()}).next(()=>this.fn(e,d))}fn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(_f(e).get(a).next(u=>{if(null===u)throw at();Pt(u.userId===this.userId),r.push(By(this.M,u))}))}),me.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return sU(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.dn(t.batchId)}),me.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Hy(e).Wt({range:r},(a,u,d)=>{if(a[0]===this.userId){const g=jl(a[1]);i.push(g)}else d.done()}).next(()=>{Pt(0===i.length)})})}containsKey(e,t){return oU(e,this.userId,t)}_n(e){return aU(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function oU(n,e,t){const r=dS(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return Hy(n).Wt({range:a,jt:!0},(d,g,y)=>{const[I,D,R]=d;I===e&&D===i&&(u=!0),y.done()}).next(()=>u)}function _f(n){return Vi(n,"mutations")}function Hy(n){return Vi(n,"documentMutations")}function aU(n){return Vi(n,"mutationQueues")}class Kg{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new Kg(0)}static gn(){return new Kg(-1)}}class fW{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.yn(e).next(t=>{const r=new Kg(t.highestTargetId);return t.highestTargetId=r.next(),this.pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(t=>Rt.fromTimestamp(new $r(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.yn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.pn(e,i)))}addTargetData(e,t){return this.In(e,t).next(()=>this.yn(e).next(r=>(r.targetCount+=1,this.Tn(t,r),this.pn(e,r))))}updateTargetData(e,t){return this.In(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>$y(e).delete(t.targetId)).next(()=>this.yn(e)).next(r=>(Pt(r.targetCount>0),r.targetCount-=1,this.pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return $y(e).Wt((u,d)=>{const g=BE(d);g.sequenceNumber<=t&&null===r.get(g.targetId)&&(i++,a.push(this.removeTargetData(e,g)))}).next(()=>me.waitFor(a)).next(()=>i)}forEachTarget(e,t){return $y(e).Wt((r,i)=>{const a=BE(i);t(a)})}yn(e){return lU(e).get("targetGlobalKey").next(t=>(Pt(null!==t),t))}pn(e,t){return lU(e).put("targetGlobalKey",t)}In(e,t){return $y(e).put(QV(this.M,t))}Tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.yn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ug(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return $y(e).Wt({range:i,index:"queryTargetsIndex"},(u,d,g)=>{const y=BE(d);SE(t,y.target)&&(a=y,g.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=yf(e);return t.forEach(u=>{const d=Li(u.path);i.push(a.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,u))}),me.waitFor(i)}removeMatchingKeys(e,t,r){const i=yf(e);return me.forEach(t,a=>{const u=Li(a.path);return me.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=yf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=yf(e);let a=xn();return i.Wt({range:r,jt:!0},(u,d,g)=>{const y=jl(u[1]),I=new ze(y);a=a.add(I)}).next(()=>a)}containsKey(e,t){const r=Li(t.path),i=IDBKeyRange.bound([r],[VL(r)],!1,!0);let a=0;return yf(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([u,d],g,y)=>{0!==u&&(a++,y.done())}).next(()=>a>0)}Et(e,t){return $y(e).get(t).next(r=>r?BE(r):null)}}function $y(n){return Vi(n,"targets")}function lU(n){return Vi(n,"targetGlobal")}function yf(n){return Vi(n,"targetDocuments")}function Zg(n){return $N.apply(this,arguments)}function $N(){return $N=(0,ve.Z)(function*(n){if(n.code!==he.FAILED_PRECONDITION||n.message!==qV)throw n;Le("LocalStore","Unexpectedly lost primary lease")}),$N.apply(this,arguments)}function uU([n,e],[t,r]){const i=rn(n,t);return 0===i?rn(e,r):i}class pW{constructor(e){this.En=e,this.buffer=new ir(uU),this.An=0}Rn(){return++this.An}bn(e){const t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();uU(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gW{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var t=this;const r=this.Pn?3e5:6e4;Le("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ve.Z)(function*(){t.Vn=null,t.Pn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){$g(i)?Le("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Zg(i)}yield t.vn(e)}))}}class mW{constructor(e,t){this.Sn=e,this.params=t}calculateTargetCount(e,t){return this.Sn.Dn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return me.resolve(Ea.A);const r=new pW(t);return this.Sn.forEachTarget(e,i=>r.bn(i.sequenceNumber)).next(()=>this.Sn.Cn(e,i=>r.bn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Sn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Sn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(iU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),iU):this.xn(e,t))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,t){let r,i,a,u,d,g,y;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(Le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,u=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,d=Date.now(),this.removeTargets(e,r,t))).next(D=>(a=D,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(y=Date.now(),_N()<=Ro.in.DEBUG&&Le("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-I}ms\n\tDetermined least recently used ${i} in `+(d-u)+`ms\n\tRemoved ${a} targets in `+(g-d)+`ms\n\tRemoved ${D} documents in `+(y-g)+`ms\nTotal Duration: ${y-I}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:D})))}}class _W{constructor(e,t){this.db=e,this.garbageCollector=new mW(this,t)}Dn(e){const t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Nn(e){let t=0;return this.Cn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Cn(e,t){return this.kn(e,(r,i)=>t(i))}addReference(e,t,r){return vS(e,r)}removeReference(e,t,r){return vS(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return vS(e,t)}Mn(e,t){return function(r,i){let a=!1;return aU(r).zt(u=>oU(r,u,i).next(d=>(d&&(a=!0),me.resolve(!d)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.kn(e,(u,d)=>{if(d<=t){const g=this.Mn(e,u).next(y=>{if(!y)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u,Rt.min()),yf(e).delete([0,Li(u.path)])))});i.push(g)}}).next(()=>me.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return vS(e,t)}kn(e,t){const r=yf(e);let i,a=Ea.A;return r.Wt({index:"documentTargetsIndex"},([u,d],{path:g,sequenceNumber:y})=>{0===u?(a!==Ea.A&&t(new ze(jl(i)),a),a=y,i=g):a=Ea.A}).next(()=>{a!==Ea.A&&t(new ze(jl(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function vS(n,e){return yf(n).put((r=n.currentSequenceNumber,{targetId:0,path:Li(e.path),sequenceNumber:r}));var r}class cU{constructor(){this.changes=new pf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yW{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Yg(e).put(r)}removeEntry(e,t,r){return Yg(e).delete(function(i,a){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],fS(a),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.On(e,r)))}getEntry(e,t){let r=rr.newInvalidDocument(t);return Yg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only($E(t))},(i,a)=>{r=this.Fn(t,a)}).next(()=>r)}$n(e,t){let r={size:0,document:rr.newInvalidDocument(t)};return Yg(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only($E(t))},(i,a)=>{r={document:this.Fn(t,a),size:yS(a)}}).next(()=>r)}getEntries(e,t){let r=Xa();return this.Bn(e,t,(i,a)=>{const u=this.Fn(i,a);r=r.insert(i,u)}).next(()=>r)}Ln(e,t){let r=Xa(),i=new Gr(ze.comparator);return this.Bn(e,t,(a,u)=>{const d=this.Fn(a,u);r=r.insert(a,d),i=i.insert(a,yS(u))}).next(()=>({documents:r,Un:i}))}Bn(e,t,r){if(t.isEmpty())return me.resolve();let i=new ir(fU);t.forEach(g=>i=i.add(g));const a=IDBKeyRange.bound($E(i.first()),$E(i.last())),u=i.getIterator();let d=u.getNext();return Yg(e).Wt({index:"documentKeyIndex",range:a},(g,y,I)=>{const D=ze.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&fU(d,D)<0;)r(d,null),d=u.getNext();d&&d.isEqual(D)&&(r(d,y),d=u.hasNext()?u.getNext():null),d?I.Ut($E(d)):I.done()}).next(()=>{for(;d;)r(d,null),d=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),fS(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yg(e).qt(IDBKeyRange.bound(i,a,!0)).next(u=>{let d=Xa();for(const g of u){const y=this.Fn(ze.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(e,t,r,i){let a=Xa();const u=hU(t,r),d=hU(t,Dd.max());return Yg(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,d,!0)},(g,y,I)=>{const D=this.Fn(ze.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);a=a.insert(D.key,D),a.size===i&&I.done()}).next(()=>a)}newChangeBuffer(e){return new vW(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dU(e).get("remoteDocumentGlobalKey").next(t=>(Pt(!!t),t))}On(e,t){return dU(e).put("remoteDocumentGlobalKey",t)}Fn(e,t){if(t){const r=function iW(n,e){let t;if(e.document)t=OV(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ze.fromSegments(e.noDocument.path),i=zg(e.noDocument.readTime);t=rr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return at();{const r=ze.fromSegments(e.unknownDocument.path),i=zg(e.unknownDocument.version);t=rr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new $r(r[0],r[1]);return Rt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Rt.min()))return r}return rr.newInvalidDocument(e)}}class vW extends cU{constructor(e,t){super(),this.qn=e,this.trackRemovals=t,this.Gn=new pf(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new ir((a,u)=>rn(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const d=this.Gn.get(a);if(t.push(this.qn.removeEntry(e,a,d.readTime)),u.isValidDocument()){const g=YV(this.qn.M,u);i=i.add(a.path.popLast()),r+=yS(g)-d.size,t.push(this.qn.addEntry(e,a,g))}else if(r-=d.size,this.trackRemovals){const g=YV(this.qn.M,u.convertToNoDocument(Rt.min()));t.push(this.qn.addEntry(e,a,g))}}),i.forEach(a=>{t.push(this.qn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.qn.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.qn.$n(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.qn.Ln(e,t).next(({documents:r,Un:i})=>(i.forEach((a,u)=>{this.Gn.set(a,{size:u,readTime:r.get(a).readTime})}),r))}}function dU(n){return Vi(n,"remoteDocumentGlobal")}function Yg(n){return Vi(n,"remoteDocumentsV14")}function $E(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hU(n,e){const t=e.documentKey.path.toArray();return[n,fS(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function fU(n,e){const t=n.path.length-e.path.length;return 0!==t?t:ze.comparator(n,e)}class wW{constructor(e){this.M=e}kt(e,t,r,i){const a=new hS("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jV,{unique:!0}),d.createObjectStore("documentMutations"),pU(e),function(d){d.createObjectStore("remoteDocuments")}(e));let u=me.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),pU(e)),u=u.next(()=>function(d){const g=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Rt.min().toTimestamp(),targetCount:0};return g.put("targetGlobalKey",y)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(d,g){return g.store("mutations").qt().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",jV,{unique:!0});const I=g.store("mutations"),D=y.map(R=>I.put(R));return me.waitFor(D)})}(e,a))),u=u.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Kn(a))),r<6&&i>=6&&(u=u.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(a)))),r<7&&i>=7&&(u=u.next(()=>this.jn(a))),r<8&&i>=8&&(u=u.next(()=>this.Wn(e,a))),r<9&&i>=9&&(u=u.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.zn(a))),r<11&&i>=11&&(u=u.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(d){const g=d.createObjectStore("documentOverlays",{keyPath:Qz});g.createIndex("collectionPathOverlayIndex",Jz,{unique:!1}),g.createIndex("collectionGroupOverlayIndex",Xz,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(d){const g=d.createObjectStore("remoteDocumentsV14",{keyPath:Bz});g.createIndex("documentKeyIndex",jz),g.createIndex("collectionGroupIndex",Hz)}(e)).next(()=>this.Hn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>{!function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Wz}).createIndex("sequenceNumberIndex",Kz,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:Zz}).createIndex("documentKeyIndex",Yz,{unique:!1})}(e)})),u}Qn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=yS(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Kn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>me.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",u).next(d=>me.forEach(d,g=>{Pt(g.userId===a.userId);const y=By(this.M,g);return sU(e,a.userId,y).next(()=>{})}))}))}jn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((u,d)=>{const g=new pn(u),y=[0,Li(g)];a.push(t.get(y).next(I=>I?me.resolve():t.put({targetId:0,path:Li(g),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>me.waitFor(a))})}Wn(e,t){e.createObjectStore("collectionParents",{keyPath:zz});const r=t.store("collectionParents"),i=new jN,a=u=>{if(i.add(u)){const d=u.lastSegment(),g=u.popLast();return r.put({collectionId:d,parent:Li(g)})}};return t.store("remoteDocuments").Wt({jt:!0},(u,d)=>{const g=new pn(u);return a(g.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([u,d,g],y)=>{const I=jl(d);return a(I.popLast())}))}zn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=BE(i),u=QV(this.M,a);return t.put(u)})}Hn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,u)=>{const d=t.store("remoteDocumentsV14"),g=(y=u,y.document?new ze(pn.fromString(y.document.name).popFirst(5)):y.noDocument?ze.fromSegments(y.noDocument.path):y.unknownDocument?ze.fromSegments(y.unknownDocument.path):at()).path.toArray();var y;const I={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(d.put(I))}).next(()=>me.waitFor(i))}}function pU(n){n.createObjectStore("targetDocuments",{keyPath:Gz}).createIndex("documentTargetsIndex",qz,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$z,{unique:!0}),n.createObjectStore("targetGlobal")}const GN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class qN{constructor(e,t,r,i,a,u,d,g,y,I,D=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Jn=a,this.window=u,this.document=d,this.Yn=y,this.Xn=I,this.Zn=D,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=R=>Promise.resolve(),!qN.vt())throw new Re(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _W(this,i),this.cs=t+"main",this.M=new ZV(g),this.hs=new Hl(this.cs,this.Zn,new wW(this.M)),this.ls=new fW(this.referenceDelegate,this.M),this.fs=new yW(this.M),this.ds=new sW,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===I&&Xr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(he.FAILED_PRECONDITION,GN);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new Ea(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var t=this;return this.us=function(){var r=(0,ve.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var t=(0,ve.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,ve.Z)(function*(){t.started&&(yield t.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wS(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(t=>{t||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(t=>this.isPrimary&&!t?this.As(e).next(()=>!1):!!t&&this.Rs(e).next(()=>!0))).catch(e=>{if($g(e))return Le("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Le("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return GE(e).get("owner").next(t=>me.resolve(this.bs(t)))}Ps(e){return wS(e).delete(this.clientId)}Vs(){var e=this;return(0,ve.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Vi(r,"clientMetadata");return i.qt().next(a=>{const u=e.Ss(a,18e5),d=a.filter(g=>-1===u.indexOf(g));return me.forEach(d,g=>i.delete(g.clientId)).next(()=>d)})}).catch(()=>[]);if(e._s)for(const r of t)e._s.removeItem(e.Ds(r.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?me.resolve(!0):GE(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Re(he.FAILED_PRECONDITION,GN);return!1}}return!(!this.networkEnabled||!this.inForeground)||wS(e).qt().next(r=>void 0===this.Ss(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Le("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ve.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new KV(t,Ea.A);return e.As(r).next(()=>e.Ps(r))}),e.hs.close(),e.Ms()})()}Ss(e,t){return e.filter(r=>this.vs(r.updateTimeMs,t)&&!this.Cs(r.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>wS(e).qt().next(t=>this.Ss(t,18e5).map(r=>r.clientId)))}get started(){return this.es}getMutationQueue(e,t){return HN.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new hW(e)}getDocumentOverlayCache(e){return BN.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,t,r){Le("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(u=this.Zn)?tW:13===u?GV:12===u?eW:11===u?$V:void at();var u;let d;return this.hs.runTransaction(e,i,a,g=>(d=new KV(g,this.ts?this.ts.next():Ea.A),"readwrite-primary"===t?this.Ts(d).next(y=>!!y||this.Es(d)).next(y=>{if(!y)throw Xr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Re(he.FAILED_PRECONDITION,qV);return r(d)}).next(y=>this.Rs(d).next(()=>y)):this.Fs(d).next(()=>r(d)))).then(g=>(d.raiseOnCommittedEvent(),g))}Fs(e){return GE(e).get("owner").next(t=>{if(null!==t&&this.vs(t.leaseTimestampMs,5e3)&&!this.Cs(t.ownerId)&&!this.bs(t)&&!(this.Xn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(he.FAILED_PRECONDITION,GN)})}Rs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return GE(e).put("owner",t)}static vt(){return Hl.vt()}As(e){const t=GE(e);return t.get("owner").next(r=>this.bs(r)?(Le("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}vs(e,t){const r=Date.now();return!(e<r-t||e>r&&(Xr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var t;try{const r=null!==(null===(t=this._s)||void 0===t?void 0:t.getItem(this.Ds(e)));return Le("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Xr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){Xr("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function GE(n){return Vi(n,"owner")}function wS(n){return Vi(n,"clientMetadata")}function zN(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class EW{constructor(e,t,r){this.fs=e,this.$s=t,this.indexManager=r}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Ls(e,t,r))}Ls(e,t,r){return this.fs.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Us(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}qs(e,t){return this.fs.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Us(t,r))}Ks(e,t,r){return ze.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Qs(e,t.path):TN(t)?this.js(e,t,r):this.Ws(e,t,r);var i}Qs(e,t){return this.Bs(e,new ze(t)).next(r=>{let i=RN();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}js(e,t,r){const i=t.collectionGroup;let a=RN();return this.indexManager.getCollectionParents(e,i).next(u=>me.forEach(u,d=>{const g=(y=t,I=d.child(i),new Sd(I,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,I;return this.Ws(e,g,r).next(y=>{y.forEach((I,D)=>{a=a.insert(I,D)})})}).next(()=>a))}Ws(e,t,r){let i;return this.fs.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.$s.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const u of a)for(const d of u.mutations){const g=d.key;let y=i.get(g);null==y&&(y=rr.newInvalidDocument(g),i=i.insert(g,y)),AN(d,y,u.localWriteTime),y.isFoundDocument()||(i=i.remove(g))}}).next(()=>(i.forEach((a,u)=>{SN(t,u)||(i=i.remove(a))}),i))}}class WN{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.zs=r,this.Hs=i}static Js(e,t){let r=xn(),i=xn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new WN(e,t.fromCache,r,i)}}class gU{Ys(e){this.Xs=e}Ks(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(Rt.min())?this.Zs(e,t):this.Xs.qs(e,i).next(a=>{const u=this.ti(t,a);return(rS(t)||iS(t))&&this.ei(t.limitType,u,i,r)?this.Zs(e,t):(_N()<=Ro.in.DEBUG&&Le("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),DN(t)),this.Xs.Ks(e,t,JL(r,-1)).next(d=>(u.forEach(g=>{d=d.insert(g.key,g)}),d)))});var a}ti(e,t){let r=new ir(aV(e));return t.forEach((i,a)=>{SN(e,a)&&(r=r.add(a))}),r}ei(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Zs(e,t){return _N()<=Ro.in.DEBUG&&Le("QueryEngine","Using full collection scan to execute query:",DN(t)),this.Xs.Ks(e,t,Dd.min())}}class bW{constructor(e,t,r,i){this.persistence=e,this.ni=t,this.M=i,this.si=new Gr(rn),this.ii=new pf(a=>Ug(a),SE),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(r)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new EW(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.si))}}function mU(n,e,t,r){return new bW(n,e,t,r)}function _U(n,e){return KN.apply(this,arguments)}function KN(){return KN=(0,ve.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.$s.getAllMutationBatches(r).next(a=>(i=a,t.ui(e),t.$s.getAllMutationBatches(r))).next(a=>{const u=[],d=[];let g=xn();for(const y of i){u.push(y.batchId);for(const I of y.mutations)g=g.add(I.key)}for(const y of a){d.push(y.batchId);for(const I of y.mutations)g=g.add(I.key)}return t.ai.qs(r,g).next(y=>({ci:y,removedBatchIds:u,addedBatchIds:d}))})})}),KN.apply(this,arguments)}function CW(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.oi.newChangeBuffer({trackRemovals:!0});return function(u,d,g,y){const I=g.batch,D=I.keys();let R=me.resolve();return D.forEach(O=>{R=R.next(()=>y.getEntry(d,O)).next(U=>{const K=g.docVersions.get(O);Pt(null!==K),U.version.compareTo(K)<0&&(I.applyToRemoteDocument(U,g),U.isValidDocument()&&(U.setReadTime(g.commitVersion),y.addEntry(U)))})}),R.next(()=>u.$s.removeMutationBatch(d,I))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.$s.performConsistencyCheck(r)).next(()=>t.ai.qs(r,i))})}function yU(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ls.getLastRemoteSnapshotVersion(t))}function IW(n,e){const t=Ke(n),r=e.snapshotVersion;let i=t.si;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.oi.newChangeBuffer({trackRemovals:!0});i=t.si;const d=[];e.targetChanges.forEach((y,I)=>{const D=i.get(I);if(!D)return;d.push(t.ls.removeMatchingKeys(a,y.removedDocuments,I).next(()=>t.ls.addMatchingKeys(a,y.addedDocuments,I)));let R=D.withSequenceNumber(a.currentSequenceNumber);var O,U,K;e.targetMismatches.has(I)?R=R.withResumeToken(vi.EMPTY_BYTE_STRING,Rt.min()).withLastLimboFreeSnapshotVersion(Rt.min()):y.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(y.resumeToken,r)),i=i.insert(I,R),U=R,K=y,(0===(O=D).resumeToken.approximateByteSize()||U.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8||K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0)&&d.push(t.ls.updateTargetData(a,R))});let g=Xa();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))}),d.push(vU(a,u,e.documentUpdates).next(y=>{g=y})),!r.isEqual(Rt.min())){const y=t.ls.getLastRemoteSnapshotVersion(a).next(I=>t.ls.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(y)}return me.waitFor(d).next(()=>u.apply(a)).next(()=>t.ai.Gs(a,g)).next(()=>g)}).then(a=>(t.si=i,a))}function vU(n,e,t){let r=xn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=Xa();return t.forEach((u,d)=>{const g=i.get(u);d.isNoDocument()&&d.version.isEqual(Rt.min())?(e.removeEntry(u,d.readTime),a=a.insert(u,d)):!g.isValidDocument()||d.version.compareTo(g.version)>0||0===d.version.compareTo(g.version)&&g.hasPendingWrites?(e.addEntry(d),a=a.insert(u,d)):Le("LocalStore","Ignoring outdated watch update for ",u,". Current version:",g.version," Watch version:",d.version)}),a})}function TW(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.$s.getNextMutationBatchAfterBatchId(r,e)))}function Gy(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ls.getTargetData(r,e).next(a=>a?(i=a,me.resolve(i)):t.ls.allocateTargetId(r).next(u=>(i=new gf(e,u,0,r.currentSequenceNumber),t.ls.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.si.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.si=t.si.insert(r.targetId,r),t.ii.set(e,r.targetId)),r})}function qy(n,e,t){return ZN.apply(this,arguments)}function ZN(){return ZN=(0,ve.Z)(function*(n,e,t){const r=Ke(n),i=r.si.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!$g(u))throw u;Le("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.si=r.si.remove(e),r.ii.delete(i.target)}),ZN.apply(this,arguments)}function ES(n,e,t){const r=Ke(n);let i=Rt.min(),a=xn();return r.persistence.runTransaction("Execute query","readonly",u=>function(d,g,y){const I=Ke(d),D=I.ii.get(y);return void 0!==D?me.resolve(I.si.get(D)):I.ls.getTargetData(g,y)}(r,u,Ja(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.ls.getMatchingKeysForTargetId(u,d.targetId).next(g=>{a=g})}).next(()=>r.ni.Ks(u,e,t?i:Rt.min(),t?a:xn())).next(d=>(bU(r,oV(e),d),{documents:d,hi:a})))}function wU(n,e){const t=Ke(n),r=Ke(t.ls),i=t.si.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(u=>u?u.target:null))}function EU(n,e){const t=Ke(n),r=t.ri.get(e)||Rt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.oi.getAllFromCollectionGroup(i,e,JL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(bU(t,e,i),i))}function bU(n,e,t){let r=Rt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ri.set(e,r)}function YN(){return YN=(0,ve.Z)(function*(n,e,t,r){const i=Ke(n);let a=xn(),u=Xa();for(const y of t){const I=e.li(y.metadata.name);y.document&&(a=a.add(I));const D=e.fi(y);D.setReadTime(e.di(y.metadata.readTime)),u=u.insert(I,D)}const d=i.oi.newChangeBuffer({trackRemovals:!0}),g=yield Gy(i,(y=r,Ja(Py(pn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>vU(y,d,u).next(I=>(d.apply(y),I)).next(I=>i.ls.removeMatchingKeysForTargetId(y,g.targetId).next(()=>i.ls.addMatchingKeys(y,a,g.targetId)).next(()=>i.ai.Gs(y,I)).next(()=>I)))}),YN.apply(this,arguments)}function SW(n,e){return QN.apply(this,arguments)}function QN(){return QN=(0,ve.Z)(function*(n,e,t=xn()){const r=yield Gy(n,Ja(VN(e.bundledQuery))),i=Ke(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=Fi(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.ds.saveNamedQuery(a,e);const d=r.withResumeToken(vi.EMPTY_BYTE_STRING,u);return i.si=i.si.insert(d.targetId,d),i.ls.updateTargetData(a,d).next(()=>i.ls.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.ls.addMatchingKeys(a,t,r.targetId)).next(()=>i.ds.saveNamedQuery(a,e))})}),QN.apply(this,arguments)}class AW{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return me.resolve(this._i.get(t))}saveBundleMetadata(e,t){var r;return this._i.set(t.id,{id:(r=t).id,version:r.version,createTime:Fi(r.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,{name:(r=t).name,query:VN(r.bundledQuery),readTime:Fi(r.readTime)}),me.resolve();var r}}class xW{constructor(){this.overlays=new Gr(ze.comparator),this.mi=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.mi.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.mi.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const i=NE(),a=t.length+1,u=new ze(t.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===a&&g.largestBatchId>r&&i.set(g.getKey(),g)}return me.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Gr((y,I)=>y-I);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let I=a.get(y.largestBatchId);null===I&&(I=NE(),a=a.insert(y.largestBatchId,I)),I.set(y.getKey(),y)}}const d=NE(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,I)=>d.set(y,I)),!(d.size()>=i)););return me.resolve(d)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const u=this.mi.get(i.largestBatchId).delete(r.key);this.mi.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new LN(t,r));let a=this.mi.get(t);void 0===a&&(a=xn(),this.mi.set(t,a)),this.mi.set(t,a.add(r.key))}}class JN{constructor(){this.gi=new ir(Ui.yi),this.pi=new ir(Ui.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const r=new Ui(e,t);this.gi=this.gi.add(r),this.pi=this.pi.add(r)}Ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ei(new Ui(e,t))}Ai(e,t){e.forEach(r=>this.removeReference(r,t))}Ri(e){const t=new ze(new pn([])),r=new Ui(t,e),i=new Ui(t,e+1),a=[];return this.pi.forEachInRange([r,i],u=>{this.Ei(u),a.push(u.key)}),a}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new ze(new pn([])),r=new Ui(t,e),i=new Ui(t,e+1);let a=xn();return this.pi.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new Ui(e,0),r=this.gi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ui{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return ze.comparator(e.key,t.key)||rn(e.Vi,t.Vi)}static Ii(e,t){return rn(e.Vi,t.Vi)||ze.comparator(e.key,t.key)}}class RW{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new ir(Ui.yi)}checkEmpty(e){return me.resolve(0===this.$s.length)}addMutationBatch(e,t,r,i){const a=this.vi;this.vi++;const u=new kN(a,t,r,i);this.$s.push(u);for(const d of i)this.Si=this.Si.add(new Ui(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return me.resolve(u)}lookupMutationBatch(e,t){return me.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Ci(t+1),a=i<0?0:i;return me.resolve(this.$s.length>a?this.$s[a]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return me.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ui(t,0),i=new Ui(t,Number.POSITIVE_INFINITY),a=[];return this.Si.forEachInRange([r,i],u=>{const d=this.Di(u.Vi);a.push(d)}),me.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ir(rn);return t.forEach(i=>{const a=new Ui(i,0),u=new Ui(i,Number.POSITIVE_INFINITY);this.Si.forEachInRange([a,u],d=>{r=r.add(d.Vi)})}),me.resolve(this.xi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;ze.isDocumentKey(a)||(a=a.child(""));const u=new Ui(new ze(a),0);let d=new ir(rn);return this.Si.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(d=d.add(g.Vi)),!0)},u),me.resolve(this.xi(d))}xi(e){const t=[];return e.forEach(r=>{const i=this.Di(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Pt(0===this.Ni(t.batchId,"removed")),this.$s.shift();let r=this.Si;return me.forEach(t.mutations,i=>{const a=new Ui(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Si=r})}dn(e){}containsKey(e,t){const r=new Ui(t,0),i=this.Si.firstAfterOrEqual(r);return me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return me.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class MW{constructor(e){this.ki=e,this.docs=new Gr(ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,u=this.ki(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():rr.newInvalidDocument(t))}getEntries(e,t){let r=Xa();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():rr.newInvalidDocument(i))}),me.resolve(r)}getAllFromCollection(e,t,r){let i=Xa();const a=new ze(t.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:g}}=u.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||ez(Xq(g),r)<=0||(i=i.insert(g.key,g.mutableCopy()))}return me.resolve(i)}getAllFromCollectionGroup(e,t,r,i){at()}Mi(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new NW(this)}getSize(e){return me.resolve(this.size)}}class NW extends cU{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class PW{constructor(e){this.persistence=e,this.Oi=new pf(t=>Ug(t),SE),this.lastRemoteSnapshotVersion=Rt.min(),this.highestTargetId=0,this.Fi=0,this.$i=new JN,this.targetCount=0,this.Bi=Kg.mn()}forEachTarget(e,t){return this.Oi.forEach((r,i)=>t(i)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Fi&&(this.Fi=t),me.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new Kg(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.In(t),me.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Oi.forEach((u,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.Oi.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),me.waitFor(a).next(()=>i)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Oi.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.$i.Ti(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.$i.Ai(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),me.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.$i.Pi(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.$i.containsKey(t))}}class OW{constructor(e,t){this.Li={},this.overlays={},this.ts=new Ea(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new PW(this),this.indexManager=new dW,this.fs=new MW(r=>this.referenceDelegate.Ui(r)),this.M=new ZV(t),this.ds=new AW(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xW,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Li[e.toKey()];return r||(r=new RW(t,this.referenceDelegate),this.Li[e.toKey()]=r),r}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,r){Le("MemoryPersistence","Starting transaction:",e);const i=new kW(this.ts.next());return this.referenceDelegate.qi(),r(i).next(a=>this.referenceDelegate.Gi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ki(e,t){return me.or(Object.values(this.Li).map(r=>()=>r.containsKey(e,t)))}}class kW extends zV{constructor(e){super(),this.currentSequenceNumber=e}}class XN{constructor(e){this.persistence=e,this.Qi=new JN,this.ji=null}static Wi(e){return new XN(e)}get zi(){if(this.ji)return this.ji;throw at()}addReference(e,t,r){return this.Qi.addReference(r,t),this.zi.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Qi.removeReference(r,t),this.zi.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach(i=>this.zi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.zi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.zi,r=>{const i=ze.fromPath(r);return this.Hi(e,i).next(a=>{a||t.removeEntry(i,Rt.min())})}).next(()=>(this.ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hi(e,t).next(r=>{r?this.zi.delete(t.toString()):this.zi.add(t.toString())})}Ui(e){return 0}Hi(e,t){return me.or([()=>me.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}function CU(n,e){return`firestore_clients_${n}_${e}`}function IU(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function eP(n,e){return`firestore_targets_${n}_${e}`}class bS{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new Re(i.error.code,i.error.message))),u?new bS(e,t,i.state,a):(Xr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qE{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Re(r.error.code,r.error.message))),a?new qE(e,r.state,i):(Xr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class CS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=uS();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=HL(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new CS(e,a):(Xr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class tP{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new tP(t.clientId,t.onlineState):(Xr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class nP{constructor(){this.activeTargetIds=uS()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rP{constructor(e,t,r,i,a){this.window=e,this.Jn=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Gr(rn),this.started=!1,this.ir=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=CU(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new nP),this.ar=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ve.Z)(function*(){const t=yield e.syncEngine.Os();for(const i of t){if(i===e.tr)continue;const a=e.getItem(CU(e.persistenceKey,i));if(a){const u=CS.Ji(i,a);u&&(e.sr=e.sr.insert(u.clientId,u))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(eP(this.persistenceKey,e));if(r){const i=qE.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(eP(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Le("SharedClientState","READ",e,t),t}setItem(e,t){Le("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Le("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Le("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Xr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,ve.Z)(function*(){if(t.started){if(null!==r.key)if(t.ar.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.cr.test(r.key)){if(null!==r.newValue){const i=t.Vr(r.key,r.newValue);if(i)return t.vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let u=Ea.A;if(null!=a)try{const d=JSON.parse(a);Pt("number"==typeof d),u=d}catch(d){Xr("SharedClientState","Failed to read sequence number from WebStorage",d)}return u}(r.newValue);i!==Ea.A&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new bS(this.currentUser,e,t,r),a=IU(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=IU(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=eP(this.persistenceKey,e),a=new qE(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.ar.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return CS.Ji(r,t)}Vr(e,t){const r=this.cr.exec(e),i=Number(r[1]);return bS.Ji(new Xi(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return qE.Ji(i,t)}wr(e){return tP.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var t=this;return(0,ve.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Le("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),u=[],d=[];return a.forEach(g=>{i.has(g)||u.push(g)}),i.forEach(g=>{a.has(g)||d.push(g)}),this.syncEngine.Or(u,d).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=uS();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class TU{constructor(){this.Fr=new nP,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new nP,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class FW{Br(e){}shutdown(){}}class DU{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const LW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class VW{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class UW extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const u=this.oo(e,t);Le("RestConnection","Sending: ",u,r);const d={};return this.uo(d,i,a),this.ao(e,u,d,r).then(g=>(Le("RestConnection","Received: ",g),g),g=>{throw vE("RestConnection",`${e} failed with error: `,g,"url: ",u,"request:",r),g})}co(e,t,r,i,a){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Dy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${LW[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,r,i){return new Promise((a,u)=>{const d=new Uq;d.listenOnce(Fq.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case mN.NO_ERROR:const y=d.getResponseJson();Le("Connection","XHR received:",JSON.stringify(y)),a(y);break;case mN.TIMEOUT:Le("Connection",'RPC "'+e+'" timed out'),u(new Re(he.DEADLINE_EXCEEDED,"Request time out"));break;case mN.HTTP_ERROR:const I=d.getStatus();if(Le("Connection",'RPC "'+e+'" failed with status:',I,"response text:",d.getResponseText()),I>0){const D=d.getResponseJson().error;if(D&&D.status&&D.message){const R=function(O){const U=O.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(U)>=0?U:he.UNKNOWN}(D.status);u(new Re(R,D.message))}else u(new Re(he.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Re(he.UNAVAILABLE,"Connection failed."));break;default:at()}}finally{Le("Connection",'RPC "'+e+'" completed.')}});const g=JSON.stringify(i);d.send(t,"POST",g,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Oq(),u=kq(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new Vq({})),this.uo(d.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const g=i.join("");Le("Connection","Creating WebChannel: "+g,d);const y=a.createWebChannel(g,d);let I=!1,D=!1;const R=new VW({jr:U=>{D?Le("Connection","Not sending because WebChannel is closed:",U):(I||(Le("Connection","Opening WebChannel transport."),y.open(),I=!0),Le("Connection","WebChannel sending:",U),y.send(U))},Wr:()=>y.close()}),O=(U,K,pe)=>{U.listen(K,Ve=>{try{pe(Ve)}catch(Ne){setTimeout(()=>{throw Ne},0)}})};return O(y,QD.EventType.OPEN,()=>{D||Le("Connection","WebChannel transport opened.")}),O(y,QD.EventType.CLOSE,()=>{D||(D=!0,Le("Connection","WebChannel transport closed"),R.eo())}),O(y,QD.EventType.ERROR,U=>{D||(D=!0,vE("Connection","WebChannel transport errored:",U),R.eo(new Re(he.UNAVAILABLE,"The operation could not be completed")))}),O(y,QD.EventType.MESSAGE,U=>{var K;if(!D){const pe=U.data[0];Pt(!!pe);const Ve=pe,Ne=Ve.error||(null===(K=Ve[0])||void 0===K?void 0:K.error);if(Ne){Le("Connection","WebChannel received error:",Ne);const et=Ne.status;let Be=function(yt){const Rn=ti[yt];if(void 0!==Rn)return bV(Rn)}(et),Tt=Ne.message;void 0===Be&&(Be=he.INTERNAL,Tt="Unknown error status: "+et+" with message "+Ne.message),D=!0,R.eo(new Re(Be,Tt)),y.close()}else Le("Connection","WebChannel received:",pe),R.no(pe)}}),O(u,Lq.STAT_EVENT,U=>{U.stat===PL.PROXY?Le("Connection","Detected buffering proxy"):U.stat===PL.NOPROXY&&Le("Connection","Detected no buffering proxy")}),setTimeout(()=>{R.Zr()},0),R}}function SU(){return"undefined"!=typeof window?window:null}function IS(){return"undefined"!=typeof document?document:null}function zE(n){return new Sz(n,!0)}class iP{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Jn=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class AU{constructor(e,t,r,i,a,u,d,g){this.Jn=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new iP(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,ve.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,ve.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,t){var r=this;return(0,ve.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===he.RESOURCE_EXHAUSTED?(Xr(t.toString()),Xr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===he.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Re(he.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,ve.Z)(function*(){e.state=0,e.start()}))}qo(e){return Le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget(()=>this.Po===e?t():(Le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BW extends AU{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.M=a}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Rz(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(g=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===g?1:"REMOVE"===g?2:"CURRENT"===g?3:"RESET"===g?4:at(),i=e.targetChange.targetIds||[],a=function(g,y){return g.N?(Pt(void 0===y||"string"==typeof y),vi.fromBase64String(y||"")):(Pt(void 0===y||y instanceof Uint8Array),vi.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&function(g){const y=void 0===g.code?he.UNKNOWN:bV(g.code);return new Re(y,g.message||"")}(u);t=new TV(r,i,a,d||null)}else if("documentChange"in e){const r=e.documentChange,i=Ku(n,r.document.name),a=Fi(r.document.updateTime),u=new ys({mapValue:{fields:r.document.fields}}),d=rr.newFoundDocument(i,a,u);t=new cS(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=Ku(n,r.document),a=r.readTime?Fi(r.readTime):Rt.min(),u=rr.newNoDocument(i,a);t=new cS([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Ku(n,r.document);t=new cS([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return at();{const r=e.filter,a=new yz(r.count||0);t=new IV(r.targetId,a)}}var g;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return Rt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Rt.min():a.readTime?Fi(a.readTime):Rt.min()}(e);return this.listener.Ko(t,r)}Qo(e){const t={};t.database=LE(this.M),t.addTarget=function(i,a){let u;const d=a.target;return u=tS(d)?{documents:kV(i,d)}:{query:FV(i,d)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=xV(i,a.resumeToken):a.snapshotVersion.compareTo(Rt.min())>0&&(u.readTime=kE(i,a.snapshotVersion.toTimestamp())),u}(this.M,e);const r=function Nz(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return at()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Oo(t)}jo(e){const t={};t.database=LE(this.M),t.removeTarget=e,this.Oo(t)}}class jW extends AU{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.M=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function Mz(n,e){return n&&n.length>0?(Pt(void 0!==e),n.map(t=>function(r,i){let a=Fi(r.updateTime?r.updateTime:i);return a.isEqual(Rt.min())&&(a=Fi(i)),new gz(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Fi(e.commitTime);return this.listener.Jo(r,t)}return Pt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=LE(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>VE(this.M,r))};this.Oo(t)}}class HW extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new Re(he.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(he.UNKNOWN,i.toString())})}co(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(he.UNKNOWN,i.toString())})}terminate(){this.Zo=!0}}class $W{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Xr(t),this.su=!1):Le("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class GW{constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(d=>{r.enqueueAndForget((0,ve.Z)(function*(){var g;vf(u)&&(Le("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,ve.Z)(function*(y){const I=Ke(y);I.lu.add(4),yield zy(I),I._u.set("Unknown"),I.lu.delete(4),yield WE(I)}),function(y){return g.apply(this,arguments)})(u))}))}),this._u=new $W(r,i)}}function WE(n){return sP.apply(this,arguments)}function sP(){return sP=(0,ve.Z)(function*(n){if(vf(n))for(const e of n.fu)yield e(!0)}),sP.apply(this,arguments)}function zy(n){return oP.apply(this,arguments)}function oP(){return oP=(0,ve.Z)(function*(n){for(const e of n.fu)yield e(!1)}),oP.apply(this,arguments)}function TS(n,e){const t=Ke(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),uP(t)?lP(t):Ky(t).Co()&&aP(t,e))}function KE(n,e){const t=Ke(n),r=Ky(t);t.hu.delete(e),r.Co()&&xU(t,e),0===t.hu.size&&(r.Co()?r.ko():vf(t)&&t._u.set("Unknown"))}function aP(n,e){n.wu.Z(e.targetId),Ky(n).Qo(e)}function xU(n,e){n.wu.Z(e),Ky(n).jo(e)}function lP(n){n.wu=new Iz({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.hu.get(e)||null}),Ky(n).start(),n._u.iu()}function uP(n){return vf(n)&&!Ky(n).Do()&&n.hu.size>0}function vf(n){return 0===Ke(n).lu.size}function RU(n){n.wu=void 0}function qW(n){return cP.apply(this,arguments)}function cP(){return cP=(0,ve.Z)(function*(n){n.hu.forEach((e,t)=>{aP(n,e)})}),cP.apply(this,arguments)}function zW(n,e){return dP.apply(this,arguments)}function dP(){return dP=(0,ve.Z)(function*(n,e){RU(n),uP(n)?(n._u.uu(e),lP(n)):n._u.set("Unknown")}),dP.apply(this,arguments)}function WW(n,e,t){return hP.apply(this,arguments)}function hP(){return hP=(0,ve.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof TV&&2===e.state&&e.cause)try{yield(r=(0,ve.Z)(function*(i,a){const u=a.cause;for(const d of a.targetIds)i.hu.has(d)&&(yield i.remoteSyncer.rejectListen(d,u),i.hu.delete(d),i.wu.removeTarget(d))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield DS(n,r)}else if(e instanceof cS?n.wu.ut(e):e instanceof IV?n.wu._t(e):n.wu.ht(e),!t.isEqual(Rt.min()))try{const r=yield yU(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.wu.yt(a);return u.targetChanges.forEach((d,g)=>{if(d.resumeToken.approximateByteSize()>0){const y=i.hu.get(g);y&&i.hu.set(g,y.withResumeToken(d.resumeToken,a))}}),u.targetMismatches.forEach(d=>{const g=i.hu.get(d);if(!g)return;i.hu.set(d,g.withResumeToken(vi.EMPTY_BYTE_STRING,g.snapshotVersion)),xU(i,d);const y=new gf(g.target,d,1,g.sequenceNumber);aP(i,y)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Le("RemoteStore","Failed to raise snapshot:",r),yield DS(n,r)}var r}),hP.apply(this,arguments)}function DS(n,e,t){return fP.apply(this,arguments)}function fP(){return fP=(0,ve.Z)(function*(n,e,t){if(!$g(e))throw e;n.lu.add(1),yield zy(n),n._u.set("Offline"),t||(t=()=>yU(n.localStore)),n.asyncQueue.enqueueRetryable((0,ve.Z)(function*(){Le("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield WE(n)}))}),fP.apply(this,arguments)}function MU(n,e){return e().catch(t=>DS(n,t,e))}function Wy(n){return pP.apply(this,arguments)}function pP(){return pP=(0,ve.Z)(function*(n){const e=Ke(n),t=wf(e);let r=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;KW(e);)try{const i=yield TW(e.localStore,r);if(null===i){0===e.cu.length&&t.ko();break}r=i.batchId,ZW(e,i)}catch(i){yield DS(e,i)}NU(e)&&PU(e)}),pP.apply(this,arguments)}function KW(n){return vf(n)&&n.cu.length<10}function ZW(n,e){n.cu.push(e);const t=wf(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function NU(n){return vf(n)&&!wf(n).Do()&&n.cu.length>0}function PU(n){wf(n).start()}function YW(n){return gP.apply(this,arguments)}function gP(){return gP=(0,ve.Z)(function*(n){wf(n).Xo()}),gP.apply(this,arguments)}function QW(n){return mP.apply(this,arguments)}function mP(){return mP=(0,ve.Z)(function*(n){const e=wf(n);for(const t of n.cu)e.Ho(t.mutations)}),mP.apply(this,arguments)}function JW(n,e,t){return _P.apply(this,arguments)}function _P(){return _P=(0,ve.Z)(function*(n,e,t){const r=n.cu.shift(),i=FN.from(r,e,t);yield MU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Wy(n)}),_P.apply(this,arguments)}function XW(n,e){return yP.apply(this,arguments)}function yP(){return yP=(0,ve.Z)(function*(n,e){var t;e&&wf(n).zo&&(yield(t=(0,ve.Z)(function*(r,i){if(EV(a=i.code)&&a!==he.ABORTED){const u=r.cu.shift();wf(r).No(),yield MU(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield Wy(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),NU(n)&&PU(n)}),yP.apply(this,arguments)}function OU(n,e){return vP.apply(this,arguments)}function vP(){return vP=(0,ve.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Le("RemoteStore","RemoteStore received new credentials");const r=vf(t);t.lu.add(3),yield zy(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield WE(t)}),vP.apply(this,arguments)}function wP(n,e){return EP.apply(this,arguments)}function EP(){return EP=(0,ve.Z)(function*(n,e){const t=Ke(n);e?(t.lu.delete(2),yield WE(t)):e||(t.lu.add(2),yield zy(t),t._u.set("Unknown"))}),EP.apply(this,arguments)}function Ky(n){return n.mu||(n.mu=function(e,t,r){const i=Ke(e);return i.tu(),new BW(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:qW.bind(null,n),Jr:zW.bind(null,n),Ko:WW.bind(null,n)}),n.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.mu.No(),uP(n)?lP(n):n._u.set("Unknown")):(yield n.mu.stop(),RU(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function wf(n){return n.gu||(n.gu=function(e,t,r){const i=Ke(e);return i.tu(),new jW(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{zr:YW.bind(null,n),Jr:XW.bind(null,n),Yo:QW.bind(null,n),Jo:JW.bind(null,n)}),n.fu.push(function(){var e=(0,ve.Z)(function*(t){t?(n.gu.No(),yield Wy(n)):(yield n.gu.stop(),n.cu.length>0&&(Le("RemoteStore",`Stopping write stream with ${n.cu.length} pending writes`),n.cu=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class bP{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,d=new bP(e,t,u,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zy(n,e){if(Xr("AsyncQueue",`${e}: ${n}`),$g(n))return new Re(he.UNAVAILABLE,`${e}: ${n}`);throw n}class Yy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ze.comparator(t.key,r.key):(t,r)=>ze.comparator(t.key,r.key),this.keyedMap=RN(),this.sortedSet=new Gr(this.comparator)}static emptySet(e){return new Yy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Yy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class kU{constructor(){this.yu=new Gr(ze.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):at():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Qy{constructor(e,t,r,i,a,u,d,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new Qy(e,t,Yy.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&AE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class e6{constructor(){this.Iu=void 0,this.listeners=[]}}class t6{constructor(){this.queries=new pf(e=>sV(e),AE),this.onlineState="Unknown",this.Tu=new Set}}function CP(n,e){return IP.apply(this,arguments)}function IP(){return IP=(0,ve.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new e6),i)try{a.Iu=yield t.onListen(r)}catch(u){const d=Zy(u,`Initialization of query '${DN(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&SP(t)}),IP.apply(this,arguments)}function TP(n,e){return DP.apply(this,arguments)}function DP(){return DP=(0,ve.Z)(function*(n,e){const t=Ke(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),DP.apply(this,arguments)}function n6(n,e){const t=Ke(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const d of u.listeners)d.Au(i)&&(r=!0);u.Iu=i}}r&&SP(t)}function r6(n,e,t){const r=Ke(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function SP(n){n.Tu.forEach(e=>{e.next()})}class AP{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Qy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Qy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class i6{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class FU{constructor(e){this.M=e}li(e){return Ku(this.M,e)}fi(e){return e.metadata.exists?OV(this.M,e.document,!1):rr.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Fi(e)}}class s6{constructor(e,t,r){this.xu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=LU(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=pn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new FU(this.M);for(const i of e)if(i.metadata.queries){const a=r.li(i.metadata.name);for(const u of i.metadata.queries){const d=(t.get(u)||xn()).add(a);t.set(u,d)}}return t}complete(){var e=this;return(0,ve.Z)(function*(){const t=yield function DW(n,e,t,r){return YN.apply(this,arguments)}(e.localStore,new FU(e.M),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield SW(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:t}})()}}function LU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class VU{constructor(e){this.key=e}}class UU{constructor(e){this.key=e}}class BU{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=xn(),this.mutatedKeys=xn(),this.Lu=aV(e),this.Uu=new Yy(this.Lu)}get qu(){return this.Fu}Gu(e,t){const r=t?t.Ku:new kU,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,d=!1;const g=rS(this.query)&&i.size===this.query.limit?i.last():null,y=iS(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((I,D)=>{const R=i.get(I),O=SN(this.query,D)?D:null,U=!!R&&this.mutatedKeys.has(R.key),K=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let pe=!1;R&&O?R.data.isEqual(O.data)?U!==K&&(r.track({type:3,doc:O}),pe=!0):this.Qu(R,O)||(r.track({type:2,doc:O}),pe=!0,(g&&this.Lu(O,g)>0||y&&this.Lu(O,y)<0)&&(d=!0)):!R&&O?(r.track({type:0,doc:O}),pe=!0):R&&!O&&(r.track({type:1,doc:R}),pe=!0,(g||y)&&(d=!0)),pe&&(O?(u=u.add(O),a=K?a.add(I):a.delete(I)):(u=u.delete(I),a=a.delete(I)))}),rS(this.query)||iS(this.query))for(;u.size>this.query.limit;){const I=rS(this.query)?u.last():u.first();u=u.delete(I.key),a=a.delete(I.key),r.track({type:1,doc:I})}return{Uu:u,Ku:r,ei:d,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Ku.pu();a.sort((y,I)=>function(D,R){const O=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return at()}};return O(D)-O(R)}(y.type,I.type)||this.Lu(y.doc,I.doc)),this.ju(r);const u=t?this.Wu():[],d=0===this.Bu.size&&this.current?1:0,g=d!==this.$u;return this.$u=d,0!==a.length||g?{snapshot:new Qy(this.query,e.Uu,i,a,e.mutatedKeys,0===d,g,!1),zu:u}:{zu:u}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new kU,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=xn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new UU(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new VU(r))}),t}Ju(e){this.Fu=e.hi,this.Bu=xn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Qy.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class o6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class a6{constructor(e){this.key=e,this.Xu=!1}}class l6{constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Zu={},this.ta=new pf(d=>sV(d),AE),this.ea=new Map,this.na=new Set,this.sa=new Gr(ze.comparator),this.ia=new Map,this.ra=new JN,this.oa={},this.ua=new Map,this.aa=Kg.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function u6(n,e){return xP.apply(this,arguments)}function xP(){return xP=(0,ve.Z)(function*(n,e){const t=JP(n);let r,i;const a=t.ta.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const u=yield Gy(t.localStore,Ja(e));t.isPrimaryClient&&TS(t.remoteStore,u);const d=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield RP(t,e,r,"current"===d)}return i}),xP.apply(this,arguments)}function RP(n,e,t,r){return MP.apply(this,arguments)}function MP(){return MP=(0,ve.Z)(function*(n,e,t,r){n.ha=(I,D,R)=>{return(O=(0,ve.Z)(function*(U,K,pe,Ve){let Ne=K.view.Gu(pe);Ne.ei&&(Ne=yield ES(U.localStore,K.query,!1).then(({documents:Tt})=>K.view.Gu(Tt,Ne)));const et=Ve&&Ve.targetChanges.get(K.targetId),Be=K.view.applyChanges(Ne,U.isPrimaryClient,et);return jP(U,K.targetId,Be.zu),Be.snapshot}),function(U,K,pe,Ve){return O.apply(this,arguments)})(n,I,D,R);var O};const i=yield ES(n.localStore,e,!0),a=new BU(e,i.hi),u=a.Gu(i.documents),d=OE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),g=a.applyChanges(u,n.isPrimaryClient,d);jP(n,t,g.zu);const y=new o6(e,t,a);return n.ta.set(e,y),n.ea.has(t)?n.ea.get(t).push(e):n.ea.set(t,[e]),g.snapshot}),MP.apply(this,arguments)}function c6(n,e){return NP.apply(this,arguments)}function NP(){return NP=(0,ve.Z)(function*(n,e){const t=Ke(n),r=t.ta.get(e),i=t.ea.get(r.targetId);if(i.length>1)return t.ea.set(r.targetId,i.filter(a=>!AE(a,e))),void t.ta.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield qy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),KE(t.remoteStore,r.targetId),Jy(t,r.targetId)}).catch(Zg))):(Jy(t,r.targetId),yield qy(t.localStore,r.targetId,!0))}),NP.apply(this,arguments)}function PP(){return PP=(0,ve.Z)(function*(n,e,t){const r=XP(n);try{const i=yield function(a,u){const d=Ke(a),g=$r.now(),y=u.reduce((D,R)=>D.add(R.key),xn());let I;return d.persistence.runTransaction("Locally write mutations","readwrite",D=>d.ai.qs(D,y).next(R=>{I=R;const O=[];for(const U of u){const K=_z(U,I.get(U.key));null!=K&&O.push(new Hg(U.key,K,QL(K.value.mapValue),ei.exists(!0)))}return d.$s.addMutationBatch(D,g,O,u)})).then(D=>(D.applyToLocalDocumentSet(I),{batchId:D.batchId,changes:I}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,d){let g=a.oa[a.currentUser.toKey()];g||(g=new Gr(rn)),g=g.insert(u,d),a.oa[a.currentUser.toKey()]=g}(r,i.batchId,t),yield Ad(r,i.changes),yield Wy(r.remoteStore)}catch(i){const a=Zy(i,"Failed to persist write");t.reject(a)}}),PP.apply(this,arguments)}function jU(n,e){return OP.apply(this,arguments)}function OP(){return OP=(0,ve.Z)(function*(n,e){const t=Ke(n);try{const r=yield IW(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.ia.get(a);u&&(Pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Xu=!0:i.modifiedDocuments.size>0?Pt(u.Xu):i.removedDocuments.size>0&&(Pt(u.Xu),u.Xu=!1))}),yield Ad(t,r,e)}catch(r){yield Zg(r)}}),OP.apply(this,arguments)}function HU(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ta.forEach((a,u)=>{const d=u.view.Eu(e);d.snapshot&&i.push(d.snapshot)}),function(a,u){const d=Ke(a);d.onlineState=u;let g=!1;d.queries.forEach((y,I)=>{for(const D of I.listeners)D.Eu(u)&&(g=!0)}),g&&SP(d)}(r.eventManager,e),i.length&&r.Zu.Ko(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function h6(n,e,t){return kP.apply(this,arguments)}function kP(){return kP=(0,ve.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ia.get(e),a=i&&i.key;if(a){let u=new Gr(ze.comparator);u=u.insert(a,rr.newNoDocument(a,Rt.min()));const d=xn().add(a),g=new PE(Rt.min(),new Map,new ir(rn),u,d);yield jU(r,g),r.sa=r.sa.remove(a),r.ia.delete(e),HP(r)}else yield qy(r.localStore,e,!1).then(()=>Jy(r,e,t)).catch(Zg)}),kP.apply(this,arguments)}function f6(n,e){return FP.apply(this,arguments)}function FP(){return FP=(0,ve.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const i=yield CW(t.localStore,e);BP(t,r,null),UP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ad(t,i)}catch(i){yield Zg(i)}}),FP.apply(this,arguments)}function p6(n,e,t){return LP.apply(this,arguments)}function LP(){return LP=(0,ve.Z)(function*(n,e,t){const r=Ke(n);try{const i=yield function(a,u){const d=Ke(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let y;return d.$s.lookupMutationBatch(g,u).next(I=>(Pt(null!==I),y=I.keys(),d.$s.removeMutationBatch(g,I))).next(()=>d.$s.performConsistencyCheck(g)).next(()=>d.ai.qs(g,y))})}(r.localStore,e);BP(r,e,t),UP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ad(r,i)}catch(i){yield Zg(i)}}),LP.apply(this,arguments)}function VP(){return VP=(0,ve.Z)(function*(n,e){const t=Ke(n);vf(t.remoteStore)||Le("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=Ke(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>u.$s.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.ua.get(r)||[];i.push(e),t.ua.set(r,i)}catch(r){const i=Zy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),VP.apply(this,arguments)}function UP(n,e){(n.ua.get(e)||[]).forEach(t=>{t.resolve()}),n.ua.delete(e)}function BP(n,e,t){const r=Ke(n);let i=r.oa[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oa[r.currentUser.toKey()]=i}}function Jy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ea.get(e))n.ta.delete(r),t&&n.Zu.la(r,t);n.ea.delete(e),n.isPrimaryClient&&n.ra.Ri(e).forEach(r=>{n.ra.containsKey(r)||$U(n,r)})}function $U(n,e){n.na.delete(e.path.canonicalString());const t=n.sa.get(e);null!==t&&(KE(n.remoteStore,t),n.sa=n.sa.remove(e),n.ia.delete(t),HP(n))}function jP(n,e,t){for(const r of t)r instanceof VU?(n.ra.addReference(r.key,e),m6(n,r)):r instanceof UU?(Le("SyncEngine","Document no longer in limbo: "+r.key),n.ra.removeReference(r.key,e),n.ra.containsKey(r.key)||$U(n,r.key)):at()}function m6(n,e){const t=e.key,r=t.path.canonicalString();n.sa.get(t)||n.na.has(r)||(Le("SyncEngine","New document in limbo: "+t),n.na.add(r),HP(n))}function HP(n){for(;n.na.size>0&&n.sa.size<n.maxConcurrentLimboResolutions;){const e=n.na.values().next().value;n.na.delete(e);const t=new ze(pn.fromString(e)),r=n.aa.next();n.ia.set(r,new a6(t)),n.sa=n.sa.insert(t,r),TS(n.remoteStore,new gf(Ja(Py(t.path)),r,2,Ea.A))}}function Ad(n,e,t){return $P.apply(this,arguments)}function $P(){return $P=(0,ve.Z)(function*(n,e,t){const r=Ke(n),i=[],a=[],u=[];var d;r.ta.isEmpty()||(r.ta.forEach((d,g)=>{u.push(r.ha(g,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(g.targetId,y.fromCache?"not-current":"current"),i.push(y);const I=WN.Js(g.targetId,y);a.push(I)}}))}),yield Promise.all(u),r.Zu.Ko(i),yield(d=(0,ve.Z)(function*(g,y){const I=Ke(g);try{yield I.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>me.forEach(y,R=>me.forEach(R.zs,O=>I.persistence.referenceDelegate.addReference(D,R.targetId,O)).next(()=>me.forEach(R.Hs,O=>I.persistence.referenceDelegate.removeReference(D,R.targetId,O)))))}catch(D){if(!$g(D))throw D;Le("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const R=D.targetId;if(!D.fromCache){const O=I.si.get(R),K=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);I.si=I.si.insert(R,K)}}}),function(g,y){return d.apply(this,arguments)})(r.localStore,a))}),$P.apply(this,arguments)}function _6(n,e){return GP.apply(this,arguments)}function GP(){return GP=(0,ve.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Le("SyncEngine","User change. New user:",e.toKey());const r=yield _U(t.localStore,e);t.currentUser=e,(i=t).ua.forEach(u=>{u.forEach(d=>{d.reject(new Re(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.ua.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ad(t,r.ci)}var i}),GP.apply(this,arguments)}function y6(n,e){const t=Ke(n),r=t.ia.get(e);if(r&&r.Xu)return xn().add(r.key);{let i=xn();const a=t.ea.get(e);if(!a)return i;for(const u of a){const d=t.ta.get(u);i=i.unionWith(d.view.qu)}return i}}function v6(n,e){return qP.apply(this,arguments)}function qP(){return qP=(0,ve.Z)(function*(n,e){const t=Ke(n),r=yield ES(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&jP(t,e.targetId,i.zu),i}),qP.apply(this,arguments)}function w6(n,e){return zP.apply(this,arguments)}function zP(){return zP=(0,ve.Z)(function*(n,e){const t=Ke(n);return EU(t.localStore,e).then(r=>Ad(t,r))}),zP.apply(this,arguments)}function E6(n,e,t,r){return WP.apply(this,arguments)}function WP(){return WP=(0,ve.Z)(function*(n,e,t,r){const i=Ke(n),a=yield function(u,d){const g=Ke(u),y=Ke(g.$s);return g.persistence.runTransaction("Lookup mutation documents","readonly",I=>y.ln(I,d).next(D=>D?g.ai.qs(I,D):me.resolve(null)))}(i.localStore,e);var d;null!==a?("pending"===t?yield Wy(i.remoteStore):"acknowledged"===t||"rejected"===t?(BP(i,e,r||null),UP(i,e),d=e,Ke(Ke(i.localStore).$s).dn(d)):at(),yield Ad(i,a)):Le("SyncEngine","Cannot apply mutation batch with id: "+e)}),WP.apply(this,arguments)}function KP(){return KP=(0,ve.Z)(function*(n,e){const t=Ke(n);if(JP(t),XP(t),!0===e&&!0!==t.ca){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield GU(t,r.toArray());t.ca=!0,yield wP(t.remoteStore,!0);for(const a of i)TS(t.remoteStore,a)}else if(!1===e&&!1!==t.ca){const r=[];let i=Promise.resolve();t.ea.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Jy(t,u),qy(t.localStore,u,!0))),KE(t.remoteStore,u)}),yield i,yield GU(t,r),function(a){const u=Ke(a);u.ia.forEach((d,g)=>{KE(u.remoteStore,g)}),u.ra.bi(),u.ia=new Map,u.sa=new Gr(ze.comparator)}(t),t.ca=!1,yield wP(t.remoteStore,!1)}}),KP.apply(this,arguments)}function GU(n,e,t){return ZP.apply(this,arguments)}function ZP(){return ZP=(0,ve.Z)(function*(n,e,t){const r=Ke(n),i=[],a=[];for(const u of e){let d;const g=r.ea.get(u);if(g&&0!==g.length){d=yield Gy(r.localStore,Ja(g[0]));for(const y of g){const I=r.ta.get(y),D=yield v6(r,I);D.snapshot&&a.push(D.snapshot)}}else{const y=yield wU(r.localStore,u);d=yield Gy(r.localStore,y),yield RP(r,qU(y),u,!1)}i.push(d)}return r.Zu.Ko(a),i}),ZP.apply(this,arguments)}function qU(n){return rV(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function C6(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).Os()}function I6(n,e,t,r){return YP.apply(this,arguments)}function YP(){return YP=(0,ve.Z)(function*(n,e,t,r){const i=Ke(n);if(i.ca)return void Le("SyncEngine","Ignoring unexpected query state notification.");const a=i.ea.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const u=yield EU(i.localStore,oV(a[0])),d=PE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ad(i,u,d);break}case"rejected":yield qy(i.localStore,e,!0),Jy(i,e,r);break;default:at()}}),YP.apply(this,arguments)}function T6(n,e,t){return QP.apply(this,arguments)}function QP(){return QP=(0,ve.Z)(function*(n,e,t){const r=JP(n);if(r.ca){for(const i of e){if(r.ea.has(i)){Le("SyncEngine","Adding an already active target "+i);continue}const a=yield wU(r.localStore,i),u=yield Gy(r.localStore,a);yield RP(r,qU(a),u.targetId,!1),TS(r.remoteStore,u)}for(const i of t)r.ea.has(i)&&(yield qy(r.localStore,i,!1).then(()=>{KE(r.remoteStore,i),Jy(r,i)}).catch(Zg))}}),QP.apply(this,arguments)}function JP(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=y6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h6.bind(null,e),e.Zu.Ko=n6.bind(null,e.eventManager),e.Zu.la=r6.bind(null,e.eventManager),e}function XP(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=f6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p6.bind(null,e),e}class zU{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ve.Z)(function*(){t.M=zE(e.databaseInfo.databaseId),t.sharedClientState=t.da(e),t.persistence=t._a(e),yield t.persistence.start(),t.gcScheduler=t.wa(e),t.localStore=t.ma(e)})()}wa(e){return null}ma(e){return mU(this.persistence,new gU,e.initialUser,this.M)}_a(e){return new OW(XN.Wi,this.M)}da(e){return new TU}terminate(){var e=this;return(0,ve.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class WU extends zU{constructor(e,t,r){super(),this.ga=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e),yield r.ga.initialize(r,e),yield XP(r.ga.syncEngine),yield Wy(r.ga.remoteStore),yield r.persistence.Is(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ma(e){return mU(this.persistence,new gU,e.initialUser,this.M)}wa(e){return new gW(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const t=zN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Po.withCacheSize(this.cacheSizeBytes):Po.DEFAULT;return new qN(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,SU(),IS(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new TU}}class S6 extends WU{constructor(e,t){super(e,t,!1),this.ga=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ve.Z)(function*(){yield t().call(r,e);const i=r.ga.syncEngine;r.sharedClientState instanceof rP&&(r.sharedClientState.syncEngine={kr:E6.bind(null,i),Mr:I6.bind(null,i),Or:T6.bind(null,i),Os:C6.bind(null,i),Nr:w6.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Is(function(){var a=(0,ve.Z)(function*(u){yield function b6(n,e){return KP.apply(this,arguments)}(r.ga.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):u||r.gcScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}da(e){const t=SU();if(!rP.vt(t))throw new Re(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=zN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new rP(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class eO{initialize(e,t){var r=this;return(0,ve.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>HU(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=_6.bind(null,r.syncEngine),yield wP(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new t6}createDatastore(e){const t=zE(e.databaseInfo.databaseId),r=new UW(e.databaseInfo);return new HW(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>HU(this.syncEngine,d,0),u=DU.vt()?new DU:new FW,new GW(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,d,g,y){const I=new l6(r,i,a,u,d,g);return y&&(I.ca=!0),I}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ve.Z)(function*(t){const r=Ke(t);Le("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield zy(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function KU(n,e=10240){let t=0;return{read:()=>(0,ve.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ve.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class SS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class A6{constructor(e,t){this.Ia=e,this.M=t,this.metadata=new Oi,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,ve.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,ve.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Aa();if(null===t)return null;const r=e.Ta.decode(t),i=Number(r);isNaN(i)&&e.Ra(`length string (${r}) is not valid number`);const a=yield e.ba(i);return new i6(JSON.parse(a),t.length+i)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,ve.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const t=e.Pa();t<0&&e.Ra("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ve.Z)(function*(){for(;t.buffer.length<e;)(yield t.Va())&&t.Ra("Reached the end of bundle when more is expected.");const r=t.Ta.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,ve.Z)(function*(){const t=yield e.Ia.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class x6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ve.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,ve.Z)(function*(a,u){const d=Ke(a),g=LE(d.M)+"/documents",y={documents:u.map(O=>FE(d.M,O))},I=yield d.co("BatchGetDocuments",g,y),D=new Map;I.forEach(O=>{const U=function xz(n,e){return"found"in e?function(t,r){Pt(!!r.found);const i=Ku(t,r.found.name),a=Fi(r.found.updateTime),u=new ys({mapValue:{fields:r.found.fields}});return rr.newFoundDocument(i,a,u)}(n,e):"missing"in e?function(t,r){Pt(!!r.missing),Pt(!!r.readTime);const i=Ku(t,r.missing),a=Fi(r.readTime);return rr.newNoDocument(i,a)}(n,e):at()}(d.M,O);D.set(U.key.toString(),U)});const R=[];return u.forEach(O=>{const U=D.get(O.toString());Pt(!!U),R.push(U)}),R}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ME(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ve.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=ze.fromPath(i);e.mutations.push(new xN(a,e.precondition(a)))}),yield(r=(0,ve.Z)(function*(i,a){const u=Ke(i),d=LE(u.M)+"/documents",g={writes:a.map(y=>VE(u.M,y))};yield u.ro("Commit",d,g)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw at();t=Rt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ei.updateTime(t):ei.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Rt.min()))throw new Re(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ei.updateTime(t)}return ei.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class R6{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.va=5,this.So=new iP(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,ve.Z)(function*(){const t=new x6(e.datastore),r=e.Da(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ca(a)}))}).catch(i=>{e.Ca(i)})}))}Da(e){try{const t=this.updateFunction(e);return!Lg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!EV(t)}return!1}}class M6{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Xi.UNAUTHENTICATED,this.clientId=LL.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,ve.Z)(function*(d){Le("FirestoreClient","Received user=",d.uid),yield a.authCredentialListener(d),a.user=d});return function(d){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Le("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,ve.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Zy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function ZU(n,e){return tO.apply(this,arguments)}function tO(){return tO=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Le("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,ve.Z)(function*(a){r.isEqual(a)||(yield _U(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),tO.apply(this,arguments)}function YU(n,e){return nO.apply(this,arguments)}function nO(){return nO=(0,ve.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield rO(n);Le("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>OU(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>OU(e.remoteStore,a)),n.onlineComponents=e}),nO.apply(this,arguments)}function rO(n){return iO.apply(this,arguments)}function iO(){return iO=(0,ve.Z)(function*(n){return n.offlineComponents||(Le("FirestoreClient","Using default OfflineComponentProvider"),yield ZU(n,new zU)),n.offlineComponents}),iO.apply(this,arguments)}function AS(n){return sO.apply(this,arguments)}function sO(){return sO=(0,ve.Z)(function*(n){return n.onlineComponents||(Le("FirestoreClient","Using default OnlineComponentProvider"),yield YU(n,new eO)),n.onlineComponents}),sO.apply(this,arguments)}function QU(n){return rO(n).then(e=>e.persistence)}function oO(n){return rO(n).then(e=>e.localStore)}function JU(n){return AS(n).then(e=>e.remoteStore)}function aO(n){return AS(n).then(e=>e.syncEngine)}function Xy(n){return lO.apply(this,arguments)}function lO(){return lO=(0,ve.Z)(function*(n){const e=yield AS(n),t=e.eventManager;return t.onListen=u6.bind(null,e.syncEngine),t.onUnlisten=c6.bind(null,e.syncEngine),t}),lO.apply(this,arguments)}function XU(n,e,t={}){const r=new Oi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,u,d,g){const y=new SS({next:D=>{a.enqueueAndForget(()=>TP(i,I));const R=D.docs.has(u);!R&&D.fromCache?g.reject(new Re(he.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&D.fromCache&&d&&"server"===d.source?g.reject(new Re(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(D)},error:D=>g.reject(D)}),I=new AP(Py(u.path),y,{includeMetadataChanges:!0,Du:!0});return CP(i,I)}(yield Xy(n),n.asyncQueue,e,t,r)})),r.promise}function eB(n,e,t={}){const r=new Oi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function(i,a,u,d,g){const y=new SS({next:D=>{a.enqueueAndForget(()=>TP(i,I)),D.fromCache&&"server"===d.source?g.reject(new Re(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(D)},error:D=>g.reject(D)}),I=new AP(u,y,{includeMetadataChanges:!0,Du:!0});return CP(i,I)}(yield Xy(n),n.asyncQueue,e,t,r)})),r.promise}const tB=new Map;function uO(n,e,t){if(!t)throw new Re(he.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nB(n,e,t,r){if(!0===e&&!0===r)throw new Re(he.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rB(n){if(!ze.isDocumentKey(n))throw new Re(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iB(n){if(ze.isDocumentKey(n))throw new Re(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":at()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xS(n);throw new Re(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function sB(n,e){if(e<=0)throw new Re(he.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class oB{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,nB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ZE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oB({}),this._settingsFrozen=!1,e instanceof Td?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Re(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Td(i.options.projectId)}(e))}get app(){if(!this._app)throw new Re(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oB(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Hq;switch(t.type){case"gapi":const r=t.client;return Pt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new zq(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Re(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=tB.get(e);t&&(Le("ComponentProvider","Removing Datastore"),tB.delete(e),t.terminate())}(this),Promise.resolve()}}class sr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new sr(this.firestore,e,this._key)}}class vs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vs(this.firestore,e,this._query)}}class Zu extends vs{constructor(e,t,r){super(e,t,Py(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sr(this.firestore,null,new ze(e))}withConverter(e){return new Zu(this.firestore,e,this._path)}}function aB(n,e,...t){if(n=(0,k.m9)(n),uO("collection","path",e),n instanceof ZE){const r=pn.fromString(e,...t);return iB(r),new Zu(n,null,r)}{if(!(n instanceof sr||n instanceof Zu))throw new Re(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return iB(r),new Zu(n.firestore,null,r)}}function RS(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=LL.R()),uO("doc","path",e),n instanceof ZE){const r=pn.fromString(e,...t);return rB(r),new sr(n,null,new ze(r))}{if(!(n instanceof sr||n instanceof Zu))throw new Re(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(pn.fromString(e,...t));return rB(r),new sr(n.firestore,n instanceof Zu?n.converter:null,new ze(r))}}function lB(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof sr||n instanceof Zu)&&(e instanceof sr||e instanceof Zu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function uB(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof vs&&e instanceof vs&&n.firestore===e.firestore&&AE(n._query,e._query)&&n.converter===e.converter}class H6{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new iP(this,"async_queue_retry"),this.Ua=()=>{const t=IS();t&&Le("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=IS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=IS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const t=new Oi;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,ve.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(t){if(!$g(t))throw t;Le("AsyncQueue","Operation failed with retryable error: "+t)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const t=this.Na.then(()=>(this.$a=!0,e().catch(r=>{throw this.Fa=r,this.$a=!1,Xr("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.$a=!1,r))));return this.Na=t,t}enqueueAfterDelay(e,t,r){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=bP.createAndSchedule(this,e,t,r,a=>this.Qa(a));return this.Oa.push(i),i}qa(){this.Fa&&at()}verifyOperationInProgress(){}ja(){var e=this;return(0,ve.Z)(function*(){let t;do{t=e.Na,yield t}while(t!==e.Na)})()}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}function cO(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class $6{constructor(){this._progressObserver={},this._taskCompletionResolver=new Oi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class pr extends ZE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new H6,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||cB(this),this._firestoreClient.terminate()}}function ni(n){return n._firestoreClient||cB(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function cB(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Jq(n._databaseId,a,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var a,d;n._firestoreClient=new M6(n._authCredentials,n._appCheckCredentials,n._queue,r)}function dB(n,e,t){const r=new Oi;return n.asyncQueue.enqueue((0,ve.Z)(function*(){try{yield ZU(n,t),yield YU(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===he.FAILED_PRECONDITION||a.code===he.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function hB(n){if(n._initialized||n._terminated)throw new Re(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class xd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ki(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Yu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yu(vi.fromBase64String(e))}catch(t){throw new Re(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yu(vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qg{constructor(e){this._methodName=e}}class MS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rn(this._lat,e._lat)||rn(this._long,e._long)}}const X6=/^__.*__$/;class e4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Hg(e,this.data,this.fieldMask,t,this.fieldTransforms):new RE(e,this.data,t,this.fieldTransforms)}}class fB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hg(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function pB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw at()}}class NS{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ja(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new NS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.ec(e),i}nc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:r,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return kS(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(pB(this.Ya)&&X6.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class t4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||zE(e)}uc(e,t,r,i=!1){return new NS({Ya:e,methodName:t,oc:r,path:ki.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Jg(n){const e=n._freezeSettings(),t=zE(n._databaseId);return new t4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function PS(n,e,t,r,i,a={}){const u=n.uc(a.merge||a.mergeFields?2:0,e,t,i);pO("Data must be an object, but it was:",u,r);const d=_B(r,u);let g,y;if(a.merge)g=new Ay(u.fieldMask),y=u.fieldTransforms;else if(a.mergeFields){const I=[];for(const D of a.mergeFields){const R=gO(e,D,t);if(!u.contains(R))throw new Re(he.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);vB(I,R)||I.push(R)}g=new Ay(I),y=u.fieldTransforms.filter(D=>g.covers(D.field))}else g=null,y=u.fieldTransforms;return new e4(new ys(d),g,y)}class YE extends Qg{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof YE}}function gB(n,e,t){return new NS({Ya:3,oc:e.settings.oc,methodName:n._methodName,tc:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class dO extends Qg{_toFieldTransform(e){return new xE(e.path,new ky)}isEqual(e){return e instanceof dO}}class n4 extends Qg{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=gB(this,e,!0),r=this.ac.map(a=>Xg(a,t)),i=new Bg(r);return new xE(e.path,i)}isEqual(e){return this===e}}class r4 extends Qg{constructor(e,t){super(e),this.ac=t}_toFieldTransform(e){const t=gB(this,e,!0),r=this.ac.map(a=>Xg(a,t)),i=new jg(r);return new xE(e.path,i)}isEqual(e){return this===e}}class i4 extends Qg{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=new Fy(e.M,cV(e.M,this.cc));return new xE(e.path,t)}isEqual(e){return this===e}}function hO(n,e,t,r){const i=n.uc(1,e,t);pO("Data must be an object, but it was:",i,r);const a=[],u=ys.empty();kg(r,(g,y)=>{const I=OS(e,g,t);y=(0,k.m9)(y);const D=i.nc(I);if(y instanceof YE)a.push(I);else{const R=Xg(y,D);null!=R&&(a.push(I),u.set(I,R))}});const d=new Ay(a);return new fB(u,d,i.fieldTransforms)}function fO(n,e,t,r,i,a){const u=n.uc(1,e,t),d=[gO(e,r,t)],g=[i];if(a.length%2!=0)throw new Re(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<a.length;R+=2)d.push(gO(e,a[R])),g.push(a[R+1]);const y=[],I=ys.empty();for(let R=d.length-1;R>=0;--R)if(!vB(y,d[R])){const O=d[R];let U=g[R];U=(0,k.m9)(U);const K=u.nc(O);if(U instanceof YE)y.push(O);else{const pe=Xg(U,K);null!=pe&&(y.push(O),I.set(O,pe))}}const D=new Ay(y);return new fB(I,D,u.fieldTransforms)}function mB(n,e,t,r=!1){return Xg(t,n.uc(r?4:3,e))}function Xg(n,e){if(yB(n=(0,k.m9)(n)))return pO("Unsupported field value:",e,n),_B(n,e);if(n instanceof Qg)return function(t,r){if(!pB(r.Ya))throw r.ic(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ic(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let d=Xg(u,r.sc(a));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return cV(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=$r.fromDate(t);return{timestampValue:kE(r.M,i)}}if(t instanceof $r){const i=new $r(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:kE(r.M,i)}}if(t instanceof MS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Yu)return{bytesValue:xV(r.M,t._byteString)};if(t instanceof sr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ic(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:MN(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ic(`Unsupported field value: ${xS(t)}`)}(n,e)}function _B(n,e){const t={};return BL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kg(n,(r,i)=>{const a=Xg(i,e.Za(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function yB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof $r||n instanceof MS||n instanceof Yu||n instanceof sr||n instanceof Qg)}function pO(n,e,t){if(!yB(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=xS(t);throw e.ic("an object"===r?n+" a custom object":n+" "+r)}var r}function gO(n,e,t){if((e=(0,k.m9)(e))instanceof xd)return e._internalPath;if("string"==typeof e)return OS(n,e);throw kS("Field path arguments must be of type string or ",n,!1,void 0,t)}const s4=new RegExp("[~\\*/\\[\\]]");function OS(n,e,t){if(e.search(s4)>=0)throw kS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new xd(...e.split("."))._internalPath}catch(r){throw kS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kS(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(a||u)&&(g+=" (found",a&&(g+=` in field ${r}`),u&&(g+=` in document ${i}`),g+=")"),new Re(he.INVALID_ARGUMENT,d+n+g)}function vB(n,e){return n.some(t=>t.isEqual(e))}class QE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new sr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new o4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(FS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class o4 extends QE{data(){return super.data()}}function FS(n,e){return"string"==typeof e?OS(n,e):e instanceof xd?e._internalPath:e._delegate._internalPath}class em{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rd extends QE{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new JE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(FS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class JE extends Rd{data(e={}){return super.data(e)}}class Ef{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new em(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new JE(this._firestore,this._userDataWriter,r.key,r,new em(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new JE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new em(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const d=new JE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new em(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let g=-1,y=-1;return 0!==u.type&&(g=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),y=a.indexOf(u.doc.key)),{type:a4(u.type),doc:d,oldIndex:g,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function a4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return at()}}function wB(n,e){return n instanceof Rd&&e instanceof Rd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ef&&e instanceof Ef&&n._firestore===e._firestore&&uB(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function EB(n){if(iS(n)&&0===n.explicitOrderBy.length)throw new Re(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class XE{}function bf(n,...e){for(const t of e)n=t._apply(n);return n}class l4 extends XE{constructor(e,t,r){super(),this.hc=e,this.lc=t,this.fc=r,this.type="where"}_apply(e){const t=Jg(e.firestore),r=function(i,a,u,d,g,y,I){let D;if(g.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Re(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){SB(I,y);const O=[];for(const U of I)O.push(DB(d,i,U));D={arrayValue:{values:O}}}else D=DB(d,i,I)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||SB(I,y),D=mB(u,"where",I,"in"===y||"not-in"===y);const R=es.create(g,y,D);return function(O,U){if(U.S()){const pe=IN(O);if(null!==pe&&!pe.isEqual(U.field))throw new Re(he.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${pe.toString()}' and '${U.field.toString()}'`);const Ve=CN(O);null!==Ve&&AB(0,U.field,Ve)}const K=function(pe,Ve){for(const Ne of pe.filters)if(Ve.indexOf(Ne.op)>=0)return Ne.op;return null}(O,function(pe){switch(pe){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(U.op));if(null!==K)throw new Re(he.INVALID_ARGUMENT,K===U.op?`Invalid query. You cannot use more than one '${U.op.toString()}' filter.`:`Invalid query. You cannot use '${U.op.toString()}' filters with '${K.toString()}' filters.`)}(i,R),R}(e._query,0,t,e.firestore._databaseId,this.hc,this.lc,this.fc);return new vs(e.firestore,e.converter,function(i,a){const u=i.filters.concat([a]);return new Sd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class c4 extends XE{constructor(e,t){super(),this.hc=e,this.dc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Re(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Ny(i,a);return function(d,g){if(null===CN(d)){const y=IN(d);null!==y&&AB(0,y,g.field)}}(r,u),u}(e._query,this.hc,this.dc);return new vs(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Sd(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class bB extends XE{constructor(e,t,r){super(),this.type=e,this._c=t,this.wc=r}_apply(e){return new vs(e.firestore,e.converter,iV(e._query,this._c,this.wc))}}class CB extends XE{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=TB(e,this.type,this.mc,this.gc);return new vs(e.firestore,e.converter,(i=t,new Sd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class IB extends XE{constructor(e,t,r){super(),this.type=e,this.mc=t,this.gc=r}_apply(e){const t=TB(e,this.type,this.mc,this.gc);return new vs(e.firestore,e.converter,(i=t,new Sd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function TB(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof QE)return function(i,a,u,d,g){if(!d)throw new Re(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const I of Oy(i))if(I.field.isKeyField())y.push(Ry(a,d.key));else{const D=d.data.field(I.field);if(vN(D))throw new Re(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+I.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const R=I.field.canonicalString();throw new Re(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}y.push(D)}return new ff(y,g)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Jg(n.firestore);return function(a,u,d,g,y,I){const D=a.explicitOrderBy;if(y.length>D.length)throw new Re(he.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let O=0;O<y.length;O++){const U=y[O];if(D[O].field.isKeyField()){if("string"!=typeof U)throw new Re(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof U}`);if(!TN(a)&&-1!==U.indexOf("/"))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${U}' contains a slash.`);const K=a.path.child(pn.fromString(U));if(!ze.isDocumentKey(K))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${K}' is not because it contains an odd number of segments.`);const pe=new ze(K);R.push(Ry(u,pe))}else{const K=mB(d,g,U);R.push(K)}}return new ff(R,I)}(n._query,n.firestore._databaseId,i,e,t,r)}}function DB(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Re(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TN(e)&&-1!==t.indexOf("/"))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(pn.fromString(t));if(!ze.isDocumentKey(r))throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ry(n,new ze(r))}if(t instanceof sr)return Ry(n,t._key);throw new Re(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xS(t)}.`)}function SB(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Re(he.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function AB(n,e,t){if(!t.isEqual(e))throw new Re(he.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class mO{convertValue(e,t="none"){switch(Vg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw at()}}convertObject(e,t){const r={};return kg(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new MS(Rr(e.latitude),Rr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=jL(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(EE(e));default:return null}}convertTimestamp(e){const t=df(e);return new $r(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=pn.fromString(e);Pt(UV(r));const i=new Td(r.get(1),r.get(3)),a=new ze(r.popFirst(5));return i.isEqual(t)||Xr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function LS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class y4 extends mO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}class xB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Jg(e)}set(e,t,r){this._verifyNotCommitted();const i=Cf(e,this._firestore),a=LS(i.converter,t,r),u=PS(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,ei.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Cf(e,this._firestore);let u;return u="string"==typeof(t=(0,k.m9)(t))||t instanceof xd?fO(this._dataReader,"WriteBatch.update",a._key,t,r,i):hO(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,ei.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Cf(e,this._firestore);return this._mutations=this._mutations.concat(new ME(t._key,ei.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cf(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Re(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class tm extends mO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sr(this.firestore,null,t)}}function RB(n,e,t){n=cn(n,sr);const r=cn(n.firestore,pr),i=LS(n.converter,e,t);return ev(r,[PS(Jg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ei.none())])}function MB(n,e,t,...r){n=cn(n,sr);const i=cn(n.firestore,pr),a=Jg(i);let u;return u="string"==typeof(e=(0,k.m9)(e))||e instanceof xd?fO(a,"updateDoc",n._key,e,t,r):hO(a,"updateDoc",n._key,e),ev(i,[u.toMutation(n._key,ei.exists(!0))])}function NB(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||cO(e[u])||(a=e[u],u++);const d={includeMetadataChanges:a.includeMetadataChanges};if(cO(e[u])){const D=e[u];e[u]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[u+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[u+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let g,y,I;if(n instanceof sr)y=cn(n.firestore,pr),I=Py(n._key.path),g={next:D=>{e[u]&&e[u](_O(y,n,D))},error:e[u+1],complete:e[u+2]};else{const D=cn(n,vs);y=cn(D.firestore,pr),I=D._query;const R=new tm(y);g={next:O=>{e[u]&&e[u](new Ef(y,R,D,O))},error:e[u+1],complete:e[u+2]},EB(n._query)}return function(D,R,O,U){const K=new SS(U),pe=new AP(R,K,O);return D.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return CP(yield Xy(D),pe)})),()=>{K.pa(),D.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return TP(yield Xy(D),pe)}))}}(ni(y),I,d,g)}function ev(n,e){return function(t,r){const i=new Oi;return t.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function d6(n,e,t){return PP.apply(this,arguments)}(yield aO(t),r,i)})),i.promise}(ni(n),e)}function _O(n,e,t){const r=t.docs.get(e._key),i=new tm(n);return new Rd(n,i,e._key,r,new em(t.hasPendingWrites,t.fromCache),e.converter)}class A4 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Jg(e)}get(e){const t=Cf(e,this._firestore),r=new y4(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return at();const a=i[0];if(a.isFoundDocument())return new QE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new QE(this._firestore,r,t._key,null,t.converter);throw at()})}set(e,t,r){const i=Cf(e,this._firestore),a=LS(i.converter,t,r),u=PS(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=Cf(e,this._firestore);let u;return u="string"==typeof(t=(0,k.m9)(t))||t instanceof xd?fO(this._dataReader,"Transaction.update",a._key,t,r,i):hO(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=Cf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Cf(e,this._firestore),r=new tm(this._firestore);return super.get(e).then(i=>new Rd(this._firestore,r,t._key,i._document,new em(!1,!1),t.converter))}}function yO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function OB(){if("undefined"==typeof Uint8Array)throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function kB(){if(!function Yq(){return"undefined"!=typeof atob}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Dy=Mi.SDK_VERSION,(0,Mi._registerComponent)(new xo.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new pr(i,new Gq(t.getProvider("auth-internal")),new Wq(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Mi.registerVersion)(OL,"3.4.7",n),(0,Mi.registerVersion)(OL,"3.4.7","esm2017")}();class eb{constructor(e){this._delegate=e}static fromBase64String(e){return kB(),new eb(Yu.fromBase64String(e))}static fromUint8Array(e){return OB(),new eb(Yu.fromUint8Array(e))}toBase64(){return kB(),this._delegate.toBase64()}toUint8Array(){return OB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vO(n){return function L4(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class V4{enableIndexedDbPersistence(e,t){return function q6(n,e){hB(n=cn(n,pr));const t=ni(n),r=n._freezeSettings(),i=new eO;return dB(t,i,new WU(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function z6(n){hB(n=cn(n,pr));const e=ni(n),t=n._freezeSettings(),r=new eO;return dB(e,r,new S6(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function W6(n){if(n._initialized&&!n._terminated)throw new Re(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Oi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ve.Z)(function*(){try{yield(t=(0,ve.Z)(function*(r){if(!Hl.vt())return Promise.resolve();const i=r+"main";yield Hl.delete(i)}),function(r){return t.apply(this,arguments)})(zN(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class FB{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Td||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&vE("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function B6(n,e,t,r={}){var i;const a=(n=cn(n,ZE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&vE("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,d;if("string"==typeof r.mockUserToken)u=r.mockUserToken,d=Xi.MOCK_USER;else{u=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Re(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Xi(g)}n._authCredentials=new $q(new kL(u,d))}}(this._delegate,e,t,r)}enableNetwork(){return function Z6(n){return function N6(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield QU(n),t=yield JU(n);return e.setNetworkEnabled(!0),function(r){const i=Ke(r);return i.lu.delete(0),WE(i)}(t)}))}(ni(n=cn(n,pr)))}(this._delegate)}disableNetwork(){return function Y6(n){return function P6(n){return n.asyncQueue.enqueue((0,ve.Z)(function*(){const e=yield QU(n),t=yield JU(n);return e.setNetworkEnabled(!1),(r=(0,ve.Z)(function*(i){const a=Ke(i);a.lu.add(0),yield zy(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ni(n=cn(n,pr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,nB("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function K6(n){return function(e){const t=new Oi;return e.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return function g6(n,e){return VP.apply(this,arguments)}(yield aO(e),t)})),t.promise}(ni(n=cn(n,pr)))}(this._delegate)}onSnapshotsInSync(e){return function S4(n,e){return function F6(n,e){const t=new SS(e);return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Xy(n),i=t,Ke(r).Tu.add(i),void i.next();var r,i})),()=>{t.pa(),n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return r=yield Xy(n),i=t,void Ke(r).Tu.delete(i);var r,i}))}}(ni(n=cn(n,pr)),cO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new tv(this,aB(this._delegate,e))}catch(t){throw Js(t,"collection()","Firestore.collection()")}}doc(e){try{return new el(this,RS(this._delegate,e))}catch(t){throw Js(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Xs(this,function j6(n,e){if(n=cn(n,ZE),uO("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vs(n,null,(t=e,new Sd(pn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Js(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function x4(n,e){return function L6(n,e){const t=new Oi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){const r=yield(i=n,AS(i).then(a=>a.datastore));var i;new R6(n.asyncQueue,r,e,t).run()})),t.promise}(ni(n=cn(n,pr)),t=>e(new A4(n,t)))}(this._delegate,t=>e(new LB(this,t)))}batch(){return ni(this._delegate),new VB(new xB(this._delegate,e=>ev(this._delegate,e)))}loadBundle(e){return function Q6(n,e){const t=ni(n=cn(n,pr)),r=new $6;return function V6(n,e,t,r){const i=function(a,u){let d;return d="string"==typeof a?(new TextEncoder).encode(a):a,g=function(g,y){if(g instanceof Uint8Array)return KU(g,y);if(g instanceof ArrayBuffer)return KU(new Uint8Array(g),y);if(g instanceof ReadableStream)return g.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new A6(g,u);var g}(t,zE(e));n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){!function D6(n,e,t){const r=Ke(n);var i;(i=(0,ve.Z)(function*(a,u,d){try{const g=yield u.getMetadata();if(yield function(R,O){const U=Ke(R),K=Fi(O.createTime);return U.persistence.runTransaction("hasNewerBundle","readonly",pe=>U.ds.getBundleMetadata(pe,O.id)).then(pe=>!!pe&&pe.createTime.compareTo(K)>=0)}(a.localStore,g))return yield u.close(),d._completeWith({taskState:"Success",documentsLoaded:(R=g).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);d._updateProgress(LU(g));const y=new s6(g,a.localStore,u.M);let I=yield u.fa();for(;I;){const R=yield y.Nu(I);R&&d._updateProgress(R),I=yield u.fa()}const D=yield y.complete();return yield Ad(a,D.Ou,void 0),yield function(R,O){const U=Ke(R);return U.persistence.runTransaction("Save bundle","readwrite",K=>U.ds.saveBundleMetadata(K,O))}(a.localStore,g),d._completeWith(D.progress),Promise.resolve(D.Mu)}catch(g){return vE("SyncEngine",`Loading bundle failed with ${g}`),d._failWith(g),Promise.resolve(new Set)}var R}),function(a,u,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield aO(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function J6(n,e){return function U6(n,e){return n.asyncQueue.enqueue((0,ve.Z)(function*(){return function(t,r){const i=Ke(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.ds.getNamedQuery(a,r))}(yield oO(n),e)}))}(ni(n=cn(n,pr)),e).then(t=>t?new vs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Xs(this,t):null)}}class VS extends mO{constructor(e){super(),this.firestore=e}convertBytes(e){return new eb(new Yu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return el.forKey(t,this.firestore,null)}}class LB{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new VS(e)}get(e){const t=rm(e);return this._delegate.get(t).then(r=>new tb(this._firestore,new Rd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=rm(e);return r?(yO("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=rm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=rm(e);return this._delegate.delete(t),this}}class VB{constructor(e){this._delegate=e}set(e,t,r){const i=rm(e);return r?(yO("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=rm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=rm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class nm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new JE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new nb(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=nm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new nm(e,new VS(e),t),i.set(t,a)),a}}nm.INSTANCES=new WeakMap;class el{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new VS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new el(t,new sr(t._delegate,r,new ze(e)))}static forKey(e,t,r){return new el(t,new sr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new tv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new tv(this.firestore,aB(this._delegate,e))}catch(t){throw Js(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof sr&&lB(this._delegate,e)}set(e,t){t=yO("DocumentReference.set",t);try{return t?RB(this._delegate,e,t):RB(this._delegate,e)}catch(r){throw Js(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?MB(this._delegate,e):MB(this._delegate,e,t,...r)}catch(i){throw Js(i,"updateDoc()","DocumentReference.update()")}}delete(){return function T4(n){return ev(cn(n.firestore,pr),[new ME(n._key,ei.none())])}(this._delegate)}onSnapshot(...e){const t=UB(e),r=BB(e,i=>new tb(this.firestore,new Rd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return NB(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function w4(n){n=cn(n,sr);const e=cn(n.firestore,pr),t=ni(e),r=new tm(e);return function O6(n,e){const t=new Oi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,u){try{const d=yield function(g,y){const I=Ke(g);return I.persistence.runTransaction("read document","readonly",D=>I.ai.Bs(D,y))}(i,a);d.isFoundDocument()?u.resolve(d):d.isNoDocument()?u.resolve(null):u.reject(new Re(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const g=Zy(d,`Failed to get document '${a} from cache`);u.reject(g)}}),function(i,a,u){return r.apply(this,arguments)})(yield oO(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Rd(e,r,n._key,i,new em(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function E4(n){n=cn(n,sr);const e=cn(n.firestore,pr);return XU(ni(e),n._key,{source:"server"}).then(t=>_O(e,n,t))}(this._delegate):function v4(n){n=cn(n,sr);const e=cn(n.firestore,pr);return XU(ni(e),n._key).then(t=>_O(e,n,t))}(this._delegate),t.then(r=>new tb(this.firestore,new Rd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new el(this.firestore,this._delegate.withConverter(e?nm.getInstance(this.firestore,e):null))}}function Js(n,e,t){return n.message=n.message.replace(e,t),n}function UB(n){for(const e of n)if("object"==typeof e&&!vO(e))return e;return{}}function BB(n,e){var t,r;let i;return i=vO(n[0])?n[0]:vO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class tb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new el(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return wB(this._delegate,e._delegate)}}class nb extends tb{data(e){const t=this._delegate.data(e);return function jq(n,e){n||at()}(void 0!==t),t}}class Xs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new VS(e)}where(e,t,r){try{return new Xs(this.firestore,bf(this._delegate,function u4(n,e,t){const r=e,i=FS("where",n);return new l4(i,r,t)}(e,t,r)))}catch(i){throw Js(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Xs(this.firestore,bf(this._delegate,function d4(n,e="asc"){const t=e,r=FS("orderBy",n);return new c4(r,t)}(e,t)))}catch(r){throw Js(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Xs(this.firestore,bf(this._delegate,function h4(n){return sB("limit",n),new bB("limit",n,"F")}(e)))}catch(t){throw Js(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Xs(this.firestore,bf(this._delegate,function f4(n){return sB("limitToLast",n),new bB("limitToLast",n,"L")}(e)))}catch(t){throw Js(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Xs(this.firestore,bf(this._delegate,function p4(...n){return new CB("startAt",n,!0)}(...e)))}catch(t){throw Js(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Xs(this.firestore,bf(this._delegate,function g4(...n){return new CB("startAfter",n,!1)}(...e)))}catch(t){throw Js(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Xs(this.firestore,bf(this._delegate,function m4(...n){return new IB("endBefore",n,!1)}(...e)))}catch(t){throw Js(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Xs(this.firestore,bf(this._delegate,function _4(...n){return new IB("endAt",n,!0)}(...e)))}catch(t){throw Js(t,"endAt()","Query.endAt()")}}isEqual(e){return uB(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function C4(n){n=cn(n,vs);const e=cn(n.firestore,pr),t=ni(e),r=new tm(e);return function k6(n,e){const t=new Oi;return n.asyncQueue.enqueueAndForget((0,ve.Z)(function*(){return(r=(0,ve.Z)(function*(i,a,u){try{const d=yield ES(i,a,!0),g=new BU(a,d.hi),y=g.Gu(d.documents),I=g.applyChanges(y,!1);u.resolve(I.snapshot)}catch(d){const g=Zy(d,`Failed to execute query '${a} against cache`);u.reject(g)}}),function(i,a,u){return r.apply(this,arguments)})(yield oO(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ef(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function I4(n){n=cn(n,vs);const e=cn(n.firestore,pr),t=ni(e),r=new tm(e);return eB(t,n._query,{source:"server"}).then(i=>new Ef(e,r,n,i))}(this._delegate):function b4(n){n=cn(n,vs);const e=cn(n.firestore,pr),t=ni(e),r=new tm(e);return EB(n._query),eB(t,n._query).then(i=>new Ef(e,r,n,i))}(this._delegate),t.then(r=>new wO(this.firestore,new Ef(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=UB(e),r=BB(e,i=>new wO(this.firestore,new Ef(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return NB(this._delegate,t,r)}withConverter(e){return new Xs(this.firestore,this._delegate.withConverter(e?nm.getInstance(this.firestore,e):null))}}class B4{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new nb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class wO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Xs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new nb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new B4(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new nb(this._firestore,r))})}isEqual(e){return wB(this._delegate,e._delegate)}}class tv extends Xs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new el(this.firestore,e):null}doc(e){try{return new el(this.firestore,void 0===e?RS(this._delegate):RS(this._delegate,e))}catch(t){throw Js(t,"doc()","CollectionReference.doc()")}}add(e){return function D4(n,e){const t=cn(n.firestore,pr),r=RS(n),i=LS(n.converter,e);return ev(t,[PS(Jg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ei.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new el(this.firestore,t))}isEqual(e){return lB(this._delegate,e._delegate)}withConverter(e){return new tv(this.firestore,this._delegate.withConverter(e?nm.getInstance(this.firestore,e):null))}}function rm(n){return cn(n,sr)}class EO{constructor(...e){this._delegate=new xd(...e)}static documentId(){return new EO(ki.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof xd&&this._delegate._internalPath.isEqual(e._internalPath)}}class im{constructor(e){this._delegate=e}static serverTimestamp(){const e=function M4(){return new dO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new im(e)}static delete(){const e=function R4(){return new YE("deleteField")}();return e._methodName="FieldValue.delete",new im(e)}static arrayUnion(...e){const t=function N4(...n){return new n4("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new im(t)}static arrayRemove(...e){const t=function P4(...n){return new r4("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new im(t)}static increment(e){const t=function O4(n){return new i4("increment",n)}(e);return t._methodName="FieldValue.increment",new im(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const j4={Firestore:FB,GeoPoint:MS,Timestamp:$r,Blob:eb,Transaction:LB,WriteBatch:VB,DocumentReference:el,DocumentSnapshot:tb,Query:Xs,QueryDocumentSnapshot:nb,QuerySnapshot:wO,CollectionReference:tv,FieldPath:EO,FieldValue:im,setLogLevel:function U4(n){!function Bq(n){cf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function jB(n,e){return function G4(n,e=Dp.z){return new In.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function bO(n,e){return jB(n,e).pipe((0,mt.U)(t=>({payload:t,type:"query"})))}function US(n,e){return bO(n,e).pipe(op(void 0),TM(),(0,mt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,d)=>{const g=i.find(I=>I.doc.ref.isEqual(u.ref)),y=null==t?void 0:t.payload.docs.find(I=>I.ref.isEqual(u.ref));g&&JSON.stringify(g.doc.metadata)===JSON.stringify(u.metadata)||!g&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:u}})}),a}))}function HB(n,e,t){return US(n,t).pipe(Dl((r,i)=>function z4(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function W4(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return CO(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return CO(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return CO(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Jc(),(0,mt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function CO(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function $B(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function $4(n){(function H4(n,e){n.INTERNAL.registerComponent(new xo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},j4)))})(n,(e,t)=>new FB(e,t,new V4)),n.registerVersion("@firebase/firestore-compat","0.1.16")}(w_.Z);class GB{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=US(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,mt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(op(void 0),TM(),ds(([r,i])=>i.length>0||!r),(0,mt.U)(([r,i])=>i),tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Dl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$B(e);return HB(this.query,t,this.afs.schedulers.outsideAngular).pipe(tn.iC)}valueChanges(e={}){return bO(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),tn.iC)}get(e){return(0,Sn.D)(this.query.get(e)).pipe(tn.iC)}add(e){return this.ref.add(e)}doc(e){return new qB(this.ref.doc(e),this.afs)}}class qB{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=KB(r,t);return new GB(i,a,this.afs)}snapshotChanges(){return function q4(n,e){return jB(n,e).pipe(op(void 0),TM(),(0,mt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(tn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,mt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Sn.D)(this.ref.get(e)).pipe(tn.iC)}}class K4{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?US(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ds(t=>t.length>0),tn.iC):US(this.query,this.afs.schedulers.outsideAngular).pipe(tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Dl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$B(e);return HB(this.query,t,this.afs.schedulers.outsideAngular).pipe(tn.iC)}valueChanges(e={}){return bO(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),tn.iC)}get(e){return(0,Sn.D)(this.query.get(e)).pipe(tn.iC)}}const zB=new h.OlP("angularfire2.enableFirestorePersistence"),WB=new h.OlP("angularfire2.firestore.persistenceSettings"),Z4=new h.OlP("angularfire2.firestore.settings"),Y4=new h.OlP("angularfire2.firestore.use-emulator");function KB(n,e=(t=>t)){return{query:e(n),ref:n}}let Q4=(()=>{class n{constructor(t,r,i,a,u,d,g,y,I,D,R,O,U,K,pe,Ve,Ne){this.schedulers=g;const et=(0,Qn.on)(t,d,r),Be=I;D&&UR(et,d,R,U,K,pe,O,Ve),[this.firestore,this.persistenceEnabled$]=(0,Qn.cc)(`${et.name}.firestore`,"AngularFirestore",et.name,()=>{const Tt=d.runOutsideAngular(()=>et.firestore());if(a&&Tt.settings(a),Be&&Tt.useEmulator(...Be),i&&!Ir(u)){const yt=()=>{try{return(0,Sn.D)(Tt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Rn){return"undefined"!=typeof console&&console.warn(Rn),Xe(!1)}};return[Tt,d.runOutsideAngular(yt)]}return[Tt,Xe(!1)]},[a,Be,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=KB(i,r),d=this.schedulers.ngZone.run(()=>a);return new GB(d,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new K4(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new qB(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Qn.Dh),h.LFG(Qn.xv,8),h.LFG(zB,8),h.LFG(Z4,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(tn.HU),h.LFG(WB,8),h.LFG(Y4,8),h.LFG(JT,8),h.LFG(PR,8),h.LFG(OR,8),h.LFG(kR,8),h.LFG(FR,8),h.LFG(LR,8),h.LFG(VR,8),h.LFG(B0,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),J4=(()=>{class n{constructor(){QT.Z.registerVersion("angularfire",tn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:zB,useValue:!0},{provide:WB,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[Q4]}),n})();const ZB_firebaseConfig={apiKey:"AIzaSyBFRHDnnAbLVoja4w9KEyeUpjvYGoDAbZ8",authDomain:"newslist-50513.firebaseapp.com",databaseURL:"https://newslist-50513-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"newslist-50513",storageBucket:"newslist-50513.appspot.com",messagingSenderId:"734551931092",appId:"1:734551931092:web:2be703eb57028cddbbe341"};let X4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[qj]}),n.\u0275inj=h.cJS({providers:[],imports:[[xa,Gj,Fc,H$,dj.forRoot({positionClass:"toast-bottom-right"}),Ur,rp,Qn.hO.initializeApp(ZB_firebaseConfig),D2,J4,N3,B2,Uj]]}),n})();(0,h.G48)(),uc().bootstrapModule(X4).catch(n=>console.error(n))},5867:(lt,De,L)=>{L.d(De,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=L(9681);(0,h.registerVersion)("firebase","9.6.10","app")},127:(lt,De,L)=>{L.d(De,{Z:()=>h.Z});var h=L(3942);h.Z.registerVersion("firebase","9.6.10","app-compat")},4087:(lt,De,L)=>{L.r(De);var h=L(5861),J=L(3942),F=L(2090),le=L(9681),te=L(655),_e=L(1877),ie=L(4859);const Oe=function We(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tt=new _e.Yd("@firebase/auth");function Ze(v,...p){tt.logLevel<=_e.in.ERROR&&tt.error(`Auth (${le.SDK_VERSION}): ${v}`,...p)}function Se(v,...p){throw $e(v,...p)}function Ee(v,...p){return $e(v,...p)}function be(v,p,_){const E=Object.assign(Object.assign({},Ue()),{[p]:_});return new F.LL("auth","Firebase",E).create(p,{appName:v.name})}function qe(v,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&Se(v,"argument-error"),be(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $e(v,...p){if("string"!=typeof v){const _=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(_,...E)}return ge.create(v,...p)}function re(v,p,..._){if(!v)throw $e(p,..._)}function Z(v){const p="INTERNAL ASSERTION FAILED: "+v;throw Ze(p),new Error(p)}function se(v,p){v||Z(p)}const ye=new Map;function oe(v){se(v instanceof Function,"Expected a class definition");let p=ye.get(v);return p?(se(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,ye.set(v,p),p)}function St(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function sn(){return"http:"===qn()||"https:"===qn()}function qn(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class mn{constructor(p,_){this.shortDelay=p,this.longDelay=_,se(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function ut(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(sn()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _n(v,p){se(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class ji{static initialize(p,_,E){this.fetchImpl=p,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Z("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Z("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Z("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const un={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ns=new mn(3e4,6e4);function on(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function qt(v,p,_,E){return wr.apply(this,arguments)}function wr(){return(wr=(0,h.Z)(function*(v,p,_,E,x={}){return ri(v,x,(0,h.Z)(function*(){let P={},W={};E&&("GET"===p?W=E:P={body:JSON.stringify(E)});const ae=(0,F.xO)(Object.assign({key:v.config.apiKey},W)).slice(1),He=yield v._getAdditionalHeaders();return He["Content-Type"]="application/json",v.languageCode&&(He["X-Firebase-Locale"]=v.languageCode),ji.fetch()(Wr(v,v.config.apiHost,_,ae),Object.assign({method:p,headers:He,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function ri(v,p,_){return to.apply(this,arguments)}function to(){return(to=(0,h.Z)(function*(v,p,_){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},un),p);try{const x=new ws(v),P=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const W=yield P.json();if("needConfirmation"in W)throw is(v,"account-exists-with-different-credential",W);if(P.ok&&!("errorMessage"in W))return W;{const ae=P.ok?W.errorMessage:W.error.message,[He,nt]=ae.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===He)throw is(v,"credential-already-in-use",W);if("EMAIL_EXISTS"===He)throw is(v,"email-already-in-use",W);const bt=E[He]||He.toLowerCase().replace(/[_\s]+/g,"-");if(nt)throw be(v,bt,nt);Se(v,bt)}}catch(x){if(x instanceof F.ZR)throw x;Se(v,"network-request-failed")}})).apply(this,arguments)}function zr(v,p,_,E){return rs.apply(this,arguments)}function rs(){return(rs=(0,h.Z)(function*(v,p,_,E,x={}){const P=yield qt(v,p,_,E,x);return"mfaPendingCredential"in P&&Se(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Wr(v,p,_,E){const x=`${p}${_}?${E}`;return v.config.emulator?_n(v.config,x):`${v.config.apiScheme}://${x}`}class ws{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(Ee(this.auth,"network-request-failed")),ns.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function is(v,p,_){const E={appName:v.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const x=Ee(v,p,E);return x.customData._tokenResponse=_,x}function ii(){return(ii=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function gr(v,p){return or.apply(this,arguments)}function or(){return(or=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function wi(v,p){return no.apply(this,arguments)}function no(){return(no=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Tn(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Ca(){return(Ca=(0,h.Z)(function*(v,p=!1){const _=(0,F.m9)(v),E=yield _.getIdToken(p),x=ot(E);re(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const P="object"==typeof x.firebase?x.firebase:void 0,W=null==P?void 0:P.sign_in_provider;return{claims:x,token:E,authTime:Tn(zt(x.auth_time)),issuedAtTime:Tn(zt(x.iat)),expirationTime:Tn(zt(x.exp)),signInProvider:W||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function zt(v){return 1e3*Number(v)}function ot(v){const[p,_,E]=v.split(".");if(void 0===p||void 0===_||void 0===E)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,F.tV)(_);return x?JSON.parse(x):(Ze("Failed to decode base64 JWT payload"),null)}catch(x){return Ze("Caught error parsing JWT payload as JSON",x),null}}function Er(v,p){return ss.apply(this,arguments)}function ss(){return(ss=(0,h.Z)(function*(v,p,_=!1){if(_)return p;try{return yield p}catch(E){throw E instanceof F.ZR&&Wt(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function Wt({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class Oo{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield _.iteration()}),E)}iteration(){var p=this;return(0,h.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&p.schedule(!0))}p.schedule()})()}}class Mr{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tn(this.lastLoginAt),this.creationTime=Tn(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function br(v){return ft.apply(this,arguments)}function ft(){return(ft=(0,h.Z)(function*(v){var p;const _=v.auth,E=yield v.getIdToken(),x=yield Er(v,wi(_,{idToken:E}));re(null==x?void 0:x.users.length,_,"internal-error");const P=x.users[0];v._notifyReloadListener(P);const W=(null===(p=P.providerUserInfo)||void 0===p?void 0:p.length)?Ae(P.providerUserInfo):[],ae=Ye(v.providerData,W),bt=!!v.isAnonymous&&!(v.email&&P.passwordHash||(null==ae?void 0:ae.length)),dt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:ae,metadata:new Mr(P.createdAt,P.lastLoginAt),isAnonymous:bt};Object.assign(v,dt)})).apply(this,arguments)}function $t(){return($t=(0,h.Z)(function*(v){const p=(0,F.m9)(v);yield br(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Ye(v,p){return[...v.filter(E=>!p.some(x=>x.providerId===E.providerId)),...p]}function Ae(v){return v.map(p=>{var{providerId:_}=p,E=(0,te._T)(p,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function pt(){return(pt=(0,h.Z)(function*(v,p){const _=yield ri(v,{},(0,h.Z)(function*(){const E=(0,F.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:x,apiKey:P}=v.config,W=Wr(v,x,"/v1/token",`key=${P}`),ae=yield v._getAdditionalHeaders();return ae["Content-Type"]="application/x-www-form-urlencoded",ji.fetch()(W,{method:"POST",headers:ae,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Gt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){re(p.idToken,"internal-error"),re(void 0!==p.idToken,"internal-error"),re(void 0!==p.refreshToken,"internal-error");const _="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function It(v){const p=ot(v);return re(p,"internal-error"),re(void 0!==p.exp,"internal-error"),re(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var E=this;return(0,h.Z)(function*(){return re(!E.accessToken||E.refreshToken,p,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var E=this;return(0,h.Z)(function*(){const{accessToken:x,refreshToken:P,expiresIn:W}=yield function Je(v,p){return pt.apply(this,arguments)}(p,_);E.updateTokensAndExpiration(x,P,Number(W))})()}updateTokensAndExpiration(p,_,E){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,_){const{refreshToken:E,accessToken:x,expirationTime:P}=_,W=new Gt;return E&&(re("string"==typeof E,"internal-error",{appName:p}),W.refreshToken=E),x&&(re("string"==typeof x,"internal-error",{appName:p}),W.accessToken=x),P&&(re("number"==typeof P,"internal-error",{appName:p}),W.expirationTime=P),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Gt,this.toJSON())}_performRefresh(){return Z("not implemented")}}function Bt(v,p){re("string"==typeof v||void 0===v,"internal-error",{appName:p})}class ${constructor(p){var{uid:_,auth:E,stsTokenManager:x}=p,P=(0,te._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Oo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Mr(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,h.Z)(function*(){const E=yield Er(_,_.stsTokenManager.getToken(_.auth,p));return re(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(p){return function Es(v){return Ca.apply(this,arguments)}(this,p)}reload(){return function Nr(v){return $t.apply(this,arguments)}(this)}_assign(p){this!==p&&(re(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new $(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var E=this;return(0,h.Z)(function*(){let x=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),x=!0),_&&(yield br(E)),yield E.auth._persistUserIfCurrent(E),x&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,h.Z)(function*(){const _=yield p.getIdToken();return yield Er(p,function ht(v,p){return ii.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var E,x,P,W,ae,He,nt,bt;const dt=null!==(E=_.displayName)&&void 0!==E?E:void 0,Fn=null!==(x=_.email)&&void 0!==x?x:void 0,xi=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,Il=null!==(W=_.photoURL)&&void 0!==W?W:void 0,jc=null!==(ae=_.tenantId)&&void 0!==ae?ae:void 0,Hc=null!==(He=_._redirectEventId)&&void 0!==He?He:void 0,$c=null!==(nt=_.createdAt)&&void 0!==nt?nt:void 0,mv=null!==(bt=_.lastLoginAt)&&void 0!==bt?bt:void 0,{uid:Tl,emailVerified:tp,isAnonymous:np,providerData:rp,stsTokenManager:ip}=_;re(Tl&&ip,p,"internal-error");const db=Gt.fromJSON(this.name,ip);re("string"==typeof Tl,p,"internal-error"),Bt(dt,p.name),Bt(Fn,p.name),re("boolean"==typeof tp,p,"internal-error"),re("boolean"==typeof np,p,"internal-error"),Bt(xi,p.name),Bt(Il,p.name),Bt(jc,p.name),Bt(Hc,p.name),Bt($c,p.name),Bt(mv,p.name);const jr=new $({uid:Tl,auth:p,email:Fn,emailVerified:tp,displayName:dt,isAnonymous:np,photoURL:Il,phoneNumber:xi,tenantId:jc,stsTokenManager:db,createdAt:$c,lastLoginAt:mv});return rp&&Array.isArray(rp)&&(jr.providerData=rp.map(Us=>Object.assign({},Us))),Hc&&(jr._redirectEventId=Hc),jr}static _fromIdTokenResponse(p,_,E=!1){return(0,h.Z)(function*(){const x=new Gt;x.updateFromServerResponse(_);const P=new $({uid:_.localId,auth:p,stsTokenManager:x,isAnonymous:E});return yield br(P),P})()}}const z=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(_,E){var x=this;return(0,h.Z)(function*(){x.storage[_]=E})()}_get(_){var E=this;return(0,h.Z)(function*(){const x=E.storage[_];return void 0===x?null:x})()}_remove(_){var E=this;return(0,h.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return v.type="NONE",v})();function de(v,p,_){return`firebase:${v}:${p}:${_}`}class X{constructor(p,_,E){this.persistence=p,this.auth=_,this.userKey=E;const{config:x,name:P}=this.auth;this.fullUserKey=de(this.userKey,x.apiKey,P),this.fullPersistenceKey=de("persistence",x.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?$._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,h.Z)(function*(){if(_.persistence===p)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,E="authUser"){return(0,h.Z)(function*(){if(!_.length)return new X(oe(z),p,E);const x=(yield Promise.all(_.map(function(){var nt=(0,h.Z)(function*(bt){if(yield bt._isAvailable())return bt});return function(bt){return nt.apply(this,arguments)}}()))).filter(nt=>nt);let P=x[0]||oe(z);const W=de(E,p.config.apiKey,p.name);let ae=null;for(const nt of _)try{const bt=yield nt._get(W);if(bt){const dt=$._fromJSON(p,bt);nt!==P&&(ae=dt),P=nt;break}}catch(bt){}const He=x.filter(nt=>nt._shouldAllowMigration);return P._shouldAllowMigration&&He.length?(P=He[0],ae&&(yield P._set(W,ae.toJSON())),yield Promise.all(_.map(function(){var nt=(0,h.Z)(function*(bt){if(bt!==P)try{yield bt._remove(W)}catch(dt){}});return function(bt){return nt.apply(this,arguments)}}())),new X(P,p,E)):new X(P,p,E)})()}}function je(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Yt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Et(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Ot(p))return"Blackberry";if(En(p))return"Webos";if(nn(p))return"Safari";if((p.includes("chrome/")||Pr(p))&&!p.includes("edge/"))return"Chrome";if(jn(p))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Et(v=(0,F.z$)()){return/firefox\//i.test(v)}function nn(v=(0,F.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Pr(v=(0,F.z$)()){return/crios\//i.test(v)}function Yt(v=(0,F.z$)()){return/iemobile/i.test(v)}function jn(v=(0,F.z$)()){return/android/i.test(v)}function Ot(v=(0,F.z$)()){return/blackberry/i.test(v)}function En(v=(0,F.z$)()){return/webos/i.test(v)}function _r(v=(0,F.z$)()){return/iphone|ipad|ipod/i.test(v)}function bs(v=(0,F.z$)()){return _r(v)||jn(v)||En(v)||Ot(v)||/windows phone/i.test(v)||Yt(v)}function rl(v,p=[]){let _;switch(v){case"Browser":_=je((0,F.z$)());break;case"Worker":_=`${je((0,F.z$)())}-${v}`;break;default:_=v}const E=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${le.SDK_VERSION}/${E}`}class Ei{constructor(p,_,E){this.app=p,this.heartbeatServiceProvider=_,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ft(this),this.idTokenSubscription=new Ft(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,_){var E=this;return _&&(this._popupRedirectResolver=oe(_)),this._initializationPromise=this.queue((0,h.Z)(function*(){var x,P;if(!E._deleted&&(E.persistenceManager=yield X.create(E,p),!E._deleted)){if(null===(x=E._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(W){}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(P=E.currentUser)||void 0===P?void 0:P.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_)}})()}initializeCurrentUser(p){var _=this;return(0,h.Z)(function*(){var E;let x=yield _.assertedPersistence.getCurrentUser();if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const P=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,W=null==x?void 0:x._redirectEventId,ae=yield _.tryRedirectSignIn(p);(!P||P===W)&&(null==ae?void 0:ae.user)&&(x=ae.user)}return x?x._redirectEventId?(re(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===x._redirectEventId?_.directlySetCurrentUser(x):_.reloadAndSetCurrentUserOrClear(x)):_.reloadAndSetCurrentUserOrClear(x):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(p){var _=this;return(0,h.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch(x){yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,h.Z)(function*(){try{yield br(p)}catch(E){if("auth/network-request-failed"!==E.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function vt(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,h.Z)(function*(){const E=p?(0,F.m9)(p):null;return E&&re(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(p){var _=this;return(0,h.Z)(function*(){if(!_._deleted)return p&&re(_.tenantId===p.tenantId,_,"tenant-id-mismatch"),_.queue((0,h.Z)(function*(){yield _.directlySetCurrentUser(p),_.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null)})()}setPersistence(p){var _=this;return this.queue((0,h.Z)(function*(){yield _.assertedPersistence.setPersistence(oe(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new F.LL("auth","Firebase",p())}onAuthStateChanged(p,_,E){return this.registerStateListener(this.authStateSubscription,p,_,E)}onIdTokenChanged(p,_,E){return this.registerStateListener(this.idTokenSubscription,p,_,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var E=this;return(0,h.Z)(function*(){const x=yield E.getOrInitRedirectPersistenceManager(_);return null===p?x.removeCurrentUser():x.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,h.Z)(function*(){if(!_.redirectPersistenceManager){const E=p&&oe(p)||_._popupRedirectResolver;re(E,_,"argument-error"),_.redirectPersistenceManager=yield X.create(_,[oe(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,h.Z)(function*(){var E,x;return _._isInitialized&&(yield _.queue((0,h.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===p?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,h.Z)(function*(){if(p===_.currentUser)return _.queue((0,h.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,E,x){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),W=this._isInitialized?Promise.resolve():this._initializationPromise;return re(W,this,"internal-error"),W.then(()=>P(this.currentUser)),"function"==typeof _?p.addObserver(_,E,x):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,h.Z)(function*(){_.currentUser&&_.currentUser!==p&&(_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh()),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=rl(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var _;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const x=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(E["X-Firebase-Client"]=x),E})()}}function ke(v){return(0,F.m9)(v)}class Ft{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,F.ne)(_=>this.observer=_)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Cr(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function Xn(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class dn{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return Z("not implemented")}_getIdTokenResponse(p){return Z("not implemented")}_linkToIdToken(p,_){return Z("not implemented")}_getReauthenticationResolver(p){return Z("not implemented")}}function zn(v,p){return io.apply(this,arguments)}function io(){return(io=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:resetPassword",on(v,p))})).apply(this,arguments)}function Nt(v,p){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Lo(v,p){return il.apply(this,arguments)}function il(){return(il=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:update",on(v,p))})).apply(this,arguments)}function lr(){return(lr=(0,h.Z)(function*(v,p){return zr(v,"POST","/v1/accounts:signInWithPassword",on(v,p))})).apply(this,arguments)}function Cs(v,p){return Is.apply(this,arguments)}function Is(){return(Is=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:sendOobCode",on(v,p))})).apply(this,arguments)}function ur(v,p){return hn.apply(this,arguments)}function hn(){return(hn=(0,h.Z)(function*(v,p){return Cs(v,p)})).apply(this,arguments)}function Gl(v,p){return ql.apply(this,arguments)}function ql(){return(ql=(0,h.Z)(function*(v,p){return Cs(v,p)})).apply(this,arguments)}function Hi(v,p){return bi.apply(this,arguments)}function bi(){return(bi=(0,h.Z)(function*(v,p){return Cs(v,p)})).apply(this,arguments)}function Md(v,p){return oo.apply(this,arguments)}function oo(){return(oo=(0,h.Z)(function*(v,p){return Cs(v,p)})).apply(this,arguments)}function si(){return(si=(0,h.Z)(function*(v,p){return zr(v,"POST","/v1/accounts:signInWithEmailLink",on(v,p))})).apply(this,arguments)}function Nd(){return(Nd=(0,h.Z)(function*(v,p){return zr(v,"POST","/v1/accounts:signInWithEmailLink",on(v,p))})).apply(this,arguments)}class Wl extends dn{constructor(p,_,E,x=null){super("password",E),this._email=p,this._password=_,this._tenantId=x}static _fromEmailAndPassword(p,_){return new Wl(p,_,"password")}static _fromEmailAndCode(p,_,E=null){return new Wl(p,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,h.Z)(function*(){switch(_.signInMethod){case"password":return function so(v,p){return lr.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function zl(v,p){return si.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:Se(p,"internal-error")}})()}_linkToIdToken(p,_){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return Nt(p,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Df(v,p){return Nd.apply(this,arguments)}(p,{idToken:_,email:E._email,oobCode:E._password});default:Se(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function er(v,p){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,h.Z)(function*(v,p){return zr(v,"POST","/v1/accounts:signInWithIdp",on(v,p))})).apply(this,arguments)}class Ts extends dn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new Ts(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):Se("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:x}=_,P=(0,te._T)(_,["providerId","signInMethod"]);if(!E||!x)return null;const W=new Ts(E,x);return W.idToken=P.idToken||void 0,W.accessToken=P.accessToken||void 0,W.secret=P.secret,W.nonce=P.nonce,W.pendingToken=P.pendingToken||null,W}_getIdTokenResponse(p){return er(p,this.buildRequest())}_linkToIdToken(p,_){const E=this.buildRequest();return E.idToken=_,er(p,E)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,er(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,F.xO)(_)}return p}}function um(v,p){return Od.apply(this,arguments)}function Od(){return(Od=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:sendVerificationCode",on(v,p))})).apply(this,arguments)}function ao(){return(ao=(0,h.Z)(function*(v,p){return zr(v,"POST","/v1/accounts:signInWithPhoneNumber",on(v,p))})).apply(this,arguments)}function kd(){return(kd=(0,h.Z)(function*(v,p){const _=yield zr(v,"POST","/v1/accounts:signInWithPhoneNumber",on(v,p));if(_.temporaryProof)throw is(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const dm={USER_NOT_FOUND:"user-not-found"};function Fd(){return(Fd=(0,h.Z)(function*(v,p){return zr(v,"POST","/v1/accounts:signInWithPhoneNumber",on(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),dm)})).apply(this,arguments)}class Ia extends dn{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Ia({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Ia({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function Ju(v,p){return ao.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function cm(v,p){return kd.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function hm(v,p){return Fd.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:E,verificationCode:x}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:E,code:x}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:E,phoneNumber:x,temporaryProof:P}=p;return E||_||x||P?new Ia({verificationId:_,verificationCode:E,phoneNumber:x,temporaryProof:P}):null}}class Vo{constructor(p){var _,E,x,P,W,ae;const He=(0,F.zd)((0,F.pd)(p)),nt=null!==(_=He.apiKey)&&void 0!==_?_:null,bt=null!==(E=He.oobCode)&&void 0!==E?E:null,dt=function nv(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=He.mode)&&void 0!==x?x:null);re(nt&&bt&&dt,"argument-error"),this.apiKey=nt,this.operation=dt,this.code=bt,this.continueUrl=null!==(P=He.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(W=He.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(ae=He.tenantId)&&void 0!==ae?ae:null}static parseLink(p){const _=function Kl(v){const p=(0,F.zd)((0,F.pd)(v)).link,_=p?(0,F.zd)((0,F.pd)(p)).deep_link_id:null,E=(0,F.zd)((0,F.pd)(v)).deep_link_id;return(E?(0,F.zd)((0,F.pd)(E)).link:null)||E||_||p||v}(p);try{return new Vo(_)}catch(E){return null}}}let Xu=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,E){return Wl._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const x=Vo.parseLink(E);return re(x,"argument-error"),Wl._fromEmailAndCode(_,x.code,x.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Ds{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class oi extends Ds{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Ta extends oi{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return re("providerId"in _&&"signInMethod"in _,"argument-error"),Ts._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return re(p.idToken||p.accessToken,"argument-error"),Ts._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Ta.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Ta.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:x,pendingToken:P,nonce:W,providerId:ae}=p;if(!E&&!x&&!_&&!P||!ae)return null;try{return new Ta(ae)._credential({idToken:_,accessToken:E,nonce:W,pendingToken:P})}catch(He){return null}}}let Uo=(()=>{class v extends oi{constructor(){super("facebook.com")}static credential(_){return Ts._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(E){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),sl=(()=>{class v extends oi{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return Ts._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:x}=_;if(!E&&!x)return null;try{return v.credential(E,x)}catch(P){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),ec=(()=>{class v extends oi{constructor(){super("github.com")}static credential(_){return Ts._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(E){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class lo extends dn{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return er(p,this.buildRequest())}_linkToIdToken(p,_){const E=this.buildRequest();return E.idToken=_,er(p,E)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,er(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:x,pendingToken:P}=_;return E&&x&&P&&E===x?new lo(E,P):null}static _create(p,_){return new lo(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ci extends Ds{constructor(p){re(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Ci.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Ci.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=lo.fromJSON(p);return re(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:E}=p;if(!_||!E)return null;try{return lo._create(E,_)}catch(x){return null}}}let Zl=(()=>{class v extends oi{constructor(){super("twitter.com")}static credential(_,E){return Ts._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:x}=_;if(!E||!x)return null;try{return v.credential(E,x)}catch(P){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Yl(v,p){return ai.apply(this,arguments)}function ai(){return(ai=(0,h.Z)(function*(v,p){return zr(v,"POST","/v1/accounts:signUp",on(v,p))})).apply(this,arguments)}class Ir{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,E,x=!1){return(0,h.Z)(function*(){const P=yield $._fromIdTokenResponse(p,E,x),W=Af(E);return new Ir({user:P,providerId:W,_tokenResponse:E,operationType:_})})()}static _forOperation(p,_,E){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const x=Af(E);return new Ir({user:p,providerId:x,_tokenResponse:E,operationType:_})})()}}function Af(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Ld(){return(Ld=(0,h.Z)(function*(v){var p;const _=ke(v);if(yield _._initializationPromise,null===(p=_.currentUser)||void 0===p?void 0:p.isAnonymous)return new Ir({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield Yl(_,{returnSecureToken:!0}),x=yield Ir._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Jl extends F.ZR{constructor(p,_,E,x){var P;super(_.code,_.message),this.operationType=E,this.user=x,Object.setPrototypeOf(this,Jl.prototype),this.customData={appName:p.name,tenantId:null!==(P=p.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,_,E,x){return new Jl(p,_,E,x)}}function Xl(v,p,_,E){return("reauthenticate"===p?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Jl._fromErrorAndOperation(v,P,p,E):P})}function Ss(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function tc(){return(tc=(0,h.Z)(function*(v,p){const _=(0,F.m9)(v);yield co(!0,_,p);const{providerUserInfo:E}=yield gr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),x=Ss(E||[]);return _.providerData=_.providerData.filter(P=>x.has(P.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Cn(v,p){return Da.apply(this,arguments)}function Da(){return(Da=(0,h.Z)(function*(v,p,_=!1){const E=yield Er(v,p._linkToIdToken(v.auth,yield v.getIdToken()),_);return Ir._forOperation(v,"link",E)})).apply(this,arguments)}function co(v,p,_){return fn.apply(this,arguments)}function fn(){return(fn=(0,h.Z)(function*(v,p,_){yield br(p);const x=!1===v?"provider-already-linked":"no-such-provider";re(Ss(p.providerData).has(_)===v,p.auth,x)})).apply(this,arguments)}function Vd(v,p){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,h.Z)(function*(v,p,_=!1){const{auth:E}=v,x="reauthenticate";try{const P=yield Er(v,Xl(E,x,p,v),_);re(P.idToken,E,"internal-error");const W=ot(P.idToken);re(W,E,"internal-error");const{sub:ae}=W;return re(v.uid===ae,E,"user-mismatch"),Ir._forOperation(v,x,P)}catch(P){throw"auth/user-not-found"===(null==P?void 0:P.code)&&Se(E,"user-mismatch"),P}})).apply(this,arguments)}function jo(v,p){return Or.apply(this,arguments)}function Or(){return(Or=(0,h.Z)(function*(v,p,_=!1){const E="signIn",x=yield Xl(v,E,p),P=yield Ir._fromIdTokenResponse(v,E,x);return _||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Wn(v,p){return al.apply(this,arguments)}function al(){return(al=(0,h.Z)(function*(v,p){return jo(ke(v),p)})).apply(this,arguments)}function $i(v,p){return kr.apply(this,arguments)}function kr(){return(kr=(0,h.Z)(function*(v,p){const _=(0,F.m9)(v);return yield co(!1,_,p.providerId),Cn(_,p)})).apply(this,arguments)}function ho(v,p){return As.apply(this,arguments)}function As(){return(As=(0,h.Z)(function*(v,p){return Vd((0,F.m9)(v),p)})).apply(this,arguments)}function eu(v,p){return li.apply(this,arguments)}function li(){return(li=(0,h.Z)(function*(v,p){return zr(v,"POST","/v1/accounts:signInWithCustomToken",on(v,p))})).apply(this,arguments)}function po(){return(po=(0,h.Z)(function*(v,p){const _=ke(v),E=yield eu(_,{token:p,returnSecureToken:!0}),x=yield Ir._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class gt{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?tu._fromServerResponse(p,_):Se(p,"internal-error")}}class tu extends gt{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new tu(_)}}function ll(v,p,_){var E;re((null===(E=_.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),re(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(re(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(re(_.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function ru(){return(ru=(0,h.Z)(function*(v,p,_){const E=(0,F.m9)(v),x={requestType:"PASSWORD_RESET",email:p};_&&ll(E,x,_),yield Gl(E,x)})).apply(this,arguments)}function nc(){return(nc=(0,h.Z)(function*(v,p,_){yield zn((0,F.m9)(v),{oobCode:p,newPassword:_})})).apply(this,arguments)}function Ie(){return(Ie=(0,h.Z)(function*(v,p){yield Lo((0,F.m9)(v),{oobCode:p})})).apply(this,arguments)}function jt(v,p){return ic.apply(this,arguments)}function ic(){return(ic=(0,h.Z)(function*(v,p){const _=(0,F.m9)(v),E=yield zn(_,{oobCode:p}),x=E.requestType;switch(re(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(E.mfaInfo,_,"internal-error");default:re(E.email,_,"internal-error")}let P=null;return E.mfaInfo&&(P=gt._fromServerResponse(ke(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:P},operation:x}})).apply(this,arguments)}function Sa(){return(Sa=(0,h.Z)(function*(v,p){const{data:_}=yield jt((0,F.m9)(v),p);return _.email})).apply(this,arguments)}function ui(){return(ui=(0,h.Z)(function*(v,p,_){const E=ke(v),x=yield Yl(E,{returnSecureToken:!0,email:p,password:_}),P=yield Ir._fromIdTokenResponse(E,"signIn",x);return yield E._updateCurrentUser(P.user),P})).apply(this,arguments)}function Ud(){return(Ud=(0,h.Z)(function*(v,p,_){const E=(0,F.m9)(v),x={requestType:"EMAIL_SIGNIN",email:p};re(_.handleCodeInApp,E,"argument-error"),_&&ll(E,x,_),yield Hi(E,x)})).apply(this,arguments)}function go(){return(go=(0,h.Z)(function*(v,p,_){const E=(0,F.m9)(v),x=Xu.credentialWithLink(p,_||St());return re(x._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Wn(E,x)})).apply(this,arguments)}function Tr(v,p){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:createAuthUri",on(v,p))})).apply(this,arguments)}function mo(){return(mo=(0,h.Z)(function*(v,p){const E={identifier:p,continueUri:sn()?St():"http://localhost"},{signinMethods:x}=yield Tr((0,F.m9)(v),E);return x||[]})).apply(this,arguments)}function lc(){return(lc=(0,h.Z)(function*(v,p){const _=(0,F.m9)(v),x={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&ll(_.auth,x,p);const{email:P}=yield ur(_.auth,x);P!==v.email&&(yield v.reload())})).apply(this,arguments)}function lu(){return(lu=(0,h.Z)(function*(v,p,_){const E=(0,F.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};_&&ll(E.auth,P,_);const{email:W}=yield Md(E.auth,P);W!==v.email&&(yield v.reload())})).apply(this,arguments)}function uc(v,p){return ul.apply(this,arguments)}function ul(){return(ul=(0,h.Z)(function*(v,p){return qt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function cc(){return(cc=(0,h.Z)(function*(v,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const E=(0,F.m9)(v),P={idToken:yield E.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},W=yield Er(E,uc(E.auth,P));E.displayName=W.displayName||null,E.photoURL=W.photoUrl||null;const ae=E.providerData.find(({providerId:He})=>"password"===He);ae&&(ae.displayName=E.displayName,ae.photoURL=E.photoURL),yield E._updateTokensIfNecessary(W)})).apply(this,arguments)}function hc(v,p,_){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,h.Z)(function*(v,p,_){const{auth:E}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(P.email=p),_&&(P.password=_);const W=yield Er(v,Nt(E,P));yield v._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class $o{constructor(p,_,E={}){this.isNewUser=p,this.providerId=_,this.profile=E}}class Hd extends $o{constructor(p,_,E,x){super(p,_,E),this.username=x}}class $d extends $o{constructor(p,_){super(p,"facebook.com",_)}}class Go extends Hd{constructor(p,_){super(p,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class _o extends $o{constructor(p,_){super(p,"google.com",_)}}class fc extends Hd{constructor(p,_,E){super(p,"twitter.com",_,E)}}function Fr(v){const{user:p,_tokenResponse:_}=v;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function jd(v){var p,_;if(!v)return null;const{providerId:E}=v,x=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&(null==v?void 0:v.idToken)){const W=null===(_=null===(p=ot(v.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(W)return new $o(P,"anonymous"!==W&&"custom"!==W?W:null)}if(!E)return null;switch(E){case"facebook.com":return new $d(P,x);case"github.com":return new Go(P,x);case"google.com":return new _o(P,x);case"twitter.com":return new fc(P,x,v.screenName||null);case"custom":case"anonymous":return new $o(P,null);default:return new $o(P,E,x)}}(_)}class xs{constructor(p,_){this.type=p,this.credential=_}static _fromIdtoken(p){return new xs("enroll",p)}static _fromMfaPendingCredential(p){return new xs("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,E;if(null==p?void 0:p.multiFactorSession){if(null===(_=p.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return xs._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(E=p.multiFactorSession)||void 0===E?void 0:E.idToken)return xs._fromIdtoken(p.multiFactorSession.idToken)}return null}}class cl{constructor(p,_,E){this.session=p,this.hints=_,this.signInResolver=E}static _fromError(p,_){const E=ke(p),x=_.customData._serverResponse,P=(x.mfaInfo||[]).map(ae=>gt._fromServerResponse(E,ae));re(x.mfaPendingCredential,E,"internal-error");const W=xs._fromMfaPendingCredential(x.mfaPendingCredential);return new cl(W,P,function(){var ae=(0,h.Z)(function*(He){const nt=yield He._process(E,W);delete x.mfaInfo,delete x.mfaPendingCredential;const bt=Object.assign(Object.assign({},x),{idToken:nt.idToken,refreshToken:nt.refreshToken});switch(_.operationType){case"signIn":const dt=yield Ir._fromIdTokenResponse(E,_.operationType,bt);return yield E._updateCurrentUser(dt.user),dt;case"reauthenticate":return re(_.user,E,"internal-error"),Ir._forOperation(_.user,_.operationType,bt);default:Se(E,"internal-error")}});return function(He){return ae.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,h.Z)(function*(){return _.signInResolver(p)})()}}function tr(v,p){return qt(v,"POST","/v2/accounts/mfaEnrollment:start",on(v,p))}class Rs{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>gt._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Rs(p)}getSession(){var p=this;return(0,h.Z)(function*(){return xs._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,_){var E=this;return(0,h.Z)(function*(){const x=p,P=yield E.getSession(),W=yield Er(E.user,x._process(E.user.auth,P,_));return yield E.user._updateTokensIfNecessary(W),E.user.reload()})()}unenroll(p){var _=this;return(0,h.Z)(function*(){const E="string"==typeof p?p:p.uid,x=yield _.user.getIdToken(),P=yield Er(_.user,function pm(v,p){return qt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",on(v,p))}(_.user.auth,{idToken:x,mfaEnrollmentId:E}));_.enrolledFactors=_.enrolledFactors.filter(({uid:W})=>W!==E),yield _.user._updateTokensIfNecessary(P);try{yield _.user.reload()}catch(W){if("auth/user-token-expired"!==W.code)throw W}})()}}const Ra=new WeakMap,mc="__sak";class Ms{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(mc,"1"),this.storage.removeItem(mc),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const In=(()=>{class v extends Ms{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function _c(){const v=(0,F.z$)();return nn(v)||_r(v)}()&&function ar(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=bs(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const x=this.storage.getItem(E),P=this.localCache[E];x!==P&&_(E,P,x)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((ae,He,nt)=>{this.notifyListeners(ae,nt)});const x=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ae=this.storage.getItem(x);if(_.newValue!==ae)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!E)return}const P=()=>{const ae=this.storage.getItem(x);!E&&this.localCache[x]===ae||this.notifyListeners(x,ae)},W=this.storage.getItem(x);!function nl(){return(0,F.w1)()&&10===document.documentMode}()||W===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,E){this.localCache[_]=E;const x=this.listeners[_];if(x)for(const P of Array.from(x))P(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var x=()=>super._set,P=this;return(0,h.Z)(function*(){yield x().call(P,_,E),P.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,x=this;return(0,h.Z)(function*(){const P=yield E().call(x,_);return x.localCache[_]=JSON.stringify(P),P})()}_remove(_){var E=()=>super._remove,x=this;return(0,h.Z)(function*(){yield E().call(x,_),delete x.localCache[_]})()}}return v.type="LOCAL",v})(),Ns=(()=>{class v extends Ms{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return v.type="SESSION",v})();let dl=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(P=>P.isListeningto(_));if(E)return E;const x=new v(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,h.Z)(function*(){const x=_,{eventId:P,eventType:W,data:ae}=x.data,He=E.handlersMap[W];if(!(null==He?void 0:He.size))return;x.ports[0].postMessage({status:"ack",eventId:P,eventType:W});const nt=Array.from(He).map(function(){var dt=(0,h.Z)(function*(Fn){return Fn(x.origin,ae)});return function(Fn){return dt.apply(this,arguments)}}()),bt=yield function vc(v){return Promise.all(v.map(function(){var p=(0,h.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return p.apply(this,arguments)}}()))}(nt);x.ports[0].postMessage({status:"done",eventId:P,eventType:W,response:bt})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function qo(v="",p=10){let _="";for(let E=0;E<p;E++)_+=Math.floor(10*Math.random());return v+_}class Wd{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,E=50){var x=this;return(0,h.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let W,ae;return new Promise((He,nt)=>{const bt=qo("",20);P.port1.start();const dt=setTimeout(()=>{nt(new Error("unsupported_event"))},E);ae={messageChannel:P,onMessage(Fn){const xi=Fn;if(xi.data.eventId===bt)switch(xi.data.status){case"ack":clearTimeout(dt),W=setTimeout(()=>{nt(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),He(xi.data.response);break;default:clearTimeout(dt),clearTimeout(W),nt(new Error("invalid_response"))}}},x.handlers.add(ae),P.port1.addEventListener("message",ae.onMessage),x.target.postMessage({eventType:p,eventId:bt,data:_},[P.port2])}).finally(()=>{ae&&x.removeMessageHandler(ae)})})()}}function an(){return window}function yn(){return void 0!==an().WorkerGlobalScope&&"function"==typeof an().importScripts}function vo(){return(vo=(0,h.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const cu="firebaseLocalStorageDb",Wo="firebaseLocalStorage",Ti="fbase_key";class cr{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Ma(v,p){return v.transaction([Wo],p?"readwrite":"readonly").objectStore(Wo)}function Ko(){const v=indexedDB.open(cu,1);return new Promise((p,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(Wo,{keyPath:Ti})}catch(x){_(x)}}),v.addEventListener("success",(0,h.Z)(function*(){const E=v.result;E.objectStoreNames.contains(Wo)?p(E):(E.close(),yield function ci(){const v=indexedDB.deleteDatabase(cu);return new cr(v).toPromise()}(),p(yield Ko()))}))})}function Ec(v,p,_){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,h.Z)(function*(v,p,_){const E=Ma(v,!0).put({[Ti]:p,value:_});return new cr(E).toPromise()})).apply(this,arguments)}function Di(){return(Di=(0,h.Z)(function*(v,p){const _=Ma(v,!1).get(p),E=yield new cr(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function wo(v,p){const _=Ma(v,!0).delete(p);return new cr(_).toPromise()}const di=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,h.Z)(function*(){return _.db||(_.db=yield Ko()),_.db})()}_withRetries(_){var E=this;return(0,h.Z)(function*(){let x=0;for(;;)try{const P=yield E._openDb();return yield _(P)}catch(P){if(x++>3)throw P;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,h.Z)(function*(){return yn()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,h.Z)(function*(){_.receiver=dl._getInstance(function wc(){return yn()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(x,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(x,P){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(x,P){return["keyChanged"]});return function(x,P){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,h.Z)(function*(){var E,x;if(_.activeServiceWorker=yield function mt(){return vo.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Wd(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);!P||(null===(E=P[0])||void 0===E?void 0:E.fulfilled)&&(null===(x=P[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function mm(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ko();return yield Ec(_,mc,"1"),yield wo(_,mc),!0}catch(_){}return!1})()}_withPendingWrite(_){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var x=this;return(0,h.Z)(function*(){return x._withPendingWrite((0,h.Z)(function*(){return yield x._withRetries(P=>Ec(P,_,E)),x.localCache[_]=E,x.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,h.Z)(function*(){const x=yield E._withRetries(P=>function Yo(v,p){return Di.apply(this,arguments)}(P,_));return E.localCache[_]=x,x})()}_remove(_){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(x=>wo(x,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,h.Z)(function*(){const E=yield _._withRetries(W=>{const ae=Ma(W,!1).getAll();return new cr(ae).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const x=[],P=new Set;for(const{fbase_key:W,value:ae}of E)P.add(W),JSON.stringify(_.localCache[W])!==JSON.stringify(ae)&&(_.notifyListeners(W,ae),x.push(W));for(const W of Object.keys(_.localCache))_.localCache[W]&&!P.has(W)&&(_.notifyListeners(W,null),x.push(W));return x})()}notifyListeners(_,E){this.localCache[_]=E;const x=this.listeners[_];if(x)for(const P of Array.from(x))P(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Kd(v,p){return qt(v,"POST","/v2/accounts/mfaSignIn:start",on(v,p))}function qi(){return(qi=(0,h.Z)(function*(v){return(yield qt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Jo(v){return new Promise((p,_)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=p,E.onerror=x=>{const P=Ee("internal-error");P.customData=x,_(P)},E.type="text/javascript",E.charset="UTF-8",function Ic(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(E)})}function fl(v){return`__${v}${Math.floor(1e6*Math.random())}`}const Si=1e12;class Zd{constructor(p){this.auth=p,this.counter=Si,this._widgets=new Map}render(p,_){const E=this.counter;return this._widgets.set(E,new du(p,this.auth.name,_||{})),this.counter++,E}reset(p){var _;const E=p||Si;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(p){var _;return(null===(_=this._widgets.get(p||Si))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,h.Z)(function*(){var E;return null===(E=_._widgets.get(p||Si))||void 0===E||E.execute(),""})()}}class du{constructor(p,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof p?document.getElementById(p):p;re(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Xo(v){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Na=fl("rcb"),Mf=new mn(3e4,6e4);class Yd{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!an().grecaptcha}load(p,_=""){return re(function _m(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(an().grecaptcha):new Promise((E,x)=>{const P=an().setTimeout(()=>{x(Ee(p,"network-request-failed"))},Mf.get());an()[Na]=()=>{an().clearTimeout(P),delete an()[Na];const ae=an().grecaptcha;if(!ae)return void x(Ee(p,"internal-error"));const He=ae.render;ae.render=(nt,bt)=>{const dt=He(nt,bt);return this.counter++,dt},this.hostLanguage=_,E(ae)},Jo(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Na,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),x(Ee(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!an().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Qd{load(p){return(0,h.Z)(function*(){return new Zd(p)})()}clearedOneInstance(){}}const Tc="recaptcha",Jd={theme:"light",type:"image"};class Nf{constructor(p,_=Object.assign({},Jd),E){this.parameters=_,this.type=Tc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ke(E),this.isInvisible="invisible"===this.parameters.size,re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof p?document.getElementById(p):p;re(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Qd:new Yd,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(_)||new Promise(P=>{const W=ae=>{!ae||(p.tokenChangeListeners.delete(W),P(ae))};p.tokenChangeListeners.add(W),p.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof p)p(_);else if("string"==typeof p){const E=an()[p];"function"==typeof E&&E(_)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){re(sn()&&!yn(),p.auth,"internal-error"),yield function Xd(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function Cc(v){return qi.apply(this,arguments)}(p.auth);re(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class as{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Ia._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function On(){return(On=(0,h.Z)(function*(v,p,_){const E=ke(v),x=yield Lr(E,p,(0,F.m9)(_));return new as(x,P=>Wn(E,P))})).apply(this,arguments)}function hi(){return(hi=(0,h.Z)(function*(v,p,_){const E=(0,F.m9)(v);yield co(!1,E,"phone");const x=yield Lr(E.auth,p,(0,F.m9)(_));return new as(x,P=>$i(E,P))})).apply(this,arguments)}function fu(){return(fu=(0,h.Z)(function*(v,p,_){const E=(0,F.m9)(v),x=yield Lr(E.auth,p,(0,F.m9)(_));return new as(x,P=>ho(E,P))})).apply(this,arguments)}function Lr(v,p,_){return zi.apply(this,arguments)}function zi(){return(zi=(0,h.Z)(function*(v,p,_){var E;const x=yield _.verify();try{let P;if(re("string"==typeof x,v,"argument-error"),re(_.type===Tc,v,"argument-error"),P="string"==typeof p?{phoneNumber:p}:p,"session"in P){const W=P.session;if("phoneNumber"in P)return re("enroll"===W.type,v,"internal-error"),(yield tr(v,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{re("signin"===W.type,v,"internal-error");const ae=(null===(E=P.multiFactorHint)||void 0===E?void 0:E.uid)||P.multiFactorUid;return re(ae,v,"missing-multi-factor-info"),(yield Kd(v,{mfaPendingCredential:W.credential,mfaEnrollmentId:ae,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield um(v,{phoneNumber:P.phoneNumber,recaptchaToken:x});return W}}finally{_._reset()}})).apply(this,arguments)}function ls(){return(ls=(0,h.Z)(function*(v,p){yield Cn((0,F.m9)(v),p)})).apply(this,arguments)}let fi=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=ke(_)}verifyPhoneNumber(_,E){return Lr(this.auth,_,(0,F.m9)(E))}static credential(_,E){return Ia._fromVerification(_,E)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:x}=_;return E&&x?Ia._fromTokenResponse(E,x):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function pi(v,p){return p?oe(p):(re(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class pl extends dn{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return er(p,this._buildIdpRequest())}_linkToIdToken(p,_){return er(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return er(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function gl(v){return jo(v.auth,new pl(v),v.bypassAuthState)}function eh(v){const{auth:p,user:_}=v;return re(_,p,"internal-error"),Vd(_,new pl(v),v.bypassAuthState)}function Of(v){return th.apply(this,arguments)}function th(){return(th=(0,h.Z)(function*(v){const{auth:p,user:_}=v;return re(_,p,"internal-error"),Cn(_,new pl(v),v.bypassAuthState)})).apply(this,arguments)}class Ai{constructor(p,_,E,x,P=!1){this.auth=p,this.resolver=E,this.user=x,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,h.Z)(function*(E,x){p.pendingPromise={resolve:E,reject:x};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(P){p.reject(P)}});return function(E,x){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:x,postBody:P,tenantId:W,error:ae,type:He}=p;if(ae)return void _.reject(ae);const nt={auth:_.auth,requestUri:E,sessionId:x,tenantId:W||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(He)(nt))}catch(bt){_.reject(bt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return gl;case"linkViaPopup":case"linkViaRedirect":return Of;case"reauthViaPopup":case"reauthViaRedirect":return eh;default:Se(this.auth,"internal-error")}}resolve(p){se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const kf=new mn(2e3,1e4);function Ff(){return(Ff=(0,h.Z)(function*(v,p,_){const E=ke(v);qe(v,p,Ds);const x=pi(E,_);return new ks(E,"signInViaPopup",p,x).executeNotNull()})).apply(this,arguments)}function _l(){return(_l=(0,h.Z)(function*(v,p,_){const E=(0,F.m9)(v);qe(E.auth,p,Ds);const x=pi(E.auth,_);return new ks(E.auth,"reauthViaPopup",p,x,E).executeNotNull()})).apply(this,arguments)}function Dc(){return(Dc=(0,h.Z)(function*(v,p,_){const E=(0,F.m9)(v);qe(E.auth,p,Ds);const x=pi(E.auth,_);return new ks(E.auth,"linkViaPopup",p,x,E).executeNotNull()})).apply(this,arguments)}let ks=(()=>{class v extends Ai{constructor(_,E,x,P,W){super(_,E,P,W),this.provider=x,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,h.Z)(function*(){const E=yield _.execute();return re(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,h.Z)(function*(){se(1===_.filter.length,"Popup operations only handle one event");const E=qo();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Ee(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,x;this.pollId=(null===(x=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,kf.get())};_()}}return v.currentPopupAction=null,v})();const Vr=new Map;class Pa extends Ai{constructor(p,_,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,h.Z)(function*(){let E=Vr.get(_.auth._key());if(!E){try{const P=(yield function Oa(v,p){return Sc.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;E=()=>Promise.resolve(P)}catch(x){E=()=>Promise.reject(x)}Vr.set(_.auth._key(),E)}return _.bypassAuthState||Vr.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(E,p);if("unknown"!==p.type){if(p.eventId){const x=yield E.auth._redirectUserForId(p.eventId);if(x)return E.user=x,_().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Sc(){return(Sc=(0,h.Z)(function*(v,p){const _=S(p),E=T(v);if(!(yield E._isAvailable()))return!1;const x="true"===(yield E._get(_));return yield E._remove(_),x})).apply(this,arguments)}function Fs(v,p){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,h.Z)(function*(v,p){return T(v)._set(S(p),"true")})).apply(this,arguments)}function T(v){return oe(v._redirectPersistence)}function S(v){return de("pendingRedirect",v.config.apiKey,v.name)}function Y(){return(Y=(0,h.Z)(function*(v,p,_){const E=ke(v);qe(v,p,Ds);const x=pi(E,_);return yield Fs(x,E),x._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function Qe(){return(Qe=(0,h.Z)(function*(v,p,_){const E=(0,F.m9)(v);qe(E.auth,p,Ds);const x=pi(E.auth,_);yield Fs(x,E.auth);const P=yield ka(E);return x._openRedirect(E.auth,p,"reauthViaRedirect",P)})).apply(this,arguments)}function Qt(){return(Qt=(0,h.Z)(function*(v,p,_){const E=(0,F.m9)(v);qe(E.auth,p,Ds);const x=pi(E.auth,_);yield co(!1,E,p.providerId),yield Fs(x,E.auth);const P=yield ka(E);return x._openRedirect(E.auth,p,"linkViaRedirect",P)})).apply(this,arguments)}function Kn(){return(Kn=(0,h.Z)(function*(v,p){return yield ke(v)._initializationPromise,kn(v,p,!1)})).apply(this,arguments)}function kn(v,p){return yl.apply(this,arguments)}function yl(){return(yl=(0,h.Z)(function*(v,p,_=!1){const E=ke(v),x=pi(E,p),W=yield new Pa(E,x,_).execute();return W&&!_&&(delete W.user._redirectEventId,yield E._persistUserIfCurrent(W.user),yield E._setRedirectUser(null,p)),W})).apply(this,arguments)}function ka(v){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,h.Z)(function*(v){const p=qo(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class gi{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(_=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function nh(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ym(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var E;if(p.error&&!ym(p)){const x=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(Ee(this.auth,x))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const E=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wi(p))}saveEventToCache(p){this.cachedEventUids.add(Wi(p)),this.lastProcessedEventTime=Date.now()}}function Wi(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function ym({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===(null==p?void 0:p.code)}function xc(v){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,h.Z)(function*(v,p={}){return qt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const Vf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rh=/^https?/;function Ls(){return(Ls=(0,h.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield xc(v);for(const _ of p)try{if(mu(_))return}catch(E){}Se(v,"unauthorized-domain")})).apply(this,arguments)}function mu(v){const p=St(),{protocol:_,hostname:E}=new URL(p);if(v.startsWith("chrome-extension://")){const W=new URL(v);return""===W.hostname&&""===E?"chrome-extension:"===_&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&W.hostname===E}if(!rh.test(_))return!1;if(Vf.test(v))return E===v;const x=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(E)}const vm=new mn(3e4,6e4);function wm(){const v=an().___jsl;if(null==v?void 0:v.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let _u=null;function Em(v){return _u=_u||function Bf(v){return new Promise((p,_)=>{var E,x,P;function W(){wm(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{wm(),_(Ee(v,"network-request-failed"))},timeout:vm.get()})}if(null===(x=null===(E=an().gapi)||void 0===E?void 0:E.iframes)||void 0===x?void 0:x.Iframe)p(gapi.iframes.getContext());else{if(!(null===(P=an().gapi)||void 0===P?void 0:P.load)){const ae=fl("iframefcb");return an()[ae]=()=>{gapi.load?W():_(Ee(v,"network-request-failed"))},Jo(`https://apis.google.com/js/api.js?onload=${ae}`).catch(He=>_(He))}W()}}).catch(p=>{throw _u=null,p})}(v),_u}const ih=new mn(5e3,15e3),La={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Rc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vl(v){const p=v.config;re(p.authDomain,v,"auth-domain-config-required");const _=p.emulator?_n(p,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:v.name,v:le.SDK_VERSION},x=Rc.get(v.config.apiHost);x&&(E.eid=x);const P=v._getFrameworks();return P.length&&(E.fw=P.join(",")),`${_}?${(0,F.xO)(E).slice(1)}`}function Cm(){return Cm=(0,h.Z)(function*(v){const p=yield Em(v),_=an().gapi;return re(_,v,"internal-error"),p.open({where:document.body,url:vl(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:La,dontclear:!0},E=>new Promise(function(){var x=(0,h.Z)(function*(P,W){yield E.restyle({setHideOnLeave:!1});const ae=Ee(v,"network-request-failed"),He=an().setTimeout(()=>{W(ae)},ih.get());function nt(){an().clearTimeout(He),P(E)}E.ping(nt).then(nt,()=>{W(ae)})});return function(P,W){return x.apply(this,arguments)}}()))}),Cm.apply(this,arguments)}const BS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class sh{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function qf(v,p,_,E,x,P){re(v.config.authDomain,v,"auth-domain-config-required"),re(v.config.apiKey,v,"invalid-api-key");const W={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:E,v:le.SDK_VERSION,eventId:x};if(p instanceof Ds){p.setDefaultLanguage(v.languageCode),W.providerId=p.providerId||"",(0,F.xb)(p.getCustomParameters())||(W.customParameters=JSON.stringify(p.getCustomParameters()));for(const[He,nt]of Object.entries(P||{}))W[He]=nt}if(p instanceof oi){const He=p.getScopes().filter(nt=>""!==nt);He.length>0&&(W.scopes=He.join(","))}v.tenantId&&(W.tid=v.tenantId);const ae=W;for(const He of Object.keys(ae))void 0===ae[He]&&delete ae[He];return`${function ob({config:v}){return v.emulator?_n(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,F.xO)(ae).slice(1)}`}const us="webStorageSupport";class ah extends class ov{constructor(p){this.factorId=p}_process(p,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,E);case"signin":return this._finalizeSignIn(p,_.credential);default:return Z("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new ah(p)}_finalizeEnroll(p,_,E){return function Gd(v,p){return qt(v,"POST","/v2/accounts/mfaEnrollment:finalize",on(v,p))}(p,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function hl(v,p){return qt(v,"POST","/v2/accounts/mfaSignIn:finalize",on(v,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let zf=(()=>{class v{constructor(){}static assertion(_){return ah._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var Dm="@firebase/auth",Wf="0.19.11";class Sm{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,h.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(E=>{var x;p((null===(x=E)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function wl(){return window}function El(){return(El=(0,h.Z)(function*(v,p,_){var E;const{BuildInfo:x}=wl();se(p.sessionId,"AuthEvent did not contain a session ID");const P=yield ab(p.sessionId),W={};return _r()?W.ibi=x.packageName:jn()?W.apn=x.packageName:Se(v,"operation-not-supported-in-this-environment"),x.displayName&&(W.appDisplayName=x.displayName),W.sessionId=P,qf(v,_,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,W)})).apply(this,arguments)}function cs(){return(cs=(0,h.Z)(function*(v){const{BuildInfo:p}=wl(),_={};_r()?_.iosBundleId=p.packageName:jn()?_.androidPackageName=p.packageName:Se(v,"operation-not-supported-in-this-environment"),yield xc(v,_)})).apply(this,arguments)}function wu(){return(wu=(0,h.Z)(function*(v,p,_){const{cordova:E}=wl();let x=()=>{};try{yield new Promise((P,W)=>{let ae=null;function He(){var dt;P();const Fn=null===(dt=E.plugins.browsertab)||void 0===dt?void 0:dt.close;"function"==typeof Fn&&Fn(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function nt(){ae||(ae=window.setTimeout(()=>{W(Ee(v,"redirect-cancelled-by-user"))},2e3))}function bt(){"visible"===(null==document?void 0:document.visibilityState)&&nt()}p.addPassiveListener(He),document.addEventListener("resume",nt,!1),jn()&&document.addEventListener("visibilitychange",bt,!1),x=()=>{p.removePassiveListener(He),document.removeEventListener("resume",nt,!1),document.removeEventListener("visibilitychange",bt,!1),ae&&window.clearTimeout(ae)}})}finally{x()}})).apply(this,arguments)}function ab(v){return Kf.apply(this,arguments)}function Kf(){return(Kf=(0,h.Z)(function*(v){const p=lb(v),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(x=>x.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function lb(v){if(se(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),_=new Uint8Array(p);for(let E=0;E<v.length;E++)_[E]=v.charCodeAt(E);return _}!function av(v){(0,le._registerComponent)(new ie.wA("auth",(p,{options:_})=>{const E=p.getProvider("app").getImmediate(),x=p.getProvider("heartbeat"),{apiKey:P,authDomain:W}=E.options;return((ae,He)=>{re(P&&!P.includes(":"),"invalid-api-key",{appName:ae.name}),re(!(null==W?void 0:W.includes(":")),"argument-error",{appName:ae.name});const nt={apiKey:P,authDomain:W,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rl(v)},bt=new Ei(ae,He,nt);return function ue(v,p){const _=(null==p?void 0:p.persistence)||[],E=(Array.isArray(_)?_:[_]).map(oe);(null==p?void 0:p.errorMap)&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(E,null==p?void 0:p.popupRedirectResolver)}(bt,_),bt})(E,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,E)=>{p.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new ie.wA("auth-internal",p=>{const _=ke(p.getProvider("auth").getImmediate());return new Sm(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)(Dm,Wf,function Mc(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,le.registerVersion)(Dm,Wf,"esm2017")}("Browser");class Pc extends gi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,h.Z)(function*(){yield p.initPromise})()}}function uv(v){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,h.Z)(function*(v){const p=yield lh()._get(Yf(v));return p&&(yield lh()._remove(Yf(v))),p})).apply(this,arguments)}function cv(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const E=Math.floor(Math.random()*p.length);v.push(p.charAt(E))}return v.join("")}function lh(){return oe(In)}function Yf(v){return de("authEvent",v.config.apiKey,v.name)}function kc(v){if(!(null==v?void 0:v.includes("?")))return{};const[p,..._]=v.split("?");return(0,F.zd)(_.join("?"))}function ch(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function hh(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function hv(v=(0,F.z$)()){return!("file:"!==hh()&&"ionic:"!==hh()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ur(){try{const v=self.localStorage,p=qo();if(v)return v.setItem(p,"1"),v.removeItem(p),!function Fc(v=(0,F.z$)()){return function jS(){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)}()||function fv(v=(0,F.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,F.hl)()}catch(v){return Lc()&&(0,F.hl)()}return!1}function Lc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vc(){return(function Lm(){return"http:"===hh()||"https:"===hh()}()||(0,F.ru)()||hv())&&!function ub(){return(0,F.b$)()||(0,F.UG)()}()&&Ur()&&!Lc()}function Vm(){return hv()&&"undefined"!=typeof document}function Zn(){return(Zn=(0,h.Z)(function*(){return!!Vm()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const Dr={LOCAL:"local",NONE:"none",SESSION:"session"},hr=re,ds="persistence";function Bc(v){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,h.Z)(function*(v){yield v._initializationPromise;const p=jm(),_=de(ds,v.config.apiKey,v.name);p&&p.setItem(_,v._getPersistence())})).apply(this,arguments)}function jm(){var v;try{return(null===(v=function Uc(){return"undefined"!=typeof window?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch(p){return null}}const pv=re;class bo{constructor(){this.browserResolver=oe(class yu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ns,this._completeRedirectFn=kn}_openPopup(p,_,E,x){var P=this;return(0,h.Z)(function*(){var W;se(null===(W=P.eventManagers[p._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const ae=qf(p,_,E,St(),x);return function Va(v,p,_,E=500,x=600){const P=Math.max((window.screen.availHeight-x)/2,0).toString(),W=Math.max((window.screen.availWidth-E)/2,0).toString();let ae="";const He=Object.assign(Object.assign({},BS),{width:E.toString(),height:x.toString(),top:P,left:W}),nt=(0,F.z$)().toLowerCase();_&&(ae=Pr(nt)?"_blank":_),Et(nt)&&(p=p||"http://localhost",He.scrollbars="yes");const bt=Object.entries(He).reduce((Fn,[xi,Il])=>`${Fn}${xi}=${Il},`,"");if(function $l(v=(0,F.z$)()){var p;return _r(v)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(nt)&&"_self"!==ae)return function Gf(v,p){const _=document.createElement("a");_.href=v,_.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(p||"",ae),new sh(null);const dt=window.open(p||"",ae,bt);re(dt,v,"popup-blocked");try{dt.focus()}catch(Fn){}return new sh(dt)}(p,ae,qo())})()}_openRedirect(p,_,E,x){var P=this;return(0,h.Z)(function*(){return yield P._originValidation(p),function zo(v){an().location.href=v}(qf(p,_,E,St(),x)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:x,promise:P}=this.eventManagers[_];return x?Promise.resolve(x):(se(P,"If manager is not set, promise should be"),P)}const E=this.initAndGetManager(p);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(p){var _=this;return(0,h.Z)(function*(){const E=yield function sb(v){return Cm.apply(this,arguments)}(p),x=new gi(p);return E.register("authEvent",P=>(re(null==P?void 0:P.authEvent,p,"invalid-auth-event"),{status:x.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:x},_.iframes[p._key()]=E,x})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(us,{type:us},x=>{var P;const W=null===(P=null==x?void 0:x[0])||void 0===P?void 0:P[us];void 0!==W&&_(!!W),Se(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Uf(v){return Ls.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return bs()||nn()||_r()}}),this.cordovaResolver=oe(class Om{constructor(){this._redirectPersistence=Ns,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=kn}_initialize(p){var _=this;return(0,h.Z)(function*(){const E=p._key();let x=_.eventManagers.get(E);return x||(x=new Pc(p),_.eventManagers.set(E,x),_.attachCallbackListeners(p,x)),x})()}_openPopup(p){Se(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,E,x){var P=this;return(0,h.Z)(function*(){!function Nm(v){var p,_,E,x,P,W,ae,He,nt,bt;const dt=wl();re("function"==typeof(null===(p=null==dt?void 0:dt.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(void 0!==(null===(_=null==dt?void 0:dt.BuildInfo)||void 0===_?void 0:_.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re("function"==typeof(null===(P=null===(x=null===(E=null==dt?void 0:dt.cordova)||void 0===E?void 0:E.plugins)||void 0===x?void 0:x.browsertab)||void 0===P?void 0:P.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(He=null===(ae=null===(W=null==dt?void 0:dt.cordova)||void 0===W?void 0:W.plugins)||void 0===ae?void 0:ae.browsertab)||void 0===He?void 0:He.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(bt=null===(nt=null==dt?void 0:dt.cordova)||void 0===nt?void 0:nt.InAppBrowser)||void 0===bt?void 0:bt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const W=yield P._initialize(p);yield W.initialized(),W.resetRedirect(),function Ac(){Vr.clear()}(),yield P._originValidation(p);const ae=function Zf(v,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:cv(),postBody:null,tenantId:v.tenantId,error:Ee(v,"no-auth-event")}}(p,E,x);yield function lv(v,p){return lh()._set(Yf(v),p)}(p,ae);const He=yield function Rm(v,p,_){return El.apply(this,arguments)}(p,ae,_),nt=yield function vu(v){const{cordova:p}=wl();return new Promise(_=>{p.plugins.browsertab.isAvailable(E=>{let x=null;E?p.plugins.browsertab.openUrl(v):x=p.InAppBrowser.open(v,function ko(v=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),_(x)})})}(He);return function Mm(v,p,_){return wu.apply(this,arguments)}(p,W,nt)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Nc(v){return cs.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:E,handleOpenURL:x,BuildInfo:P}=wl(),W=setTimeout((0,h.Z)(function*(){yield uv(p),_.onEvent(ch())}),500),ae=function(){var bt=(0,h.Z)(function*(dt){clearTimeout(W);const Fn=yield uv(p);let xi=null;Fn&&(null==dt?void 0:dt.url)&&(xi=function bl(v,p){var _,E;const x=function uh(v){const p=kc(v),_=p.link?decodeURIComponent(p.link):void 0,E=kc(_).link,x=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return kc(x).link||x||E||_||v}(p);if(x.includes("/__/auth/callback")){const P=kc(x),W=P.firebaseError?function Qf(v){try{return JSON.parse(v)}catch(p){return null}}(decodeURIComponent(P.firebaseError)):null,ae=null===(E=null===(_=null==W?void 0:W.code)||void 0===_?void 0:_.split("auth/"))||void 0===E?void 0:E[1],He=ae?Ee(ae):null;return He?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:He,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:x,postBody:null}}return null}(Fn,dt.url)),_.onEvent(xi||ch())});return function(Fn){return bt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,ae);const He=x,nt=`${P.packageName.toLowerCase()}://`;wl().handleOpenURL=function(){var bt=(0,h.Z)(function*(dt){if(dt.toLowerCase().startsWith(nt)&&ae({url:dt}),"function"==typeof He)try{He(dt)}catch(Fn){console.error(Fn)}});return function(dt){return bt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ns,this._completeRedirectFn=kn}_initialize(p){var _=this;return(0,h.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,E,x){var P=this;return(0,h.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(p,_,E,x)})()}_openRedirect(p,_,E,x){var P=this;return(0,h.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(p,_,E,x)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Vm()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return pv(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,h.Z)(function*(){if(p.underlyingResolver)return;const _=yield function Xe(){return Zn.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function Jf(v){return v.unwrap()}function Co(v){return $m(v)}function $m(v){const{_tokenResponse:p}=v instanceof F.ZR?v.customData:v;if(!p)return null;if(!(v instanceof F.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return fi.credentialFromResult(v);const _=p.providerId;if(!_||"password"===_)return null;let E;switch(_){case"google.com":E=sl;break;case"facebook.com":E=Uo;break;case"github.com":E=ec;break;case"twitter.com":E=Zl;break;default:const{oauthIdToken:x,oauthAccessToken:P,oauthTokenSecret:W,pendingToken:ae,nonce:He}=p;return P||W||x||ae?ae?_.startsWith("saml.")?lo._create(_,ae):Ts._fromParams({providerId:_,signInMethod:_,pendingToken:ae,idToken:x,accessToken:P}):new Ta(_).credential({idToken:x,accessToken:P,rawNonce:He}):null}return v instanceof F.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function Br(v,p){return p.catch(_=>{throw _ instanceof F.ZR&&function cb(v,p){var _;const E=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new Gm(v,function uu(v,p){var _;const E=(0,F.m9)(v),x=p;return re(p.customData.operationType,E,"argument-error"),re(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),cl._fromError(E,x)}(v,p));else if(E){const x=$m(p),P=p;x&&(P.credential=x,P.tenantId=E.tenantId||void 0,P.email=E.email||void 0,P.phoneNumber=E.phoneNumber||void 0)}}(v,_),_}).then(_=>{const x=_.user;return{operationType:_.operationType,credential:Co(_),additionalUserInfo:Fr(_),user:ta.getOrCreate(x)}})}function fh(v,p){return ph.apply(this,arguments)}function ph(){return(ph=(0,h.Z)(function*(v,p){const _=yield p;return{verificationId:_.verificationId,confirm:E=>Br(v,_.confirm(E))}})).apply(this,arguments)}class Gm{constructor(p,_){this.resolver=_,this.auth=function Hm(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Br(Jf(this.auth),this.resolver.resolveSignIn(p))}}class ta{constructor(p){this._delegate=p,this.multiFactor=function qd(v){const p=(0,F.m9)(v);return Ra.has(p)||Ra.set(p,Rs._fromUser(p)),Ra.get(p)}(p)}static getOrCreate(p){return ta.USER_MAP.has(p)||ta.USER_MAP.set(p,new ta(p)),ta.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,h.Z)(function*(){return Br(_.auth,$i(_._delegate,p))})()}linkWithPhoneNumber(p,_){var E=this;return(0,h.Z)(function*(){return fh(E.auth,function hu(v,p,_){return hi.apply(this,arguments)}(E._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,h.Z)(function*(){return Br(_.auth,function Lf(v,p,_){return Dc.apply(this,arguments)}(_._delegate,p,bo))})()}linkWithRedirect(p){var _=this;return(0,h.Z)(function*(){return yield Bc(ke(_.auth)),function it(v,p,_){return function Ct(v,p,_){return Qt.apply(this,arguments)}(v,p,_)}(_._delegate,p,bo)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,h.Z)(function*(){return Br(_.auth,ho(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return fh(this.auth,function Kr(v,p,_){return fu.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return Br(this.auth,function ea(v,p,_){return _l.apply(this,arguments)}(this._delegate,p,bo))}reauthenticateWithRedirect(p){var _=this;return(0,h.Z)(function*(){return yield Bc(ke(_.auth)),function ne(v,p,_){return function Me(v,p,_){return Qe.apply(this,arguments)}(v,p,_)}(_._delegate,p,bo)})()}sendEmailVerification(p){return function Gi(v,p){return lc.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,h.Z)(function*(){return yield function ol(v,p){return tc.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function dc(v,p){return hc((0,F.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function Bd(v,p){return hc((0,F.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function pu(v,p){return ls.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function xa(v,p){return cc.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function au(v,p,_){return lu.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ta.USER_MAP=new WeakMap;const na=re;let Yn=(()=>{class v{constructor(_,E){if(this.app=_,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:x}=_.options;na(x,"invalid-api-key",{appName:_.name}),na(x,"invalid-api-key",{appName:_.name});const P="undefined"!=typeof window?bo:void 0;this._delegate=E.initialize({options:{persistence:Xf(x,_.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ta.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,E){!function bn(v,p,_){const E=ke(v);re(E._canInitEmulator,E,"emulator-config-failed"),re(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const x=!!(null==_?void 0:_.disableWarnings),P=Cr(p),{host:W,port:ae}=function ro(v){const p=Cr(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(E);if(x){const P=x[1];return{host:P,port:Xn(E.substr(P.length+1))}}{const[P,W]=E.split(":");return{host:P,port:Xn(W)}}}(p);E.config.emulator={url:`${P}//${W}${null===ae?"":`:${ae}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:W,port:ae,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function os(){function v(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,_,E)}applyActionCode(_){return function rc(v,p){return Ie.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return jt(this._delegate,_)}confirmPasswordReset(_,E){return function iu(v,p,_){return nc.apply(this,arguments)}(this._delegate,_,E)}createUserWithEmailAndPassword(_,E){var x=this;return(0,h.Z)(function*(){return Br(x._delegate,function Aa(v,p,_){return ui.apply(this,arguments)}(x._delegate,_,E))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function ou(v,p){return mo.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function ac(v,p){const _=Vo.parseLink(p);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,h.Z)(function*(){na(Vc(),_._delegate,"operation-not-supported-in-this-environment");const E=yield function At(v,p){return Kn.apply(this,arguments)}(_._delegate,bo);return E?Br(_._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function dv(v,p){ke(v)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,E,x){const{next:P,error:W,complete:ae}=gh(_,E,x);return this._delegate.onAuthStateChanged(P,W,ae)}onIdTokenChanged(_,E,x){const{next:P,error:W,complete:ae}=gh(_,E,x);return this._delegate.onIdTokenChanged(P,W,ae)}sendSignInLinkToEmail(_,E){return function oc(v,p,_){return Ud.apply(this,arguments)}(this._delegate,_,E)}sendPasswordResetEmail(_,E){return function nu(v,p,_){return ru.apply(this,arguments)}(this._delegate,_,E||void 0)}setPersistence(_){var E=this;return(0,h.Z)(function*(){let x;switch(function Um(v,p){hr(Object.values(Dr).includes(p),v,"invalid-persistence-type"),(0,F.b$)()?hr(p!==Dr.SESSION,v,"unsupported-persistence-type"):(0,F.UG)()?hr(p===Dr.NONE,v,"unsupported-persistence-type"):Lc()?hr(p===Dr.NONE||p===Dr.LOCAL&&(0,F.hl)(),v,"unsupported-persistence-type"):hr(p===Dr.NONE||Ur(),v,"unsupported-persistence-type")}(E._delegate,_),_){case Dr.SESSION:x=Ns;break;case Dr.LOCAL:x=(yield oe(di)._isAvailable())?di:In;break;case Dr.NONE:x=z;break;default:return Se("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(x)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Br(this._delegate,function Ql(v){return Ld.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Br(this._delegate,Wn(this._delegate,_))}signInWithCustomToken(_){return Br(this._delegate,function fo(v,p){return po.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,E){return Br(this._delegate,function sc(v,p,_){return Wn((0,F.m9)(v),Xu.credential(p,_))}(this._delegate,_,E))}signInWithEmailLink(_,E){return Br(this._delegate,function su(v,p,_){return go.apply(this,arguments)}(this._delegate,_,E))}signInWithPhoneNumber(_,E){return fh(this._delegate,function Pf(v,p,_){return On.apply(this,arguments)}(this._delegate,_,E))}signInWithPopup(_){var E=this;return(0,h.Z)(function*(){return na(Vc(),E._delegate,"operation-not-supported-in-this-environment"),Br(E._delegate,function ml(v,p,_){return Ff.apply(this,arguments)}(E._delegate,_,bo))})()}signInWithRedirect(_){var E=this;return(0,h.Z)(function*(){return na(Vc(),E._delegate,"operation-not-supported-in-this-environment"),yield Bc(E._delegate),function N(v,p,_){return function B(v,p,_){return Y.apply(this,arguments)}(v,p,_)}(E._delegate,_,bo)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function Dn(v,p){return Sa.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Dr,v})();function gh(v,p,_){let E=v;"function"!=typeof v&&({next:E,error:p,complete:_}=v);const x=E;return{next:W=>x(W&&ta.getOrCreate(W)),error:p,complete:_}}function Xf(v,p){const _=function Bm(v,p){const _=jm();if(!_)return[];const E=de(ds,v,p);switch(_.getItem(E)){case Dr.NONE:return[z];case Dr.LOCAL:return[di,Ns];case Dr.SESSION:return[Ns];default:return[]}}(v,p);if("undefined"!=typeof self&&!_.includes(di)&&_.push(di),"undefined"!=typeof window)for(const E of[In,Ns])_.includes(E)||_.push(E);return _.includes(z)||_.push(z),_}class Eu{constructor(){this.providerId="phone",this._delegate=new fi(Jf(J.Z.auth()))}static credential(p,_){return fi.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}Eu.PHONE_SIGN_IN_METHOD=fi.PHONE_SIGN_IN_METHOD,Eu.PROVIDER_ID=fi.PROVIDER_ID;const qm=re;class ep{constructor(p,_,E=J.Z.app()){var x;qm(null===(x=E.options)||void 0===x?void 0:x.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Nf(p,_,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function zm(v){v.INTERNAL.registerComponent(new ie.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new Yn(_,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Xu,FacebookAuthProvider:Uo,GithubAuthProvider:ec,GoogleAuthProvider:sl,OAuthProvider:Ta,SAMLAuthProvider:Ci,PhoneAuthProvider:Eu,PhoneMultiFactorGenerator:zf,RecaptchaVerifier:ep,TwitterAuthProvider:Zl,Auth:Yn,AuthCredential:dn,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.11")}(J.Z)},8306:(lt,De,L)=>{L.d(De,{y:()=>q});var h=L(930),J=L(727),F=L(8822),le=L(4671);var ie=L(2416),fe=L(576),ce=L(2806);let q=(()=>{class xe{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const ge=new xe;return ge.source=this,ge.operator=Ue,ge}subscribe(Ue,ge,Ce){const tt=function We(xe){return xe&&xe instanceof h.Lv||function ee(xe){return xe&&(0,fe.m)(xe.next)&&(0,fe.m)(xe.error)&&(0,fe.m)(xe.complete)}(xe)&&(0,J.Nn)(xe)}(Ue)?Ue:new h.Hp(Ue,ge,Ce);return(0,ce.x)(()=>{const{operator:Ze,source:Se}=this;tt.add(Ze?Ze.call(tt,Se):Se?this._subscribe(tt):this._trySubscribe(tt))}),tt}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(ge){Ue.error(ge)}}forEach(Ue,ge){return new(ge=G(ge))((Ce,tt)=>{const Ze=new h.Hp({next:Se=>{try{Ue(Se)}catch(Ee){tt(Ee),Ze.unsubscribe()}},error:tt,complete:Ce});this.subscribe(Ze)})}_subscribe(Ue){var ge;return null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(Ue)}[F.L](){return this}pipe(...Ue){return function _e(xe){return 0===xe.length?le.y:1===xe.length?xe[0]:function(Ue){return xe.reduce((ge,Ce)=>Ce(ge),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=G(Ue))((ge,Ce)=>{let tt;this.subscribe(Ze=>tt=Ze,Ze=>Ce(Ze),()=>ge(tt))})}}return xe.create=Oe=>new xe(Oe),xe})();function G(xe){var Oe;return null!==(Oe=null!=xe?xe:ie.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(lt,De,L)=>{L.d(De,{x:()=>ie});var h=L(8306),J=L(727);const le=(0,L(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=L(8737),_e=L(2806);let ie=(()=>{class ce extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const ee=new fe(this,this);return ee.operator=G,ee}_throwIfClosed(){if(this.closed)throw new le}next(G){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ee of this.currentObservers)ee.next(G)}})}error(G){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:ee}=this;for(;ee.length;)ee.shift().error(G)}})}complete(){(0,_e.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:ee,isStopped:We,observers:xe}=this;return ee||We?J.Lc:(this.currentObservers=null,xe.push(G),new J.w0(()=>{this.currentObservers=null,(0,te.P)(xe,G)}))}_checkFinalizedStatuses(G){const{hasError:ee,thrownError:We,isStopped:xe}=this;ee?G.error(We):xe&&G.complete()}asObservable(){const G=new h.y;return G.source=this,G}}return ce.create=(q,G)=>new fe(q,G),ce})();class fe extends ie{constructor(q,G){super(),this.destination=q,this.source=G}next(q){var G,ee;null===(ee=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===ee||ee.call(G,q)}error(q){var G,ee;null===(ee=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===ee||ee.call(G,q)}complete(){var q,G;null===(G=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===G||G.call(q)}_subscribe(q){var G,ee;return null!==(ee=null===(G=this.source)||void 0===G?void 0:G.subscribe(q))&&void 0!==ee?ee:J.Lc}}},930:(lt,De,L)=>{L.d(De,{Hp:()=>Ue,Lv:()=>ee});var h=L(576),J=L(727),F=L(2416),le=L(7849),te=L(5032);const _e=ce("C",void 0,void 0);function ce(Se,Ee,be){return{kind:Se,value:Ee,error:be}}var q=L(3410),G=L(2806);class ee extends J.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,J.Nn)(Ee)&&Ee.add(this)):this.destination=Ze}static create(Ee,be,qe){return new Ue(Ee,be,qe)}next(Ee){this.isStopped?tt(function fe(Se){return ce("N",Se,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?tt(function ie(Se){return ce("E",void 0,Se)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?tt(_e,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function xe(Se,Ee){return We.call(Se,Ee)}class Oe{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:be}=this;if(be.next)try{be.next(Ee)}catch(qe){ge(qe)}}error(Ee){const{partialObserver:be}=this;if(be.error)try{be.error(Ee)}catch(qe){ge(qe)}else ge(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(be){ge(be)}}}class Ue extends ee{constructor(Ee,be,qe){let $e;if(super(),(0,h.m)(Ee)||!Ee)$e={next:null!=Ee?Ee:void 0,error:null!=be?be:void 0,complete:null!=qe?qe:void 0};else{let re;this&&F.v.useDeprecatedNextContext?(re=Object.create(Ee),re.unsubscribe=()=>this.unsubscribe(),$e={next:Ee.next&&xe(Ee.next,re),error:Ee.error&&xe(Ee.error,re),complete:Ee.complete&&xe(Ee.complete,re)}):$e=Ee}this.destination=new Oe($e)}}function ge(Se){F.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Se):(0,le.h)(Se)}function tt(Se,Ee){const{onStoppedNotification:be}=F.v;be&&q.z.setTimeout(()=>be(Se,Ee))}const Ze={closed:!0,next:te.Z,error:function Ce(Se){throw Se},complete:te.Z}},727:(lt,De,L)=>{L.d(De,{Lc:()=>_e,w0:()=>te,Nn:()=>ie});var h=L(576);const F=(0,L(3888).d)(ce=>function(G){ce(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((ee,We)=>`${We+1}) ${ee.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var le=L(8737);class te{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const xe of G)xe.remove(this);else G.remove(this);const{initialTeardown:ee}=this;if((0,h.m)(ee))try{ee()}catch(xe){q=xe instanceof F?xe.errors:[xe]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const xe of We)try{fe(xe)}catch(Oe){q=null!=q?q:[],Oe instanceof F?q=[...q,...Oe.errors]:q.push(Oe)}}if(q)throw new F(q)}}add(q){var G;if(q&&q!==this)if(this.closed)fe(q);else{if(q instanceof te){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(q)}}_hasParent(q){const{_parentage:G}=this;return G===q||Array.isArray(G)&&G.includes(q)}_addParent(q){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(q),G):G?[G,q]:q}_removeParent(q){const{_parentage:G}=this;G===q?this._parentage=null:Array.isArray(G)&&(0,le.P)(G,q)}remove(q){const{_finalizers:G}=this;G&&(0,le.P)(G,q),q instanceof te&&q._removeParent(this)}}te.EMPTY=(()=>{const ce=new te;return ce.closed=!0,ce})();const _e=te.EMPTY;function ie(ce){return ce instanceof te||ce&&"closed"in ce&&(0,h.m)(ce.remove)&&(0,h.m)(ce.add)&&(0,h.m)(ce.unsubscribe)}function fe(ce){(0,h.m)(ce)?ce():ce.unsubscribe()}},2416:(lt,De,L)=>{L.d(De,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,De,L)=>{L.d(De,{E:()=>J});const J=new(L(8306).y)(te=>te.complete())},8996:(lt,De,L)=>{L.d(De,{D:()=>Ee});var h=L(8421),J=L(5363),F=L(9468),_e=L(8306),fe=L(2202),ce=L(576),q=L(9672);function ee(be,qe){if(!be)throw new Error("Iterable cannot be null");return new _e.y($e=>{(0,q.f)($e,qe,()=>{const re=be[Symbol.asyncIterator]();(0,q.f)($e,qe,()=>{re.next().then(Z=>{Z.done?$e.complete():$e.next(Z.value)})},0,!0)})})}var We=L(3670),xe=L(8239),Oe=L(1144),Ue=L(6495),ge=L(2206),Ce=L(4532),tt=L(3260);function Ee(be,qe){return qe?function Se(be,qe){if(null!=be){if((0,We.c)(be))return function le(be,qe){return(0,h.Xf)(be).pipe((0,F.R)(qe),(0,J.Q)(qe))}(be,qe);if((0,Oe.z)(be))return function ie(be,qe){return new _e.y($e=>{let re=0;return qe.schedule(function(){re===be.length?$e.complete():($e.next(be[re++]),$e.closed||this.schedule())})})}(be,qe);if((0,xe.t)(be))return function te(be,qe){return(0,h.Xf)(be).pipe((0,F.R)(qe),(0,J.Q)(qe))}(be,qe);if((0,ge.D)(be))return ee(be,qe);if((0,Ue.T)(be))return function G(be,qe){return new _e.y($e=>{let re;return(0,q.f)($e,qe,()=>{re=be[fe.h](),(0,q.f)($e,qe,()=>{let Z,se;try{({value:Z,done:se}=re.next())}catch(ye){return void $e.error(ye)}se?$e.complete():$e.next(Z)},0,!0)}),()=>(0,ce.m)(null==re?void 0:re.return)&&re.return()})}(be,qe);if((0,tt.L)(be))return function Ze(be,qe){return ee((0,tt.Q)(be),qe)}(be,qe)}throw(0,Ce.z)(be)}(be,qe):(0,h.Xf)(be)}},8421:(lt,De,L)=>{L.d(De,{Xf:()=>We});var h=L(655),J=L(1144),F=L(8239),le=L(8306),te=L(3670),_e=L(2206),ie=L(4532),fe=L(6495),ce=L(3260),q=L(576),G=L(7849),ee=L(8822);function We(Se){if(Se instanceof le.y)return Se;if(null!=Se){if((0,te.c)(Se))return function xe(Se){return new le.y(Ee=>{const be=Se[ee.L]();if((0,q.m)(be.subscribe))return be.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,J.z)(Se))return function Oe(Se){return new le.y(Ee=>{for(let be=0;be<Se.length&&!Ee.closed;be++)Ee.next(Se[be]);Ee.complete()})}(Se);if((0,F.t)(Se))return function Ue(Se){return new le.y(Ee=>{Se.then(be=>{Ee.closed||(Ee.next(be),Ee.complete())},be=>Ee.error(be)).then(null,G.h)})}(Se);if((0,_e.D)(Se))return Ce(Se);if((0,fe.T)(Se))return function ge(Se){return new le.y(Ee=>{for(const be of Se)if(Ee.next(be),Ee.closed)return;Ee.complete()})}(Se);if((0,ce.L)(Se))return function tt(Se){return Ce((0,ce.Q)(Se))}(Se)}throw(0,ie.z)(Se)}function Ce(Se){return new le.y(Ee=>{(function Ze(Se,Ee){var be,qe,$e,re;return(0,h.mG)(this,void 0,void 0,function*(){try{for(be=(0,h.KL)(Se);!(qe=yield be.next()).done;)if(Ee.next(qe.value),Ee.closed)return}catch(Z){$e={error:Z}}finally{try{qe&&!qe.done&&(re=be.return)&&(yield re.call(be))}finally{if($e)throw $e.error}}Ee.complete()})})(Se,Ee).catch(be=>Ee.error(be))})}},6451:(lt,De,L)=>{L.d(De,{T:()=>_e});var h=L(8189),J=L(8421),F=L(515),le=L(7669),te=L(8996);function _e(...ie){const fe=(0,le.yG)(ie),ce=(0,le._6)(ie,1/0),q=ie;return q.length?1===q.length?(0,J.Xf)(q[0]):(0,h.J)(ce)((0,te.D)(q,fe)):F.E}},5403:(lt,De,L)=>{L.d(De,{x:()=>J});var h=L(930);function J(le,te,_e,ie,fe){return new F(le,te,_e,ie,fe)}class F extends h.Lv{constructor(te,_e,ie,fe,ce,q){super(te),this.onFinalize=ce,this.shouldUnsubscribe=q,this._next=_e?function(G){try{_e(G)}catch(ee){te.error(ee)}}:super._next,this._error=fe?function(G){try{fe(G)}catch(ee){te.error(ee)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch(G){te.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:_e}=this;super.unsubscribe(),!_e&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},4004:(lt,De,L)=>{L.d(De,{U:()=>F});var h=L(4482),J=L(5403);function F(le,te){return(0,h.e)((_e,ie)=>{let fe=0;_e.subscribe((0,J.x)(ie,ce=>{ie.next(le.call(te,ce,fe++))}))})}},8189:(lt,De,L)=>{L.d(De,{J:()=>F});var h=L(5577),J=L(4671);function F(le=1/0){return(0,h.z)(J.y,le)}},5577:(lt,De,L)=>{L.d(De,{z:()=>fe});var h=L(4004),J=L(8421),F=L(4482),le=L(9672),te=L(5403),ie=L(576);function fe(ce,q,G=1/0){return(0,ie.m)(q)?fe((ee,We)=>(0,h.U)((xe,Oe)=>q(ee,xe,We,Oe))((0,J.Xf)(ce(ee,We))),G):("number"==typeof q&&(G=q),(0,F.e)((ee,We)=>function _e(ce,q,G,ee,We,xe,Oe,Ue){const ge=[];let Ce=0,tt=0,Ze=!1;const Se=()=>{Ze&&!ge.length&&!Ce&&q.complete()},Ee=qe=>Ce<ee?be(qe):ge.push(qe),be=qe=>{xe&&q.next(qe),Ce++;let $e=!1;(0,J.Xf)(G(qe,tt++)).subscribe((0,te.x)(q,re=>{null==We||We(re),xe?Ee(re):q.next(re)},()=>{$e=!0},void 0,()=>{if($e)try{for(Ce--;ge.length&&Ce<ee;){const re=ge.shift();Oe?(0,le.f)(q,Oe,()=>be(re)):be(re)}Se()}catch(re){q.error(re)}}))};return ce.subscribe((0,te.x)(q,Ee,()=>{Ze=!0,Se()})),()=>{null==Ue||Ue()}}(ee,We,ce,G)))}},5363:(lt,De,L)=>{L.d(De,{Q:()=>le});var h=L(9672),J=L(4482),F=L(5403);function le(te,_e=0){return(0,J.e)((ie,fe)=>{ie.subscribe((0,F.x)(fe,ce=>(0,h.f)(fe,te,()=>fe.next(ce),_e),()=>(0,h.f)(fe,te,()=>fe.complete(),_e),ce=>(0,h.f)(fe,te,()=>fe.error(ce),_e)))})}},3099:(lt,De,L)=>{L.d(De,{B:()=>_e});var h=L(8996),J=L(5698),F=L(7579),le=L(930),te=L(4482);function _e(fe={}){const{connector:ce=(()=>new F.x),resetOnError:q=!0,resetOnComplete:G=!0,resetOnRefCountZero:ee=!0}=fe;return We=>{let xe=null,Oe=null,Ue=null,ge=0,Ce=!1,tt=!1;const Ze=()=>{null==Oe||Oe.unsubscribe(),Oe=null},Se=()=>{Ze(),xe=Ue=null,Ce=tt=!1},Ee=()=>{const be=xe;Se(),null==be||be.unsubscribe()};return(0,te.e)((be,qe)=>{ge++,!tt&&!Ce&&Ze();const $e=Ue=null!=Ue?Ue:ce();qe.add(()=>{ge--,0===ge&&!tt&&!Ce&&(Oe=ie(Ee,ee))}),$e.subscribe(qe),xe||(xe=new le.Hp({next:re=>$e.next(re),error:re=>{tt=!0,Ze(),Oe=ie(Se,q,re),$e.error(re)},complete:()=>{Ce=!0,Ze(),Oe=ie(Se,G),$e.complete()}}),(0,h.D)(be).subscribe(xe))})(We)}}function ie(fe,ce,...q){return!0===ce?(fe(),null):!1===ce?null:ce(...q).pipe((0,J.q)(1)).subscribe(()=>fe())}},9468:(lt,De,L)=>{L.d(De,{R:()=>J});var h=L(4482);function J(F,le=0){return(0,h.e)((te,_e)=>{_e.add(F.schedule(()=>te.subscribe(_e),le))})}},5698:(lt,De,L)=>{L.d(De,{q:()=>le});var h=L(515),J=L(4482),F=L(5403);function le(te){return te<=0?()=>h.E:(0,J.e)((_e,ie)=>{let fe=0;_e.subscribe((0,F.x)(ie,ce=>{++fe<=te&&(ie.next(ce),te<=fe&&ie.complete())}))})}},8505:(lt,De,L)=>{L.d(De,{b:()=>te});var h=L(576),J=L(4482),F=L(5403),le=L(4671);function te(_e,ie,fe){const ce=(0,h.m)(_e)||ie||fe?{next:_e,error:ie,complete:fe}:_e;return ce?(0,J.e)((q,G)=>{var ee;null===(ee=ce.subscribe)||void 0===ee||ee.call(ce);let We=!0;q.subscribe((0,F.x)(G,xe=>{var Oe;null===(Oe=ce.next)||void 0===Oe||Oe.call(ce,xe),G.next(xe)},()=>{var xe;We=!1,null===(xe=ce.complete)||void 0===xe||xe.call(ce),G.complete()},xe=>{var Oe;We=!1,null===(Oe=ce.error)||void 0===Oe||Oe.call(ce,xe),G.error(xe)},()=>{var xe,Oe;We&&(null===(xe=ce.unsubscribe)||void 0===xe||xe.call(ce)),null===(Oe=ce.finalize)||void 0===Oe||Oe.call(ce)}))}):le.y}},4408:(lt,De,L)=>{L.d(De,{o:()=>te});var h=L(727);class J extends h.w0{constructor(ie,fe){super()}schedule(ie,fe=0){return this}}const F={setInterval(_e,ie,...fe){const{delegate:ce}=F;return(null==ce?void 0:ce.setInterval)?ce.setInterval(_e,ie,...fe):setInterval(_e,ie,...fe)},clearInterval(_e){const{delegate:ie}=F;return((null==ie?void 0:ie.clearInterval)||clearInterval)(_e)},delegate:void 0};var le=L(8737);class te extends J{constructor(ie,fe){super(ie,fe),this.scheduler=ie,this.work=fe,this.pending=!1}schedule(ie,fe=0){if(this.closed)return this;this.state=ie;const ce=this.id,q=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId(q,ce,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId(q,this.id,fe),this}requestAsyncId(ie,fe,ce=0){return F.setInterval(ie.flush.bind(ie,this),ce)}recycleAsyncId(ie,fe,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return fe;F.clearInterval(fe)}execute(ie,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(ie,fe);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,fe){let q,ce=!1;try{this.work(ie)}catch(G){ce=!0,q=G||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:ie,scheduler:fe}=this,{actions:ce}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(ce,this),null!=ie&&(this.id=this.recycleAsyncId(fe,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,De,L)=>{L.d(De,{v:()=>F});var h=L(6063);class J{constructor(te,_e=J.now){this.schedulerActionCtor=te,this.now=_e}schedule(te,_e=0,ie){return new this.schedulerActionCtor(this,te).schedule(ie,_e)}}J.now=h.l.now;class F extends J{constructor(te,_e=J.now){super(te,_e),this.actions=[],this._active=!1,this._scheduled=void 0}flush(te){const{actions:_e}=this;if(this._active)return void _e.push(te);let ie;this._active=!0;do{if(ie=te.execute(te.state,te.delay))break}while(te=_e.shift());if(this._active=!1,ie){for(;te=_e.shift();)te.unsubscribe();throw ie}}}},4986:(lt,De,L)=>{L.d(De,{z:()=>F});var h=L(4408);const F=new(L(7565).v)(h.o)},6063:(lt,De,L)=>{L.d(De,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(lt,De,L)=>{L.d(De,{z:()=>h});const h={setTimeout(J,F,...le){const{delegate:te}=h;return(null==te?void 0:te.setTimeout)?te.setTimeout(J,F,...le):setTimeout(J,F,...le)},clearTimeout(J){const{delegate:F}=h;return((null==F?void 0:F.clearTimeout)||clearTimeout)(J)},delegate:void 0}},2202:(lt,De,L)=>{L.d(De,{h:()=>J});const J=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,De,L)=>{L.d(De,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(lt,De,L)=>{L.d(De,{_6:()=>_e,jO:()=>le,yG:()=>te});var h=L(576);function F(ie){return ie[ie.length-1]}function le(ie){return(0,h.m)(F(ie))?ie.pop():void 0}function te(ie){return function J(ie){return ie&&(0,h.m)(ie.schedule)}(F(ie))?ie.pop():void 0}function _e(ie,fe){return"number"==typeof F(ie)?ie.pop():fe}},8737:(lt,De,L)=>{function h(J,F){if(J){const le=J.indexOf(F);0<=le&&J.splice(le,1)}}L.d(De,{P:()=>h})},3888:(lt,De,L)=>{function h(J){const le=J(te=>{Error.call(te),te.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}L.d(De,{d:()=>h})},2806:(lt,De,L)=>{L.d(De,{O:()=>le,x:()=>F});var h=L(2416);let J=null;function F(te){if(h.v.useDeprecatedSynchronousErrorHandling){const _e=!J;if(_e&&(J={errorThrown:!1,error:null}),te(),_e){const{errorThrown:ie,error:fe}=J;if(J=null,ie)throw fe}}else te()}function le(te){h.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=te)}},9672:(lt,De,L)=>{function h(J,F,le,te=0,_e=!1){const ie=F.schedule(function(){le(),_e?J.add(this.schedule(null,te)):this.unsubscribe()},te);if(J.add(ie),!_e)return ie}L.d(De,{f:()=>h})},4671:(lt,De,L)=>{function h(J){return J}L.d(De,{y:()=>h})},1144:(lt,De,L)=>{L.d(De,{z:()=>h});const h=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(lt,De,L)=>{L.d(De,{D:()=>J});var h=L(576);function J(F){return Symbol.asyncIterator&&(0,h.m)(null==F?void 0:F[Symbol.asyncIterator])}},576:(lt,De,L)=>{function h(J){return"function"==typeof J}L.d(De,{m:()=>h})},3670:(lt,De,L)=>{L.d(De,{c:()=>F});var h=L(8822),J=L(576);function F(le){return(0,J.m)(le[h.L])}},6495:(lt,De,L)=>{L.d(De,{T:()=>F});var h=L(2202),J=L(576);function F(le){return(0,J.m)(null==le?void 0:le[h.h])}},8239:(lt,De,L)=>{L.d(De,{t:()=>J});var h=L(576);function J(F){return(0,h.m)(null==F?void 0:F.then)}},3260:(lt,De,L)=>{L.d(De,{L:()=>le,Q:()=>F});var h=L(655),J=L(576);function F(te){return(0,h.FC)(this,arguments,function*(){const ie=te.getReader();try{for(;;){const{value:fe,done:ce}=yield(0,h.qq)(ie.read());if(ce)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(fe)}}finally{ie.releaseLock()}})}function le(te){return(0,J.m)(null==te?void 0:te.getReader)}},4482:(lt,De,L)=>{L.d(De,{A:()=>J,e:()=>F});var h=L(576);function J(le){return(0,h.m)(null==le?void 0:le.lift)}function F(le){return te=>{if(J(te))return te.lift(function(_e){try{return le(_e,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(lt,De,L)=>{function h(){}L.d(De,{Z:()=>h})},7849:(lt,De,L)=>{L.d(De,{h:()=>F});var h=L(2416),J=L(3410);function F(le){J.z.setTimeout(()=>{const{onUnhandledError:te}=h.v;if(!te)throw le;te(le)})}},4532:(lt,De,L)=>{function h(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(De,{z:()=>h})},655:(lt,De,L)=>{function le(Z,se){var ye={};for(var oe in Z)Object.prototype.hasOwnProperty.call(Z,oe)&&se.indexOf(oe)<0&&(ye[oe]=Z[oe]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(oe=Object.getOwnPropertySymbols(Z);Pe<oe.length;Pe++)se.indexOf(oe[Pe])<0&&Object.prototype.propertyIsEnumerable.call(Z,oe[Pe])&&(ye[oe[Pe]]=Z[oe[Pe]])}return ye}function fe(Z,se,ye,oe){return new(ye||(ye=Promise))(function(ue,St){function sn(vt){try{ut(oe.next(vt))}catch(mn){St(mn)}}function qn(vt){try{ut(oe.throw(vt))}catch(mn){St(mn)}}function ut(vt){vt.done?ue(vt.value):function Pe(ue){return ue instanceof ye?ue:new ye(function(St){St(ue)})}(vt.value).then(sn,qn)}ut((oe=oe.apply(Z,se||[])).next())})}function ge(Z){return this instanceof ge?(this.v=Z,this):new ge(Z)}function Ce(Z,se,ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,oe=ye.apply(Z,se||[]),ue=[];return Pe={},St("next"),St("throw"),St("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function St(_n){oe[_n]&&(Pe[_n]=function(ji){return new Promise(function(un,ns){ue.push([_n,ji,un,ns])>1||sn(_n,ji)})})}function sn(_n,ji){try{!function qn(_n){_n.value instanceof ge?Promise.resolve(_n.value.v).then(ut,vt):mn(ue[0][2],_n)}(oe[_n](ji))}catch(un){mn(ue[0][3],un)}}function ut(_n){sn("next",_n)}function vt(_n){sn("throw",_n)}function mn(_n,ji){_n(ji),ue.shift(),ue.length&&sn(ue[0][0],ue[0][1])}}function Ze(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,se=Z[Symbol.asyncIterator];return se?se.call(Z):(Z=function ee(Z){var se="function"==typeof Symbol&&Symbol.iterator,ye=se&&Z[se],oe=0;if(ye)return ye.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&oe>=Z.length&&(Z=void 0),{value:Z&&Z[oe++],done:!Z}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),ye={},oe("next"),oe("throw"),oe("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function oe(ue){ye[ue]=Z[ue]&&function(St){return new Promise(function(sn,qn){!function Pe(ue,St,sn,qn){Promise.resolve(qn).then(function(ut){ue({value:ut,done:sn})},St)}(sn,qn,(St=Z[ue](St)).done,St.value)})}}}L.d(De,{FC:()=>Ce,KL:()=>Ze,_T:()=>le,mG:()=>fe,qq:()=>ge})},5e3:(lt,De,L)=>{L.d(De,{$8M:()=>fl,$Z:()=>lw,AFp:()=>mT,ALo:()=>ny,AaK:()=>fe,AsE:()=>bw,BQk:()=>xp,CHM:()=>ic,CRH:()=>Xh,CZH:()=>gT,CqO:()=>xC,Dn7:()=>Wh,EJc:()=>bT,EiD:()=>kc,EpF:()=>A_,F4k:()=>x_,FYo:()=>LI,FiY:()=>Yr,G48:()=>cR,GfV:()=>$w,Gpc:()=>G,IIB:()=>cy,JOm:()=>ae,JVY:()=>ov,L6k:()=>ah,LAX:()=>Dm,LFG:()=>it,LSH:()=>dh,Lbi:()=>wT,MAs:()=>vC,MGl:()=>M_,NdJ:()=>cw,OlP:()=>$n,Oqu:()=>Pp,PXZ:()=>x0,Q6J:()=>C_,QGY:()=>Rp,Qsj:()=>Cx,R0b:()=>pa,RDi:()=>Ss,Rgc:()=>sg,SBq:()=>Xp,Sil:()=>fa,Suo:()=>Jh,TTD:()=>Uo,TgZ:()=>T_,Tol:()=>yw,Udp:()=>O_,VKq:()=>KI,VLi:()=>sR,X6Q:()=>uR,XFs:()=>ht,Xpm:()=>Bt,Y36:()=>Fh,YKP:()=>Vl,YNc:()=>Xv,Yjl:()=>Pr,Yz7:()=>un,ZZ4:()=>qT,_Bn:()=>OI,_UZ:()=>D_,_Vd:()=>Gh,_c5:()=>hy,_uU:()=>Pu,aQg:()=>zT,c2e:()=>_g,cJS:()=>on,cg1:()=>Gn,d8E:()=>ca,dDg:()=>AT,deG:()=>Yd,dqk:()=>Wt,eBb:()=>zf,eFA:()=>NT,ekj:()=>k_,g9A:()=>vT,h0i:()=>hd,hGG:()=>F0,hij:()=>Ou,iGM:()=>d0,ifc:()=>zt,ip1:()=>Bu,kL8:()=>cI,kYT:()=>je,lG2:()=>nn,mCW:()=>El,n5z:()=>Ic,oAB:()=>X,oJD:()=>ch,oxw:()=>hw,pB0:()=>Wf,q3G:()=>nr,q4F:()=>BI,qLn:()=>Br,qOj:()=>__,qZA:()=>Lh,qzn:()=>yu,r_U:()=>Uu,sBO:()=>hR,sIi:()=>Ah,s_b:()=>fd,soG:()=>vg,tBr:()=>Zr,tb:()=>ET,tp0:()=>Wi,uIk:()=>Dp,vHH:()=>Oe,vpe:()=>za,wAp:()=>wt,xi3:()=>YI,xp6:()=>Db,yhl:()=>oh,ynx:()=>S_,z2F:()=>R0,z3N:()=>us,zSh:()=>$v,zs3:()=>So});var h=L(7579),J=L(727),F=L(8306),le=L(6451),te=L(3099);function _e(s){for(let o in s)if(s[o]===_e)return o;throw Error("Could not find renamed property on target object.")}function ie(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function ce(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const q=_e({__forward_ref__:_e});function G(s){return s.__forward_ref__=G,s.toString=function(){return fe(this())},s}function ee(s){return We(s)?s():s}function We(s){return"function"==typeof s&&s.hasOwnProperty(q)&&s.__forward_ref__===G}class Oe extends Error{constructor(o,l){super(function Ue(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,l)),this.code=o}}function ge(s){return"string"==typeof s?s:null==s?"":String(s)}function Ce(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ge(s)}function Ee(s,o){const l=o?` in ${o}`:"";throw new Oe(-201,`No provider for ${Ce(s)} found${l}`)}function ut(s,o){null==s&&function vt(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function un(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function on(s){return{providers:s.providers||[],imports:s.imports||[]}}function qt(s){return wr(s,rs)||wr(s,ws)}function wr(s,o){return s.hasOwnProperty(o)?s[o]:null}function zr(s){return s&&(s.hasOwnProperty(Wr)||s.hasOwnProperty(is))?s[Wr]:null}const rs=_e({\u0275prov:_e}),Wr=_e({\u0275inj:_e}),ws=_e({ngInjectableDef:_e}),is=_e({ngInjectorDef:_e});var ht=(()=>((ht=ht||{})[ht.Default=0]="Default",ht[ht.Host=1]="Host",ht[ht.Self=2]="Self",ht[ht.SkipSelf=4]="SkipSelf",ht[ht.Optional=8]="Optional",ht))();let ii;function or(s){const o=ii;return ii=s,o}function wi(s,o,l){const c=qt(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&ht.Optional?null:void 0!==o?o:void Ee(fe(s),"Injector")}function Tn(s){return{toString:s}.toString()}var mr=(()=>((mr=mr||{})[mr.OnPush=0]="OnPush",mr[mr.Default=1]="Default",mr))(),zt=(()=>{return(s=zt||(zt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",zt;var s})();const ot="undefined"!=typeof globalThis&&globalThis,It="undefined"!=typeof window&&window,Er="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Wt=ot||"undefined"!=typeof global&&global||It||Er,br={},ft=[],Nr=_e({\u0275cmp:_e}),$t=_e({\u0275dir:_e}),Ye=_e({\u0275pipe:_e}),Ae=_e({\u0275mod:_e}),Je=_e({\u0275fac:_e}),pt=_e({__NG_ELEMENT_ID__:_e});let Gt=0;function Bt(s){return Tn(()=>{const l={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===mr.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||ft,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||zt.Emulated,id:"c",styles:s.styles||ft,_:null,setInput:null,schemas:s.schemas||null,tView:null},f=s.directives,m=s.features,w=s.pipes;return c.id+=Gt++,c.inputs=Et(s.inputs,l),c.outputs=Et(s.outputs),m&&m.forEach(b=>b(c)),c.directiveDefs=f?()=>("function"==typeof f?f():f).map(j):null,c.pipeDefs=w?()=>("function"==typeof w?w():w).map(z):null,c})}function j(s){return Yt(s)||function jn(s){return s[$t]||null}(s)}function z(s){return function Ot(s){return s[Ye]||null}(s)}const de={};function X(s){return Tn(()=>{const o={type:s.type,bootstrap:s.bootstrap||ft,declarations:s.declarations||ft,imports:s.imports||ft,exports:s.exports||ft,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(de[s.id]=s.type),o})}function je(s,o){return Tn(()=>{const l=En(s,!0);l.declarations=o.declarations||ft,l.imports=o.imports||ft,l.exports=o.exports||ft})}function Et(s,o){if(null==s)return br;const l={};for(const c in s)if(s.hasOwnProperty(c)){let f=s[c],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),l[f]=c,o&&(o[f]=m)}return l}const nn=Bt;function Pr(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Yt(s){return s[Nr]||null}function En(s,o){const l=s[Ae]||null;if(!l&&!0===o)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return l}function Hi(s){return Array.isArray(s)&&"object"==typeof s[1]}function bi(s){return Array.isArray(s)&&!0===s[1]}function Md(s){return 0!=(8&s.flags)}function oo(s){return 2==(2&s.flags)}function zl(s){return 1==(1&s.flags)}function si(s){return null!==s.template}function Df(s){return 0!=(512&s[2])}function oi(s,o){return s.hasOwnProperty(Je)?s[Je]:null}class Ta{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function Uo(){return sl}function sl(s){return s.type.prototype.ngOnChanges&&(s.setInput=fm),ec}function ec(){const s=uo(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===br)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function fm(s,o,l,c){const f=uo(s)||function Ci(s,o){return s[lo]=o}(s,{previous:br,current:null}),m=f.current||(f.current={}),w=f.previous,b=this.declaredInputs[l],C=w[b];m[b]=new Ta(C&&C.currentValue,o,w===br),s[c]=o}Uo.ngInherit=!0;const lo="__ngSimpleChanges__";function uo(s){return s[lo]||null}let Xl;function Ss(s){Xl=s}function ol(){return void 0!==Xl?Xl:"undefined"!=typeof document?document:void 0}function Cn(s){return!!s.listen}const Da={createRenderer:(s,o)=>ol()};function fn(s){for(;Array.isArray(s);)s=s[0];return s}function jo(s,o){return fn(o[s])}function Or(s,o){return fn(o[s.index])}function al(s,o){return s.data[o]}function $i(s,o){return s[o]}function kr(s,o){const l=o[s];return Hi(l)?l:l[0]}function ho(s){return 4==(4&s[2])}function As(s){return 128==(128&s[2])}function li(s,o){return null==o?null:s[o]}function fo(s){s[18]=0}function po(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const gt={lFrame:$o(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function iu(){return gt.bindingsEnabled}function Ie(){return gt.lFrame.lView}function jt(){return gt.lFrame.tView}function ic(s){return gt.lFrame.contextLView=s,s[8]}function Dn(){let s=Sa();for(;null!==s&&64===s.type;)s=s.parent;return s}function Sa(){return gt.lFrame.currentTNode}function ui(s,o){const l=gt.lFrame;l.currentTNode=s,l.isParent=o}function sc(){return gt.lFrame.isParent}function oc(){gt.lFrame.isParent=!1}function su(){return gt.isInCheckNoChangesMode}function go(s){gt.isInCheckNoChangesMode=s}function Tr(){const s=gt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function mo(){return gt.lFrame.bindingIndex++}function Gi(s){const o=gt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}function lu(s,o){const l=gt.lFrame;l.bindingIndex=l.bindingRootIndex=s,ul(o)}function ul(s){gt.lFrame.currentDirectiveIndex=s}function xa(s){const o=gt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function cc(){return gt.lFrame.currentQueryIndex}function dc(s){gt.lFrame.currentQueryIndex=s}function Bd(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function hc(s,o,l){if(l&ht.SkipSelf){let f=o,m=s;for(;!(f=f.parent,null!==f||l&ht.Host||(f=Bd(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;o=f,s=m}const c=gt.lFrame=jd();return c.currentTNode=o,c.lView=s,!0}function Ho(s){const o=jd(),l=s[1];gt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function jd(){const s=gt.lFrame,o=null===s?null:s.child;return null===o?$o(s):o}function $o(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Hd(){const s=gt.lFrame;return gt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const $d=Hd;function Go(){const s=Hd();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Fr(){return gt.lFrame.selectedIndex}function yo(s){gt.lFrame.selectedIndex=s}function Hn(){const s=gt.lFrame;return al(s.tView,s.selectedIndex)}function xs(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const m=s.data[l].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:b,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:M}=m;w&&(s.contentHooks||(s.contentHooks=[])).push(-l,w),b&&((s.contentHooks||(s.contentHooks=[])).push(l,b),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,b)),C&&(s.viewHooks||(s.viewHooks=[])).push(-l,C),A&&((s.viewHooks||(s.viewHooks=[])).push(l,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,A)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(l,M)}}function cl(s,o,l){Gd(s,o,3,l)}function uu(s,o,l,c){(3&s[2])===l&&Gd(s,o,l,c)}function tr(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function Gd(s,o,l,c){const m=null!=c?c:-1,w=o.length-1;let b=0;for(let C=void 0!==c?65535&s[18]:0;C<w;C++)if("number"==typeof o[C+1]){if(b=o[C],null!=c&&b>=c)break}else o[C]<0&&(s[18]+=65536),(b<m||-1==m)&&(pm(s,l,o,C),s[18]=(4294901760&s[18])+C+2),C++}function pm(s,o,l,c){const f=l[c]<0,m=l[c+1],b=s[f?-l[c]:l[c]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(b)}finally{}}}else try{m.call(b)}finally{}}class Ra{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function yc(s,o,l){const c=Cn(s);let f=0;for(;f<l.length;){const m=l[f];if("number"==typeof m){if(0!==m)break;f++;const w=l[f++],b=l[f++],C=l[f++];c?s.setAttribute(o,b,C,w):o.setAttributeNS(w,b,C)}else{const w=m,b=l[++f];vc(w)?c&&s.setProperty(o,w,b):c?s.setAttribute(o,w,b):o.setAttribute(w,b),f++}}return f}function Ns(s){return 3===s||4===s||6===s}function vc(s){return 64===s.charCodeAt(0)}function dl(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const f=o[c];"number"==typeof f?l=f:0===l||qo(s,l,f,null,-1===l||2===l?o[++c]:null)}}return s}function qo(s,o,l,c,f){let m=0,w=s.length;if(-1===o)w=-1;else for(;m<s.length;){const b=s[m++];if("number"==typeof b){if(b===o){w=-1;break}if(b>o){w=m-1;break}}}for(;m<s.length;){const b=s[m];if("number"==typeof b)break;if(b===l){if(null===c)return void(null!==f&&(s[m+1]=f));if(c===s[m+1])return void(s[m+2]=f)}m++,null!==c&&m++,null!==f&&m++}-1!==w&&(s.splice(w,0,o),m=w+1),s.splice(m++,0,l),null!==c&&s.splice(m++,0,c),null!==f&&s.splice(m++,0,f)}function Wd(s){return-1!==s}function an(s){return 32767&s}function yn(s,o){let l=function zo(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let mt=!0;function vo(s){const o=mt;return mt=s,o}let Rf=0;function Ti(s,o){const l=Ma(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,cr(c.data,s),cr(o,null),cr(c.blueprint,null));const f=ci(s,o),m=s.injectorIndex;if(Wd(f)){const w=an(f),b=yn(f,o),C=b[1].data;for(let A=0;A<8;A++)o[m+A]=b[w+A]|C[w+A]}return o[m+8]=f,m}function cr(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Ma(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function ci(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,f=o;for(;null!==f;){const m=f[1],w=m.type;if(c=2===w?m.declTNode:1===w?f[6]:null,null===c)return-1;if(l++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function Ko(s,o,l){!function Wo(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(pt)&&(c=l[pt]),null==c&&(c=l[pt]=Rf++);const f=255&c;o.data[s+(f>>5)]|=1<<f}(s,o,l)}function Zo(s,o,l){if(l&ht.Optional)return s;Ee(o,"NodeInjector")}function Yo(s,o,l,c){if(l&ht.Optional&&void 0===c&&(c=null),0==(l&(ht.Self|ht.Host))){const f=s[9],m=or(void 0);try{return f?f.get(o,c,l&ht.Optional):wi(o,c,l&ht.Optional)}finally{or(m)}}return Zo(c,o,l)}function Di(s,o,l,c=ht.Default,f){if(null!==s){const m=function Kd(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(pt)?s[pt]:void 0;return"number"==typeof o?o>=0?255&o:dr:o}(l);if("function"==typeof m){if(!hc(o,s,c))return c&ht.Host?Zo(f,l,c):Yo(o,l,c,f);try{const w=m(c);if(null!=w||c&ht.Optional)return w;Ee(l)}finally{$d()}}else if("number"==typeof m){let w=null,b=Ma(s,o),C=-1,A=c&ht.Host?o[16][6]:null;for((-1===b||c&ht.SkipSelf)&&(C=-1===b?ci(s,o):o[b+8],-1!==C&&Cc(c,!1)?(w=o[1],b=an(C),o=yn(C,o)):b=-1);-1!==b;){const M=o[1];if(hl(m,b,M.data)){const V=Qo(b,o,l,w,c,A);if(V!==wo)return V}C=o[b+8],-1!==C&&Cc(c,o[1].data[b+8]===A)&&hl(m,b,o)?(w=M,b=an(C),o=yn(C,o)):b=-1}}}return Yo(o,l,c,f)}const wo={};function dr(){return new qi(Dn(),Ie())}function Qo(s,o,l,c,f,m){const w=o[1],b=w.data[s+8],M=bc(b,w,l,null==c?oo(b)&&mt:c!=w&&0!=(3&b.type),f&ht.Host&&m===b);return null!==M?di(o,w,M,b):wo}function bc(s,o,l,c,f){const m=s.providerIndexes,w=o.data,b=1048575&m,C=s.directiveStart,M=m>>20,H=f?b+M:s.directiveEnd;for(let Q=c?b:b+M;Q<H;Q++){const we=w[Q];if(Q<C&&l===we||Q>=C&&we.type===l)return Q}if(f){const Q=w[C];if(Q&&si(Q)&&Q.type===l)return C}return null}function di(s,o,l,c){let f=s[l];const m=o.data;if(function qd(s){return s instanceof Ra}(f)){const w=f;w.resolving&&function tt(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${s}${l}`)}(Ce(m[l]));const b=vo(w.canSeeViewProviders);w.resolving=!0;const C=w.injectImpl?or(w.injectImpl):null;hc(s,c,ht.Default);try{f=s[l]=w.factory(void 0,m,s,c),o.firstCreatePass&&l>=c.directiveStart&&function gc(s,o,l){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:m}=o.type.prototype;if(c){const w=sl(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,w),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,w)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,f),m&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,m),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,m))}(l,m[l],o)}finally{null!==C&&or(C),vo(b),w.resolving=!1,$d()}}return f}function hl(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Cc(s,o){return!(s&ht.Self||s&ht.Host&&o)}class qi{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return Di(this._tNode,this._lView,o,c,l)}}function Ic(s){return Tn(()=>{const o=s.prototype.constructor,l=o[Je]||Jo(o),c=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==c;){const m=f[Je]||Jo(f);if(m&&m!==l)return m;f=Object.getPrototypeOf(f)}return m=>new m})}function Jo(s){return We(s)?()=>{const o=Jo(ee(s));return o&&o()}:oi(s)}function fl(s){return function Ec(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let f=0;for(;f<c;){const m=l[f];if(Ns(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<c&&"string"==typeof l[f];)f++;else{if(m===o)return l[f+1];f+=2}}}return null}(Dn(),s)}const Os="__parameters__",Si="__prop__metadata__";function du(s){return function(...l){if(s){const c=s(...l);for(const f in c)this[f]=c[f]}}}function Xo(s,o,l){return Tn(()=>{const c=du(o);function f(...m){if(this instanceof f)return c.apply(this,m),this;const w=new f(...m);return b.annotation=w,b;function b(C,A,M){const V=C.hasOwnProperty(Os)?C[Os]:Object.defineProperty(C,Os,{value:[]})[Os];for(;V.length<=M;)V.push(null);return(V[M]=V[M]||[]).push(w),C}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}function Na(s,o,l,c){return Tn(()=>{const f=du(o);function m(...w){if(this instanceof m)return f.apply(this,w),this;const b=new m(...w);return function C(A,M){const V=A.constructor,H=V.hasOwnProperty(Si)?V[Si]:Object.defineProperty(V,Si,{value:{}})[Si];H[M]=H.hasOwnProperty(M)&&H[M]||[],H[M].unshift(b),c&&c(A,M,...w)}}return l&&(m.prototype=Object.create(l.prototype)),m.prototype.ngMetadataName=s,m.annotationCls=m,m})}class $n{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=un({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Yd=new $n("AnalyzeForEntryComponents");function Lr(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(o===s&&(o=s.slice(0,l)),Lr(c,o)):o!==s&&o.push(c)}return o}function zi(s,o){s.forEach(l=>Array.isArray(l)?zi(l,o):o(l))}function pu(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function ls(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Ai(s,o,l){let c=ml(s,o);return c>=0?s[1|c]=l:(c=~c,function gl(s,o,l,c){let f=s.length;if(f==o)s.push(l,c);else if(1===f)s.push(c,s[0]),s[0]=l;else{for(f--,s.push(s[f-1],s[f]);f>o;)s[f]=s[f-2],f--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function kf(s,o){const l=ml(s,o);if(l>=0)return s[1|l]}function ml(s,o){return function ea(s,o,l){let c=0,f=s.length>>l;for(;f!==c;){const m=c+(f-c>>1),w=s[m<<l];if(o===w)return m<<l;w>o?f=m:c=m+1}return~(f<<l)}(s,o,1)}const Fs={},Eo="__NG_DI_FLAG__",Ac="ngTempTokenPath",S=/\n/gm,B="__source",Y=_e({provide:String,useValue:_e});let ne;function Me(s){const o=ne;return ne=s,o}function Qe(s,o=ht.Default){if(void 0===ne)throw new Oe(203,"");return null===ne?wi(s,void 0,o):ne.get(s,o&ht.Optional?null:void 0,o)}function it(s,o=ht.Default){return(function gr(){return ii}()||Qe)(ee(s),o)}const Qt=it;function At(s){const o=[];for(let l=0;l<s.length;l++){const c=ee(s[l]);if(Array.isArray(c)){if(0===c.length)throw new Oe(900,"");let f,m=ht.Default;for(let w=0;w<c.length;w++){const b=c[w],C=kn(b);"number"==typeof C?-1===C?f=b.token:m|=C:f=b}o.push(it(f,m))}else o.push(it(c))}return o}function Kn(s,o){return s[Eo]=o,s.prototype[Eo]=o,s}function kn(s){return s[Eo]}const Zr=Kn(Xo("Inject",s=>({token:s})),-1),Yr=Kn(Xo("Optional"),8),Wi=Kn(Xo("SkipSelf"),4);let La,jf;function vl(s){var o;return(null===(o=function Rc(){if(void 0===La&&(La=null,Wt.trustedTypes))try{La=Wt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return La}())||void 0===o?void 0:o.createHTML(s))||s}function $f(s){var o;return(null===(o=function Hf(){if(void 0===jf&&(jf=null,Wt.trustedTypes))try{jf=Wt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return jf}())||void 0===o?void 0:o.createHTML(s))||s}class Va{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Gf extends Va{getTypeName(){return"HTML"}}class sv extends Va{getTypeName(){return"Style"}}class Tm extends Va{getTypeName(){return"Script"}}class qf extends Va{getTypeName(){return"URL"}}class ob extends Va{getTypeName(){return"ResourceURL"}}function us(s){return s instanceof Va?s.changingThisBreaksApplicationSecurity:s}function yu(s,o){const l=oh(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}function oh(s){return s instanceof Va&&s.getTypeName()||null}function ov(s){return new Gf(s)}function ah(s){return new sv(s)}function zf(s){return new Tm(s)}function Dm(s){return new qf(s)}function Wf(s){return new ob(s)}class Mc{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(vl(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class av{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const c=this.inertDocument.createElement("body");l.appendChild(c)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=vl(o),l;const c=this.inertDocument.createElement("body");return c.innerHTML=vl(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const l=o.attributes;for(let f=l.length-1;0<f;f--){const w=l.item(f).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&o.removeAttribute(w)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const wl=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Rm=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function El(s){return(s=String(s)).match(wl)||s.match(Rm)?s:"unsafe:"+s}function cs(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function vu(...s){const o={};for(const l of s)for(const c in l)l.hasOwnProperty(c)&&(o[c]=!0);return o}const Mm=cs("area,br,col,hr,img,wbr"),wu=cs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Nm=cs("rp,rt"),Pm=vu(Mm,vu(wu,cs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vu(Nm,cs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),vu(Nm,wu)),Pc=cs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Zf=cs("srcset"),Oc=vu(Pc,Zf,cs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),cs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),bl=cs("script,style,template");class cv{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let l=o.firstChild,c=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?c=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,c&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(o){const l=o.nodeName.toLowerCase();if(!Pm.hasOwnProperty(l))return this.sanitizedSomething=!0,!bl.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const c=o.attributes;for(let f=0;f<c.length;f++){const m=c.item(f),w=m.name,b=w.toLowerCase();if(!Oc.hasOwnProperty(b)){this.sanitizedSomething=!0;continue}let C=m.value;Pc[b]&&(C=El(C)),Zf[b]&&(s=C,C=(s=String(s)).split(",").map(o=>El(o.trim())).join(", ")),this.buf.push(" ",w,'="',Qf(C),'"')}var s;return this.buf.push(">"),!0}endElement(o){const l=o.nodeName.toLowerCase();Pm.hasOwnProperty(l)&&!Mm.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(o){this.buf.push(Qf(o))}checkClobberedElement(o,l){if(l&&(o.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return l}}const lh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Yf=/([^\#-~ |!])/g;function Qf(s){return s.replace(/&/g,"&amp;").replace(lh,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Yf,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let uh;function kc(s,o){let l=null;try{uh=uh||function Sm(s){const o=new av(s);return function Am(){try{return!!(new window.DOMParser).parseFromString(vl(""),"text/html")}catch(s){return!1}}()?new Mc(o):o}(s);let c=o?String(o):"";l=uh.getInertBodyElement(c);let f=5,m=c;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,c=m,m=l.innerHTML,l=uh.getInertBodyElement(c)}while(c!==m);return vl((new cv).sanitizeChildren(Cl(l)||l))}finally{if(l){const c=Cl(l)||l;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function Cl(s){return"content"in s&&function Om(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var nr=(()=>((nr=nr||{})[nr.NONE=0]="NONE",nr[nr.HTML=1]="HTML",nr[nr.STYLE=2]="STYLE",nr[nr.SCRIPT=3]="SCRIPT",nr[nr.URL=4]="URL",nr[nr.RESOURCE_URL=5]="RESOURCE_URL",nr))();function ch(s){const o=Fc();return o?$f(o.sanitize(nr.HTML,s)||""):yu(s,"HTML")?$f(us(s)):kc(ol(),ge(s))}function dh(s){const o=Fc();return o?o.sanitize(nr.URL,s)||"":yu(s,"URL")?us(s):El(ge(s))}function Fc(){const s=Ie();return s&&s[12]}const Vm="__ngContext__";function Xe(s,o){s[Vm]=o}function Uc(s){const o=function Zn(s){return s[Vm]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Co(s){return s.ngOriginalError}function $m(s,...o){s.error(...o)}class Br{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),c=function cb(s){return s&&s.ngErrorLogger||$m}(o);c(this._console,"ERROR",o),l&&c(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&Co(o);for(;l&&Co(l);)l=Co(l);return l||null}}const ep=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Wt))();function _(s){return s instanceof Function?s():s}var ae=(()=>((ae=ae||{})[ae.Important=1]="Important",ae[ae.DashCase=2]="DashCase",ae))();function nt(s,o){return undefined(s,o)}function Fn(s){const o=s[3];return bi(o)?o[3]:o}function jc(s){return $c(s[13])}function Hc(s){return $c(s[4])}function $c(s){for(;null!==s&&!bi(s);)s=s[4];return s}function Tl(s,o,l,c,f){if(null!=c){let m,w=!1;bi(c)?m=c:Hi(c)&&(w=!0,c=c[0]);const b=fn(c);0===s&&null!==l?null==f?Gc(o,l,b):bu(o,l,b,f||null,!0):1===s&&null!==l?bu(o,l,b,f||null,!0):2===s?function _b(s,o,l){const c=Qm(s,o);c&&function pb(s,o,l,c){Cn(s)?s.removeChild(o,l,c):o.removeChild(l)}(s,c,o,l)}(o,b,w):3===s&&o.destroyNode(b),null!=m&&function vv(s,o,l,c,f){const m=l[7];m!==fn(l)&&Tl(o,s,c,m,f);for(let b=10;b<l.length;b++){const C=l[b];mi(C[1],C,s,o,c,m)}}(o,s,m,l,f)}}function ip(s,o,l){if(Cn(s))return s.createElement(o,l);{const c=null!==l?function Jl(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(l):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function hb(s,o){const l=s[9],c=l.indexOf(o),f=o[3];1024&o[2]&&(o[2]&=-1025,po(f,-1)),l.splice(c,1)}function Wm(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const f=c[17];null!==f&&f!==s&&hb(f,c),o>0&&(s[l-1][4]=c[4]);const m=ls(s,10+o);!function db(s,o){mi(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const w=m[19];null!==w&&w.detachView(m[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function sp(s,o){if(!(256&o[2])){const l=o[11];Cn(l)&&l.destroyNode&&mi(s,o,l,3,null,null),function mh(s){let o=s[13];if(!o)return _v(s[1],s);for(;o;){let l=null;if(Hi(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)Hi(o)&&_v(o[1],o),o=o[3];null===o&&(o=s),Hi(o)&&_v(o[1],o),l=o&&o[4]}o=l}}(o)}}function _v(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function Zm(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const f=o[l[c]];if(!(f instanceof Ra)){const m=l[c+1];if(Array.isArray(m))for(let w=0;w<m.length;w+=2){const b=f[m[w]],C=m[w+1];try{C.call(b)}finally{}}else try{m.call(f)}finally{}}}}(s,o),function Km(s,o){const l=s.cleanup,c=o[7];let f=-1;if(null!==l)for(let m=0;m<l.length-1;m+=2)if("string"==typeof l[m]){const w=l[m+1],b="function"==typeof w?w(o):fn(o[w]),C=c[f=l[m+2]],A=l[m+3];"boolean"==typeof A?b.removeEventListener(l[m],C,A):A>=0?c[f=A]():c[f=-A].unsubscribe(),m+=2}else{const w=c[f=l[m+1]];l[m].call(w)}if(null!==c){for(let m=f+1;m<c.length;m++)c[m]();o[7]=null}}(s,o),1===o[1].type&&Cn(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&bi(o[3])){l!==o[3]&&hb(l,o);const c=o[19];null!==c&&c.detachView(s)}}}function fb(s,o,l){return function Ym(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];if(2&c.flags){const f=s.data[c.directiveStart].encapsulation;if(f===zt.None||f===zt.Emulated)return null}return Or(c,l)}(s,o.parent,l)}function bu(s,o,l,c,f){Cn(s)?s.insertBefore(o,l,c,f):o.insertBefore(l,c,f)}function Gc(s,o,l){Cn(s)?s.appendChild(o,l):o.appendChild(l)}function yv(s,o,l,c,f){null!==c?bu(s,o,l,c,f):Gc(s,o,l)}function Qm(s,o){return Cn(s)?s.parentNode(o):o.parentNode}let gb=function op(s,o,l){return 40&s.type?Or(s,l):null};function _h(s,o,l,c){const f=fb(s,c,o),m=o[11],b=function Jm(s,o,l){return gb(s,o,l)}(c.parent||o[6],c,o);if(null!=f)if(Array.isArray(l))for(let C=0;C<l.length;C++)yv(m,f,l[C],b,!1);else yv(m,f,l,b,!1)}function ap(s,o){if(null!==o){const l=o.type;if(3&l)return Or(o,s);if(4&l)return Xm(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return ap(s,c);{const f=s[o.index];return bi(f)?Xm(-1,f):fn(f)}}if(32&l)return nt(o,s)()||fn(s[o.index]);{const c=mb(s,o);return null!==c?Array.isArray(c)?c[0]:ap(Fn(s[16]),c):ap(s,o.next)}}return null}function mb(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Xm(s,o){const l=10+s+1;if(l<o.length){const c=o[l],f=c[1].firstChild;if(null!==f)return ap(c,f)}return o[7]}function Al(s,o,l,c,f,m,w){for(;null!=l;){const b=c[l.index],C=l.type;if(w&&0===o&&(b&&Xe(fn(b),c),l.flags|=4),64!=(64&l.flags))if(8&C)Al(s,o,l.child,c,f,m,!1),Tl(o,s,f,b,m);else if(32&C){const A=nt(l,c);let M;for(;M=A();)Tl(o,s,f,M,m);Tl(o,s,f,b,m)}else 16&C?Ua(s,o,c,l,f,m):Tl(o,s,f,b,m);l=w?l.projectionNext:l.next}}function mi(s,o,l,c,f,m){Al(l,c,s.firstChild,o,f,m,!1)}function Ua(s,o,l,c,f,m){const w=l[16],C=w[6].projection[c.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)Tl(o,s,f,C[A],m);else Al(s,o,C,w[3],f,m,!0)}function wv(s,o,l){Cn(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function Ev(s,o,l){Cn(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function yb(s,o,l){let c=s.length;for(;;){const f=s.indexOf(o,l);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const m=o.length;if(f+m===c||s.charCodeAt(f+m)<=32)return f}l=f+1}}const vb="ng-template";function qS(s,o,l){let c=0;for(;c<s.length;){let f=s[c++];if(l&&"class"===f){if(f=s[c],-1!==yb(f.toLowerCase(),o,0))return!0}else if(1===f){for(;c<s.length&&"string"==typeof(f=s[c++]);)if(f.toLowerCase()===o)return!0;return!1}}return!1}function wb(s){return 4===s.type&&s.value!==vb}function Eb(s,o,l){return o===(4!==s.type||l?s.value:vb)}function bb(s,o,l){let c=4;const f=s.attrs||[],m=function Ib(s){for(let o=0;o<s.length;o++)if(Ns(s[o]))return o;return s.length}(f);let w=!1;for(let b=0;b<o.length;b++){const C=o[b];if("number"!=typeof C){if(!w)if(4&c){if(c=2|1&c,""!==C&&!Eb(s,C,l)||""===C&&1===o.length){if(ra(c))return!1;w=!0}}else{const A=8&c?C:o[++b];if(8&c&&null!==s.attrs){if(!qS(s.attrs,A,l)){if(ra(c))return!1;w=!0}continue}const V=zS(8&c?"class":C,f,wb(s),l);if(-1===V){if(ra(c))return!1;w=!0;continue}if(""!==A){let H;H=V>m?"":f[V+1].toLowerCase();const Q=8&c?H:null;if(Q&&-1!==yb(Q,A,0)||2&c&&A!==H){if(ra(c))return!1;w=!0}}}}else{if(!w&&!ra(c)&&!ra(C))return!1;if(w&&ra(C))continue;w=!1,c=C|1&c}}return ra(c)||w}function ra(s){return 0==(1&s)}function zS(s,o,l,c){if(null===o)return-1;let f=0;if(c||!l){let m=!1;for(;f<o.length;){const w=o[f];if(w===s)return f;if(3===w||6===w)m=!0;else{if(1===w||2===w){let b=o[++f];for(;"string"==typeof b;)b=o[++f];continue}if(4===w)break;if(0===w){f+=4;continue}}f+=m?1:2}return-1}return function Jt(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function Cb(s,o,l=!1){for(let c=0;c<o.length;c++)if(bb(s,o[c],l))return!0;return!1}function qc(s,o){return s?":not("+o.trim()+")":o}function Tb(s){let o=s[0],l=1,c=2,f="",m=!1;for(;l<s.length;){let w=s[l];if("string"==typeof w)if(2&c){const b=s[++l];f+="["+w+(b.length>0?'="'+b+'"':"")+"]"}else 8&c?f+="."+w:4&c&&(f+=" "+w);else""!==f&&!ra(w)&&(o+=qc(m,f),f=""),c=w,m=m||!ra(c);l++}return""!==f&&(o+=qc(m,f)),o}const kt={};function Db(s){ia(jt(),Ie(),Fr()+s,su())}function ia(s,o,l,c){if(!c)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&cl(o,m,l)}else{const m=s.preOrderHooks;null!==m&&uu(o,m,0,l)}yo(l)}function up(s,o){return s<<17|o<<2}function Io(s){return s>>17&32767}function To(s){return 2|s}function xl(s){return(131068&s)>>2}function Iv(s,o){return-131069&s|o<<2}function e_(s){return 1|s}function gp(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const f=l[c],m=l[c+1];if(-1!==m){const w=s.data[m];dc(f),w.contentQueries(2,o[m],m)}}}function vh(s,o,l,c,f,m,w,b,C,A){const M=o.blueprint.slice();return M[0]=f,M[2]=140|c,fo(M),M[3]=M[15]=s,M[8]=l,M[10]=w||s&&s[10],M[11]=b||s&&s[11],M[12]=C||s&&s[12]||null,M[9]=A||s&&s[9]||null,M[6]=m,M[16]=2==o.type?s[16]:M,M}function Du(s,o,l,c,f){let m=s.data[o];if(null===m)m=function mp(s,o,l,c,f){const m=Sa(),w=sc(),C=s.data[o]=function kb(s,o,l,c,f,m){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?m:m&&m.parent,l,o,c,f);return null===s.firstChild&&(s.firstChild=C),null!==m&&(w?null==m.child&&null!==C.parent&&(m.child=C):null===m.next&&(m.next=C)),C}(s,o,l,c,f),function lc(){return gt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=l,m.value=c,m.attrs=f;const w=function Aa(){const s=gt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===w?-1:w.injectorIndex}return ui(m,!0),m}function wh(s,o,l,c){if(0===l)return-1;const f=o.length;for(let m=0;m<l;m++)o.push(c),s.blueprint.push(c),s.data.push(null);return f}function Nl(s,o,l){Ho(o);try{const c=s.viewQuery;null!==c&&jv(1,c,l);const f=s.template;null!==f&&Nb(s,o,f,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&gp(s,o),s.staticViewQueries&&jv(2,s.viewQuery,l);const m=s.components;null!==m&&function Nv(s,o){for(let l=0;l<o.length;l++)dA(s,o[l])}(o,m)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Go()}}function Eh(s,o,l,c){const f=o[2];if(256==(256&f))return;Ho(o);const m=su();try{fo(o),function ou(s){return gt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&Nb(s,o,l,2,c);const w=3==(3&f);if(!m)if(w){const A=s.preOrderCheckHooks;null!==A&&cl(o,A,null)}else{const A=s.preOrderHooks;null!==A&&uu(o,A,0,null),tr(o,0)}if(function l_(s){for(let o=jc(s);null!==o;o=Hc(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const f=l[c],m=f[3];0==(1024&f[2])&&po(m,1),f[2]|=1024}}}(o),function $b(s){for(let o=jc(s);null!==o;o=Hc(o))for(let l=10;l<o.length;l++){const c=o[l],f=c[1];As(c)&&Eh(f,c,f.template,c[8])}}(o),null!==s.contentQueries&&gp(s,o),!m)if(w){const A=s.contentCheckHooks;null!==A&&cl(o,A)}else{const A=s.contentHooks;null!==A&&uu(o,A,1),tr(o,1)}!function nA(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const f=l[c];if(f<0)yo(~f);else{const m=f,w=l[++c],b=l[++c];lu(w,m),b(2,o[m])}}}finally{yo(-1)}}(s,o);const b=s.components;null!==b&&function Mb(s,o){for(let l=0;l<o.length;l++)u_(s,o[l])}(o,b);const C=s.viewQuery;if(null!==C&&jv(2,C,c),!m)if(w){const A=s.viewCheckHooks;null!==A&&cl(o,A)}else{const A=s.viewHooks;null!==A&&uu(o,A,2),tr(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),m||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,po(o[3],-1))}finally{Go()}}function rA(s,o,l,c){const f=o[10],m=!su(),w=ho(o);try{m&&!w&&f.begin&&f.begin(),w&&Nl(s,o,c),Eh(s,o,l,c)}finally{m&&!w&&f.end&&f.end()}}function Nb(s,o,l,c,f){const m=Fr(),w=2&c;try{yo(-1),w&&o.length>20&&ia(s,o,20,su()),l(c,f)}finally{yo(m)}}function _p(s,o,l){if(Md(o)){const f=o.directiveEnd;for(let m=o.directiveStart;m<f;m++){const w=s.data[m];w.contentQueries&&w.contentQueries(1,l[m],m)}}}function Wc(s,o,l){!iu()||(function aA(s,o,l,c){const f=l.directiveStart,m=l.directiveEnd;s.firstCreatePass||Ti(l,o),Xe(c,o);const w=l.initialInputs;for(let b=f;b<m;b++){const C=s.data[b],A=si(C);A&&Hb(o,l,C);const M=di(o,s,b,l);Xe(M,o),null!==w&&cA(0,b-f,M,C,0,w),A&&(kr(l.index,o)[8]=M)}}(s,o,l,Or(l,o)),128==(128&l.flags)&&function lA(s,o,l){const c=l.directiveStart,f=l.directiveEnd,w=l.index,b=function uc(){return gt.lFrame.currentDirectiveIndex}();try{yo(w);for(let C=c;C<f;C++){const A=s.data[C],M=o[C];ul(C),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Bb(A,M)}}finally{yo(-1),ul(b)}}(s,o,l))}function yp(s,o,l=Or){const c=o.localNames;if(null!==c){let f=o.index+1;for(let m=0;m<c.length;m+=2){const w=c[m+1],b=-1===w?l(o,s):s[w];s[f++]=b}}}function Pv(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=vp(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function vp(s,o,l,c,f,m,w,b,C,A){const M=20+c,V=M+f,H=function iA(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:kt);return l}(M,V),Q="function"==typeof A?A():A;return H[1]={type:s,blueprint:H,template:l,queries:null,viewQuery:b,declTNode:o,data:H.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:C,consts:Q,incompleteFirstPass:!1}}function Ob(s,o,l,c){const f=zb(o);null===l?f.push(c):(f.push(l),s.firstCreatePass&&Wb(s).push(c,f.length-1))}function wp(s,o,l){for(let c in s)if(s.hasOwnProperty(c)){const f=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(o,f):l[c]=[o,f]}return l}function Bs(s,o,l,c,f,m,w,b){const C=Or(o,l);let M,A=o.inputs;!b&&null!=A&&(M=A[c])?(Hv(s,l,M,c,f),oo(o)&&function Fb(s,o){const l=kr(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(c=function Ov(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),f=null!=w?w(f,o.value||"",c):f,Cn(m)?m.setProperty(C,c,f):vc(c)||(C.setProperty?C.setProperty(c,f):C[c]=f))}function kv(s,o,l,c){let f=!1;if(iu()){const m=function Ep(s,o,l){const c=s.directiveRegistry;let f=null;if(c)for(let m=0;m<c.length;m++){const w=c[m];Cb(l,w.selectors,!1)&&(f||(f=[]),Ko(Ti(l,o),s,w.type),si(w)?(bh(s,l),f.unshift(w)):f.push(w))}return f}(s,o,l),w=null===c?null:{"":-1};if(null!==m){f=!0,a_(l,s.data.length,m.length);for(let M=0;M<m.length;M++){const V=m[M];V.providersResolver&&V.providersResolver(V)}let b=!1,C=!1,A=wh(s,o,m.length,null);for(let M=0;M<m.length;M++){const V=m[M];l.mergedAttrs=dl(l.mergedAttrs,V.hostAttrs),jb(s,l,o,A,V),bp(A,V,w),null!==V.contentQueries&&(l.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(l.flags|=128);const H=V.type.prototype;!b&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),b=!0),!C&&(H.ngOnChanges||H.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),C=!0),A++}!function sA(s,o){const c=o.directiveEnd,f=s.data,m=o.attrs,w=[];let b=null,C=null;for(let A=o.directiveStart;A<c;A++){const M=f[A],V=M.inputs,H=null===m||wb(o)?null:Lv(V,m);w.push(H),b=wp(V,A,b),C=wp(M.outputs,A,C)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=16),b.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=w,o.inputs=b,o.outputs=C}(s,l)}w&&function uA(s,o,l){if(o){const c=s.localNames=[];for(let f=0;f<o.length;f+=2){const m=l[o[f+1]];if(null==m)throw new Oe(-301,!1);c.push(o[f],m)}}}(l,c,w)}return l.mergedAttrs=dl(l.mergedAttrs,l.attrs),f}function Au(s,o,l,c,f,m){const w=m.hostBindings;if(w){let b=s.hostBindingOpCodes;null===b&&(b=s.hostBindingOpCodes=[]);const C=~o.index;(function oA(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(b)!=C&&b.push(C),b.push(c,f,w)}}function Bb(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function bh(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function bp(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;si(o)&&(l[""]=s)}}function a_(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function jb(s,o,l,c,f){s.data[c]=f;const m=f.factory||(f.factory=oi(f.type)),w=new Ra(m,si(f),null);s.blueprint[c]=w,l[c]=w,Au(s,o,0,c,wh(s,l,f.hostVars,kt),f)}function Hb(s,o,l){const c=Or(o,s),f=Pv(l),m=s[10],w=c_(s,vh(s,f,null,l.onPush?64:16,c,o,m,m.createRenderer(c,l),null,null));s[o.index]=w}function sa(s,o,l,c,f,m){const w=Or(s,o);!function Fv(s,o,l,c,f,m,w){if(null==m)Cn(s)?s.removeAttribute(o,f,l):o.removeAttribute(f);else{const b=null==w?ge(m):w(m,c||"",f);Cn(s)?s.setAttribute(o,f,b,l):l?o.setAttributeNS(l,f,b):o.setAttribute(f,b)}}(o[11],w,m,s.value,l,c,f)}function cA(s,o,l,c,f,m){const w=m[o];if(null!==w){const b=c.setInput;for(let C=0;C<w.length;){const A=w[C++],M=w[C++],V=w[C++];null!==b?c.setInput(l,V,A,M):l[M]=V}}}function Lv(s,o){let l=null,c=0;for(;c<o.length;){const f=o[c];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,s[f],o[c+1])),c+=2}else c+=2;else c+=4}return l}function Vv(s,o,l,c){return new Array(s,!0,!1,o,null,0,c,l,null,null)}function u_(s,o){const l=kr(o,s);if(As(l)){const c=l[1];80&l[2]?Eh(c,l,c.template,l[8]):l[5]>0&&Uv(l)}}function Uv(s){for(let c=jc(s);null!==c;c=Hc(c))for(let f=10;f<c.length;f++){const m=c[f];if(1024&m[2]){const w=m[1];Eh(w,m,w.template,m[8])}else m[5]>0&&Uv(m)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const f=kr(l[c],s);As(f)&&f[5]>0&&Uv(f)}}function dA(s,o){const l=kr(o,s),c=l[1];(function hA(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),Nl(c,l,l[8])}function c_(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Ch(s){for(;s;){s[2]|=64;const o=Fn(s);if(Df(s)&&!o)return s;s=o}return null}function Ih(s,o,l){const c=o[10];c.begin&&c.begin();try{Eh(s,o,s.template,l)}catch(f){throw Kb(o,f),f}finally{c.end&&c.end()}}function Bv(s){!function d_(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],c=Uc(l),f=c[1];rA(f,c,f.template,l)}}(s[8])}function jv(s,o,l){dc(0),o(s,l)}const fA=(()=>Promise.resolve(null))();function zb(s){return s[7]||(s[7]=[])}function Wb(s){return s.cleanup||(s.cleanup=[])}function Kb(s,o){const l=s[9],c=l?l.get(Br,null):null;c&&c.handleError(o)}function Hv(s,o,l,c,f){for(let m=0;m<l.length;){const w=l[m++],b=l[m++],C=o[w],A=s.data[w];null!==A.setInput?A.setInput(C,f,c,b):C[b]=f}}function Do(s,o,l){const c=jo(o,s);!function np(s,o,l){Cn(s)?s.setValue(o,l):o.textContent=l}(s[11],c,l)}function f_(s,o,l){let c=l?s.styles:null,f=l?s.classes:null,m=0;if(null!==o)for(let w=0;w<o.length;w++){const b=o[w];"number"==typeof b?m=b:1==m?f=ce(f,b):2==m&&(c=ce(c,b+": "+o[++w]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=f:s.classesWithoutHost=f}const Kc=new $n("INJECTOR",-1);class Zb{get(o,l=Fs){if(l===Fs){const c=new Error(`NullInjectorError: No provider for ${fe(o)}!`);throw c.name="NullInjectorError",c}return l}}const $v=new $n("Set Injector scope."),Pl={},gA={};let Gv;function Yb(){return void 0===Gv&&(Gv=new Zb),Gv}function Qb(s,o=null,l=null,c){const f=Jb(s,o,l,c);return f._resolveInjectorDefTypes(),f}function Jb(s,o=null,l=null,c){return new mA(s,l,o||Yb(),c)}class mA{constructor(o,l,c,f=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];l&&zi(l,b=>this.processProvider(b,o,l)),zi([o],b=>this.processInjectorType(b,[],m)),this.records.set(Kc,Th(void 0,this));const w=this.records.get($v);this.scope=null!=w?w.value:null,this.source=f||("object"==typeof o?null:fe(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=Fs,c=ht.Default){this.assertNotDestroyed();const f=Me(this),m=or(void 0);try{if(!(c&ht.SkipSelf)){let b=this.records.get(o);if(void 0===b){const C=function nC(s){return"function"==typeof s||"object"==typeof s&&s instanceof $n}(o)&&qt(o);b=C&&this.injectableDefInScope(C)?Th(qv(o),Pl):null,this.records.set(o,b)}if(null!=b)return this.hydrate(o,b)}return(c&ht.Self?Yb():this.parent).get(o,l=c&ht.Optional&&l===Fs?null:l)}catch(w){if("NullInjectorError"===w.name){if((w[Ac]=w[Ac]||[]).unshift(fe(o)),f)throw w;return function yl(s,o,l,c){const f=s[Ac];throw o[B]&&f.unshift(o[B]),s.message=function ka(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let f=fe(o);if(Array.isArray(o))f=o.map(fe).join(" -> ");else if("object"==typeof o){let m=[];for(let w in o)if(o.hasOwnProperty(w)){let b=o[w];m.push(w+":"+("string"==typeof b?JSON.stringify(b):fe(b)))}f=`{${m.join(", ")}}`}return`${l}${c?"("+c+")":""}[${f}]: ${s.replace(S,"\n  ")}`}("\n"+s.message,f,l,c),s.ngTokenPath=f,s[Ac]=null,s}(w,o,"R3InjectorError",this.source)}throw w}finally{or(m),Me(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,f)=>o.push(fe(f))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(o,l,c){if(!(o=ee(o)))return!1;let f=zr(o);const m=null==f&&o.ngModule||void 0,w=void 0===m?o:m,b=-1!==c.indexOf(w);if(void 0!==m&&(f=zr(m)),null==f)return!1;if(null!=f.imports&&!b){let M;c.push(w);try{zi(f.imports,V=>{this.processInjectorType(V,l,c)&&(void 0===M&&(M=[]),M.push(V))})}finally{}if(void 0!==M)for(let V=0;V<M.length;V++){const{ngModule:H,providers:Q}=M[V];zi(Q,we=>this.processProvider(we,H,Q||ft))}}this.injectorDefTypes.add(w);const C=oi(w)||(()=>new w);this.records.set(w,Th(C,Pl));const A=f.providers;if(null!=A&&!b){const M=o;zi(A,V=>this.processProvider(V,M,A))}return void 0!==m&&void 0!==o.providers}processProvider(o,l,c){let f=Dh(o=ee(o))?o:ee(o&&o.provide);const m=function yA(s,o,l){return Xb(s)?Th(void 0,s.useValue):Th(zv(s),Pl)}(o);if(Dh(o)||!0!==o.multi)this.records.get(f);else{let w=this.records.get(f);w||(w=Th(void 0,Pl,!0),w.factory=()=>At(w.multi),this.records.set(f,w)),f=o,w.multi.push(o)}this.records.set(f,m)}hydrate(o,l){return l.value===Pl&&(l.value=gA,l.value=l.factory()),"object"==typeof l.value&&l.value&&function tC(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=ee(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function qv(s){const o=qt(s),l=null!==o?o.factory:oi(s);if(null!==l)return l;if(s instanceof $n)throw new Oe(204,!1);if(s instanceof Function)return function _A(s){const o=s.length;if(o>0)throw function fi(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}(o,"?"),new Oe(204,!1);const l=function ri(s){const o=s&&(s[rs]||s[ws]);if(o){const l=function to(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Oe(204,!1)}function zv(s,o,l){let c;if(Dh(s)){const f=ee(s);return oi(f)||qv(f)}if(Xb(s))c=()=>ee(s.useValue);else if(function wA(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...At(s.deps||[]));else if(function vA(s){return!(!s||!s.useExisting)}(s))c=()=>it(ee(s.useExisting));else{const f=ee(s&&(s.useClass||s.provide));if(!function BO(s){return!!s.deps}(s))return oi(f)||qv(f);c=()=>new f(...At(s.deps))}return c}function Th(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function Xb(s){return null!==s&&"object"==typeof s&&Y in s}function Dh(s){return"function"==typeof s}let So=(()=>{class s{static create(l,c){var f;if(Array.isArray(l))return Qb({name:""},c,l,"");{const m=null!==(f=l.name)&&void 0!==f?f:"";return Qb({name:m},l.parent,l.providers,m)}}}return s.THROW_IF_NOT_FOUND=Fs,s.NULL=new Zb,s.\u0275prov=un({token:s,providedIn:"any",factory:()=>it(Kc)}),s.__NG_ELEMENT_ID__=-1,s})();function TA(s,o){xs(Uc(s)[1],Dn())}function __(s){let o=function gC(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;o;){let f;if(si(s))f=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Oe(903,"");f=o.\u0275dir}if(f){if(l){c.push(f);const w=s;w.inputs=Ip(s.inputs),w.declaredInputs=Ip(s.declaredInputs),w.outputs=Ip(s.outputs);const b=f.hostBindings;b&&_C(s,b);const C=f.viewQuery,A=f.contentQueries;if(C&&GO(s,C),A&&Yc(s,A),ie(s.inputs,f.inputs),ie(s.declaredInputs,f.declaredInputs),ie(s.outputs,f.outputs),si(f)&&f.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(f.data.animation)}}const m=f.features;if(m)for(let w=0;w<m.length;w++){const b=m[w];b&&b.ngInherit&&b(s),b===__&&(l=!1)}}o=Object.getPrototypeOf(o)}!function mC(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const f=s[c];f.hostVars=o+=f.hostVars,f.hostAttrs=dl(f.hostAttrs,l=dl(l,f.hostAttrs))}}(c)}function Ip(s){return s===br?{}:s===ft?[]:s}function GO(s,o){const l=s.viewQuery;s.viewQuery=l?(c,f)=>{o(c,f),l(c,f)}:o}function Yc(s,o){const l=s.contentQueries;s.contentQueries=l?(c,f,m)=>{o(c,f,m),l(c,f,m)}:o}function _C(s,o){const l=s.hostBindings;s.hostBindings=l?(c,f)=>{o(c,f),l(c,f)}:o}let y_=null;function Sh(){if(!y_){const s=Wt.Symbol;if(s&&s.iterator)y_=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(y_=c)}}}return y_}function Ah(s){return!!Zv(s)&&(Array.isArray(s)||!(s instanceof Map)&&Sh()in s)}function Zv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Ao(s,o,l){return s[o]=l}function Ri(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function Ru(s,o,l,c){const f=Ri(s,o,l);return Ri(s,o+1,c)||f}function Dp(s,o,l,c){const f=Ie();return Ri(f,mo(),o)&&(jt(),sa(Hn(),f,s,o,l,c)),Dp}function Qc(s,o,l,c){return Ri(s,mo(),l)?o+ge(l)+c:kt}function Jc(s,o,l,c,f,m){const b=Ru(s,function Ii(){return gt.lFrame.bindingIndex}(),l,f);return Gi(2),b?o+ge(l)+c+ge(f)+m:kt}function Xv(s,o,l,c,f,m,w,b){const C=Ie(),A=jt(),M=s+20,V=A.firstCreatePass?function Jv(s,o,l,c,f,m,w,b,C){const A=o.consts,M=Du(o,s,4,w||null,li(A,b));kv(o,l,M,li(A,C)),xs(o,M);const V=M.tViews=vp(2,M,c,f,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,M),V.queries=o.queries.embeddedTView(M)),M}(M,A,C,o,l,c,f,m,w):A.data[M];ui(V,!1);const H=C[11].createComment("");_h(A,C,H,V),Xe(H,C),c_(C,C[M]=Vv(H,C,H,V)),zl(V)&&Wc(A,C,V),null!=w&&yp(C,V,b)}function vC(s){return $i(function ac(){return gt.lFrame.contextLView}(),20+s)}function Fh(s,o=ht.Default){const l=Ie();return null===l?it(s,o):Di(Dn(),l,ee(s),o)}function lw(){throw new Error("invalid")}function C_(s,o,l){const c=Ie();return Ri(c,mo(),o)&&Bs(jt(),Hn(),c,s,o,c[11],l,!1),C_}function I_(s,o,l,c,f){const w=f?"class":"style";Hv(s,l,o.inputs[w],w,c)}function T_(s,o,l,c){const f=Ie(),m=jt(),w=20+s,b=f[11],C=f[w]=ip(b,o,function rv(){return gt.lFrame.currentNamespace}()),A=m.firstCreatePass?function SC(s,o,l,c,f,m,w){const b=o.consts,A=Du(o,s,2,f,li(b,m));return kv(o,l,A,li(b,w)),null!==A.attrs&&f_(A,A.attrs,!1),null!==A.mergedAttrs&&f_(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(w,m,f,0,o,l,c):m.data[w];ui(A,!0);const M=A.mergedAttrs;null!==M&&yc(b,C,M);const V=A.classes;null!==V&&Ev(b,C,V);const H=A.styles;return null!==H&&wv(b,C,H),64!=(64&A.flags)&&_h(m,f,C,A),0===function ll(){return gt.lFrame.elementDepthCount}()&&Xe(C,f),function nu(){gt.lFrame.elementDepthCount++}(),zl(A)&&(Wc(m,f,A),_p(m,A,f)),null!==c&&yp(f,A),T_}function Lh(){let s=Dn();sc()?oc():(s=s.parent,ui(s,!1));const o=s;!function ru(){gt.lFrame.elementDepthCount--}();const l=jt();return l.firstCreatePass&&(xs(l,s),Md(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function zd(s){return 0!=(16&s.flags)}(o)&&I_(l,o,Ie(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function gm(s){return 0!=(32&s.flags)}(o)&&I_(l,o,Ie(),o.stylesWithoutHost,!1),Lh}function D_(s,o,l,c){return T_(s,o,l,c),Lh(),D_}function S_(s,o,l){const c=Ie(),f=jt(),m=s+20,w=f.firstCreatePass?function uw(s,o,l,c,f){const m=o.consts,w=li(m,c),b=Du(o,s,8,"ng-container",w);return null!==w&&f_(b,w,!0),kv(o,l,b,li(m,f)),null!==o.queries&&o.queries.elementStart(o,b),b}(m,f,c,o,l):f.data[m];ui(w,!0);const b=c[m]=c[11].createComment("");return _h(f,c,b,w),Xe(b,c),zl(w)&&(Wc(f,c,w),_p(f,w,c)),null!=l&&yp(c,w),S_}function xp(){let s=Dn();const o=jt();return sc()?oc():(s=s.parent,ui(s,!1)),o.firstCreatePass&&(xs(o,s),Md(s)&&o.queries.elementEnd(s)),xp}function A_(){return Ie()}function Rp(s){return!!s&&"function"==typeof s.then}function x_(s){return!!s&&"function"==typeof s.subscribe}const xC=x_;function cw(s,o,l,c){const f=Ie(),m=jt(),w=Dn();return function RC(s,o,l,c,f,m,w,b){const C=zl(c),M=s.firstCreatePass&&Wb(s),V=o[8],H=zb(o);let Q=!0;if(3&c.type||b){const Ge=Or(c,o),rt=b?b(Ge):Ge,Te=H.length,_t=b?Zt=>b(fn(Zt[c.index])):c.index;if(Cn(l)){let Zt=null;if(!b&&C&&(Zt=function jA(s,o,l,c){const f=s.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const w=f[m];if(w===l&&f[m+1]===c){const b=o[7],C=f[m+2];return b.length>C?b[C]:null}"string"==typeof w&&(m+=2)}return null}(s,o,f,c.index)),null!==Zt)(Zt.__ngLastListenerFn__||Zt).__ngNextListenerFn__=m,Zt.__ngLastListenerFn__=m,Q=!1;else{m=R_(c,o,V,m,!1);const vn=l.listen(rt,f,m);H.push(m,vn),M&&M.push(f,_t,Te,Te+1)}}else m=R_(c,o,V,m,!0),rt.addEventListener(f,m,w),H.push(m),M&&M.push(f,_t,Te,w)}else m=R_(c,o,V,m,!1);const we=c.outputs;let Fe;if(Q&&null!==we&&(Fe=we[f])){const Ge=Fe.length;if(Ge)for(let rt=0;rt<Ge;rt+=2){const Zi=o[Fe[rt]][Fe[rt+1]].subscribe(m),Hu=H.length;H.push(m,Zi),M&&M.push(f,c.index,Hu,-(Hu+1))}}}(m,f,f[11],w,s,o,!!l,c),cw}function MC(s,o,l,c){try{return!1!==l(c)}catch(f){return Kb(s,f),!1}}function R_(s,o,l,c,f){return function m(w){if(w===Function)return c;const b=2&s.flags?kr(s.index,o):o;0==(32&o[2])&&Ch(b);let C=MC(o,0,c,w),A=m.__ngNextListenerFn__;for(;A;)C=MC(o,0,A,w)&&C,A=A.__ngNextListenerFn__;return f&&!1===C&&(w.preventDefault(),w.returnValue=!1),C}}function hw(s=1){return function _o(s){return(gt.lFrame.contextLView=function fc(s,o){for(;s>0;)o=o[15],s--;return o}(s,gt.lFrame.contextLView))[8]}(s)}function M_(s,o,l,c,f){const m=Ie(),w=Qc(m,o,l,c);return w!==kt&&Bs(jt(),Hn(),m,s,w,m[11],f,!1),M_}function Vh(s,o,l,c,f){const m=s[l+1],w=null===o;let b=c?Io(m):xl(m),C=!1;for(;0!==b&&(!1===C||w);){const M=s[b+1];gw(s[b],o)&&(C=!0,s[b+1]=c?e_(M):To(M)),b=c?Io(M):xl(M)}C&&(s[l+1]=c?To(m):e_(m))}function gw(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&ml(s,o)>=0}const Hr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function VC(s){return s.substring(Hr.key,Hr.keyEnd)}function P_(s,o){const l=Hr.textEnd;return l===o?-1:(o=Hr.keyEnd=function jC(s,o,l){for(;o<l&&s.charCodeAt(o)>32;)o++;return o}(s,Hr.key=o,l),Uh(s,o,l))}function Uh(s,o,l){for(;o<l&&s.charCodeAt(o)<=32;)o++;return o}function O_(s,o,l){return Ht(s,o,l,!1),O_}function k_(s,o){return Ht(s,o,null,!0),k_}function yw(s){!function xt(s,o,l,c){const f=jt(),m=Gi(2);f.firstUpdatePass&&An(f,null,m,c);const w=Ie();if(l!==kt&&Ri(w,m,l)){const b=f.data[Fr()];if(Ew(b,c)&&!kl(f,m)){let C=c?b.classesWithoutHost:b.stylesWithoutHost;null!==C&&(l=ce(C,l||"")),I_(f,b,w,l,c)}else!function ww(s,o,l,c,f,m,w,b){f===kt&&(f=ft);let C=0,A=0,M=0<f.length?f[0]:null,V=0<m.length?m[0]:null;for(;null!==M||null!==V;){const H=C<f.length?f[C+1]:void 0,Q=A<m.length?m[A+1]:void 0;let Fe,we=null;M===V?(C+=2,A+=2,H!==Q&&(we=V,Fe=Q)):null===V||null!==M&&M<V?(C+=2,we=M):(A+=2,we=V,Fe=Q),null!==we&&Hs(s,o,l,c,we,Fe,w,b),M=C<f.length?f[C]:null,V=A<m.length?m[A]:null}}(f,b,w,w[11],w[m+1],w[m+1]=function Ki(s,o,l){if(null==l||""===l)return ft;const c=[],f=us(l);if(Array.isArray(f))for(let m=0;m<f.length;m++)s(c,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&s(c,m,f[m]);else"string"==typeof f&&o(c,f);return c}(s,o,l),c,m)}}(Ai,Kt,s,!0)}function Kt(s,o){for(let l=function zA(s){return function mw(s){Hr.key=0,Hr.keyEnd=0,Hr.value=0,Hr.valueEnd=0,Hr.textEnd=s.length}(s),P_(s,Uh(s,0,Hr.textEnd))}(o);l>=0;l=P_(o,l))Ai(s,VC(o),!0)}function Ht(s,o,l,c){const f=Ie(),m=jt(),w=Gi(2);m.firstUpdatePass&&An(m,s,w,c),o!==kt&&Ri(f,w,o)&&Hs(m,m.data[Fr()],f,f[11],s,f[w+1]=function ZA(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=fe(us(s)))),s}(o,l),c,w)}function kl(s,o){return o>=s.expandoStartIndex}function An(s,o,l,c){const f=s.data;if(null===f[l+1]){const m=f[Fr()],w=kl(s,l);Ew(m,c)&&null===o&&!w&&(o=!1),o=function vw(s,o,l,c){const f=xa(s);let m=c?o.residualClasses:o.residualStyles;if(null===f)0===(c?o.classBindings:o.styleBindings)&&(l=Lt(l=Ln(null,s,o,l,c),o.attrs,c),m=null);else{const w=o.directiveStylingLast;if(-1===w||s[w]!==f)if(l=Ln(f,s,o,l,c),null===m){let C=function KA(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==xl(c))return s[Io(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=Ln(null,s,o,C[1],c),C=Lt(C,o.attrs,c),function Np(s,o,l,c){s[Io(l?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else m=function zC(s,o,l){let c;const f=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<f;m++)c=Lt(c,s[m].hostAttrs,l);return Lt(c,o.attrs,l)}(s,o,c)}return void 0!==m&&(c?o.residualClasses=m:o.residualStyles=m),l}(f,m,o,c),function GA(s,o,l,c,f,m){let w=m?o.classBindings:o.styleBindings,b=Io(w),C=xl(w);s[c]=l;let M,A=!1;if(Array.isArray(l)){const V=l;M=V[1],(null===M||ml(V,M)>0)&&(A=!0)}else M=l;if(f)if(0!==C){const H=Io(s[b+1]);s[c+1]=up(H,b),0!==H&&(s[H+1]=Iv(s[H+1],c)),s[b+1]=function _i(s,o){return 131071&s|o<<17}(s[b+1],c)}else s[c+1]=up(b,0),0!==b&&(s[b+1]=Iv(s[b+1],c)),b=c;else s[c+1]=up(C,0),0===b?b=c:s[C+1]=Iv(s[C+1],c),C=c;A&&(s[c+1]=To(s[c+1])),Vh(s,M,c,!0),Vh(s,M,c,!1),function Mp(s,o,l,c,f){const m=f?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&ml(m,o)>=0&&(l[c+1]=e_(l[c+1]))}(o,M,s,c,m),w=up(b,C),m?o.classBindings=w:o.styleBindings=w}(f,m,o,l,w,c)}}function Ln(s,o,l,c,f){let m=null;const w=l.directiveEnd;let b=l.directiveStylingLast;for(-1===b?b=l.directiveStart:b++;b<w&&(m=o[b],c=Lt(c,m.hostAttrs,f),m!==s);)b++;return null!==s&&(l.directiveStylingLast=b),c}function Lt(s,o,l){const c=l?1:2;let f=-1;if(null!==o)for(let m=0;m<o.length;m++){const w=o[m];"number"==typeof w?f=w:f===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Ai(s,w,!!l||o[++m]))}return void 0===s?null:s}function Hs(s,o,l,c,f,m,w,b){if(!(3&o.type))return;const C=s.data,A=C[b+1];F_(function Tv(s){return 1==(1&s)}(A)?KC(C,o,l,f,xl(A),w):void 0)||(F_(m)||function YS(s){return 2==(2&s)}(A)&&(m=KC(C,null,l,f,b,w)),function lp(s,o,l,c,f){const m=Cn(s);if(o)f?m?s.addClass(l,c):l.classList.add(c):m?s.removeClass(l,c):l.classList.remove(c);else{let w=-1===c.indexOf("-")?void 0:ae.DashCase;if(null==f)m?s.removeStyle(l,c,w):l.style.removeProperty(c);else{const b="string"==typeof f&&f.endsWith("!important");b&&(f=f.slice(0,-10),w|=ae.Important),m?s.setStyle(l,c,f,w):l.style.setProperty(c,f,b?"important":"")}}}(c,w,jo(Fr(),l),f,m))}function KC(s,o,l,c,f,m){const w=null===o;let b;for(;f>0;){const C=s[f],A=Array.isArray(C),M=A?C[1]:C,V=null===M;let H=l[f+1];H===kt&&(H=V?ft:void 0);let Q=V?kf(H,c):M===c?H:void 0;if(A&&!F_(Q)&&(Q=kf(C,c)),F_(Q)&&(b=Q,w))return b;const we=s[f+1];f=w?Io(we):xl(we)}if(null!==o){let C=m?o.residualClasses:o.residualStyles;null!=C&&(b=kf(C,c))}return b}function F_(s){return void 0!==s}function Ew(s,o){return 0!=(s.flags&(o?16:32))}function Pu(s,o=""){const l=Ie(),c=jt(),f=s+20,m=c.firstCreatePass?Du(c,f,1,o,null):c.data[f],w=l[f]=function tp(s,o){return Cn(s)?s.createText(o):s.createTextNode(o)}(l[11],o);_h(c,l,w,m),ui(m,!1)}function Pp(s){return Ou("",s,""),Pp}function Ou(s,o,l){const c=Ie(),f=Qc(c,s,o,l);return f!==kt&&Do(c,Fr(),f),Ou}function bw(s,o,l,c,f){const m=Ie(),w=Jc(m,s,o,l,c,f);return w!==kt&&Do(m,Fr(),w),bw}function ca(s,o,l){const c=Ie();if(Ri(c,mo(),o)){const m=jt(),w=Hn();Bs(m,w,c,s,o,function h_(s,o,l){return(null===s||si(s))&&(l=function Vd(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(l[o.index])),l[11]}(xa(m.data),w,c),l,!0)}return ca}const da=void 0;var XA=["en",[["a","p"],["AM","PM"],da],[["AM","PM"],da,da],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],da,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],da,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",da,"{1} 'at' {0}",da],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Vt(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let $a={};function Gn(s){const o=function dI(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=j_(o);if(l)return l;const c=o.split("-")[0];if(l=j_(c),l)return l;if("en"===c)return XA;throw new Error(`Missing locale data for the locale "${s}".`)}function cI(s){return Gn(s)[wt.PluralCase]}function j_(s){return s in $a||($a[s]=Wt.ng&&Wt.ng.common&&Wt.ng.common.locales&&Wt.ng.common.locales[s]),$a[s]}var wt=(()=>((wt=wt||{})[wt.LocaleId=0]="LocaleId",wt[wt.DayPeriodsFormat=1]="DayPeriodsFormat",wt[wt.DayPeriodsStandalone=2]="DayPeriodsStandalone",wt[wt.DaysFormat=3]="DaysFormat",wt[wt.DaysStandalone=4]="DaysStandalone",wt[wt.MonthsFormat=5]="MonthsFormat",wt[wt.MonthsStandalone=6]="MonthsStandalone",wt[wt.Eras=7]="Eras",wt[wt.FirstDayOfWeek=8]="FirstDayOfWeek",wt[wt.WeekendRange=9]="WeekendRange",wt[wt.DateFormat=10]="DateFormat",wt[wt.TimeFormat=11]="TimeFormat",wt[wt.DateTimeFormat=12]="DateTimeFormat",wt[wt.NumberSymbols=13]="NumberSymbols",wt[wt.NumberFormats=14]="NumberFormats",wt[wt.CurrencyCode=15]="CurrencyCode",wt[wt.CurrencySymbol=16]="CurrencySymbol",wt[wt.CurrencyName=17]="CurrencyName",wt[wt.Currencies=18]="Currencies",wt[wt.Directionality=19]="Directionality",wt[wt.PluralCase=20]="PluralCase",wt[wt.ExtraData=21]="ExtraData",wt))();const Fp="en-US";let pI=Fp;function J_(s,o,l,c,f){if(s=ee(s),Array.isArray(s))for(let m=0;m<s.length;m++)J_(s[m],o,l,c,f);else{const m=jt(),w=Ie();let b=Dh(s)?s:ee(s.provide),C=zv(s);const A=Dn(),M=1048575&A.providerIndexes,V=A.directiveStart,H=A.providerIndexes>>20;if(Dh(s)||!s.multi){const Q=new Ra(C,f,Fh),we=X_(b,o,f?M:M+H,V);-1===we?(Ko(Ti(A,w),m,b),Vw(m,s,o.length),o.push(b),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(Q),w.push(Q)):(l[we]=Q,w[we]=Q)}else{const Q=X_(b,o,M+H,V),we=X_(b,o,M,M+H),Fe=Q>=0&&l[Q],Ge=we>=0&&l[we];if(f&&!Ge||!f&&!Fe){Ko(Ti(A,w),m,b);const rt=function wx(s,o,l,c,f){const m=new Ra(s,l,Fh);return m.multi=[],m.index=o,m.componentProviders=0,PI(m,f,c&&!l),m}(f?vx:Uw,l.length,f,c,C);!f&&Ge&&(l[we].providerFactory=rt),Vw(m,s,o.length,0),o.push(b),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(rt),w.push(rt)}else Vw(m,s,Q>-1?Q:we,PI(l[f?we:Q],C,!f&&c));!f&&c&&Ge&&l[we].componentProviders++}}}function Vw(s,o,l,c){const f=Dh(o),m=function eC(s){return!!s.useClass}(o);if(f||m){const C=(m?ee(o.useClass):o).prototype.ngOnDestroy;if(C){const A=s.destroyHooks||(s.destroyHooks=[]);if(!f&&o.multi){const M=A.indexOf(l);-1===M?A.push(l,[c,C]):A[M+1].push(c,C)}else A.push(l,C)}}}function PI(s,o,l){return l&&s.componentProviders++,s.multi.push(o)-1}function X_(s,o,l,c){for(let f=l;f<c;f++)if(o[f]===s)return f;return-1}function Uw(s,o,l,c){return Bw(this.multi,[])}function vx(s,o,l,c){const f=this.multi;let m;if(this.providerFactory){const w=this.providerFactory.componentProviders,b=di(l,l[1],this.providerFactory.index,c);m=b.slice(0,w),Bw(f,m);for(let C=w;C<b.length;C++)m.push(b[C])}else m=[],Bw(f,m);return m}function Bw(s,o){for(let l=0;l<s.length;l++)o.push((0,s[l])());return o}function OI(s,o=[]){return l=>{l.providersResolver=(c,f)=>function NI(s,o,l){const c=jt();if(c.firstCreatePass){const f=si(s);J_(l,c.data,c.blueprint,f,!0),J_(o,c.data,c.blueprint,f,!1)}}(c,f?f(s):s,o)}}class Jp{}class FI{resolveComponentFactory(o){throw function jw(s){const o=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Gh=(()=>{class s{}return s.NULL=new FI,s})();function Ex(){return qh(Dn(),Ie())}function qh(s,o){return new Xp(Or(s,o))}let Xp=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=Ex,s})();function bx(s){return s instanceof Xp?s.nativeElement:s}class LI{}let Cx=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Ix(){const s=Ie(),l=kr(Dn().index,s);return function VI(s){return s[11]}(Hi(l)?l:s)}(),s})(),UI=(()=>{class s{}return s.\u0275prov=un({token:s,providedIn:"root",factory:()=>null}),s})();class $w{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const BI=new $w("13.3.2"),ey={};function dd(s,o,l,c,f=!1){for(;null!==l;){const m=o[l.index];if(null!==m&&c.push(fn(m)),bi(m))for(let b=10;b<m.length;b++){const C=m[b],A=C[1].firstChild;null!==A&&dd(C[1],C,A,c)}const w=l.type;if(8&w)dd(s,o,l.child,c);else if(32&w){const b=nt(l,o);let C;for(;C=b();)c.push(C)}else if(16&w){const b=mb(o,l);if(Array.isArray(b))c.push(...b);else{const C=Fn(o[16]);dd(C[1],C,b,c,!0)}}l=f?l.projectionNext:l.next}return c}class zh{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return dd(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(bi(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&(Wm(o,c),ls(l,c))}this._attachedToViewContainer=!1}sp(this._lView[1],this._lView)}onDestroy(o){Ob(this._lView[1],this._lView,null,o)}markForCheck(){Ch(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ih(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Cp(s,o,l){go(!0);try{Ih(s,o,l)}finally{go(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Us(s,o){mi(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=o}}class Tx extends zh{constructor(o){super(o),this._view=o}detectChanges(){Bv(this._view)}checkNoChanges(){!function qb(s){go(!0);try{Bv(s)}finally{go(!1)}}(this._view)}get context(){return null}}class jI extends Gh{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=Yt(o);return new qw(l,this.ngModule)}}function HI(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}class qw extends Jp{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function bv(s){return s.map(Tb).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return HI(this.componentDef.inputs)}get outputs(){return HI(this.componentDef.outputs)}create(o,l,c,f){const m=(f=f||this.ngModule)?function $I(s,o){return{get:(l,c,f)=>{const m=s.get(l,ey,f);return m!==ey||c===ey?m:o.get(l,c,f)}}}(o,f.injector):o,w=m.get(LI,Da),b=m.get(UI,null),C=w.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",M=c?function Pb(s,o,l){if(Cn(s))return s.selectRootElement(o,l===zt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(C,c,this.componentDef.encapsulation):ip(w.createRenderer(null,this.componentDef),A,function Gw(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),V=this.componentDef.onPush?576:528,H=function pC(s,o){return{components:[],scheduler:s||ep,clean:fA,playerHandler:o||null,flags:0}}(),Q=vp(0,null,null,1,0,null,null,null,null,null),we=vh(null,Q,H,V,null,null,w,C,b,m);let Fe,Ge;Ho(we);try{const rt=function xu(s,o,l,c,f,m){const w=l[1];l[20]=s;const C=Du(w,20,2,"#host",null),A=C.mergedAttrs=o.hostAttrs;null!==A&&(f_(C,A,!0),null!==s&&(yc(f,s,A),null!==C.classes&&Ev(f,s,C.classes),null!==C.styles&&wv(f,s,C.styles)));const M=c.createRenderer(s,o),V=vh(l,Pv(o),null,o.onPush?64:16,l[20],C,c,M,m||null,null);return w.firstCreatePass&&(Ko(Ti(C,l),w,o.type),bh(w,C),a_(C,l.length,1)),c_(l,V),l[20]=V}(M,this.componentDef,we,w,C);if(M)if(c)yc(C,M,["ng-version",BI.full]);else{const{attrs:Te,classes:_t}=function ZS(s){const o=[],l=[];let c=1,f=2;for(;c<s.length;){let m=s[c];if("string"==typeof m)2===f?""!==m&&o.push(m,s[++c]):8===f&&l.push(m);else{if(!ra(f))break;f=m}c++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Te&&yc(C,M,Te),_t&&_t.length>0&&Ev(C,M,_t.join(" "))}if(Ge=al(Q,20),void 0!==l){const Te=Ge.projection=[];for(let _t=0;_t<this.ngContentSelectors.length;_t++){const Zt=l[_t];Te.push(null!=Zt?Array.from(Zt):null)}}Fe=function Zc(s,o,l,c,f){const m=l[1],w=function Su(s,o,l){const c=Dn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),jb(s,c,o,wh(s,o,1,null),l));const f=di(o,s,c.directiveStart,c);Xe(f,o);const m=Or(c,o);return m&&Xe(m,o),f}(m,l,o);if(c.components.push(w),s[8]=w,f&&f.forEach(C=>C(w,o)),o.contentQueries){const C=Dn();o.contentQueries(1,w,C.directiveStart)}const b=Dn();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(yo(b.index),Au(l[1],b,0,b.directiveStart,b.directiveEnd,o),Bb(o,w)),w}(rt,this.componentDef,we,H,[TA]),Nl(Q,we,null)}finally{Go()}return new Lu(this.componentType,Fe,qh(Ge,we),we,Ge)}}class Lu extends class kI{}{constructor(o,l,c,f,m){super(),this.location=c,this._rootLView=f,this._tNode=m,this.instance=l,this.hostView=this.changeDetectorRef=new Tx(f),this.componentType=o}get injector(){return new qi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class hd{}class Vl{}const Ul=new Map;class WI extends hd{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new jI(this);const c=En(o);this._bootstrapComponents=_(c.bootstrap),this._r3Injector=Jb(o,l,[{provide:hd,useValue:this},{provide:Gh,useValue:this.componentFactoryResolver}],fe(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=So.THROW_IF_NOT_FOUND,c=ht.Default){return o===So||o===hd||o===Kc?this:this._r3Injector.get(o,l,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Ga extends Vl{constructor(o){super(),this.moduleType=o,null!==En(o)&&function Ax(s){const o=new Set;!function l(c){const f=En(c,!0),m=f.id;null!==m&&(function qI(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${fe(o)} vs ${fe(o.name)}`)}(m,Ul.get(m),c),Ul.set(m,c));const w=_(f.imports);for(const b of w)o.has(b)||(o.add(b),l(b))}(s)}(o)}create(o){return new WI(this.moduleType,o)}}function KI(s,o,l,c){return function Zw(s,o,l,c,f,m){const w=o+l;return Ri(s,w,f)?Ao(s,w+1,m?c.call(m,f):c(f)):qa(s,w+1)}(Ie(),Tr(),s,o,l,c)}function qa(s,o){const l=s[o];return l===kt?void 0:l}function Qw(s,o,l,c,f,m,w,b){const C=o+l;return function v_(s,o,l,c,f){const m=Ru(s,o,l,c);return Ri(s,o+2,f)||m}(s,C,f,m,w)?Ao(s,C+3,b?c.call(b,f,m,w):c(f,m,w)):qa(s,C+3)}function ny(s,o){const l=jt();let c;const f=s+20;l.firstCreatePass?(c=function Jw(s,o){if(o)for(let l=o.length-1;l>=0;l--){const c=o[l];if(s===c.name)return c}}(o,l.pipeRegistry),l.data[f]=c,c.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(f,c.onDestroy)):c=l.data[f];const m=c.factory||(c.factory=oi(c.type)),w=or(Fh);try{const b=vo(!1),C=m();return vo(b),function PA(s,o,l,c){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),o[l]=c}(l,Ie(),f,C),C}finally{or(w)}}function YI(s,o,l,c){const f=s+20,m=Ie(),w=$i(m,f);return rg(m,f)?function Yw(s,o,l,c,f,m,w){const b=o+l;return Ru(s,b,f,m)?Ao(s,b+2,w?c.call(w,f,m):c(f,m)):qa(s,b+2)}(m,Tr(),o,w.transform,l,c,w):w.transform(l,c)}function Wh(s,o,l,c,f){const m=s+20,w=Ie(),b=$i(w,m);return rg(w,m)?Qw(w,Tr(),o,b.transform,l,c,f,b):b.transform(l,c,f)}function rg(s,o){return s[1].data[o].pure}function ig(s){return o=>{setTimeout(s,void 0,o)}}const za=class e0 extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){var f,m,w;let b=o,C=l||(()=>null),A=c;if(o&&"object"==typeof o){const V=o;b=null===(f=V.next)||void 0===f?void 0:f.bind(V),C=null===(m=V.error)||void 0===m?void 0:m.bind(V),A=null===(w=V.complete)||void 0===w?void 0:w.bind(V)}this.__isAsync&&(C=ig(C),b&&(b=ig(b)),A&&(A=ig(A)));const M=super.subscribe({next:b,error:C,complete:A});return o instanceof J.w0&&o.add(M),M}};function QI(){return this._results[Sh()]()}class t0{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Sh(),c=t0.prototype;c[l]||(c[l]=QI)}get changes(){return this._changes||(this._changes=new za)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const f=Lr(o);(this._changesDetected=!function fu(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let f=s[c],m=o[c];if(l&&(f=l(f),m=l(m)),m!==f)return!1}return!0}(c._results,f,l))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let sg=(()=>{class s{}return s.__NG_ELEMENT_ID__=r0,s})();const JI=sg,n0=class extends JI{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o){const l=this._declarationTContainer.tViews,c=vh(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(c[19]=m.createEmbeddedView(l)),Nl(l,c,o),new zh(c)}};function r0(){return Kh(Dn(),Ie())}function Kh(s,o){return 4&s.type?new n0(o,s,qh(s,o)):null}let fd=(()=>{class s{}return s.__NG_ELEMENT_ID__=pd,s})();function pd(){return a0(Dn(),Ie())}const s0=fd,o0=class extends s0{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return qh(this._hostTNode,this._hostLView)}get injector(){return new qi(this._hostTNode,this._hostLView)}get parentInjector(){const o=ci(this._hostTNode,this._hostLView);if(Wd(o)){const l=yn(o,this._hostLView),c=an(o);return new qi(l[1].data[c+8],l)}return new qi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=XI(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){const f=o.createEmbeddedView(l||{});return this.insert(f,c),f}createComponent(o,l,c,f,m){const w=o&&!function hi(s){return"function"==typeof s}(o);let b;if(w)b=l;else{const V=l||{};b=V.index,c=V.injector,f=V.projectableNodes,m=V.ngModuleRef}const C=w?o:new qw(Yt(o)),A=c||this.parentInjector;if(!m&&null==C.ngModule){const H=(w?A:this.parentInjector).get(hd,null);H&&(m=H)}const M=C.create(A,f,void 0,m);return this.insert(M.hostView,b),M}insert(o,l){const c=o._lView,f=c[1];if(function eu(s){return bi(s[3])}(c)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const V=c[3],H=new o0(V,V[6],V[3]);H.detach(H.indexOf(o))}}const m=this._adjustIndex(l),w=this._lContainer;!function HS(s,o,l,c){const f=10+c,m=l.length;c>0&&(l[f-1][4]=o),c<m-10?(o[4]=l[f],pu(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const w=o[17];null!==w&&l!==w&&function $S(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(w,o);const b=o[19];null!==b&&b.insertView(s),o[2]|=128}(f,c,w,m);const b=Xm(m,w),C=c[11],A=Qm(C,w[7]);return null!==A&&function jr(s,o,l,c,f,m){c[0]=f,c[6]=o,mi(s,c,l,1,f,m)}(f,w[6],C,c,A,b),o.attachToViewContainerRef(),pu(Zh(w),m,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=XI(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=Wm(this._lContainer,l);c&&(ls(Zh(this._lContainer),l),sp(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=Wm(this._lContainer,l);return c&&null!=ls(Zh(this._lContainer),l)?new zh(c):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function XI(s){return s[8]}function Zh(s){return s[8]||(s[8]=[])}function a0(s,o){let l;const c=o[s.index];if(bi(c))l=c;else{let f;if(8&s.type)f=fn(c);else{const m=o[11];f=m.createComment("");const w=Or(s,o);bu(m,Qm(m,w),f,function Qr(s,o){return Cn(s)?s.nextSibling(o):o.nextSibling}(m,w),!1)}o[s.index]=l=Vv(c,o,f,s),c_(o,l)}return new o0(l,s,o)}class l0{constructor(o){this.queryList=o,this.matches=null}clone(){return new l0(this.queryList)}setDirty(){this.queryList.setDirty()}}class u0{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,f=[];for(let m=0;m<c;m++){const w=l.getByIndex(m);f.push(this.queries[w.indexInDeclarationView].clone())}return new u0(f)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==ug(o,l).matches&&this.queries[l].setDirty()}}class tT{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class ag{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const f=null!==l?l.length:0,m=this.getByIndex(c).embeddedTView(o,f);m&&(m.indexInDeclarationView=c,null!==l?l.push(m):l=[m])}return null!==l?new ag(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Yh{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new Yh(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const m=c[f];this.matchTNodeWithReadOption(o,l,nT(l,m)),this.matchTNodeWithReadOption(o,l,bc(l,o,m,!1,!1))}else c===sg?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,bc(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===Xp||f===fd||f===sg&&4&l.type)this.addMatch(l.index,-2);else{const m=bc(l,o,f,!1,!1);null!==m&&this.addMatch(l.index,m)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function nT(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function lg(s,o,l,c){return-1===l?function Lx(s,o){return 11&s.type?qh(s,o):4&s.type?Kh(s,o):null}(o,s):-2===l?function Wa(s,o,l){return l===Xp?qh(o,s):l===sg?Kh(o,s):l===fd?a0(o,s):void 0}(s,o,c):di(s,s[1],l,o)}function Qh(s,o,l,c){const f=o[19].queries[c];if(null===f.matches){const m=s.data,w=l.matches,b=[];for(let C=0;C<w.length;C+=2){const A=w[C];b.push(A<0?null:lg(o,m[A],w[C+1],l.metadata.read))}f.matches=b}return f.matches}function c0(s,o,l,c){const f=s.queries.getByIndex(l),m=f.matches;if(null!==m){const w=Qh(s,o,f,l);for(let b=0;b<m.length;b+=2){const C=m[b];if(C>0)c.push(w[b/2]);else{const A=m[b+1],M=o[-C];for(let V=10;V<M.length;V++){const H=M[V];H[17]===H[3]&&c0(H[1],H,A,c)}if(null!==M[9]){const V=M[9];for(let H=0;H<V.length;H++){const Q=V[H];c0(Q[1],Q,A,c)}}}}}return c}function d0(s){const o=Ie(),l=jt(),c=cc();dc(c+1);const f=ug(l,c);if(s.dirty&&ho(o)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const m=f.crossesNgTemplate?c0(l,o,c,[]):Qh(l,o,f,c);s.reset(m,bx),s.notifyOnChanges()}return!0}return!1}function Jh(s,o,l,c){const f=jt();if(f.firstCreatePass){const m=Dn();(function f0(s,o,l){null===s.queries&&(s.queries=new ag),s.queries.track(new Yh(o,l))})(f,new tT(o,l,c),m.index),function Ux(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(f,s),2==(2&l)&&(f.staticContentQueries=!0)}!function $s(s,o,l){const c=new t0(4==(4&l));Ob(s,o,c,c.destroy),null===o[19]&&(o[19]=new u0),o[19].queries.push(new l0(c))}(f,Ie(),l)}function Xh(){return function Vx(s,o){return s[19].queries[o].queryList}(Ie(),cc())}function ug(s,o){return s.queries.getByIndex(o)}const cy=Na("Input",s=>({bindingPropertyName:s})),Uu=Na("Output",s=>({bindingPropertyName:s}));function mg(...s){}const Bu=new $n("Application Initializer");let gT=(()=>{class s{constructor(l){this.appInits=l,this.resolve=mg,this.reject=mg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(Rp(m))l.push(m);else if(xC(m)){const w=new Promise((b,C)=>{m.subscribe({complete:b,error:C})});l.push(w)}}Promise.all(l).then(()=>{c()}).catch(f=>{this.reject(f)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(it(Bu,8))},s.\u0275prov=un({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const mT=new $n("AppId",{providedIn:"root",factory:function _T(){return`${C0()}${C0()}${C0()}`}});function C0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const vT=new $n("Platform Initializer"),wT=new $n("Platform ID"),ET=new $n("appBootstrapListener");let _g=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=un({token:s,factory:s.\u0275fac}),s})();const vg=new $n("LocaleId",{providedIn:"root",factory:()=>Qt(vg,ht.Optional|ht.SkipSelf)||function yg(){return"undefined"!=typeof $localize&&$localize.locale||Fp}()}),bT=new $n("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class CT{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let fa=(()=>{class s{compileModuleSync(l){return new Ga(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),m=_(En(l).declarations).reduce((w,b)=>{const C=Yt(b);return C&&w.push(new qw(C)),w},[]);return new CT(c,m)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=un({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Xx=(()=>Promise.resolve(0))();function T0(s){"undefined"==typeof Zone?Xx.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class pa{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new za(!1),this.onMicrotaskEmpty=new za(!1),this.onStable=new za(!1),this.onError=new za(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&l,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function TT(){let s=Wt.requestAnimationFrame,o=Wt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function nR(s){const o=()=>{!function tR(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Wt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,S0(s),s.isCheckStableRunning=!0,D0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),S0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,f,m,w,b)=>{try{return DT(s),l.invokeTask(f,m,w,b)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),ST(s)}},onInvoke:(l,c,f,m,w,b,C)=>{try{return DT(s),l.invoke(f,m,w,b,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),ST(s)}},onHasTask:(l,c,f,m)=>{l.hasTask(f,m),c===f&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,S0(s),D0(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(l,c,f,m)=>(l.handleError(f,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pa.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(pa.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,f){const m=this._inner,w=m.scheduleEventTask("NgZoneEvent: "+f,o,eR,mg,mg);try{return m.runTask(w,l,c)}finally{m.cancelTask(w)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const eR={};function D0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function S0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function DT(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function ST(s){s._nesting--,D0(s)}class rR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new za,this.onMicrotaskEmpty=new za,this.onStable=new za,this.onError=new za}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,f){return o.apply(l,c)}}let AT=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pa.assertNotInAngularZone(),T0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())T0(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,f){let m=-1;c&&c>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==m),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:m,updateCb:f})}whenStable(l,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,c,f){return[]}}return s.\u0275fac=function(l){return new(l||s)(it(pa))},s.\u0275prov=un({token:s,factory:s.\u0275fac}),s})(),xT=(()=>{class s{constructor(){this._applications=new Map,A0.addToWindow(this)}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return A0.findTestabilityInTree(this,l,c)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=un({token:s,factory:s.\u0275fac}),s})();class iR{addToWindow(o){}findTestabilityInTree(o,l,c){return null}}function sR(s){A0=s}let ga,A0=new iR;const RT=new $n("AllowMultipleToken");class x0{constructor(o,l){this.name=o,this.token=l}}function NT(s,o,l=[]){const c=`Platform: ${o}`,f=new $n(c);return(m=[])=>{let w=OT();if(!w||w.injector.get(RT,!1))if(s)s(l.concat(m).concat({provide:f,useValue:!0}));else{const b=l.concat(m).concat({provide:f,useValue:!0},{provide:$v,useValue:"platform"});!function MT(s){if(ga&&!ga.destroyed&&!ga.injector.get(RT,!1))throw new Oe(400,"");ga=s.get(kT);const o=s.get(vT,null);o&&o.forEach(l=>l())}(So.create({providers:b,name:c}))}return function PT(s){const o=OT();if(!o)throw new Oe(401,"");return o}()}}function OT(){return ga&&!ga.destroyed?ga:null}let kT=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const b=function aR(s,o){let l;return l="noop"===s?new rR:("zone.js"===s?void 0:s)||new pa({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),C=[{provide:pa,useValue:b}];return b.run(()=>{const A=So.create({providers:C,parent:this.injector,name:l.moduleType.name}),M=l.create(A),V=M.injector.get(Br,null);if(!V)throw new Oe(402,"");return b.runOutsideAngular(()=>{const H=b.onError.subscribe({next:Q=>{V.handleError(Q)}});M.onDestroy(()=>{M0(this._modules,M),H.unsubscribe()})}),function rk(s,o,l){try{const c=l();return Rp(c)?c.catch(f=>{throw o.runOutsideAngular(()=>s.handleError(f)),f}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(V,b,()=>{const H=M.injector.get(gT);return H.runInitializers(),H.donePromise.then(()=>(function Aw(s){ut(s,"Expected localeId to be defined"),"string"==typeof s&&(pI=s.toLowerCase().replace(/_/g,"-"))}(M.injector.get(vg,Fp)||Fp),this._moduleDoBootstrap(M),M))})})}bootstrapModule(l,c=[]){const f=FT({},c);return function oR(s,o,l){const c=new Ga(l);return Promise.resolve(c)}(0,0,l).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(l){const c=l.injector.get(R0);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new Oe(403,"");l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(it(So))},s.\u0275prov=un({token:s,factory:s.\u0275fac}),s})();function FT(s,o){return Array.isArray(o)?o.reduce(FT,s):Object.assign(Object.assign({},s),o)}let R0=(()=>{class s{constructor(l,c,f,m,w){this._zone=l,this._injector=c,this._exceptionHandler=f,this._componentFactoryResolver=m,this._initStatus=w,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new F.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),C=new F.y(A=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{pa.assertNotInAngularZone(),T0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{pa.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{M.unsubscribe(),V.unsubscribe()}});this.isStable=(0,le.T)(b,C.pipe((0,te.B)()))}bootstrap(l,c){if(!this._initStatus.done)throw new Oe(405,"");let f;f=l instanceof Jp?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(f.componentType);const m=function ma(s){return s.isBoundToModule}(f)?void 0:this._injector.get(hd),b=f.create(So.NULL,[],c||f.selector,m),C=b.location.nativeElement,A=b.injector.get(AT,null),M=A&&b.injector.get(xT);return A&&M&&M.registerApplication(C,A),b.onDestroy(()=>{this.detachView(b.hostView),M0(this.components,b),M&&M.unregisterApplication(C)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;M0(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(ET,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(it(pa),it(So),it(Br),it(Gh),it(gT))},s.\u0275prov=un({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function M0(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let VT=!0,UT=!1;function uR(){return UT=!0,VT}function cR(){if(UT)throw new Error("Cannot enable prod mode after platform setup.");VT=!1}let hR=(()=>{class s{}return s.__NG_ELEMENT_ID__=fR,s})();function fR(s){return function pR(s,o,l){if(oo(s)&&!l){const c=kr(s.index,o);return new zh(c,c)}return 47&s.type?new zh(o[16],o):null}(Dn(),Ie(),16==(16&s))}class yR{constructor(){}supports(o){return Ah(o)}create(o){return new k0(o)}}const vR=(s,o)=>o;class k0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||vR}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,f=0,m=null;for(;l||c;){const w=!c||l&&l.currentIndex<GT(c,f,m)?l:c,b=GT(w,f,m),C=w.currentIndex;if(w===c)f--,c=c._nextRemoved;else if(l=l._next,null==w.previousIndex)f++;else{m||(m=[]);const A=b-f,M=C-f;if(A!=M){for(let H=0;H<A;H++){const Q=H<m.length?m[H]:m[H]=0,we=Q+H;M<=we&&we<A&&(m[H]=Q+1)}m[w.previousIndex]=M-A}}b!==C&&o(w,b,C)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!Ah(o))throw new Oe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let f,m,w,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let b=0;b<this.length;b++)m=o[b],w=this._trackByFn(b,m),null!==l&&Object.is(l.trackById,w)?(c&&(l=this._verifyReinsertion(l,m,w,b)),Object.is(l.item,m)||this._addIdentityChange(l,m)):(l=this._mismatch(l,m,w,b),c=!0),l=l._next}else f=0,function MA(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Sh()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,b=>{w=this._trackByFn(f,b),null!==l&&Object.is(l.trackById,w)?(c&&(l=this._verifyReinsertion(l,b,w,f)),Object.is(l.item,b)||this._addIdentityChange(l,b)):(l=this._mismatch(l,b,w,f),c=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,f){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,m,f)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,m,f)):o=this._addAfter(new ck(l,c),m,f),o}_verifyReinsertion(o,l,c,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==m?o=this._reinsertAfter(m,o._prev,f):o.currentIndex!=f&&(o.currentIndex=f,this._addToMoves(o,f)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const f=o._prevRemoved,m=o._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const f=null===l?this._itHead:l._next;return o._next=f,o._prev=l,null===f?this._itTail=o:f._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new $T),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $T),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class ck{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class dk{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class $T{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new dk,this.map.set(l,c)),c.add(o)}get(o,l){const f=this.map.get(o);return f?f.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function GT(s,o,l){const c=s.previousIndex;if(null===c)return c;let f=0;return l&&c<l.length&&(f=l[c]),c+o+f}class wR{constructor(){}supports(o){return o instanceof Map||Zv(o)}create(){return new hk}}class hk{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||Zv(o)))throw new Oe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const m=this._getOrCreateRecordForKey(f,c);l=this._insertBeforeOrAppend(l,m)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const f=this._records.get(o);this._maybeAddToChanges(f,l);const m=f._prev,w=f._next;return m&&(m._next=w),w&&(w._prev=m),f._next=null,f._prev=null,f}const c=new fk(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class fk{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ER(){return new qT([new yR])}let qT=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const f=c.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||ER()),deps:[[s,new Wi,new Yr]]}}find(l){const c=this.factories.find(f=>f.supports(l));if(null!=c)return c;throw new Oe(901,"")}}return s.\u0275prov=un({token:s,providedIn:"root",factory:ER}),s})();function bR(){return new zT([new wR])}let zT=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const f=c.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||bR()),deps:[[s,new Wi,new Yr]]}}find(l){const c=this.factories.find(m=>m.supports(l));if(c)return c;throw new Oe(901,"")}}return s.\u0275prov=un({token:s,providedIn:"root",factory:bR}),s})();const hy=NT(null,"core",[{provide:wT,useValue:"unknown"},{provide:kT,deps:[So]},{provide:xT,deps:[]},{provide:_g,deps:[]}]);let F0=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(it(R0))},s.\u0275mod=X({type:s}),s.\u0275inj=on({}),s})()},3942:(lt,De,L)=>{L.d(De,{Z:()=>Oe});var h=L(2090),J=L(4859),F=L(9681),le=L(1877);class te{constructor(ge,Ce){this._delegate=ge,this.firebase=Ce,(0,F._addComponent)(ge,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(ge,Ce=F._DEFAULT_ENTRY_NAME){var tt;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(ge);return!Ze.isInitialized()&&"EXPLICIT"===(null===(tt=Ze.getComponent())||void 0===tt?void 0:tt.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:Ce})}_removeServiceInstance(ge,Ce=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(Ce)}_addComponent(ge){(0,F._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,F._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function ce(){const Ue=function fe(Ue){const ge={},Ce={__esModule:!0,initializeApp:function Se($e,re={}){const Z=F.initializeApp($e,re);if((0,h.r3)(ge,Z.name))return ge[Z.name];const se=new Ue(Z,Ce);return ge[Z.name]=se,se},app:Ze,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function be($e){const re=$e.name,Z=re.replace("-compat","");if(F._registerComponent($e)&&"PUBLIC"===$e.type){const se=(ye=Ze())=>{if("function"!=typeof ye[Z])throw ie.create("invalid-app-argument",{appName:re});return ye[Z]()};void 0!==$e.serviceProps&&(0,h.ZB)(se,$e.serviceProps),Ce[Z]=se,Ue.prototype[Z]=function(...ye){return this._getService.bind(this,re).apply(this,$e.multipleInstances?ye:[])}}return"PUBLIC"===$e.type?Ce[Z]:null},removeApp:function tt($e){delete ge[$e]},useAsService:function qe($e,re){return"serverAuth"===re?null:re},modularAPIs:F}};function Ze($e){if(!(0,h.r3)(ge,$e=$e||F._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:$e});return ge[$e]}return Ce.default=Ce,Object.defineProperty(Ce,"apps",{get:function Ee(){return Object.keys(ge).map($e=>ge[$e])}}),Ze.App=Ue,Ce}(te);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function ge(Ce){(0,h.ZB)(Ue,Ce)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Ue}(),G=new le.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=q;!function xe(Ue){(0,F.registerVersion)("@firebase/app-compat","0.1.21",Ue)}()},9681:(lt,De,L)=>{L.r(De),L.d(De,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>zr,_DEFAULT_ENTRY_NAME:()=>qn,_addComponent:()=>_n,_addOrOverwriteComponent:()=>ji,_apps:()=>vt,_clearComponents:()=>qt,_components:()=>mn,_getProvider:()=>ns,_registerComponent:()=>un,_removeServiceInstance:()=>on,deleteApp:()=>is,getApp:()=>Wr,getApps:()=>ws,initializeApp:()=>rs,onLog:()=>gr,registerVersion:()=>ii,setLogLevel:()=>or});var h=L(5861),J=L(4859),F=L(1877),le=L(2090);class te{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(Je=>{if(function _e(Ye){const Ae=Ye.getComponent();return"VERSION"===(null==Ae?void 0:Ae.type)}(Je)){const pt=Je.getImmediate();return`${pt.library}/${pt.version}`}return null}).filter(Je=>Je).join(" ")}}const ie="@firebase/app",ce=new F.Yd("@firebase/app"),qn="[DEFAULT]",ut={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},vt=new Map,mn=new Map;function _n(Ye,Ae){try{Ye.container.addComponent(Ae)}catch(Je){ce.debug(`Component ${Ae.name} failed to register with FirebaseApp ${Ye.name}`,Je)}}function ji(Ye,Ae){Ye.container.addOrOverwriteComponent(Ae)}function un(Ye){const Ae=Ye.name;if(mn.has(Ae))return ce.debug(`There were multiple attempts to register component ${Ae}.`),!1;mn.set(Ae,Ye);for(const Je of vt.values())_n(Je,Ye);return!0}function ns(Ye,Ae){const Je=Ye.container.getProvider("heartbeat").getImmediate({optional:!0});return Je&&Je.triggerHeartbeat(),Ye.container.getProvider(Ae)}function on(Ye,Ae,Je=qn){ns(Ye,Ae).clearInstance(Je)}function qt(){mn.clear()}const ri=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class to{constructor(Ae,Je,pt){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},Je),this._name=Je.name,this._automaticDataCollectionEnabled=Je.automaticDataCollectionEnabled,this._container=pt,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw ri.create("app-deleted",{appName:this._name})}}const zr="9.6.10";function rs(Ye,Ae={}){"object"!=typeof Ae&&(Ae={name:Ae});const Je=Object.assign({name:qn,automaticDataCollectionEnabled:!1},Ae),pt=Je.name;if("string"!=typeof pt||!pt)throw ri.create("bad-app-name",{appName:String(pt)});const Gt=vt.get(pt);if(Gt){if((0,le.vZ)(Ye,Gt.options)&&(0,le.vZ)(Je,Gt.config))return Gt;throw ri.create("duplicate-app",{appName:pt})}const Bt=new J.H0(pt);for(const j of mn.values())Bt.addComponent(j);const $=new to(Ye,Je,Bt);return vt.set(pt,$),$}function Wr(Ye=qn){const Ae=vt.get(Ye);if(!Ae)throw ri.create("no-app",{appName:Ye});return Ae}function ws(){return Array.from(vt.values())}function is(Ye){return ht.apply(this,arguments)}function ht(){return(ht=(0,h.Z)(function*(Ye){const Ae=Ye.name;vt.has(Ae)&&(vt.delete(Ae),yield Promise.all(Ye.container.getProviders().map(Je=>Je.delete())),Ye.isDeleted=!0)})).apply(this,arguments)}function ii(Ye,Ae,Je){var pt;let Gt=null!==(pt=ut[Ye])&&void 0!==pt?pt:Ye;Je&&(Gt+=`-${Je}`);const Bt=Gt.match(/\s|\//),$=Ae.match(/\s|\//);if(Bt||$){const j=[`Unable to register library "${Gt}" with version "${Ae}":`];return Bt&&j.push(`library name "${Gt}" contains illegal characters (whitespace or "/")`),Bt&&$&&j.push("and"),$&&j.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void ce.warn(j.join(" "))}un(new J.wA(`${Gt}-version`,()=>({library:Gt,version:Ae}),"VERSION"))}function gr(Ye,Ae){if(null!==Ye&&"function"!=typeof Ye)throw ri.create("invalid-log-argument");(0,F.Am)(Ye,Ae)}function or(Ye){(0,F.Ub)(Ye)}const Tn="firebase-heartbeat-store";let mr=null;function Es(){return mr||(mr=(0,le.X3)("firebase-heartbeat-database",1,(Ye,Ae)=>{0===Ae&&Ye.createObjectStore(Tn)}).catch(Ye=>{throw ri.create("storage-open",{originalErrorMessage:Ye.message})})),mr}function zt(){return(zt=(0,h.Z)(function*(Ye){try{return(yield Es()).transaction(Tn).objectStore(Tn).get(Er(Ye))}catch(Ae){throw ri.create("storage-get",{originalErrorMessage:Ae.message})}})).apply(this,arguments)}function ot(Ye,Ae){return It.apply(this,arguments)}function It(){return(It=(0,h.Z)(function*(Ye,Ae){try{const pt=(yield Es()).transaction(Tn,"readwrite");return yield pt.objectStore(Tn).put(Ae,Er(Ye)),pt.complete}catch(Je){throw ri.create("storage-set",{originalErrorMessage:Je.message})}})).apply(this,arguments)}function Er(Ye){return`${Ye.name}!${Ye.options.appId}`}class Oo{constructor(Ae){this.container=Ae,this._heartbeatsCache=null;const Je=this.container.getProvider("app").getImmediate();this._storage=new ft(Je),this._heartbeatsCachePromise=this._storage.read().then(pt=>(this._heartbeatsCache=pt,pt))}triggerHeartbeat(){var Ae=this;return(0,h.Z)(function*(){const pt=Ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Gt=Mr();if(null===Ae._heartbeatsCache&&(Ae._heartbeatsCache=yield Ae._heartbeatsCachePromise),Ae._heartbeatsCache.lastSentHeartbeatDate!==Gt&&!Ae._heartbeatsCache.heartbeats.some(Bt=>Bt.date===Gt))return Ae._heartbeatsCache.heartbeats.push({date:Gt,agent:pt}),Ae._heartbeatsCache.heartbeats=Ae._heartbeatsCache.heartbeats.filter(Bt=>{const $=new Date(Bt.date).valueOf();return Date.now()-$<=2592e6}),Ae._storage.overwrite(Ae._heartbeatsCache)})()}getHeartbeatsHeader(){var Ae=this;return(0,h.Z)(function*(){if(null===Ae._heartbeatsCache&&(yield Ae._heartbeatsCachePromise),null===Ae._heartbeatsCache||0===Ae._heartbeatsCache.heartbeats.length)return"";const Je=Mr(),{heartbeatsToSend:pt,unsentEntries:Gt}=function br(Ye,Ae=1024){const Je=[];let pt=Ye.slice();for(const Gt of Ye){const Bt=Je.find($=>$.agent===Gt.agent);if(Bt){if(Bt.dates.push(Gt.date),Nr(Je)>Ae){Bt.dates.pop();break}}else if(Je.push({agent:Gt.agent,dates:[Gt.date]}),Nr(Je)>Ae){Je.pop();break}pt=pt.slice(1)}return{heartbeatsToSend:Je,unsentEntries:pt}}(Ae._heartbeatsCache.heartbeats),Bt=(0,le.L)(JSON.stringify({version:2,heartbeats:pt}));return Ae._heartbeatsCache.lastSentHeartbeatDate=Je,Gt.length>0?(Ae._heartbeatsCache.heartbeats=Gt,yield Ae._storage.overwrite(Ae._heartbeatsCache)):(Ae._heartbeatsCache.heartbeats=[],Ae._storage.overwrite(Ae._heartbeatsCache)),Bt})()}}function Mr(){return(new Date).toISOString().substring(0,10)}class ft{constructor(Ae){this.app=Ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ae=this;return(0,h.Z)(function*(){return(yield Ae._canUseIndexedDBPromise)&&(yield function Ca(Ye){return zt.apply(this,arguments)}(Ae.app))||{heartbeats:[]}})()}overwrite(Ae){var Je=this;return(0,h.Z)(function*(){var pt;if(yield Je._canUseIndexedDBPromise){const Bt=yield Je.read();return ot(Je.app,{lastSentHeartbeatDate:null!==(pt=Ae.lastSentHeartbeatDate)&&void 0!==pt?pt:Bt.lastSentHeartbeatDate,heartbeats:Ae.heartbeats})}})()}add(Ae){var Je=this;return(0,h.Z)(function*(){var pt;if(yield Je._canUseIndexedDBPromise){const Bt=yield Je.read();return ot(Je.app,{lastSentHeartbeatDate:null!==(pt=Ae.lastSentHeartbeatDate)&&void 0!==pt?pt:Bt.lastSentHeartbeatDate,heartbeats:[...Bt.heartbeats,...Ae.heartbeats]})}})()}}function Nr(Ye){return(0,le.L)(JSON.stringify({version:2,heartbeats:Ye})).length}!function $t(Ye){un(new J.wA("platform-logger",Ae=>new te(Ae),"PRIVATE")),un(new J.wA("heartbeat",Ae=>new Oo(Ae),"PRIVATE")),ii(ie,"0.7.20",Ye),ii(ie,"0.7.20","esm2017"),ii("fire-js","")}("")},4859:(lt,De,L)=>{L.d(De,{H0:()=>fe,wA:()=>F,zt:()=>te});var h=L(5861),J=L(2090);class F{constructor(q,G,ee){this.name=q,this.instanceFactory=G,this.type=ee,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const le="[DEFAULT]";class te{constructor(q,G){this.name=q,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const G=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(G)){const ee=new J.BH;if(this.instancesDeferred.set(G,ee),this.isInitialized(G)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:G});We&&ee.resolve(We)}catch(We){}}return this.instancesDeferred.get(G).promise}getImmediate(q){var G;const ee=this.normalizeInstanceIdentifier(null==q?void 0:q.identifier),We=null!==(G=null==q?void 0:q.optional)&&void 0!==G&&G;if(!this.isInitialized(ee)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ee})}catch(xe){if(We)return null;throw xe}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function ie(ce){return"EAGER"===ce.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:le})}catch(G){}for(const[G,ee]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(G);try{const xe=this.getOrInitializeService({instanceIdentifier:We});ee.resolve(xe)}catch(xe){}}}}clearInstance(q=le){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,h.Z)(function*(){const G=Array.from(q.instances.values());yield Promise.all([...G.filter(ee=>"INTERNAL"in ee).map(ee=>ee.INTERNAL.delete()),...G.filter(ee=>"_delete"in ee).map(ee=>ee._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=le){return this.instances.has(q)}getOptions(q=le){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:G={}}=q,ee=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(ee))throw Error(`${this.name}(${ee}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:ee,options:G});for(const[xe,Oe]of this.instancesDeferred.entries())ee===this.normalizeInstanceIdentifier(xe)&&Oe.resolve(We);return We}onInit(q,G){var ee;const We=this.normalizeInstanceIdentifier(G),xe=null!==(ee=this.onInitCallbacks.get(We))&&void 0!==ee?ee:new Set;xe.add(q),this.onInitCallbacks.set(We,xe);const Oe=this.instances.get(We);return Oe&&q(Oe,We),()=>{xe.delete(q)}}invokeOnInitCallbacks(q,G){const ee=this.onInitCallbacks.get(G);if(ee)for(const We of ee)try{We(q,G)}catch(xe){}}getOrInitializeService({instanceIdentifier:q,options:G={}}){let ee=this.instances.get(q);if(!ee&&this.component&&(ee=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=q,ce===le?void 0:ce),options:G}),this.instances.set(q,ee),this.instancesOptions.set(q,G),this.invokeOnInitCallbacks(ee,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,ee)}catch(We){}var ce;return ee||null}normalizeInstanceIdentifier(q=le){return this.component?this.component.multipleInstances?q:le:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const G=this.getProvider(q.name);if(G.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);G.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const G=new te(q,this);return this.providers.set(q,G),G}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,De,L)=>{L.d(De,{Am:()=>ce,Ub:()=>fe,Yd:()=>ie,in:()=>J});const h=[];var J=(()=>{return(q=J||(J={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",J;var q})();const F={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},le=J.INFO,te={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},_e=(q,G,...ee)=>{if(G<q.logLevel)return;const We=(new Date).toISOString(),xe=te[G];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[xe](`[${We}]  ${q.name}:`,...ee)};class ie{constructor(G){this.name=G,this._logLevel=le,this._logHandler=_e,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in J))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?F[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...G),this._logHandler(this,J.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...G),this._logHandler(this,J.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,J.INFO,...G),this._logHandler(this,J.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,J.WARN,...G),this._logHandler(this,J.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...G),this._logHandler(this,J.ERROR,...G)}}function fe(q){h.forEach(G=>{G.setLogLevel(q)})}function ce(q,G){for(const ee of h){let We=null;G&&G.level&&(We=F[G.level]),ee.userLogHandler=null===q?null:(xe,Oe,...Ue)=>{const ge=Ue.map(Ce=>{if(null==Ce)return null;if("string"==typeof Ce)return Ce;if("number"==typeof Ce||"boolean"==typeof Ce)return Ce.toString();if(Ce instanceof Error)return Ce.message;try{return JSON.stringify(Ce)}catch(tt){return null}}).filter(Ce=>Ce).join(" ");Oe>=(null!=We?We:xe.logLevel)&&q({level:J[Oe].toLowerCase(),message:ge,args:Ue,type:xe.name})}}}},5861:(lt,De,L)=>{function h(F,le,te,_e,ie,fe,ce){try{var q=F[fe](ce),G=q.value}catch(ee){return void te(ee)}q.done?le(G):Promise.resolve(G).then(_e,ie)}function J(F){return function(){var le=this,te=arguments;return new Promise(function(_e,ie){var fe=F.apply(le,te);function ce(G){h(fe,_e,ie,ce,q,"next",G)}function q(G){h(fe,_e,ie,ce,q,"throw",G)}ce(void 0)})}}L.d(De,{Z:()=>J})}},lt=>{lt(lt.s=9587)}]);